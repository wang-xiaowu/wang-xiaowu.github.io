<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>spring5å­¦ä¹  | å°äº”çš„ä¸ªäººæ‚è´§é“º</title><meta name="author" content="å°äº”"><meta name="copyright" content="å°äº”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="ä»£ç åœ°å€: https:&#x2F;&#x2F;github.com&#x2F;behappy-spring-study&#x2F;spring5_study_source  å®¹å™¨ä¸ bean1) å®¹å™¨æ¥å£ BeanFactory æ¥å£ï¼Œå…¸å‹åŠŸèƒ½æœ‰ï¼š  getBean   ApplicationContext æ¥å£ï¼Œæ˜¯ BeanFactory çš„å­æ¥å£ã€‚å®ƒæ‰©å±•äº† BeanFactory æ¥å£çš„åŠŸèƒ½ï¼Œå¦‚ï¼š  å›½é™…åŒ– é€šé…ç¬¦æ–¹å¼è·å–ä¸€ç»„"><meta property="og:type" content="article"><meta property="og:title" content="spring5å­¦ä¹ "><meta property="og:url" content="https://xiaowu95.wang/posts/f86c337f/"><meta property="og:site_name" content="å°äº”çš„ä¸ªäººæ‚è´§é“º"><meta property="og:description" content="ä»£ç åœ°å€: https:&#x2F;&#x2F;github.com&#x2F;behappy-spring-study&#x2F;spring5_study_source  å®¹å™¨ä¸ bean1) å®¹å™¨æ¥å£ BeanFactory æ¥å£ï¼Œå…¸å‹åŠŸèƒ½æœ‰ï¼š  getBean   ApplicationContext æ¥å£ï¼Œæ˜¯ BeanFactory çš„å­æ¥å£ã€‚å®ƒæ‰©å±•äº† BeanFactory æ¥å£çš„åŠŸèƒ½ï¼Œå¦‚ï¼š  å›½é™…åŒ– é€šé…ç¬¦æ–¹å¼è·å–ä¸€ç»„"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xiaowu95.wang/img/nba-logo7.jpg"><meta property="article:published_time" content="2022-05-15T16:00:00.000Z"><meta property="article:modified_time" content="2023-06-16T02:13:02.000Z"><meta property="article:author" content="å°äº”"><meta property="article:tag" content="spring"><meta property="article:tag" content="spring-native"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaowu95.wang/img/nba-logo7.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "spring5å­¦ä¹ ",
  "url": "https://xiaowu95.wang/posts/f86c337f/",
  "image": "https://xiaowu95.wang/img/nba-logo7.jpg",
  "datePublished": "2022-05-15T16:00:00.000Z",
  "dateModified": "2023-06-16T02:13:02.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "å°äº”",
      "url": "https://xiaowu95.wang"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://xiaowu95.wang/posts/f86c337f/"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="kHfLZxYQ7y3s3AR7gyJDdJkQvGNjQsvopp6N3gEEx0s"><meta name="baidu-site-verification" content="codeva-aVS4F6wAjS"><link rel="manifest" href="/wang-xiaowu/pwa/site.webmanifest"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/wang-xiaowu/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/wang-xiaowu/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/wang-xiaowu/pwa/favicon-16x16.png"><link rel="mask-icon" href="/wang-xiaowu/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),c=window.matchMedia("(prefers-color-scheme: dark)"),r=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(r.matches)a();else if(c.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}c.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?86cb34987e15c900c39e12ebdf08c50d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-1MFQ47191J"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1MFQ47191J"),btf.addGlobalFn("pjaxComplete",(()=>{gtag("config","G-1MFQ47191J",{page_path:window.location.pathname})}),"google_analytics")</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"M91QAWRVY4",apiKey:"ecc30a5e06136e1cc491685e39801190",indexName:"xiaowu-blog",hitsPerPage:6,languages:{hits_empty:"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œè€—æ—¶ ${time} æ¯«ç§’"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç°¡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400,highlightFullpage:!0,highlightMacStyle:!0},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶å¤±è´¥",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"å¤©",dateSuffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:{limitCount:150,languages:{author:"ä½œè€…: å°äº”",link:"é“¾æ¥: ",source:"æ¥æº: å°äº”çš„ä¸ªäººæ‚è´§é“º",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡",cht_to_chs:"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡",day_to_night:"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js",buttonText:"åŠ è½½æ›´å¤š"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"spring5å­¦ä¹ ",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/font.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="/css/titleStyle.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/custom.css"><style>.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="alternate" href="/atom.xml" title="å°äº”çš„ä¸ªäººæ‚è´§é“º" type="application/atom+xml"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",(()=>{Pace.restart()}),"pace_restart")</script><link rel="stylesheet" href="/css/pace.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/nba-logo7.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">å°äº”çš„ä¸ªäººæ‚è´§é“º</span></a><a class="nav-page-title" href="/"><span class="site-name">spring5å­¦ä¹ </span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">spring5å­¦ä¹ <a class="post-edit-link" href="https://github.com/wang-xiaowu/wang-xiaowu.github.io/issues/new?_posts/spring/springé«˜çº§50è®².md" rel="external nofollow noreferrer" title="ç¼–è¾‘" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-05-15T16:00:00.000Z" title="å‘è¡¨äº 2022-05-16 00:00:00">2022-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-06-16T02:13:02.000Z" title="æ›´æ–°äº 2023-06-16 10:13:02">2023-06-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/spring/">spring</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">17.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>70åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°è¯¥æ–‡ç« å·²ç»è¿‡äº†&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œæ–‡ç« æ‰€æè¿°çš„å…§å®¹å¯èƒ½å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œè¯·ç•™æ„ã€‚&quot;,&quot;postUpdate&quot;:&quot;2023-06-16 10:13:02&quot;}" hidden></div><blockquote><p>ä»£ç åœ°å€: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/behappy-spring-study/spring5_study_source">https://github.com/behappy-spring-study/spring5_study_source</a></p></blockquote><h2 id="å®¹å™¨ä¸-bean"><a href="#å®¹å™¨ä¸-bean" class="headerlink" title="å®¹å™¨ä¸ bean"></a>å®¹å™¨ä¸ bean</h2><h3 id="1-å®¹å™¨æ¥å£"><a href="#1-å®¹å™¨æ¥å£" class="headerlink" title="1) å®¹å™¨æ¥å£"></a>1) å®¹å™¨æ¥å£</h3><ul><li><p>BeanFactory æ¥å£ï¼Œå…¸å‹åŠŸèƒ½æœ‰ï¼š</p><ul><li>getBean</li></ul></li><li><p>ApplicationContext æ¥å£ï¼Œæ˜¯ BeanFactory çš„å­æ¥å£ã€‚å®ƒæ‰©å±•äº† BeanFactory æ¥å£çš„åŠŸèƒ½ï¼Œå¦‚ï¼š</p><ul><li>å›½é™…åŒ–</li><li>é€šé…ç¬¦æ–¹å¼è·å–ä¸€ç»„ Resource èµ„æº</li><li>æ•´åˆ Environment ç¯å¢ƒï¼ˆèƒ½é€šè¿‡å®ƒè·å–å„ç§æ¥æºçš„é…ç½®ä¿¡æ¯ï¼‰</li><li>äº‹ä»¶å‘å¸ƒä¸ç›‘å¬ï¼Œå®ç°ç»„ä»¶ä¹‹é—´çš„è§£è€¦</li></ul></li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¯¾ä¸Šè®²çš„ï¼Œéƒ½æ˜¯ BeanFactory æä¾›çš„åŸºæœ¬åŠŸèƒ½ï¼ŒApplicationContext ä¸­çš„æ‰©å±•åŠŸèƒ½éƒ½æ²¡æœ‰ç”¨åˆ°ã€‚</p><h4 id="æ¼”ç¤º1-BeanFactory-ä¸-ApplicationContext-çš„åŒºåˆ«"><a href="#æ¼”ç¤º1-BeanFactory-ä¸-ApplicationContext-çš„åŒºåˆ«" class="headerlink" title="æ¼”ç¤º1 - BeanFactory ä¸ ApplicationContext çš„åŒºåˆ«"></a>æ¼”ç¤º1 - BeanFactory ä¸ ApplicationContext çš„åŒºåˆ«</h4><h5 id="ä»£ç å‚è€ƒ"><a href="#ä»£ç å‚è€ƒ" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a01</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡"><a href="#æ”¶è·ğŸ’¡" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>é€šè¿‡è¿™ä¸ªç¤ºä¾‹ç»“åˆ debug æŸ¥çœ‹ ApplicationContext å¯¹è±¡çš„å†…éƒ¨ç»“æ„ï¼Œå­¦åˆ°ï¼š</p><ol><li><p>åˆ°åº•ä»€ä¹ˆæ˜¯ BeanFactory</p><ul><li>å®ƒæ˜¯ ApplicationContext çš„çˆ¶æ¥å£</li><li>å®ƒæ‰æ˜¯ Spring çš„æ ¸å¿ƒå®¹å™¨, ä¸»è¦çš„ ApplicationContext å®ç°éƒ½ã€ç»„åˆã€‘äº†å®ƒçš„åŠŸèƒ½ï¼Œã€ç»„åˆã€‘æ˜¯æŒ‡ ApplicationContext çš„ä¸€ä¸ªé‡è¦æˆå‘˜å˜é‡å°±æ˜¯ BeanFactory</li></ul></li><li><p>BeanFactory èƒ½å¹²ç‚¹å•¥</p><ul><li>è¡¨é¢ä¸Šåªæœ‰ getBean</li><li>å®é™…ä¸Šæ§åˆ¶åè½¬ã€åŸºæœ¬çš„ä¾èµ–æ³¨å…¥ã€ç›´è‡³ Bean çš„ç”Ÿå‘½å‘¨æœŸçš„å„ç§åŠŸèƒ½ï¼Œéƒ½ç”±å®ƒçš„å®ç°ç±»æä¾›</li><li>ä¾‹å­ä¸­é€šè¿‡åå°„æŸ¥çœ‹äº†å®ƒçš„æˆå‘˜å˜é‡ singletonObjectsï¼Œå†…éƒ¨åŒ…å«äº†æ‰€æœ‰çš„å•ä¾‹ bean</li></ul></li><li><p>ApplicationContext æ¯” BeanFactory å¤šç‚¹å•¥</p><ul><li>ApplicationContext ç»„åˆå¹¶æ‰©å±•äº† BeanFactory çš„åŠŸèƒ½</li><li>å›½é™…åŒ–ã€é€šé…ç¬¦æ–¹å¼è·å–ä¸€ç»„ Resource èµ„æºã€æ•´åˆ Environment ç¯å¢ƒã€äº‹ä»¶å‘å¸ƒä¸ç›‘å¬</li><li>æ–°å­¦ä¸€ç§ä»£ç ä¹‹é—´è§£è€¦é€”å¾„ï¼Œäº‹ä»¶è§£è€¦</li></ul></li></ol><p>å»ºè®®ç»ƒä¹ ï¼šå®Œæˆç”¨æˆ·æ³¨å†Œä¸å‘é€çŸ­ä¿¡ä¹‹é—´çš„è§£è€¦ï¼Œç”¨äº‹ä»¶æ–¹å¼ã€å’Œ AOP æ–¹å¼åˆ†åˆ«å®ç°</p><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>å¦‚æœ jdk &gt; 8, è¿è¡Œæ—¶è¯·æ·»åŠ  --add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMEDï¼Œè¿™æ˜¯å› ä¸ºè¿™äº›ç‰ˆæœ¬çš„ jdk é»˜è®¤ä¸å…è®¸è·¨ module åå°„</li><li>äº‹ä»¶å‘å¸ƒè¿˜å¯ä»¥å¼‚æ­¥ï¼Œè¿™ä¸ªè§†é¢‘ä¸­æ²¡æœ‰å±•ç¤ºï¼Œè¯·è‡ªè¡ŒæŸ¥é˜… @EnableAsyncï¼Œ@Async çš„ç”¨æ³•</li></ul></blockquote><h4 id="æ¼”ç¤º2-å›½é™…åŒ–"><a href="#æ¼”ç¤º2-å›½é™…åŒ–" class="headerlink" title="æ¼”ç¤º2 - å›½é™…åŒ–"></a>æ¼”ç¤º2 - å›½é™…åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMessageSource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line"></span><br><span class="line">        context.registerBean(<span class="string">&quot;messageSource&quot;</span>, MessageSource.class, () -&gt; &#123;</span><br><span class="line">            <span class="type">ResourceBundleMessageSource</span> <span class="variable">ms</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceBundleMessageSource</span>();</span><br><span class="line">            ms.setDefaultEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            ms.setBasename(<span class="string">&quot;messages&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ms;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        context.refresh();</span><br><span class="line"></span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.ENGLISH));</span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.CHINESE));</span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.JAPANESE));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›½é™…åŒ–æ–‡ä»¶å‡åœ¨ src&#x2F;resources ç›®å½•ä¸‹</p><p>messages.propertiesï¼ˆç©ºï¼‰</p><p>messages_en.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">Hello</span></span><br></pre></td></tr></table></figure><p>messages_ja.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">ã“ã‚“ã«ã¡ã¯</span></span><br></pre></td></tr></table></figure><p>messages_zh.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">ä½ å¥½</span></span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>ApplicationContext ä¸­ MessageSource bean çš„åå­—å›ºå®šä¸º messageSource</li><li>ä½¿ç”¨ SpringBoot æ—¶ï¼Œå›½é™…åŒ–æ–‡ä»¶åå›ºå®šä¸º messages</li><li>ç©ºçš„ messages.properties ä¹Ÿå¿…é¡»å­˜åœ¨</li></ul></blockquote><h3 id="2-å®¹å™¨å®ç°"><a href="#2-å®¹å™¨å®ç°" class="headerlink" title="2) å®¹å™¨å®ç°"></a>2) å®¹å™¨å®ç°</h3><p>Spring çš„å‘å±•å†å²è¾ƒä¸ºæ‚ ä¹…ï¼Œå› æ­¤å¾ˆå¤šèµ„æ–™è¿˜åœ¨è®²è§£å®ƒè¾ƒæ—§çš„å®ç°ï¼Œè¿™é‡Œå‡ºäºæ€€æ—§çš„åŸå› ï¼ŒæŠŠå®ƒä»¬éƒ½åˆ—å‡ºæ¥ï¼Œä¾›å¤§å®¶å‚è€ƒ</p><ul><li>DefaultListableBeanFactoryï¼Œæ˜¯ BeanFactory æœ€é‡è¦çš„å®ç°ï¼Œåƒ<strong>æ§åˆ¶åè½¬</strong>å’Œ<strong>ä¾èµ–æ³¨å…¥</strong>åŠŸèƒ½ï¼Œéƒ½æ˜¯å®ƒæ¥å®ç°</li><li>ClassPathXmlApplicationContextï¼Œä»ç±»è·¯å¾„æŸ¥æ‰¾ XML é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå®¹å™¨ï¼ˆæ—§ï¼‰</li><li>FileSystemXmlApplicationContextï¼Œä»ç£ç›˜è·¯å¾„æŸ¥æ‰¾ XML é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå®¹å™¨ï¼ˆæ—§ï¼‰</li><li>XmlWebApplicationContextï¼Œä¼ ç»Ÿ SSM æ•´åˆæ—¶ï¼ŒåŸºäº XML é…ç½®æ–‡ä»¶çš„å®¹å™¨ï¼ˆæ—§ï¼‰</li><li>AnnotationConfigWebApplicationContextï¼Œä¼ ç»Ÿ SSM æ•´åˆæ—¶ï¼ŒåŸºäº java é…ç½®ç±»çš„å®¹å™¨ï¼ˆæ—§ï¼‰</li><li>AnnotationConfigApplicationContextï¼ŒSpring boot ä¸­é web ç¯å¢ƒå®¹å™¨ï¼ˆæ–°ï¼‰</li><li>AnnotationConfigServletWebServerApplicationContextï¼ŒSpring boot ä¸­ servlet web ç¯å¢ƒå®¹å™¨ï¼ˆæ–°ï¼‰</li><li>AnnotationConfigReactiveWebServerApplicationContextï¼ŒSpring boot ä¸­ reactive web ç¯å¢ƒå®¹å™¨ï¼ˆæ–°ï¼‰</li></ul><p>å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåé¢è¿™äº›å¸¦æœ‰ ApplicationContext çš„ç±»éƒ½æ˜¯ ApplicationContext æ¥å£çš„å®ç°ï¼Œä½†å®ƒä»¬æ˜¯<strong>ç»„åˆ</strong>äº† DefaultListableBeanFactory çš„åŠŸèƒ½ï¼Œå¹¶éç»§æ‰¿è€Œæ¥</p><h4 id="æ¼”ç¤º1-DefaultListableBeanFactory"><a href="#æ¼”ç¤º1-DefaultListableBeanFactory" class="headerlink" title="æ¼”ç¤º1 - DefaultListableBeanFactory"></a>æ¼”ç¤º1 - DefaultListableBeanFactory</h4><h5 id="ä»£ç å‚è€ƒ-1"><a href="#ä»£ç å‚è€ƒ-1" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a02.TestBeanFactory</strong></p><h4 id="æ”¶è·ğŸ’¡-1"><a href="#æ”¶è·ğŸ’¡-1" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ul><li>beanFactory å¯ä»¥é€šè¿‡ registerBeanDefinition æ³¨å†Œä¸€ä¸ª bean definition å¯¹è±¡<ul><li>æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„é…ç½®ç±»ã€xmlã€ç»„ä»¶æ‰«æç­‰æ–¹å¼éƒ½æ˜¯ç”Ÿæˆ bean definition å¯¹è±¡æ³¨å†Œåˆ° beanFactory å½“ä¸­</li><li>bean definition æè¿°äº†è¿™ä¸ª bean çš„åˆ›å»ºè“å›¾ï¼šscope æ˜¯ä»€ä¹ˆã€ç”¨æ„é€ è¿˜æ˜¯å·¥å‚åˆ›å»ºã€åˆå§‹åŒ–é”€æ¯æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œç­‰ç­‰</li></ul></li><li>beanFactory éœ€è¦æ‰‹åŠ¨è°ƒç”¨ beanFactory åå¤„ç†å™¨å¯¹å®ƒåšå¢å¼º<ul><li>ä¾‹å¦‚é€šè¿‡è§£æ @Beanã€@ComponentScan ç­‰æ³¨è§£ï¼Œæ¥è¡¥å……ä¸€äº› bean definition</li></ul></li><li>beanFactory éœ€è¦æ‰‹åŠ¨æ·»åŠ  bean åå¤„ç†å™¨ï¼Œä»¥ä¾¿å¯¹åç»­ bean çš„åˆ›å»ºè¿‡ç¨‹æä¾›å¢å¼º<ul><li>ä¾‹å¦‚ @Autowiredï¼Œ@Resource ç­‰æ³¨è§£çš„è§£æéƒ½æ˜¯ bean åå¤„ç†å™¨å®Œæˆçš„</li><li>bean åå¤„ç†çš„æ·»åŠ é¡ºåºä¼šå¯¹è§£æç»“æœæœ‰å½±å“ï¼Œè§è§†é¢‘ä¸­åŒæ—¶åŠ  @Autowiredï¼Œ@Resource çš„ä¾‹å­</li></ul></li><li>beanFactory éœ€è¦æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æ¥åˆå§‹åŒ–å•ä¾‹</li><li>beanFactory éœ€è¦é¢å¤–è®¾ç½®æ‰èƒ½è§£æ ${} ä¸ #{}</li></ul><h4 id="æ¼”ç¤º2-å¸¸è§-ApplicationContext-å®ç°"><a href="#æ¼”ç¤º2-å¸¸è§-ApplicationContext-å®ç°" class="headerlink" title="æ¼”ç¤º2 - å¸¸è§ ApplicationContext å®ç°"></a>æ¼”ç¤º2 - å¸¸è§ ApplicationContext å®ç°</h4><h5 id="ä»£ç å‚è€ƒ-2"><a href="#ä»£ç å‚è€ƒ-2" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a02.A02</strong></p><h4 id="æ”¶è·ğŸ’¡-2"><a href="#æ”¶è·ğŸ’¡-2" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¸¸è§çš„ ApplicationContext å®¹å™¨å®ç°</li><li>å†…åµŒå®¹å™¨ã€DispatcherServlet çš„åˆ›å»ºæ–¹æ³•ã€ä½œç”¨</li></ol><h3 id="3-Bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#3-Bean-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3) Bean çš„ç”Ÿå‘½å‘¨æœŸ"></a>3) Bean çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>ä¸€ä¸ªå— Spring ç®¡ç†çš„ beanï¼Œç”Ÿå‘½å‘¨æœŸä¸»è¦é˜¶æ®µæœ‰</p><ol><li>åˆ›å»ºï¼šæ ¹æ® bean çš„æ„é€ æ–¹æ³•æˆ–è€…å·¥å‚æ–¹æ³•æ¥åˆ›å»º bean å®ä¾‹å¯¹è±¡</li><li>ä¾èµ–æ³¨å…¥ï¼šæ ¹æ® @Autowiredï¼Œ@Value æˆ–å…¶å®ƒä¸€äº›æ‰‹æ®µï¼Œä¸º bean çš„æˆå‘˜å˜é‡å¡«å……å€¼ã€å»ºç«‹å…³ç³»</li><li>åˆå§‹åŒ–ï¼šå›è°ƒå„ç§ Aware æ¥å£ï¼Œè°ƒç”¨å¯¹è±¡çš„å„ç§åˆå§‹åŒ–æ–¹æ³•</li><li>é”€æ¯ï¼šåœ¨å®¹å™¨å…³é—­æ—¶ï¼Œä¼šé”€æ¯æ‰€æœ‰å•ä¾‹å¯¹è±¡ï¼ˆå³è°ƒç”¨å®ƒä»¬çš„é”€æ¯æ–¹æ³•ï¼‰<ul><li>prototype å¯¹è±¡ä¹Ÿèƒ½å¤Ÿé”€æ¯ï¼Œä¸è¿‡éœ€è¦å®¹å™¨è¿™è¾¹ä¸»åŠ¨è°ƒç”¨</li></ul></li></ol><p>ä¸€äº›èµ„æ–™ä¼šæåˆ°ï¼Œç”Ÿå‘½å‘¨æœŸä¸­è¿˜æœ‰ä¸€ç±» bean åå¤„ç†å™¨ï¼šBeanPostProcessorï¼Œä¼šåœ¨ bean çš„åˆå§‹åŒ–çš„å‰åï¼Œæä¾›ä¸€äº›æ‰©å±•é€»è¾‘ã€‚ä½†è¿™ç§è¯´æ³•æ˜¯ä¸å®Œæ•´çš„ï¼Œè§ä¸‹é¢çš„æ¼”ç¤º1</p><h4 id="æ¼”ç¤º1-bean-ç”Ÿå‘½å‘¨æœŸ"><a href="#æ¼”ç¤º1-bean-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ¼”ç¤º1 - bean ç”Ÿå‘½å‘¨æœŸ"></a>æ¼”ç¤º1 - bean ç”Ÿå‘½å‘¨æœŸ</h4><h5 id="ä»£ç å‚è€ƒ-3"><a href="#ä»£ç å‚è€ƒ-3" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a03</strong> åŒ…</p><pre><code class="highlight mermaid">graph LR

åˆ›å»º --&gt; ä¾èµ–æ³¨å…¥
ä¾èµ–æ³¨å…¥ --&gt; åˆå§‹åŒ–
åˆå§‹åŒ– --&gt; å¯ç”¨
å¯ç”¨ --&gt; é”€æ¯</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
graph LR

åˆ›å»º --&gt; ä¾èµ–æ³¨å…¥
ä¾èµ–æ³¨å…¥ --&gt; åˆå§‹åŒ–
åˆå§‹åŒ– --&gt; å¯ç”¨
å¯ç”¨ --&gt; é”€æ¯

  </pre></div><p>åˆ›å»ºå‰åçš„å¢å¼º</p><ul><li>postProcessBeforeInstantiation<ul><li>è¿™é‡Œè¿”å›çš„å¯¹è±¡è‹¥ä¸ä¸º null ä¼šæ›¿æ¢æ‰åŸæœ¬çš„ beanï¼Œå¹¶ä¸”ä»…ä¼šèµ° postProcessAfterInitialization æµç¨‹</li></ul></li><li>postProcessAfterInstantiation<ul><li>è¿™é‡Œå¦‚æœè¿”å› false ä¼šè·³è¿‡ä¾èµ–æ³¨å…¥é˜¶æ®µ</li></ul></li></ul><p>ä¾èµ–æ³¨å…¥å‰çš„å¢å¼º</p><ul><li>postProcessProperties<ul><li>å¦‚ @Autowiredã€@Valueã€@Resource</li></ul></li></ul><p>åˆå§‹åŒ–å‰åçš„å¢å¼º</p><ul><li>postProcessBeforeInitialization<ul><li>è¿™é‡Œè¿”å›çš„å¯¹è±¡ä¼šæ›¿æ¢æ‰åŸæœ¬çš„ bean</li><li>å¦‚ @PostConstructã€@ConfigurationProperties</li></ul></li><li>postProcessAfterInitialization<ul><li>è¿™é‡Œè¿”å›çš„å¯¹è±¡ä¼šæ›¿æ¢æ‰åŸæœ¬çš„ bean</li><li>å¦‚ä»£ç†å¢å¼º</li></ul></li></ul><p>é”€æ¯ä¹‹å‰çš„å¢å¼º</p><ul><li>postProcessBeforeDestruction<ul><li>å¦‚ @PreDestroy</li></ul></li></ul><h4 id="æ”¶è·ğŸ’¡-3"><a href="#æ”¶è·ğŸ’¡-3" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Spring bean ç”Ÿå‘½å‘¨æœŸå„ä¸ªé˜¶æ®µ</li><li>æ¨¡æ¿è®¾è®¡æ¨¡å¼, æŒ‡å¤§æµç¨‹å·²ç»å›ºå®šå¥½äº†, é€šè¿‡æ¥å£å›è°ƒï¼ˆbean åå¤„ç†å™¨ï¼‰åœ¨ä¸€äº›å…³é”®ç‚¹å‰åæä¾›æ‰©å±•</li></ol><h4 id="æ¼”ç¤º2-æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼"><a href="#æ¼”ç¤º2-æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼" class="headerlink" title="æ¼”ç¤º2 - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼"></a>æ¼”ç¤º2 - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼</h4><h5 id="å…³é”®ä»£ç "><a href="#å…³é”®ä»£ç " class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethodTemplate</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyBeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBeanFactory</span>();</span><br><span class="line">        beanFactory.addBeanPostProcessor(bean -&gt; System.out.println(<span class="string">&quot;è§£æ @Autowired&quot;</span>));</span><br><span class="line">        beanFactory.addBeanPostProcessor(bean -&gt; System.out.println(<span class="string">&quot;è§£æ @Resource&quot;</span>));</span><br><span class="line">        beanFactory.getBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ¿æ–¹æ³•  Template Method Pattern</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactory</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">getBean</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ„é€  &quot;</span> + bean);</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¾èµ–æ³¨å…¥ &quot;</span> + bean); <span class="comment">// @Autowired, @Resource</span></span><br><span class="line">            <span class="keyword">for</span> (BeanPostProcessor processor : processors) &#123;</span><br><span class="line">                processor.inject(bean);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆå§‹åŒ– &quot;</span> + bean);</span><br><span class="line">            <span class="keyword">return</span> bean;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;BeanPostProcessor&gt; processors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBeanPostProcessor</span><span class="params">(BeanPostProcessor processor)</span> &#123;</span><br><span class="line">            processors.add(processor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">interface</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inject</span><span class="params">(Object bean)</span>; <span class="comment">// å¯¹ä¾èµ–æ³¨å…¥é˜¶æ®µçš„æ‰©å±•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º3-bean-åå¤„ç†å™¨æ’åº"><a href="#æ¼”ç¤º3-bean-åå¤„ç†å™¨æ’åº" class="headerlink" title="æ¼”ç¤º3 - bean åå¤„ç†å™¨æ’åº"></a>æ¼”ç¤º3 - bean åå¤„ç†å™¨æ’åº</h4><h5 id="ä»£ç å‚è€ƒ-4"><a href="#ä»£ç å‚è€ƒ-4" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a03.TestProcessOrder</strong></p><h4 id="æ”¶è·ğŸ’¡-4"><a href="#æ”¶è·ğŸ’¡-4" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å®ç°äº† PriorityOrdered æ¥å£çš„ä¼˜å…ˆçº§æœ€é«˜</li><li>å®ç°äº† Ordered æ¥å£ä¸åŠ äº† @Order æ³¨è§£çš„å¹³çº§, æŒ‰æ•°å­—å‡åº</li><li>å…¶å®ƒçš„æ’åœ¨æœ€å</li></ol><h3 id="4-Bean-åå¤„ç†å™¨"><a href="#4-Bean-åå¤„ç†å™¨" class="headerlink" title="4) Bean åå¤„ç†å™¨"></a>4) Bean åå¤„ç†å™¨</h3><h4 id="æ¼”ç¤º1-åå¤„ç†å™¨ä½œç”¨"><a href="#æ¼”ç¤º1-åå¤„ç†å™¨ä½œç”¨" class="headerlink" title="æ¼”ç¤º1 - åå¤„ç†å™¨ä½œç”¨"></a>æ¼”ç¤º1 - åå¤„ç†å™¨ä½œç”¨</h4><h5 id="ä»£ç å‚è€ƒ-5"><a href="#ä»£ç å‚è€ƒ-5" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a04</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-5"><a href="#æ”¶è·ğŸ’¡-5" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@Autowired ç­‰æ³¨è§£çš„è§£æå±äº bean ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼ˆä¾èµ–æ³¨å…¥, åˆå§‹åŒ–ï¼‰çš„æ‰©å±•åŠŸèƒ½ï¼Œè¿™äº›æ‰©å±•åŠŸèƒ½ç”± bean åå¤„ç†å™¨æ¥å®Œæˆ</li><li>æ¯ä¸ªåå¤„ç†å™¨å„è‡ªå¢å¼ºä»€ä¹ˆåŠŸèƒ½<ul><li>AutowiredAnnotationBeanPostProcessor è§£æ @Autowired ä¸ @Value</li><li>CommonAnnotationBeanPostProcessor è§£æ @Resourceã€@PostConstructã€@PreDestroy</li><li>ConfigurationPropertiesBindingPostProcessor è§£æ @ConfigurationProperties</li></ul></li><li>å¦å¤– ContextAnnotationAutowireCandidateResolver è´Ÿè´£è·å– @Value çš„å€¼ï¼Œè§£æ @Qualifierã€æ³›å‹ã€@Lazy ç­‰</li></ol><h4 id="æ¼”ç¤º2-Autowired-bean-åå¤„ç†å™¨è¿è¡Œåˆ†æ"><a href="#æ¼”ç¤º2-Autowired-bean-åå¤„ç†å™¨è¿è¡Œåˆ†æ" class="headerlink" title="æ¼”ç¤º2 - @Autowired bean åå¤„ç†å™¨è¿è¡Œåˆ†æ"></a>æ¼”ç¤º2 - @Autowired bean åå¤„ç†å™¨è¿è¡Œåˆ†æ</h4><h5 id="ä»£ç å‚è€ƒ-6"><a href="#ä»£ç å‚è€ƒ-6" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a04.DigInAutowired</strong></p><h4 id="æ”¶è·ğŸ’¡-6"><a href="#æ”¶è·ğŸ’¡-6" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>AutowiredAnnotationBeanPostProcessor.findAutowiringMetadata ç”¨æ¥è·å–æŸä¸ª bean ä¸ŠåŠ äº† @Value @Autowired çš„æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºä¸º InjectionMetadata</li><li>InjectionMetadata å¯ä»¥å®Œæˆä¾èµ–æ³¨å…¥</li><li>InjectionMetadata å†…éƒ¨æ ¹æ®æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°å°è£…ä¸º DependencyDescriptor ç±»å‹</li><li>æœ‰äº† DependencyDescriptorï¼Œå°±å¯ä»¥åˆ©ç”¨ beanFactory.doResolveDependency æ–¹æ³•è¿›è¡ŒåŸºäºç±»å‹çš„æŸ¥æ‰¾</li></ol><h3 id="5-BeanFactory-åå¤„ç†å™¨"><a href="#5-BeanFactory-åå¤„ç†å™¨" class="headerlink" title="5) BeanFactory åå¤„ç†å™¨"></a>5) BeanFactory åå¤„ç†å™¨</h3><h4 id="æ¼”ç¤º1-BeanFactory-åå¤„ç†å™¨çš„ä½œç”¨"><a href="#æ¼”ç¤º1-BeanFactory-åå¤„ç†å™¨çš„ä½œç”¨" class="headerlink" title="æ¼”ç¤º1 - BeanFactory åå¤„ç†å™¨çš„ä½œç”¨"></a>æ¼”ç¤º1 - BeanFactory åå¤„ç†å™¨çš„ä½œç”¨</h4><h5 id="ä»£ç å‚è€ƒ-7"><a href="#ä»£ç å‚è€ƒ-7" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05</strong> åŒ…</p><ul><li>ConfigurationClassPostProcessor å¯ä»¥è§£æ<ul><li>@ComponentScan</li><li>@Bean</li><li>@Import</li><li>@ImportResource</li></ul></li><li>MapperScannerConfigurer å¯ä»¥è§£æ<ul><li>Mapper æ¥å£</li></ul></li></ul><h4 id="æ”¶è·ğŸ’¡-7"><a href="#æ”¶è·ğŸ’¡-7" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@ComponentScan, @Bean, @Mapper ç­‰æ³¨è§£çš„è§£æå±äºæ ¸å¿ƒå®¹å™¨ï¼ˆå³ BeanFactoryï¼‰çš„æ‰©å±•åŠŸèƒ½</li><li>è¿™äº›æ‰©å±•åŠŸèƒ½ç”±ä¸åŒçš„ BeanFactory åå¤„ç†å™¨æ¥å®Œæˆï¼Œå…¶å®ä¸»è¦å°±æ˜¯è¡¥å……äº†ä¸€äº› bean å®šä¹‰</li></ol><h4 id="æ¼”ç¤º2-æ¨¡æ‹Ÿè§£æ-ComponentScan"><a href="#æ¼”ç¤º2-æ¨¡æ‹Ÿè§£æ-ComponentScan" class="headerlink" title="æ¼”ç¤º2 - æ¨¡æ‹Ÿè§£æ @ComponentScan"></a>æ¼”ç¤º2 - æ¨¡æ‹Ÿè§£æ @ComponentScan</h4><h5 id="ä»£ç å‚è€ƒ-8"><a href="#ä»£ç å‚è€ƒ-8" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05.ComponentScanPostProcessor</strong></p><h4 id="æ”¶è·ğŸ’¡-8"><a href="#æ”¶è·ğŸ’¡-8" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Spring æ“ä½œå…ƒæ•°æ®çš„å·¥å…·ç±» CachingMetadataReaderFactory</li><li>é€šè¿‡æ³¨è§£å…ƒæ•°æ®ï¼ˆAnnotationMetadataï¼‰è·å–ç›´æ¥æˆ–é—´æ¥æ ‡æ³¨çš„æ³¨è§£ä¿¡æ¯</li><li>é€šè¿‡ç±»å…ƒæ•°æ®ï¼ˆClassMetadataï¼‰è·å–ç±»åï¼ŒAnnotationBeanNameGenerator ç”Ÿæˆ bean å</li><li>è§£æå…ƒæ•°æ®æ˜¯åŸºäº ASM æŠ€æœ¯</li></ol><h4 id="æ¼”ç¤º3-æ¨¡æ‹Ÿè§£æ-Bean"><a href="#æ¼”ç¤º3-æ¨¡æ‹Ÿè§£æ-Bean" class="headerlink" title="æ¼”ç¤º3 - æ¨¡æ‹Ÿè§£æ @Bean"></a>æ¼”ç¤º3 - æ¨¡æ‹Ÿè§£æ @Bean</h4><h5 id="ä»£ç å‚è€ƒ-9"><a href="#ä»£ç å‚è€ƒ-9" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05.AtBeanPostProcessor</strong></p><h4 id="æ”¶è·ğŸ’¡-9"><a href="#æ”¶è·ğŸ’¡-9" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>è¿›ä¸€æ­¥ç†Ÿæ‚‰æ³¨è§£å…ƒæ•°æ®ï¼ˆAnnotationMetadataï¼‰è·å–æ–¹æ³•ä¸Šæ³¨è§£ä¿¡æ¯</li></ol><h4 id="æ¼”ç¤º4-æ¨¡æ‹Ÿè§£æ-Mapper-æ¥å£"><a href="#æ¼”ç¤º4-æ¨¡æ‹Ÿè§£æ-Mapper-æ¥å£" class="headerlink" title="æ¼”ç¤º4 - æ¨¡æ‹Ÿè§£æ Mapper æ¥å£"></a>æ¼”ç¤º4 - æ¨¡æ‹Ÿè§£æ Mapper æ¥å£</h4><h5 id="ä»£ç å‚è€ƒ-10"><a href="#ä»£ç å‚è€ƒ-10" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a05.MapperPostProcessor</strong></p><h4 id="æ”¶è·ğŸ’¡-10"><a href="#æ”¶è·ğŸ’¡-10" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Mapper æ¥å£è¢« Spring ç®¡ç†çš„æœ¬è´¨ï¼šå®é™…æ˜¯è¢«ä½œä¸º MapperFactoryBean æ³¨å†Œåˆ°å®¹å™¨ä¸­</li><li>Spring çš„è¯¡å¼‚åšæ³•ï¼Œæ ¹æ®æ¥å£ç”Ÿæˆçš„ BeanDefinition ä»…ä¸ºæ ¹æ®æ¥å£åç”Ÿæˆ bean å</li></ol><h3 id="6-Aware-æ¥å£"><a href="#6-Aware-æ¥å£" class="headerlink" title="6) Aware æ¥å£"></a>6) Aware æ¥å£</h3><h4 id="æ¼”ç¤º-Aware-æ¥å£åŠ-InitializingBean-æ¥å£"><a href="#æ¼”ç¤º-Aware-æ¥å£åŠ-InitializingBean-æ¥å£" class="headerlink" title="æ¼”ç¤º - Aware æ¥å£åŠ InitializingBean æ¥å£"></a>æ¼”ç¤º - Aware æ¥å£åŠ InitializingBean æ¥å£</h4><h5 id="ä»£ç å‚è€ƒ-11"><a href="#ä»£ç å‚è€ƒ-11" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a06</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-11"><a href="#æ”¶è·ğŸ’¡-11" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Aware æ¥å£æä¾›äº†ä¸€ç§ã€å†…ç½®ã€‘ çš„æ³¨å…¥æ‰‹æ®µï¼Œä¾‹å¦‚<ul><li>BeanNameAware æ³¨å…¥ bean çš„åå­—</li><li>BeanFactoryAware æ³¨å…¥ BeanFactory å®¹å™¨</li><li>ApplicationContextAware æ³¨å…¥ ApplicationContext å®¹å™¨</li><li>EmbeddedValueResolverAware æ³¨å…¥ ${} è§£æå™¨</li></ul></li><li>InitializingBean æ¥å£æä¾›äº†ä¸€ç§ã€å†…ç½®ã€‘çš„åˆå§‹åŒ–æ‰‹æ®µ</li><li>å¯¹æ¯”<ul><li>å†…ç½®çš„æ³¨å…¥å’Œåˆå§‹åŒ–ä¸å—æ‰©å±•åŠŸèƒ½çš„å½±å“ï¼Œæ€»ä¼šè¢«æ‰§è¡Œ</li><li>è€Œæ‰©å±•åŠŸèƒ½å—æŸäº›æƒ…å†µå½±å“å¯èƒ½ä¼šå¤±æ•ˆ</li><li>å› æ­¤ Spring æ¡†æ¶å†…éƒ¨çš„ç±»å¸¸ç”¨å†…ç½®æ³¨å…¥å’Œåˆå§‹åŒ–</li></ul></li></ol><h4 id="é…ç½®ç±»-Autowired-å¤±æ•ˆåˆ†æ"><a href="#é…ç½®ç±»-Autowired-å¤±æ•ˆåˆ†æ" class="headerlink" title="é…ç½®ç±» @Autowired å¤±æ•ˆåˆ†æ"></a>é…ç½®ç±» @Autowired å¤±æ•ˆåˆ†æ</h4><p>Java é…ç½®ç±»ä¸åŒ…å« BeanFactoryPostProcessor çš„æƒ…å†µ</p><pre><code class="highlight mermaid">sequenceDiagram 
participant ac as ApplicationContext
participant bfpp as BeanFactoryPostProcessor
participant bpp as BeanPostProcessor
participant config as Javaé…ç½®ç±»
ac -&gt;&gt; bfpp : 1. æ‰§è¡Œ BeanFactoryPostProcessor
ac -&gt;&gt; bpp : 2. æ³¨å†Œ BeanPostProcessor
ac -&gt;&gt; +config : 3. åˆ›å»ºå’Œåˆå§‹åŒ–
bpp -&gt;&gt; config : 3.1 ä¾èµ–æ³¨å…¥æ‰©å±•(å¦‚ @Value å’Œ @Autowired)
bpp -&gt;&gt; config : 3.2 åˆå§‹åŒ–æ‰©å±•(å¦‚ @PostConstruct)
ac -&gt;&gt; config : 3.3 æ‰§è¡Œ Aware åŠ InitializingBean
config --&gt;&gt; -ac : 3.4 åˆ›å»ºæˆåŠŸ</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram 
participant ac as ApplicationContext
participant bfpp as BeanFactoryPostProcessor
participant bpp as BeanPostProcessor
participant config as Javaé…ç½®ç±»
ac -&gt;&gt; bfpp : 1. æ‰§è¡Œ BeanFactoryPostProcessor
ac -&gt;&gt; bpp : 2. æ³¨å†Œ BeanPostProcessor
ac -&gt;&gt; +config : 3. åˆ›å»ºå’Œåˆå§‹åŒ–
bpp -&gt;&gt; config : 3.1 ä¾èµ–æ³¨å…¥æ‰©å±•(å¦‚ @Value å’Œ @Autowired)
bpp -&gt;&gt; config : 3.2 åˆå§‹åŒ–æ‰©å±•(å¦‚ @PostConstruct)
ac -&gt;&gt; config : 3.3 æ‰§è¡Œ Aware åŠ InitializingBean
config --&gt;&gt; -ac : 3.4 åˆ›å»ºæˆåŠŸ

  </pre></div><p>Java é…ç½®ç±»åŒ…å« BeanFactoryPostProcessor çš„æƒ…å†µï¼Œå› æ­¤è¦åˆ›å»ºå…¶ä¸­çš„ BeanFactoryPostProcessor å¿…é¡»æå‰åˆ›å»º Java é…ç½®ç±»ï¼Œè€Œæ­¤æ—¶çš„ BeanPostProcessor è¿˜æœªå‡†å¤‡å¥½ï¼Œå¯¼è‡´ @Autowired ç­‰æ³¨è§£å¤±æ•ˆ</p><pre><code class="highlight mermaid">sequenceDiagram 
participant ac as ApplicationContext
participant bfpp as BeanFactoryPostProcessor
participant bpp as BeanPostProcessor
participant config as Javaé…ç½®ç±»
ac -&gt;&gt; +config : 3. åˆ›å»ºå’Œåˆå§‹åŒ–
ac -&gt;&gt; config : 3.1 æ‰§è¡Œ Aware åŠ InitializingBean
config --&gt;&gt; -ac : 3.2 åˆ›å»ºæˆåŠŸ

ac -&gt;&gt; bfpp : 1. æ‰§è¡Œ BeanFactoryPostProcessor
ac -&gt;&gt; bpp : 2. æ³¨å†Œ BeanPostProcessor


</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram 
participant ac as ApplicationContext
participant bfpp as BeanFactoryPostProcessor
participant bpp as BeanPostProcessor
participant config as Javaé…ç½®ç±»
ac -&gt;&gt; +config : 3. åˆ›å»ºå’Œåˆå§‹åŒ–
ac -&gt;&gt; config : 3.1 æ‰§è¡Œ Aware åŠ InitializingBean
config --&gt;&gt; -ac : 3.2 åˆ›å»ºæˆåŠŸ

ac -&gt;&gt; bfpp : 1. æ‰§è¡Œ BeanFactoryPostProcessor
ac -&gt;&gt; bpp : 2. æ³¨å†Œ BeanPostProcessor

  </pre></div><p>å¯¹åº”ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(MyConfig1.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;æ³¨å…¥ ApplicationContext&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;åˆå§‹åŒ–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//  â¬…ï¸ æ³¨é‡Šæˆ–æ·»åŠ  beanFactory åå¤„ç†å™¨å¯¹åº”ä¸Šæ–¹ä¸¤ç§æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">public</span> BeanFactoryPostProcessor <span class="title function_">processor1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> beanFactory -&gt; &#123;</span><br><span class="line">            log.debug(<span class="string">&quot;æ‰§è¡Œ processor1&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>ç”¨å†…ç½®ä¾èµ–æ³¨å…¥å’Œåˆå§‹åŒ–å–ä»£æ‰©å±•ä¾èµ–æ³¨å…¥å’Œåˆå§‹åŒ–</li><li>ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿å®ä¾‹å·¥å‚æ–¹æ³•ï¼Œé¿å…å·¥å‚å¯¹è±¡æå‰è¢«åˆ›å»º</li></ul></blockquote><h3 id="7-åˆå§‹åŒ–ä¸é”€æ¯"><a href="#7-åˆå§‹åŒ–ä¸é”€æ¯" class="headerlink" title="7) åˆå§‹åŒ–ä¸é”€æ¯"></a>7) åˆå§‹åŒ–ä¸é”€æ¯</h3><h4 id="æ¼”ç¤º-åˆå§‹åŒ–é”€æ¯é¡ºåº"><a href="#æ¼”ç¤º-åˆå§‹åŒ–é”€æ¯é¡ºåº" class="headerlink" title="æ¼”ç¤º - åˆå§‹åŒ–é”€æ¯é¡ºåº"></a>æ¼”ç¤º - åˆå§‹åŒ–é”€æ¯é¡ºåº</h4><h5 id="ä»£ç å‚è€ƒ-12"><a href="#ä»£ç å‚è€ƒ-12" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a07</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-12"><a href="#æ”¶è·ğŸ’¡-12" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>Spring æä¾›äº†å¤šç§åˆå§‹åŒ–æ‰‹æ®µï¼Œé™¤äº†è¯¾å ‚ä¸Šè®²çš„ @PostConstructï¼Œ@Bean(initMethod) ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å®ç° InitializingBean æ¥å£æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœåŒä¸€ä¸ª bean ç”¨äº†ä»¥ä¸Šæ‰‹æ®µå£°æ˜äº† 3 ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯</p><ol><li>@PostConstruct æ ‡æ³¨çš„åˆå§‹åŒ–æ–¹æ³•</li><li>InitializingBean æ¥å£çš„åˆå§‹åŒ–æ–¹æ³•</li><li>@Bean(initMethod) æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•</li></ol><p>ä¸åˆå§‹åŒ–ç±»ä¼¼ï¼ŒSpring ä¹Ÿæä¾›äº†å¤šç§é”€æ¯æ‰‹æ®µï¼Œæ‰§è¡Œé¡ºåºä¸º</p><ol><li>@PreDestroy æ ‡æ³¨çš„é”€æ¯æ–¹æ³•</li><li>DisposableBean æ¥å£çš„é”€æ¯æ–¹æ³•</li><li>@Bean(destroyMethod) æŒ‡å®šçš„é”€æ¯æ–¹æ³•</li></ol><h3 id="8-Scope"><a href="#8-Scope" class="headerlink" title="8) Scope"></a>8) Scope</h3><p>åœ¨å½“å‰ç‰ˆæœ¬çš„ Spring å’Œ Spring Boot ç¨‹åºä¸­ï¼Œæ”¯æŒäº”ç§ Scope</p><ul><li>singletonï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºï¼ˆæœªè®¾ç½®å»¶è¿Ÿï¼‰ï¼Œå®¹å™¨å…³é—­æ—¶é”€æ¯</li><li>prototypeï¼Œæ¯æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºï¼Œä¸ä¼šè‡ªåŠ¨é”€æ¯ï¼Œéœ€è¦è°ƒç”¨ DefaultListableBeanFactory.destroyBean(bean) é”€æ¯</li><li>requestï¼Œæ¯æ¬¡è¯·æ±‚ç”¨åˆ°æ­¤ bean æ—¶åˆ›å»ºï¼Œè¯·æ±‚ç»“æŸæ—¶é”€æ¯</li><li>sessionï¼Œæ¯ä¸ªä¼šè¯ç”¨åˆ°æ­¤ bean æ—¶åˆ›å»ºï¼Œä¼šè¯ç»“æŸæ—¶é”€æ¯</li><li>applicationï¼Œweb å®¹å™¨ç”¨åˆ°æ­¤ bean æ—¶åˆ›å»ºï¼Œå®¹å™¨åœæ­¢æ—¶é”€æ¯</li></ul><p>æœ‰äº›æ–‡ç« æåˆ°æœ‰ globalSession è¿™ä¸€ Scopeï¼Œä¹Ÿæ˜¯é™ˆæ—§çš„è¯´æ³•ï¼Œç›®å‰ Spring ä¸­å·²åºŸå¼ƒ</p><p>ä½†è¦æ³¨æ„ï¼Œå¦‚æœåœ¨ singleton æ³¨å…¥å…¶å®ƒ scope éƒ½ä¼šæœ‰é—®é¢˜ï¼Œè§£å†³æ–¹æ³•æœ‰</p><ul><li>@Lazy</li><li>@Scope(proxyMode &#x3D; ScopedProxyMode.TARGET_CLASS)</li><li>ObjectFactory</li><li>ApplicationContext.getBean</li></ul><h4 id="æ¼”ç¤º1-request-session-application-ä½œç”¨åŸŸ"><a href="#æ¼”ç¤º1-request-session-application-ä½œç”¨åŸŸ" class="headerlink" title="æ¼”ç¤º1 - request, session, application ä½œç”¨åŸŸ"></a>æ¼”ç¤º1 - request, session, application ä½œç”¨åŸŸ</h4><h5 id="ä»£ç å‚è€ƒ-13"><a href="#ä»£ç å‚è€ƒ-13" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a08</strong> åŒ…</p><ul><li>æ‰“å¼€ä¸åŒçš„æµè§ˆå™¨, åˆ·æ–° <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:8080/test">http://localhost:8080/test</a> å³å¯æŸ¥çœ‹æ•ˆæœ</li><li>å¦‚æœ jdk &gt; 8, è¿è¡Œæ—¶è¯·æ·»åŠ  --add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMED</li></ul><h4 id="æ”¶è·ğŸ’¡-13"><a href="#æ”¶è·ğŸ’¡-13" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>æœ‰å‡ ç§ scope</li><li>åœ¨ singleton ä¸­ä½¿ç”¨å…¶å®ƒå‡ ç§ scope çš„æ–¹æ³•</li><li>å…¶å®ƒ scope çš„é”€æ¯æ—¶æœº<ul><li>å¯ä»¥å°†é€šè¿‡ server.servlet.session.timeout&#x3D;30s è§‚å¯Ÿ session bean çš„é”€æ¯</li><li>ServletContextScope é”€æ¯æœºåˆ¶ç–‘ä¼¼å®ç°æœ‰è¯¯</li></ul></li></ol><h4 id="åˆ†æ-singleton-æ³¨å…¥å…¶å®ƒ-scope-å¤±æ•ˆ"><a href="#åˆ†æ-singleton-æ³¨å…¥å…¶å®ƒ-scope-å¤±æ•ˆ" class="headerlink" title="åˆ†æ - singleton æ³¨å…¥å…¶å®ƒ scope å¤±æ•ˆ"></a>åˆ†æ - singleton æ³¨å…¥å…¶å®ƒ scope å¤±æ•ˆ</h4><p>ä»¥å•ä¾‹æ³¨å…¥å¤šä¾‹ä¸ºä¾‹</p><p>æœ‰ä¸€ä¸ªå•ä¾‹å¯¹è±¡ E</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(E.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> F f;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">E</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;E()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setF</span><span class="params">(F f)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.f = f;</span><br><span class="line">        log.info(<span class="string">&quot;setF(F f) &#123;&#125;&quot;</span>, f.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> F <span class="title function_">getF</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦æ³¨å…¥çš„å¯¹è±¡ F æœŸæœ›æ˜¯å¤šä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">F</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(F.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">F</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;F()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> context.getBean(E.class);</span><br><span class="line"><span class="type">F</span> <span class="variable">f1</span> <span class="operator">=</span> e.getF();</span><br><span class="line"><span class="type">F</span> <span class="variable">f2</span> <span class="operator">=</span> e.getF();</span><br><span class="line">System.out.println(f1);</span><br><span class="line">System.out.println(f2);</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">com.itheima.demo.cycle.F@6622fc65</span><br><span class="line">com.itheima.demo.cycle.F@6622fc65</span><br></pre></td></tr></table></figure><p>å‘ç°å®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æœŸæœ›çš„å¤šä¾‹å¯¹è±¡</p><p>å¯¹äºå•ä¾‹å¯¹è±¡æ¥è®²ï¼Œä¾èµ–æ³¨å…¥ä»…å‘ç”Ÿäº†ä¸€æ¬¡ï¼Œåç»­å†æ²¡æœ‰ç”¨åˆ°å¤šä¾‹çš„ Fï¼Œå› æ­¤ E ç”¨çš„å§‹ç»ˆæ˜¯ç¬¬ä¸€æ¬¡ä¾èµ–æ³¨å…¥çš„ F</p><pre><code class="highlight mermaid">graph LR

e1(e åˆ›å»º)
e2(e set æ³¨å…¥ f)

f1(f åˆ›å»º)

e1--&gt;f1--&gt;e2
</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
graph LR

e1(e åˆ›å»º)
e2(e set æ³¨å…¥ f)

f1(f åˆ›å»º)

e1--&gt;f1--&gt;e2

  </pre></div><p>è§£å†³</p><ul><li>ä»ç„¶ä½¿ç”¨ @Lazy ç”Ÿæˆä»£ç†</li><li>ä»£ç†å¯¹è±¡è™½ç„¶è¿˜æ˜¯åŒä¸€ä¸ªï¼Œä½†å½“æ¯æ¬¡<strong>ä½¿ç”¨ä»£ç†å¯¹è±¡çš„ä»»æ„æ–¹æ³•</strong>æ—¶ï¼Œç”±ä»£ç†åˆ›å»ºæ–°çš„ f å¯¹è±¡</li></ul><pre><code class="highlight mermaid">graph LR

e1(e åˆ›å»º)
e2(e set æ³¨å…¥ fä»£ç†)

f1(f åˆ›å»º)
f2(f åˆ›å»º)
f3(f åˆ›å»º)

e1--&gt;e2
e2--ä½¿ç”¨fæ–¹æ³•--&gt;f1
e2--ä½¿ç”¨fæ–¹æ³•--&gt;f2
e2--ä½¿ç”¨fæ–¹æ³•--&gt;f3
</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
graph LR

e1(e åˆ›å»º)
e2(e set æ³¨å…¥ fä»£ç†)

f1(f åˆ›å»º)
f2(f åˆ›å»º)
f3(f åˆ›å»º)

e1--&gt;e2
e2--ä½¿ç”¨fæ–¹æ³•--&gt;f1
e2--ä½¿ç”¨fæ–¹æ³•--&gt;f2
e2--ä½¿ç”¨fæ–¹æ³•--&gt;f3

  </pre></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Lazy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setF</span><span class="params">(F f)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.f = f;</span><br><span class="line">        log.info(<span class="string">&quot;setF(F f) &#123;&#125;&quot;</span>, f.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>@Lazy åŠ åœ¨ä¹Ÿå¯ä»¥åŠ åœ¨æˆå‘˜å˜é‡ä¸Šï¼Œä½†åŠ åœ¨ set æ–¹æ³•ä¸Šçš„ç›®çš„æ˜¯å¯ä»¥è§‚å¯Ÿè¾“å‡ºï¼ŒåŠ åœ¨æˆå‘˜å˜é‡ä¸Šå°±ä¸è¡Œäº†</li><li>@Autowired åŠ åœ¨ set æ–¹æ³•çš„ç›®çš„ç±»ä¼¼</li></ul></blockquote><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">E: setF(F f) class com.itheima.demo.cycle.F$$EnhancerBySpringCGLIB$$8b54f2bc</span><br><span class="line">F: F()</span><br><span class="line">com.itheima.demo.cycle.F@3a6f2de3</span><br><span class="line">F: F()</span><br><span class="line">com.itheima.demo.cycle.F@56303b57</span><br></pre></td></tr></table></figure><p>ä»è¾“å‡ºæ—¥å¿—å¯ä»¥çœ‹åˆ°è°ƒç”¨ setF æ–¹æ³•æ—¶ï¼Œf å¯¹è±¡çš„ç±»å‹æ˜¯ä»£ç†ç±»å‹</p><h4 id="æ¼”ç¤º2-4ç§è§£å†³æ–¹æ³•"><a href="#æ¼”ç¤º2-4ç§è§£å†³æ–¹æ³•" class="headerlink" title="æ¼”ç¤º2 - 4ç§è§£å†³æ–¹æ³•"></a>æ¼”ç¤º2 - 4ç§è§£å†³æ–¹æ³•</h4><h5 id="ä»£ç å‚è€ƒ-14"><a href="#ä»£ç å‚è€ƒ-14" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a08.sub</strong> åŒ…</p><ul><li>å¦‚æœ jdk &gt; 8, è¿è¡Œæ—¶è¯·æ·»åŠ  --add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMED</li></ul><h4 id="æ”¶è·ğŸ’¡-14"><a href="#æ”¶è·ğŸ’¡-14" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å•ä¾‹æ³¨å…¥å…¶å®ƒ scope çš„å››ç§è§£å†³æ–¹æ³•<ul><li>@Lazy</li><li>@Scope(value &#x3D; &quot;prototype&quot;, proxyMode &#x3D; ScopedProxyMode.TARGET_CLASS)</li><li>ObjectFactory</li><li>ApplicationContext</li></ul></li><li>è§£å†³æ–¹æ³•è™½ç„¶ä¸åŒï¼Œä½†ç†å¿µä¸Šæ®Šé€”åŒå½’: éƒ½æ˜¯æ¨è¿Ÿå…¶å®ƒ scope bean çš„è·å–</li></ol><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>AOP åº•å±‚å®ç°æ–¹å¼ä¹‹ä¸€æ˜¯ä»£ç†ï¼Œç”±ä»£ç†ç»“åˆé€šçŸ¥å’Œç›®æ ‡ï¼Œæä¾›å¢å¼ºåŠŸèƒ½</p><p>é™¤æ­¤ä»¥å¤–ï¼Œaspectj æä¾›äº†ä¸¤ç§å¦å¤–çš„ AOP åº•å±‚å®ç°ï¼š</p><ul><li><p>ç¬¬ä¸€ç§æ˜¯é€šè¿‡ ajc ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘</strong> class ç±»æ–‡ä»¶æ—¶ï¼Œå°±æŠŠé€šçŸ¥çš„å¢å¼ºåŠŸèƒ½ï¼Œç»‡å…¥åˆ°ç›®æ ‡ç±»çš„å­—èŠ‚ç ä¸­</p></li><li><p>ç¬¬äºŒç§æ˜¯é€šè¿‡ agent åœ¨<strong>åŠ è½½</strong>ç›®æ ‡ç±»æ—¶ï¼Œä¿®æ”¹ç›®æ ‡ç±»çš„å­—èŠ‚ç ï¼Œç»‡å…¥å¢å¼ºåŠŸèƒ½</p></li><li><p>ä½œä¸ºå¯¹æ¯”ï¼Œä¹‹å‰å­¦ä¹ çš„ä»£ç†æ˜¯<strong>è¿è¡Œ</strong>æ—¶ç”Ÿæˆæ–°çš„å­—èŠ‚ç </p></li></ul><p>ç®€å•æ¯”è¾ƒçš„è¯ï¼š</p><ul><li>aspectj åœ¨ç¼–è¯‘å’ŒåŠ è½½æ—¶ï¼Œä¿®æ”¹ç›®æ ‡å­—èŠ‚ç ï¼Œæ€§èƒ½è¾ƒé«˜</li><li>aspectj å› ä¸ºä¸ç”¨ä»£ç†ï¼Œèƒ½çªç ´ä¸€äº›æŠ€æœ¯ä¸Šçš„é™åˆ¶ï¼Œä¾‹å¦‚å¯¹æ„é€ ã€å¯¹é™æ€æ–¹æ³•ã€å¯¹ final ä¹Ÿèƒ½å¢å¼º</li><li>ä½† aspectj ä¾µå…¥æ€§è¾ƒå¼ºï¼Œä¸”éœ€è¦å­¦ä¹ æ–°çš„ aspectj ç‰¹æœ‰è¯­æ³•ï¼Œå› æ­¤æ²¡æœ‰å¹¿æ³›æµè¡Œ</li></ul><h3 id="9-AOP-å®ç°ä¹‹-ajc-ç¼–è¯‘å™¨"><a href="#9-AOP-å®ç°ä¹‹-ajc-ç¼–è¯‘å™¨" class="headerlink" title="9) AOP å®ç°ä¹‹ ajc ç¼–è¯‘å™¨"></a>9) AOP å®ç°ä¹‹ ajc ç¼–è¯‘å™¨</h3><p>ä»£ç å‚è€ƒé¡¹ç›® <strong>demo6_advanced_aspectj_01</strong></p><h4 id="æ”¶è·ğŸ’¡-15"><a href="#æ”¶è·ğŸ’¡-15" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ç¼–è¯‘å™¨ä¹Ÿèƒ½ä¿®æ”¹ class å®ç°å¢å¼º</li><li>ç¼–è¯‘å™¨å¢å¼ºèƒ½çªç ´ä»£ç†ä»…èƒ½é€šè¿‡æ–¹æ³•é‡å†™å¢å¼ºçš„é™åˆ¶ï¼šå¯ä»¥å¯¹æ„é€ æ–¹æ³•ã€é™æ€æ–¹æ³•ç­‰å®ç°å¢å¼º</li></ol><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>ç‰ˆæœ¬é€‰æ‹©äº† java 8, å› ä¸ºç›®å‰çš„ aspectj-maven-plugin 1.14.0 æœ€é«˜åªæ”¯æŒåˆ° java 16</li><li>ä¸€å®šè¦ç”¨ maven çš„ compile æ¥ç¼–è¯‘, idea ä¸ä¼šè°ƒç”¨ ajc ç¼–è¯‘å™¨</li></ul></blockquote><h3 id="10-AOP-å®ç°ä¹‹-agent-ç±»åŠ è½½"><a href="#10-AOP-å®ç°ä¹‹-agent-ç±»åŠ è½½" class="headerlink" title="10) AOP å®ç°ä¹‹ agent ç±»åŠ è½½"></a>10) AOP å®ç°ä¹‹ agent ç±»åŠ è½½</h3><p>ä»£ç å‚è€ƒé¡¹ç›® <strong>demo6_advanced_aspectj_02</strong></p><h4 id="æ”¶è·ğŸ’¡-16"><a href="#æ”¶è·ğŸ’¡-16" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ç±»åŠ è½½æ—¶å¯ä»¥é€šè¿‡ agent ä¿®æ”¹ class å®ç°å¢å¼º</li></ol><h3 id="11-AOP-å®ç°ä¹‹-proxy"><a href="#11-AOP-å®ç°ä¹‹-proxy" class="headerlink" title="11) AOP å®ç°ä¹‹ proxy"></a>11) AOP å®ç°ä¹‹ proxy</h3><h4 id="æ¼”ç¤º1-jdk-åŠ¨æ€ä»£ç†"><a href="#æ¼”ç¤º1-jdk-åŠ¨æ€ä»£ç†" class="headerlink" title="æ¼”ç¤º1 - jdk åŠ¨æ€ä»£ç†"></a>æ¼”ç¤º1 - jdk åŠ¨æ€ä»£ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdkProxyDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="comment">// ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">Foo</span> <span class="variable">proxy</span> <span class="operator">=</span> (Foo) Proxy.newProxyInstance(</span><br><span class="line">                Target.class.getClassLoader(), <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Foo.class&#125;,</span><br><span class="line">                (p, method, args) -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;proxy before...&quot;</span>);</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">                    System.out.println(<span class="string">&quot;proxy after...&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="comment">// è°ƒç”¨ä»£ç†</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxy before...</span><br><span class="line">target foo</span><br><span class="line">proxy after...</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-17"><a href="#æ”¶è·ğŸ’¡-17" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ul><li>jdk åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡<strong>å¿…é¡»</strong>å®ç°æ¥å£ï¼Œç”Ÿæˆçš„ä»£ç†ç±»å®ç°ç›¸åŒæ¥å£ï¼Œå› æ­¤ä»£ç†ä¸ç›®æ ‡ä¹‹é—´æ˜¯å¹³çº§å…„å¼Ÿå…³ç³»</li></ul><h4 id="æ¼”ç¤º2-cglib-ä»£ç†"><a href="#æ¼”ç¤º2-cglib-ä»£ç†" class="headerlink" title="æ¼”ç¤º2 - cglib ä»£ç†"></a>æ¼”ç¤º2 - cglib ä»£ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CglibProxyDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="comment">// ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">proxy</span> <span class="operator">=</span> (Target) Enhancer.create(Target.class, </span><br><span class="line">                (MethodInterceptor) (p, method, args, methodProxy) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;proxy before...&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> methodProxy.invoke(target, args);</span><br><span class="line">            <span class="comment">// å¦ä¸€ç§è°ƒç”¨æ–¹æ³•ï¼Œä¸éœ€è¦ç›®æ ‡å¯¹è±¡å®ä¾‹</span></span><br><span class="line"><span class="comment">//            Object result = methodProxy.invokeSuper(p, args);</span></span><br><span class="line">            System.out.println(<span class="string">&quot;proxy after...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// è°ƒç”¨ä»£ç†</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœä¸ jdk åŠ¨æ€ä»£ç†ç›¸åŒ</p><h4 id="æ”¶è·ğŸ’¡-18"><a href="#æ”¶è·ğŸ’¡-18" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ul><li>cglib ä¸è¦æ±‚ç›®æ ‡å®ç°æ¥å£ï¼Œå®ƒç”Ÿæˆçš„ä»£ç†ç±»æ˜¯ç›®æ ‡çš„å­ç±»ï¼Œå› æ­¤ä»£ç†ä¸ç›®æ ‡ä¹‹é—´æ˜¯å­çˆ¶å…³ç³»</li><li>é™åˆ¶â›”ï¼šæ ¹æ®ä¸Šè¿°åˆ†æ final ç±»æ— æ³•è¢« cglib å¢å¼º</li></ul><h3 id="12-jdk-åŠ¨æ€ä»£ç†è¿›é˜¶"><a href="#12-jdk-åŠ¨æ€ä»£ç†è¿›é˜¶" class="headerlink" title="12) jdk åŠ¨æ€ä»£ç†è¿›é˜¶"></a>12) jdk åŠ¨æ€ä»£ç†è¿›é˜¶</h3><h4 id="æ¼”ç¤º1-æ¨¡æ‹Ÿ-jdk-åŠ¨æ€ä»£ç†"><a href="#æ¼”ç¤º1-æ¨¡æ‹Ÿ-jdk-åŠ¨æ€ä»£ç†" class="headerlink" title="æ¼”ç¤º1 - æ¨¡æ‹Ÿ jdk åŠ¨æ€ä»£ç†"></a>æ¼”ç¤º1 - æ¨¡æ‹Ÿ jdk åŠ¨æ€ä»£ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A12</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target bar&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// â¬‡ï¸1. åˆ›å»ºä»£ç†ï¼Œè¿™æ—¶ä¼ å…¥ InvocationHandler</span></span><br><span class="line">        <span class="type">Foo</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$Proxy0</span>(<span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;    </span><br><span class="line">            <span class="comment">// â¬‡ï¸5. è¿›å…¥ InvocationHandler</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">                <span class="comment">// â¬‡ï¸6. åŠŸèƒ½å¢å¼º</span></span><br><span class="line">                System.out.println(<span class="string">&quot;before...&quot;</span>);</span><br><span class="line">                <span class="comment">// â¬‡ï¸7. åå°„è°ƒç”¨ç›®æ ‡æ–¹æ³•</span></span><br><span class="line">                <span class="keyword">return</span> method.invoke(<span class="keyword">new</span> <span class="title class_">Target</span>(), args);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// â¬‡ï¸2. è°ƒç”¨ä»£ç†æ–¹æ³•</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">        proxy.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿä»£ç†å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.UndeclaredThrowableException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â¬‡ï¸è¿™å°±æ˜¯ jdk ä»£ç†ç±»çš„æºç , ç§˜å¯†éƒ½åœ¨é‡Œé¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$Proxy0</span> <span class="keyword">extends</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">A12</span>.Foo &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $Proxy0(InvocationHandler h) &#123;</span><br><span class="line">        <span class="built_in">super</span>(h);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// â¬‡ï¸3. è¿›å…¥ä»£ç†æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// â¬‡ï¸4. å›è°ƒ InvocationHandler</span></span><br><span class="line">            h.invoke(<span class="built_in">this</span>, foo, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> h.invoke(<span class="built_in">this</span>, bar, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">return</span> (<span class="type">int</span>) result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Method foo;</span><br><span class="line">    <span class="keyword">static</span> Method bar;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            foo = A12.Foo.class.getMethod(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">            bar = A12.Foo.class.getMethod(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchMethodError</span>(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-19"><a href="#æ”¶è·ğŸ’¡-19" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>ä»£ç†ä¸€ç‚¹éƒ½ä¸éš¾ï¼Œæ— éå°±æ˜¯åˆ©ç”¨äº†å¤šæ€ã€åå°„çš„çŸ¥è¯†</p><ol><li>æ–¹æ³•é‡å†™å¯ä»¥å¢å¼ºé€»è¾‘ï¼Œåªä¸è¿‡è¿™ã€å¢å¼ºé€»è¾‘ã€‘åƒå˜ä¸‡åŒ–ï¼Œä¸èƒ½å†™æ­»åœ¨ä»£ç†å†…éƒ¨</li><li>é€šè¿‡æ¥å£å›è°ƒå°†ã€å¢å¼ºé€»è¾‘ã€‘ç½®äºä»£ç†ç±»ä¹‹å¤–</li><li>é…åˆæ¥å£æ–¹æ³•åå°„ï¼ˆæ˜¯å¤šæ€è°ƒç”¨ï¼‰ï¼Œå°±å¯ä»¥å†è”åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•</li><li>ä¼šç”¨ arthas çš„ jad å·¥å…·åç¼–è¯‘ä»£ç†ç±»</li><li>é™åˆ¶â›”ï¼šä»£ç†å¢å¼ºæ˜¯å€ŸåŠ©å¤šæ€æ¥å®ç°ï¼Œå› æ­¤æˆå‘˜å˜é‡ã€é™æ€æ–¹æ³•ã€final æ–¹æ³•å‡ä¸èƒ½é€šè¿‡ä»£ç†å®ç°</li></ol><h4 id="æ¼”ç¤º2-æ–¹æ³•åå°„ä¼˜åŒ–"><a href="#æ¼”ç¤º2-æ–¹æ³•åå°„ä¼˜åŒ–" class="headerlink" title="æ¼”ç¤º2 - æ–¹æ³•åå°„ä¼˜åŒ–"></a>æ¼”ç¤º2 - æ–¹æ³•åå°„ä¼˜åŒ–</h4><h5 id="ä»£ç å‚è€ƒ-15"><a href="#ä»£ç å‚è€ƒ-15" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a12.TestMethodInvoke</strong></p><h4 id="æ”¶è·ğŸ’¡-20"><a href="#æ”¶è·ğŸ’¡-20" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å‰ 16 æ¬¡åå°„æ€§èƒ½è¾ƒä½</li><li>ç¬¬ 17 æ¬¡è°ƒç”¨ä¼šç”Ÿæˆä»£ç†ç±»ï¼Œä¼˜åŒ–ä¸ºéåå°„è°ƒç”¨</li><li>ä¼šç”¨ arthas çš„ jad å·¥å…·åç¼–è¯‘ç¬¬ 17 æ¬¡è°ƒç”¨ç”Ÿæˆçš„ä»£ç†ç±»</li></ol><blockquote><p><em><strong>æ³¨æ„</strong></em></p><p>è¿è¡Œæ—¶è¯·æ·»åŠ  --add-opens java.base&#x2F;java.lang.reflect&#x3D;ALL-UNNAMED --add-opens java.base&#x2F;jdk.internal.reflect&#x3D;ALL-UNNAMED</p></blockquote><h3 id="13-cglib-ä»£ç†è¿›é˜¶"><a href="#13-cglib-ä»£ç†è¿›é˜¶" class="headerlink" title="13) cglib ä»£ç†è¿›é˜¶"></a>13) cglib ä»£ç†è¿›é˜¶</h3><h4 id="æ¼”ç¤º-æ¨¡æ‹Ÿ-cglib-ä»£ç†"><a href="#æ¼”ç¤º-æ¨¡æ‹Ÿ-cglib-ä»£ç†" class="headerlink" title="æ¼”ç¤º - æ¨¡æ‹Ÿ cglib ä»£ç†"></a>æ¼”ç¤º - æ¨¡æ‹Ÿ cglib ä»£ç†</h4><h5 id="ä»£ç å‚è€ƒ-16"><a href="#ä»£ç å‚è€ƒ-16" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a13</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-21"><a href="#æ”¶è·ğŸ’¡-21" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>å’Œ jdk åŠ¨æ€ä»£ç†åŸç†æŸ¥ä¸å¤š</p><ol><li>å›è°ƒçš„æ¥å£æ¢äº†ä¸€ä¸‹ï¼ŒInvocationHandler æ”¹æˆäº† MethodInterceptor</li><li>è°ƒç”¨ç›®æ ‡æ—¶æœ‰æ‰€æ”¹è¿›ï¼Œè§ä¸‹é¢ä»£ç ç‰‡æ®µ<ol><li>method.invoke æ˜¯åå°„è°ƒç”¨ï¼Œå¿…é¡»è°ƒç”¨åˆ°è¶³å¤Ÿæ¬¡æ•°æ‰ä¼šè¿›è¡Œä¼˜åŒ–</li><li>methodProxy.invoke æ˜¯ä¸åå°„è°ƒç”¨ï¼Œå®ƒä¼šæ­£å¸¸ï¼ˆé—´æ¥ï¼‰è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼ˆSpring é‡‡ç”¨ï¼‰</li><li>methodProxy.invokeSuper ä¹Ÿæ˜¯ä¸åå°„è°ƒç”¨ï¼Œå®ƒä¼šæ­£å¸¸ï¼ˆé—´æ¥ï¼‰è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥çœç•¥ç›®æ ‡å¯¹è±¡</li></ol></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A14Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InvocationTargetException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>();</span><br><span class="line">        </span><br><span class="line">        proxy.setCallbacks(<span class="keyword">new</span> <span class="title class_">Callback</span>[]&#123;(MethodInterceptor) (p, m, a, mp) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;proxy before...&quot;</span> + mp.getSignature());</span><br><span class="line">            <span class="comment">// â¬‡ï¸è°ƒç”¨ç›®æ ‡æ–¹æ³•(ä¸‰ç§)</span></span><br><span class="line"><span class="comment">//            Object result = m.invoke(target, a);  // â¬…ï¸åå°„è°ƒç”¨</span></span><br><span class="line"><span class="comment">//            Object result = mp.invoke(target, a); // â¬…ï¸éåå°„è°ƒç”¨, ç»“åˆç›®æ ‡ç”¨</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> mp.invokeSuper(p, a);   <span class="comment">// â¬…ï¸éåå°„è°ƒç”¨, ç»“åˆä»£ç†ç”¨</span></span><br><span class="line">            System.out.println(<span class="string">&quot;proxy after...&quot;</span> + mp.getSignature());</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// â¬‡ï¸è°ƒç”¨ä»£ç†æ–¹æ³•</span></span><br><span class="line">        proxy.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>è°ƒç”¨ Object çš„æ–¹æ³•, åä¸¤ç§åœ¨ jdk &gt;&#x3D; 9 æ—¶éƒ½æœ‰é—®é¢˜, éœ€è¦ --add-opens java.base&#x2F;java.lang&#x3D;ALL-UNNAMED</li></ul></blockquote><h3 id="14-cglib-é¿å…åå°„è°ƒç”¨"><a href="#14-cglib-é¿å…åå°„è°ƒç”¨" class="headerlink" title="14) cglib é¿å…åå°„è°ƒç”¨"></a>14) cglib é¿å…åå°„è°ƒç”¨</h3><h4 id="æ¼”ç¤º-cglib-å¦‚ä½•é¿å…åå°„"><a href="#æ¼”ç¤º-cglib-å¦‚ä½•é¿å…åå°„" class="headerlink" title="æ¼”ç¤º - cglib å¦‚ä½•é¿å…åå°„"></a>æ¼”ç¤º - cglib å¦‚ä½•é¿å…åå°„</h4><h5 id="ä»£ç å‚è€ƒ-17"><a href="#ä»£ç å‚è€ƒ-17" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a13.ProxyFastClass</strong>ï¼Œ<strong>com.itheima.a13.TargetFastClass</strong></p><h4 id="æ”¶è·ğŸ’¡-22"><a href="#æ”¶è·ğŸ’¡-22" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å½“è°ƒç”¨ MethodProxy çš„ invoke æˆ– invokeSuper æ–¹æ³•æ—¶, ä¼šåŠ¨æ€ç”Ÿæˆä¸¤ä¸ªç±»<ul><li>ProxyFastClass é…åˆä»£ç†å¯¹è±¡ä¸€èµ·ä½¿ç”¨, é¿å…åå°„</li><li>TargetFastClass é…åˆç›®æ ‡å¯¹è±¡ä¸€èµ·ä½¿ç”¨, é¿å…åå°„ (Spring ç”¨çš„è¿™ç§)</li></ul></li><li>TargetFastClass è®°å½•äº† Target ä¸­æ–¹æ³•ä¸ç¼–å·çš„å¯¹åº”å…³ç³»<ul><li>save(long) ç¼–å· 2</li><li>save(int) ç¼–å· 1</li><li>save() ç¼–å· 0</li><li>é¦–å…ˆæ ¹æ®æ–¹æ³•åå’Œå‚æ•°ä¸ªæ•°ã€ç±»å‹, ç”¨ switch å’Œ if æ‰¾åˆ°è¿™äº›æ–¹æ³•ç¼–å·</li><li>ç„¶åå†æ ¹æ®ç¼–å·å»è°ƒç”¨ç›®æ ‡æ–¹æ³•, åˆç”¨äº†ä¸€å¤§å † switch å’Œ if, ä½†é¿å…äº†åå°„</li></ul></li><li>ProxyFastClass è®°å½•äº† Proxy ä¸­æ–¹æ³•ä¸ç¼–å·çš„å¯¹åº”å…³ç³»ï¼Œä¸è¿‡ Proxy é¢å¤–æä¾›äº†ä¸‹é¢å‡ ä¸ªæ–¹æ³•<ul><li>saveSuper(long) ç¼–å· 2ï¼Œä¸å¢å¼ºï¼Œä»…æ˜¯è°ƒç”¨ super.save(long)</li><li>saveSuper(int) ç¼–å· 1ï¼Œä¸å¢å¼º, ä»…æ˜¯è°ƒç”¨ super.save(int)</li><li>saveSuper() ç¼–å· 0ï¼Œä¸å¢å¼º, ä»…æ˜¯è°ƒç”¨ super.save()</li><li>æŸ¥æ‰¾æ–¹å¼ä¸ TargetFastClass ç±»ä¼¼</li></ul></li><li>ä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆéº»çƒ¦çš„ä¸€å¥—ä¸œè¥¿å‘¢ï¼Ÿ<ul><li>é¿å…åå°„, æé«˜æ€§èƒ½, ä»£ä»·æ˜¯ä¸€ä¸ªä»£ç†ç±»é…ä¸¤ä¸ª FastClass ç±», ä»£ç†ç±»ä¸­è¿˜å¾—å¢åŠ ä»…è°ƒç”¨ super çš„ä¸€å †æ–¹æ³•</li><li>ç”¨ç¼–å·å¤„ç†æ–¹æ³•å¯¹åº”å…³ç³»æ¯”è¾ƒçœå†…å­˜, å¦å¤–, æœ€åˆè·å¾—æ–¹æ³•é¡ºåºæ˜¯ä¸ç¡®å®šçš„, è¿™ä¸ªè¿‡ç¨‹æ²¡æ³•å›ºå®šæ­»</li></ul></li></ol><h3 id="15-jdk-å’Œ-cglib-åœ¨-Spring-ä¸­çš„ç»Ÿä¸€"><a href="#15-jdk-å’Œ-cglib-åœ¨-Spring-ä¸­çš„ç»Ÿä¸€" class="headerlink" title="15) jdk å’Œ cglib åœ¨ Spring ä¸­çš„ç»Ÿä¸€"></a>15) jdk å’Œ cglib åœ¨ Spring ä¸­çš„ç»Ÿä¸€</h3><p>Spring ä¸­å¯¹åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢çš„æŠ½è±¡å¦‚ä¸‹</p><ul><li>åˆ‡ç‚¹ï¼šæ¥å£ Pointcutï¼Œå…¸å‹å®ç° AspectJExpressionPointcut</li><li>é€šçŸ¥ï¼šå…¸å‹æ¥å£ä¸º MethodInterceptor ä»£è¡¨ç¯ç»•é€šçŸ¥</li><li>åˆ‡é¢ï¼šAdvisorï¼ŒåŒ…å«ä¸€ä¸ª Advice é€šçŸ¥ï¼ŒPointcutAdvisor åŒ…å«ä¸€ä¸ª Advice é€šçŸ¥å’Œä¸€ä¸ª Pointcut</li></ul><pre><code class="highlight mermaid">classDiagram

class Advice
class MethodInterceptor
class Advisor
class PointcutAdvisor

Pointcut &lt;|-- AspectJExpressionPointcut
Advice &lt;|-- MethodInterceptor
Advisor &lt;|-- PointcutAdvisor
PointcutAdvisor o-- &quot;ä¸€&quot; Pointcut
PointcutAdvisor o-- &quot;ä¸€&quot; Advice

&lt;&lt;interface&gt;&gt; Advice
&lt;&lt;interface&gt;&gt; MethodInterceptor
&lt;&lt;interface&gt;&gt; Pointcut
&lt;&lt;interface&gt;&gt; Advisor
&lt;&lt;interface&gt;&gt; PointcutAdvisor</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
classDiagram

class Advice
class MethodInterceptor
class Advisor
class PointcutAdvisor

Pointcut &lt;|-- AspectJExpressionPointcut
Advice &lt;|-- MethodInterceptor
Advisor &lt;|-- PointcutAdvisor
PointcutAdvisor o-- &quot;ä¸€&quot; Pointcut
PointcutAdvisor o-- &quot;ä¸€&quot; Advice

&lt;&lt;interface&gt;&gt; Advice
&lt;&lt;interface&gt;&gt; MethodInterceptor
&lt;&lt;interface&gt;&gt; Pointcut
&lt;&lt;interface&gt;&gt; Advisor
&lt;&lt;interface&gt;&gt; PointcutAdvisor

  </pre></div><p>ä»£ç†ç›¸å…³ç±»å›¾</p><ul><li>AopProxyFactory æ ¹æ® proxyTargetClass ç­‰è®¾ç½®é€‰æ‹© AopProxy å®ç°</li><li>AopProxy é€šè¿‡ getProxy åˆ›å»ºä»£ç†å¯¹è±¡</li><li>å›¾ä¸­ Proxy éƒ½å®ç°äº† Advised æ¥å£ï¼Œèƒ½å¤Ÿè·å¾—å…³è”çš„åˆ‡é¢é›†åˆä¸ç›®æ ‡ï¼ˆå…¶å®æ˜¯ä» ProxyFactory å–å¾—ï¼‰</li><li>è°ƒç”¨ä»£ç†æ–¹æ³•æ—¶ï¼Œä¼šå€ŸåŠ© ProxyFactory å°†é€šçŸ¥ç»Ÿä¸€è½¬ä¸ºç¯ç»•é€šçŸ¥ï¼šMethodInterceptor</li></ul><pre><code class="highlight mermaid">classDiagram

Advised &lt;|-- ProxyFactory
ProxyFactory o-- Target
ProxyFactory o-- &quot;å¤š&quot; Advisor

ProxyFactory --&gt; AopProxyFactory : ä½¿ç”¨
AopProxyFactory --&gt; AopProxy
Advised &lt;|-- åŸºäºCGLIBçš„Proxy
åŸºäºCGLIBçš„Proxy &lt;-- ObjenesisCglibAopProxy : åˆ›å»º
AopProxy &lt;|-- ObjenesisCglibAopProxy
AopProxy &lt;|-- JdkDynamicAopProxy
åŸºäºJDKçš„Proxy &lt;-- JdkDynamicAopProxy : åˆ›å»º
Advised &lt;|-- åŸºäºJDKçš„Proxy

class AopProxy &#123;
   +getProxy() Object
&#125;

class ProxyFactory &#123;
	proxyTargetClass : boolean
&#125;

class ObjenesisCglibAopProxy &#123;
	advised : ProxyFactory
&#125;

class JdkDynamicAopProxy &#123;
	advised : ProxyFactory
&#125;

&lt;&lt;interface&gt;&gt; Advised
&lt;&lt;interface&gt;&gt; AopProxyFactory
&lt;&lt;interface&gt;&gt; AopProxy</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
classDiagram

Advised &lt;|-- ProxyFactory
ProxyFactory o-- Target
ProxyFactory o-- &quot;å¤š&quot; Advisor

ProxyFactory --&gt; AopProxyFactory : ä½¿ç”¨
AopProxyFactory --&gt; AopProxy
Advised &lt;|-- åŸºäºCGLIBçš„Proxy
åŸºäºCGLIBçš„Proxy &lt;-- ObjenesisCglibAopProxy : åˆ›å»º
AopProxy &lt;|-- ObjenesisCglibAopProxy
AopProxy &lt;|-- JdkDynamicAopProxy
åŸºäºJDKçš„Proxy &lt;-- JdkDynamicAopProxy : åˆ›å»º
Advised &lt;|-- åŸºäºJDKçš„Proxy

class AopProxy {
   +getProxy() Object
}

class ProxyFactory {
	proxyTargetClass : boolean
}

class ObjenesisCglibAopProxy {
	advised : ProxyFactory
}

class JdkDynamicAopProxy {
	advised : ProxyFactory
}

&lt;&lt;interface&gt;&gt; Advised
&lt;&lt;interface&gt;&gt; AopProxyFactory
&lt;&lt;interface&gt;&gt; AopProxy

  </pre></div><h4 id="æ¼”ç¤º-åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢"><a href="#æ¼”ç¤º-åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢" class="headerlink" title="æ¼”ç¤º - åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢"></a>æ¼”ç¤º - åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢</h4><h5 id="ä»£ç å‚è€ƒ-18"><a href="#ä»£ç å‚è€ƒ-18" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a15.A15</strong></p><h4 id="æ”¶è·ğŸ’¡-23"><a href="#æ”¶è·ğŸ’¡-23" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>åº•å±‚çš„åˆ‡ç‚¹å®ç°</li><li>åº•å±‚çš„é€šçŸ¥å®ç°</li><li>åº•å±‚çš„åˆ‡é¢å®ç°</li><li>ProxyFactory ç”¨æ¥åˆ›å»ºä»£ç†<ul><li>å¦‚æœæŒ‡å®šäº†æ¥å£ï¼Œä¸” proxyTargetClass &#x3D; falseï¼Œä½¿ç”¨ JdkDynamicAopProxy</li><li>å¦‚æœæ²¡æœ‰æŒ‡å®šæ¥å£ï¼Œæˆ–è€… proxyTargetClass &#x3D; trueï¼Œä½¿ç”¨ ObjenesisCglibAopProxy<ul><li>ä¾‹å¤–ï¼šå¦‚æœç›®æ ‡æ˜¯æ¥å£ç±»å‹æˆ–å·²ç»æ˜¯ Jdk ä»£ç†ï¼Œä½¿ç”¨ JdkDynamicAopProxy</li></ul></li></ul></li></ol><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>è¦åŒºåˆ†æœ¬ç« èŠ‚æåˆ°çš„ MethodInterceptorï¼Œå®ƒä¸ä¹‹å‰ cglib ä¸­ç”¨çš„çš„ MethodInterceptor æ˜¯ä¸åŒçš„æ¥å£</li></ul></blockquote><h3 id="16-åˆ‡ç‚¹åŒ¹é…"><a href="#16-åˆ‡ç‚¹åŒ¹é…" class="headerlink" title="16) åˆ‡ç‚¹åŒ¹é…"></a>16) åˆ‡ç‚¹åŒ¹é…</h3><h4 id="æ¼”ç¤º-åˆ‡ç‚¹åŒ¹é…"><a href="#æ¼”ç¤º-åˆ‡ç‚¹åŒ¹é…" class="headerlink" title="æ¼”ç¤º - åˆ‡ç‚¹åŒ¹é…"></a>æ¼”ç¤º - åˆ‡ç‚¹åŒ¹é…</h4><h5 id="ä»£ç å‚è€ƒ-19"><a href="#ä»£ç å‚è€ƒ-19" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a16.A16</strong></p><h4 id="æ”¶è·ğŸ’¡-24"><a href="#æ”¶è·ğŸ’¡-24" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¸¸è§ aspectj åˆ‡ç‚¹ç”¨æ³•</li><li>aspectj åˆ‡ç‚¹çš„å±€é™æ€§ï¼Œå®é™…çš„ @Transactional åˆ‡ç‚¹å®ç°</li></ol><h3 id="17-ä»-Aspect-åˆ°-Advisor"><a href="#17-ä»-Aspect-åˆ°-Advisor" class="headerlink" title="17) ä» @Aspect åˆ° Advisor"></a>17) ä» @Aspect åˆ° Advisor</h3><h4 id="æ¼”ç¤º1-ä»£ç†åˆ›å»ºå™¨"><a href="#æ¼”ç¤º1-ä»£ç†åˆ›å»ºå™¨" class="headerlink" title="æ¼”ç¤º1 - ä»£ç†åˆ›å»ºå™¨"></a>æ¼”ç¤º1 - ä»£ç†åˆ›å»ºå™¨</h4><h5 id="ä»£ç å‚è€ƒ-20"><a href="#ä»£ç å‚è€ƒ-20" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-25"><a href="#æ”¶è·ğŸ’¡-25" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>AnnotationAwareAspectJAutoProxyCreator çš„ä½œç”¨<ul><li>å°†é«˜çº§ @Aspect åˆ‡é¢ç»Ÿä¸€ä¸ºä½çº§ Advisor åˆ‡é¢</li><li>åœ¨åˆé€‚çš„æ—¶æœºåˆ›å»ºä»£ç†</li></ul></li><li>findEligibleAdvisors æ‰¾åˆ°æœ‰ã€èµ„æ ¼ã€‘çš„ Advisors<ul><li>æœ‰ã€èµ„æ ¼ã€‘çš„ Advisor ä¸€éƒ¨åˆ†æ˜¯ä½çº§çš„, å¯ä»¥ç”±è‡ªå·±ç¼–å†™, å¦‚æœ¬ä¾‹ A17 ä¸­çš„ advisor3</li><li>æœ‰ã€èµ„æ ¼ã€‘çš„ Advisor å¦ä¸€éƒ¨åˆ†æ˜¯é«˜çº§çš„, ç”±è§£æ @Aspect åè·å¾—</li></ul></li><li>wrapIfNecessary<ul><li>å®ƒå†…éƒ¨è°ƒç”¨ findEligibleAdvisors, åªè¦è¿”å›é›†åˆä¸ç©º, åˆ™è¡¨ç¤ºéœ€è¦åˆ›å»ºä»£ç†</li><li>å®ƒçš„è°ƒç”¨æ—¶æœºé€šå¸¸åœ¨åŸå§‹å¯¹è±¡åˆå§‹åŒ–åæ‰§è¡Œ, ä½†ç¢°åˆ°å¾ªç¯ä¾èµ–ä¼šæå‰è‡³ä¾èµ–æ³¨å…¥ä¹‹å‰æ‰§è¡Œ</li></ul></li></ol><h4 id="æ¼”ç¤º2-ä»£ç†åˆ›å»ºæ—¶æœº"><a href="#æ¼”ç¤º2-ä»£ç†åˆ›å»ºæ—¶æœº" class="headerlink" title="æ¼”ç¤º2 - ä»£ç†åˆ›å»ºæ—¶æœº"></a>æ¼”ç¤º2 - ä»£ç†åˆ›å»ºæ—¶æœº</h4><h5 id="ä»£ç å‚è€ƒ-21"><a href="#ä»£ç å‚è€ƒ-21" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy.A17_1</strong></p><h4 id="æ”¶è·ğŸ’¡-26"><a href="#æ”¶è·ğŸ’¡-26" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ä»£ç†çš„åˆ›å»ºæ—¶æœº<ul><li>åˆå§‹åŒ–ä¹‹å (æ— å¾ªç¯ä¾èµ–æ—¶)</li><li>å®ä¾‹åˆ›å»ºå, ä¾èµ–æ³¨å…¥å‰ (æœ‰å¾ªç¯ä¾èµ–æ—¶), å¹¶æš‚å­˜äºäºŒçº§ç¼“å­˜</li></ul></li><li>ä¾èµ–æ³¨å…¥ä¸åˆå§‹åŒ–ä¸åº”è¯¥è¢«å¢å¼º, ä»åº”è¢«æ–½åŠ äºåŸå§‹å¯¹è±¡</li></ol><h4 id="æ¼”ç¤º3-Before-å¯¹åº”çš„ä½çº§é€šçŸ¥"><a href="#æ¼”ç¤º3-Before-å¯¹åº”çš„ä½çº§é€šçŸ¥" class="headerlink" title="æ¼”ç¤º3 - @Before å¯¹åº”çš„ä½çº§é€šçŸ¥"></a>æ¼”ç¤º3 - @Before å¯¹åº”çš„ä½çº§é€šçŸ¥</h4><h5 id="ä»£ç å‚è€ƒ-22"><a href="#ä»£ç å‚è€ƒ-22" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy.A17_2</strong></p><h4 id="æ”¶è·ğŸ’¡-27"><a href="#æ”¶è·ğŸ’¡-27" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@Before å‰ç½®é€šçŸ¥ä¼šè¢«è½¬æ¢ä¸ºåŸå§‹çš„ AspectJMethodBeforeAdvice å½¢å¼, è¯¥å¯¹è±¡åŒ…å«äº†å¦‚ä¸‹ä¿¡æ¯<ol><li>é€šçŸ¥ä»£ç ä»å“ªå„¿æ¥</li><li>åˆ‡ç‚¹æ˜¯ä»€ä¹ˆ(è¿™é‡Œä¸ºå•¥è¦åˆ‡ç‚¹, åé¢è§£é‡Š)</li><li>é€šçŸ¥å¯¹è±¡å¦‚ä½•åˆ›å»º, æœ¬ä¾‹å…±ç”¨åŒä¸€ä¸ª Aspect å¯¹è±¡</li></ol></li><li>ç±»ä¼¼çš„è¿˜æœ‰<ol><li>AspectJAroundAdvice (ç¯ç»•é€šçŸ¥)</li><li>AspectJAfterReturningAdvice</li><li>AspectJAfterThrowingAdvice (ç¯ç»•é€šçŸ¥)</li><li>AspectJAfterAdvice (ç¯ç»•é€šçŸ¥)</li></ol></li></ol><h3 id="18-é™æ€é€šçŸ¥è°ƒç”¨"><a href="#18-é™æ€é€šçŸ¥è°ƒç”¨" class="headerlink" title="18) é™æ€é€šçŸ¥è°ƒç”¨"></a>18) é™æ€é€šçŸ¥è°ƒç”¨</h3><p>ä»£ç†å¯¹è±¡è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼ˆä»¥ JDK åŠ¨æ€ä»£ç†å®ç°ä¸ºä¾‹ï¼‰</p><ul><li>ä» ProxyFactory è·å¾— Target å’Œç¯ç»•é€šçŸ¥é“¾ï¼Œæ ¹æ®ä»–ä¿©åˆ›å»º MethodInvocationï¼Œç®€ç§° mi</li><li>é¦–æ¬¡æ‰§è¡Œ mi.proceed() å‘ç°æœ‰ä¸‹ä¸€ä¸ªç¯ç»•é€šçŸ¥ï¼Œè°ƒç”¨å®ƒçš„ invoke(mi)</li><li>è¿›å…¥ç¯ç»•é€šçŸ¥1ï¼Œæ‰§è¡Œå‰å¢å¼ºï¼Œå†æ¬¡è°ƒç”¨ mi.proceed() å‘ç°æœ‰ä¸‹ä¸€ä¸ªç¯ç»•é€šçŸ¥ï¼Œè°ƒç”¨å®ƒçš„ invoke(mi)</li><li>è¿›å…¥ç¯ç»•é€šçŸ¥2ï¼Œæ‰§è¡Œå‰å¢å¼ºï¼Œè°ƒç”¨ mi.proceed() å‘ç°æ²¡æœ‰ç¯ç»•é€šçŸ¥ï¼Œè°ƒç”¨ mi.invokeJoinPoint() æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›ç»™ç¯ç»•é€šçŸ¥2ï¼Œæ‰§è¡Œç¯ç»•é€šçŸ¥2 çš„åå¢å¼º</li><li>ç¯ç»•é€šçŸ¥2ç»§ç»­å°†ç»“æœè¿”å›ç»™ç¯ç»•é€šçŸ¥1ï¼Œæ‰§è¡Œç¯ç»•é€šçŸ¥1 çš„åå¢å¼º</li><li>ç¯ç»•é€šçŸ¥1è¿”å›æœ€ç»ˆçš„ç»“æœ</li></ul><p>å›¾ä¸­ä¸åŒé¢œè‰²å¯¹åº”ä¸€æ¬¡ç¯ç»•é€šçŸ¥æˆ–ç›®æ ‡çš„è°ƒç”¨èµ·å§‹è‡³ç»ˆç»“</p><pre><code class="highlight mermaid">sequenceDiagram
participant Proxy
participant ih as InvocationHandler
participant mi as MethodInvocation
participant Factory as ProxyFactory
participant mi1 as MethodInterceptor1
participant mi2 as MethodInterceptor2
participant Target

Proxy -&gt;&gt; +ih : invoke()
ih -&gt;&gt; +Factory : è·å¾— Target
Factory --&gt;&gt; -ih : 
ih -&gt;&gt; +Factory : è·å¾— MethodInterceptor é“¾
Factory --&gt;&gt; -ih : 
ih -&gt;&gt; +mi : åˆ›å»º mi
mi --&gt;&gt; -ih : 
rect rgb(200, 223, 255)
ih -&gt;&gt; +mi : mi.proceed()
mi -&gt;&gt; +mi1 : invoke(mi)
mi1 -&gt;&gt; mi1 : å‰å¢å¼º
rect rgb(200, 190, 255)
mi1 -&gt;&gt; mi : mi.proceed()
mi -&gt;&gt; +mi2 : invoke(mi)
mi2 -&gt;&gt; mi2 : å‰å¢å¼º
rect rgb(150, 190, 155)
mi2 -&gt;&gt; mi : mi.proceed()
mi -&gt;&gt; +Target : mi.invokeJoinPoint()
Target -&gt;&gt; Target : 
Target --&gt;&gt; -mi2 : ç»“æœ
end
mi2 -&gt;&gt; mi2 : åå¢å¼º
mi2 --&gt;&gt; -mi1 : ç»“æœ
end
mi1 -&gt;&gt; mi1 : åå¢å¼º
mi1 --&gt;&gt; -mi : ç»“æœ
mi --&gt;&gt; -ih : 
end
ih --&gt;&gt; -Proxy :</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram
participant Proxy
participant ih as InvocationHandler
participant mi as MethodInvocation
participant Factory as ProxyFactory
participant mi1 as MethodInterceptor1
participant mi2 as MethodInterceptor2
participant Target

Proxy -&gt;&gt; +ih : invoke()
ih -&gt;&gt; +Factory : è·å¾— Target
Factory --&gt;&gt; -ih : 
ih -&gt;&gt; +Factory : è·å¾— MethodInterceptor é“¾
Factory --&gt;&gt; -ih : 
ih -&gt;&gt; +mi : åˆ›å»º mi
mi --&gt;&gt; -ih : 
rect rgb(200, 223, 255)
ih -&gt;&gt; +mi : mi.proceed()
mi -&gt;&gt; +mi1 : invoke(mi)
mi1 -&gt;&gt; mi1 : å‰å¢å¼º
rect rgb(200, 190, 255)
mi1 -&gt;&gt; mi : mi.proceed()
mi -&gt;&gt; +mi2 : invoke(mi)
mi2 -&gt;&gt; mi2 : å‰å¢å¼º
rect rgb(150, 190, 155)
mi2 -&gt;&gt; mi : mi.proceed()
mi -&gt;&gt; +Target : mi.invokeJoinPoint()
Target -&gt;&gt; Target : 
Target --&gt;&gt; -mi2 : ç»“æœ
end
mi2 -&gt;&gt; mi2 : åå¢å¼º
mi2 --&gt;&gt; -mi1 : ç»“æœ
end
mi1 -&gt;&gt; mi1 : åå¢å¼º
mi1 --&gt;&gt; -mi : ç»“æœ
mi --&gt;&gt; -ih : 
end
ih --&gt;&gt; -Proxy : 

  </pre></div><h4 id="æ¼”ç¤º1-é€šçŸ¥è°ƒç”¨è¿‡ç¨‹"><a href="#æ¼”ç¤º1-é€šçŸ¥è°ƒç”¨è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º1 - é€šçŸ¥è°ƒç”¨è¿‡ç¨‹"></a>æ¼”ç¤º1 - é€šçŸ¥è°ƒç”¨è¿‡ç¨‹</h4><h5 id="ä»£ç å‚è€ƒ-23"><a href="#ä»£ç å‚è€ƒ-23" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.A18</strong></p><h4 id="æ”¶è·ğŸ’¡-28"><a href="#æ”¶è·ğŸ’¡-28" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>ä»£ç†æ–¹æ³•æ‰§è¡Œæ—¶ä¼šåšå¦‚ä¸‹å·¥ä½œ</p><ol><li>é€šè¿‡ proxyFactory çš„ getInterceptorsAndDynamicInterceptionAdvice() å°†å…¶ä»–é€šçŸ¥ç»Ÿä¸€è½¬æ¢ä¸º MethodInterceptor ç¯ç»•é€šçŸ¥<ul><li>MethodBeforeAdviceAdapter å°† @Before AspectJMethodBeforeAdvice é€‚é…ä¸º MethodBeforeAdviceInterceptor</li><li>AfterReturningAdviceAdapter å°† @AfterReturning AspectJAfterReturningAdvice é€‚é…ä¸º AfterReturningAdviceInterceptor</li><li>è¿™ä½“ç°çš„æ˜¯é€‚é…å™¨è®¾è®¡æ¨¡å¼</li></ul></li><li>æ‰€è°“é™æ€é€šçŸ¥ï¼Œä½“ç°åœ¨ä¸Šé¢æ–¹æ³•çš„ Interceptors éƒ¨åˆ†ï¼Œè¿™äº›é€šçŸ¥è°ƒç”¨æ—¶æ— éœ€å†æ¬¡æ£€æŸ¥åˆ‡ç‚¹ï¼Œç›´æ¥è°ƒç”¨å³å¯</li><li>ç»“åˆç›®æ ‡ä¸ç¯ç»•é€šçŸ¥é“¾ï¼Œåˆ›å»º MethodInvocation å¯¹è±¡ï¼Œé€šè¿‡å®ƒå®Œæˆæ•´ä¸ªè°ƒç”¨</li></ol><h4 id="æ¼”ç¤º2-æ¨¡æ‹Ÿ-MethodInvocation"><a href="#æ¼”ç¤º2-æ¨¡æ‹Ÿ-MethodInvocation" class="headerlink" title="æ¼”ç¤º2 - æ¨¡æ‹Ÿ MethodInvocation"></a>æ¼”ç¤º2 - æ¨¡æ‹Ÿ MethodInvocation</h4><h5 id="ä»£ç å‚è€ƒ-24"><a href="#ä»£ç å‚è€ƒ-24" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.A18_1</strong></p><h4 id="æ”¶è·ğŸ’¡-29"><a href="#æ”¶è·ğŸ’¡-29" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>proceed() æ–¹æ³•è°ƒç”¨é“¾ä¸­ä¸‹ä¸€ä¸ªç¯ç»•é€šçŸ¥</li><li>æ¯ä¸ªç¯ç»•é€šçŸ¥å†…éƒ¨ç»§ç»­è°ƒç”¨ proceed()</li><li>è°ƒç”¨åˆ°æ²¡æœ‰æ›´å¤šé€šçŸ¥äº†, å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•</li></ol><p>MethodInvocation çš„ç¼–ç¨‹æŠ€å·§åœ¨å®ç°æ‹¦æˆªå™¨ã€è¿‡æ»¤å™¨æ—¶èƒ½ç”¨ä¸Š</p><h3 id="19-åŠ¨æ€é€šçŸ¥è°ƒç”¨"><a href="#19-åŠ¨æ€é€šçŸ¥è°ƒç”¨" class="headerlink" title="19) åŠ¨æ€é€šçŸ¥è°ƒç”¨"></a>19) åŠ¨æ€é€šçŸ¥è°ƒç”¨</h3><h4 id="æ¼”ç¤º-å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨"><a href="#æ¼”ç¤º-å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨" class="headerlink" title="æ¼”ç¤º - å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨"></a>æ¼”ç¤º - å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨</h4><h5 id="ä»£ç å‚è€ƒ-25"><a href="#ä»£ç å‚è€ƒ-25" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.aop.framework.autoproxy.A19</strong></p><h4 id="æ”¶è·ğŸ’¡-30"><a href="#æ”¶è·ğŸ’¡-30" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>é€šè¿‡ proxyFactory çš„ getInterceptorsAndDynamicInterceptionAdvice() å°†å…¶ä»–é€šçŸ¥ç»Ÿä¸€è½¬æ¢ä¸º MethodInterceptor ç¯ç»•é€šçŸ¥</li><li>æ‰€è°“åŠ¨æ€é€šçŸ¥ï¼Œä½“ç°åœ¨ä¸Šé¢æ–¹æ³•çš„ DynamicInterceptionAdvice éƒ¨åˆ†ï¼Œè¿™äº›é€šçŸ¥è°ƒç”¨æ—¶å› ä¸ºè¦ä¸ºé€šçŸ¥æ–¹æ³•ç»‘å®šå‚æ•°ï¼Œè¿˜éœ€å†æ¬¡åˆ©ç”¨åˆ‡ç‚¹è¡¨è¾¾å¼</li><li>åŠ¨æ€é€šçŸ¥è°ƒç”¨å¤æ‚ç¨‹åº¦é«˜ï¼Œæ€§èƒ½è¾ƒä½</li></ol><h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="20-RequestMappingHandlerMapping-ä¸-RequestMappingHandlerAdapter"><a href="#20-RequestMappingHandlerMapping-ä¸-RequestMappingHandlerAdapter" class="headerlink" title="20) RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter"></a>20) RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter</h3><p>RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter ä¿©æ˜¯ä¸€å¯¹ï¼Œåˆ†åˆ«ç”¨æ¥</p><ul><li>å¤„ç† @RequestMapping æ˜ å°„</li><li>è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ã€å¹¶å¤„ç†æ–¹æ³•å‚æ•°ä¸æ–¹æ³•è¿”å›å€¼</li></ul><h4 id="æ¼”ç¤º1-DispatcherServlet-åˆå§‹åŒ–"><a href="#æ¼”ç¤º1-DispatcherServlet-åˆå§‹åŒ–" class="headerlink" title="æ¼”ç¤º1 - DispatcherServlet åˆå§‹åŒ–"></a>æ¼”ç¤º1 - DispatcherServlet åˆå§‹åŒ–</h4><h5 id="ä»£ç å‚è€ƒ-26"><a href="#ä»£ç å‚è€ƒ-26" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a20</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-31"><a href="#æ”¶è·ğŸ’¡-31" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>DispatcherServlet æ˜¯åœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶æ‰§è¡Œåˆå§‹åŒ–, ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ä¿®æ”¹ä¸º Tomcat å¯åŠ¨åå°±åˆå§‹åŒ–</li><li>åœ¨åˆå§‹åŒ–æ—¶ä¼šä» Spring å®¹å™¨ä¸­æ‰¾ä¸€äº› Web éœ€è¦çš„ç»„ä»¶, å¦‚ HandlerMappingã€HandlerAdapter ç­‰ï¼Œå¹¶é€ä¸€è°ƒç”¨å®ƒä»¬çš„åˆå§‹åŒ–</li><li>RequestMappingHandlerMapping åˆå§‹åŒ–æ—¶ï¼Œä¼šæ”¶é›†æ‰€æœ‰ @RequestMapping æ˜ å°„ä¿¡æ¯ï¼Œå°è£…ä¸º Mapï¼Œå…¶ä¸­<ul><li>key æ˜¯ RequestMappingInfo ç±»å‹ï¼ŒåŒ…æ‹¬è¯·æ±‚è·¯å¾„ã€è¯·æ±‚æ–¹æ³•ç­‰ä¿¡æ¯</li><li>value æ˜¯ HandlerMethod ç±»å‹ï¼ŒåŒ…æ‹¬æ§åˆ¶å™¨æ–¹æ³•å¯¹è±¡ã€æ§åˆ¶å™¨å¯¹è±¡</li><li>æœ‰äº†è¿™ä¸ª Mapï¼Œå°±å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå¿«é€Ÿå®Œæˆæ˜ å°„ï¼Œæ‰¾åˆ° HandlerMethod å¹¶ä¸åŒ¹é…çš„æ‹¦æˆªå™¨ä¸€èµ·è¿”å›ç»™ DispatcherServlet</li></ul></li><li>RequestMappingHandlerAdapter åˆå§‹åŒ–æ—¶ï¼Œä¼šå‡†å¤‡ HandlerMethod è°ƒç”¨æ—¶éœ€è¦çš„å„ä¸ªç»„ä»¶ï¼Œå¦‚ï¼š<ul><li>HandlerMethodArgumentResolver è§£ææ§åˆ¶å™¨æ–¹æ³•å‚æ•°</li><li>HandlerMethodReturnValueHandler å¤„ç†æ§åˆ¶å™¨æ–¹æ³•è¿”å›å€¼</li></ul></li></ol><h4 id="æ¼”ç¤º2-è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨"><a href="#æ¼”ç¤º2-è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="æ¼”ç¤º2 - è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨"></a>æ¼”ç¤º2 - è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨</h4><h5 id="ä»£ç å‚è€ƒ-27"><a href="#ä»£ç å‚è€ƒ-27" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a20.TokenArgumentResolver</strong> ï¼Œ<strong>com.itheima.a20.YmlReturnValueHandler</strong></p><h4 id="æ”¶è·ğŸ’¡-32"><a href="#æ”¶è·ğŸ’¡-32" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ä½“ä¼šå‚æ•°è§£æå™¨çš„ä½œç”¨</li><li>ä½“ä¼šè¿”å›å€¼å¤„ç†å™¨çš„ä½œç”¨</li></ol><h3 id="21-å‚æ•°è§£æå™¨"><a href="#21-å‚æ•°è§£æå™¨" class="headerlink" title="21) å‚æ•°è§£æå™¨"></a>21) å‚æ•°è§£æå™¨</h3><h4 id="æ¼”ç¤º-å¸¸è§å‚æ•°è§£æå™¨"><a href="#æ¼”ç¤º-å¸¸è§å‚æ•°è§£æå™¨" class="headerlink" title="æ¼”ç¤º - å¸¸è§å‚æ•°è§£æå™¨"></a>æ¼”ç¤º - å¸¸è§å‚æ•°è§£æå™¨</h4><h5 id="ä»£ç å‚è€ƒ-28"><a href="#ä»£ç å‚è€ƒ-28" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a21</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-33"><a href="#æ”¶è·ğŸ’¡-33" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>åˆæ­¥äº†è§£ RequestMappingHandlerAdapter çš„è°ƒç”¨è¿‡ç¨‹<ol><li>æ§åˆ¶å™¨æ–¹æ³•è¢«å°è£…ä¸º HandlerMethod</li><li>å‡†å¤‡å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢</li><li>å‡†å¤‡ ModelAndViewContainer ç”¨æ¥å­˜å‚¨ä¸­é—´ Model ç»“æœ</li><li>è§£ææ¯ä¸ªå‚æ•°å€¼</li></ol></li><li>è§£æå‚æ•°ä¾èµ–çš„å°±æ˜¯å„ç§å‚æ•°è§£æå™¨ï¼Œå®ƒä»¬éƒ½æœ‰ä¸¤ä¸ªé‡è¦æ–¹æ³•<ul><li>supportsParameter åˆ¤æ–­æ˜¯å¦æ”¯æŒæ–¹æ³•å‚æ•°</li><li>resolveArgument è§£ææ–¹æ³•å‚æ•°</li></ul></li><li>å¸¸è§å‚æ•°çš„è§£æ<ul><li>@RequestParam</li><li>çœç•¥ @RequestParam</li><li>@RequestParam(defaultValue)</li><li>MultipartFile</li><li>@PathVariable</li><li>@RequestHeader</li><li>@CookieValue</li><li>@Value</li><li>HttpServletRequest ç­‰</li><li>@ModelAttribute</li><li>çœç•¥ @ModelAttribute</li><li>@RequestBody</li></ul></li><li>ç»„åˆæ¨¡å¼åœ¨ Spring ä¸­çš„ä½“ç°</li><li>@RequestParam, @CookieValue ç­‰æ³¨è§£ä¸­çš„å‚æ•°åã€é»˜è®¤å€¼, éƒ½å¯ä»¥å†™æˆæ´»çš„, å³ä» ${ } #{ }ä¸­è·å–</li></ol><h3 id="22-å‚æ•°åè§£æ"><a href="#22-å‚æ•°åè§£æ" class="headerlink" title="22) å‚æ•°åè§£æ"></a>22) å‚æ•°åè§£æ</h3><h4 id="æ¼”ç¤º-ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å"><a href="#æ¼”ç¤º-ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å" class="headerlink" title="æ¼”ç¤º - ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å"></a>æ¼”ç¤º - ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å</h4><h5 id="ä»£ç å‚è€ƒ-29"><a href="#ä»£ç å‚è€ƒ-29" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a22.A22</strong></p><h4 id="æ”¶è·ğŸ’¡-34"><a href="#æ”¶è·ğŸ’¡-34" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¦‚æœç¼–è¯‘æ—¶æ·»åŠ äº† -parameters å¯ä»¥ç”Ÿæˆå‚æ•°è¡¨, åå°„æ—¶å°±å¯ä»¥æ‹¿åˆ°å‚æ•°å</li><li>å¦‚æœç¼–è¯‘æ—¶æ·»åŠ äº† -g å¯ä»¥ç”Ÿæˆè°ƒè¯•ä¿¡æ¯, ä½†åˆ†ä¸ºä¸¤ç§æƒ…å†µ<ul><li>æ™®é€šç±», ä¼šåŒ…å«å±€éƒ¨å˜é‡è¡¨, ç”¨ asm å¯ä»¥æ‹¿åˆ°å‚æ•°å</li><li>æ¥å£, ä¸ä¼šåŒ…å«å±€éƒ¨å˜é‡è¡¨, æ— æ³•è·å¾—å‚æ•°å<ul><li>è¿™ä¹Ÿæ˜¯ MyBatis åœ¨å®ç° Mapper æ¥å£æ—¶ä¸ºä½•è¦æä¾› @Param æ³¨è§£æ¥è¾…åŠ©è·å¾—å‚æ•°å</li></ul></li></ul></li></ol><h3 id="23-å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢"><a href="#23-å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢" class="headerlink" title="23) å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢"></a>23) å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢</h3><h4 id="åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°"><a href="#åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°" class="headerlink" title="åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°"></a>åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°</h4><pre><code class="highlight mermaid">classDiagram

Formatter --|&gt; Printer
Formatter --|&gt; Parser

class Converters &#123;
   Set~GenericConverter~
&#125;
class Converter

class ConversionService
class FormattingConversionService

ConversionService &lt;|-- FormattingConversionService
FormattingConversionService o-- Converters

Printer --&gt; Adapter1
Adapter1 --&gt; Converters
Parser --&gt; Adapter2
Adapter2 --&gt; Converters
Converter --&gt; Adapter3
Adapter3 --&gt; Converters

&lt;&lt;interface&gt;&gt; Formatter
&lt;&lt;interface&gt;&gt; Printer
&lt;&lt;interface&gt;&gt; Parser
&lt;&lt;interface&gt;&gt; Converter
&lt;&lt;interface&gt;&gt; ConversionService</code></pre><ul><li>Printer æŠŠå…¶å®ƒç±»å‹è½¬ä¸º String</li><li>Parser æŠŠ String è½¬ä¸ºå…¶å®ƒç±»å‹</li><li>Formatter ç»¼åˆ Printer ä¸ Parser åŠŸèƒ½</li><li>Converter æŠŠç±»å‹ S è½¬ä¸ºç±»å‹ T</li><li>Printerã€Parserã€Converter ç»è¿‡é€‚é…è½¬æ¢æˆ GenericConverter æ”¾å…¥ Converters é›†åˆ</li><li>FormattingConversionService åˆ©ç”¨å…¶å®ƒä»¬å®ç°è½¬æ¢</li></ul><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
classDiagram

Formatter --|&gt; Printer
Formatter --|&gt; Parser

class Converters {
   Set~GenericConverter~
}
class Converter

class ConversionService
class FormattingConversionService

ConversionService &lt;|-- FormattingConversionService
FormattingConversionService o-- Converters

Printer --&gt; Adapter1
Adapter1 --&gt; Converters
Parser --&gt; Adapter2
Adapter2 --&gt; Converters
Converter --&gt; Adapter3
Adapter3 --&gt; Converters

&lt;&lt;interface&gt;&gt; Formatter
&lt;&lt;interface&gt;&gt; Printer
&lt;&lt;interface&gt;&gt; Parser
&lt;&lt;interface&gt;&gt; Converter
&lt;&lt;interface&gt;&gt; ConversionService

  </pre></div><h4 id="åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£"><a href="#åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£" class="headerlink" title="åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£"></a>åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£</h4><pre><code class="highlight mermaid">classDiagram

PropertyEditorRegistry o-- &quot;å¤š&quot; PropertyEditor

&lt;&lt;interface&gt;&gt; PropertyEditorRegistry
&lt;&lt;interface&gt;&gt; PropertyEditor</code></pre><ul><li>PropertyEditor æŠŠ String ä¸å…¶å®ƒç±»å‹ç›¸äº’è½¬æ¢</li><li>PropertyEditorRegistry å¯ä»¥æ³¨å†Œå¤šä¸ª PropertyEditor å¯¹è±¡</li><li>ä¸ç¬¬ä¸€å¥—æ¥å£ç›´æ¥å¯ä»¥é€šè¿‡ FormatterPropertyEditorAdapter æ¥è¿›è¡Œé€‚é…</li></ul><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
classDiagram

PropertyEditorRegistry o-- &quot;å¤š&quot; PropertyEditor

&lt;&lt;interface&gt;&gt; PropertyEditorRegistry
&lt;&lt;interface&gt;&gt; PropertyEditor

  </pre></div><h4 id="é«˜å±‚æ¥å£ä¸å®ç°"><a href="#é«˜å±‚æ¥å£ä¸å®ç°" class="headerlink" title="é«˜å±‚æ¥å£ä¸å®ç°"></a>é«˜å±‚æ¥å£ä¸å®ç°</h4><pre><code class="highlight mermaid">classDiagram
TypeConverter &lt;|-- SimpleTypeConverter
TypeConverter &lt;|-- BeanWrapperImpl
TypeConverter &lt;|-- DirectFieldAccessor
TypeConverter &lt;|-- ServletRequestDataBinder

SimpleTypeConverter --&gt; TypeConverterDelegate
BeanWrapperImpl --&gt; TypeConverterDelegate
DirectFieldAccessor --&gt; TypeConverterDelegate
ServletRequestDataBinder --&gt; TypeConverterDelegate

TypeConverterDelegate --&gt; ConversionService
TypeConverterDelegate --&gt; PropertyEditorRegistry

&lt;&lt;interface&gt;&gt; TypeConverter
&lt;&lt;interface&gt;&gt; ConversionService
&lt;&lt;interface&gt;&gt; PropertyEditorRegistry</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
classDiagram
TypeConverter &lt;|-- SimpleTypeConverter
TypeConverter &lt;|-- BeanWrapperImpl
TypeConverter &lt;|-- DirectFieldAccessor
TypeConverter &lt;|-- ServletRequestDataBinder

SimpleTypeConverter --&gt; TypeConverterDelegate
BeanWrapperImpl --&gt; TypeConverterDelegate
DirectFieldAccessor --&gt; TypeConverterDelegate
ServletRequestDataBinder --&gt; TypeConverterDelegate

TypeConverterDelegate --&gt; ConversionService
TypeConverterDelegate --&gt; PropertyEditorRegistry

&lt;&lt;interface&gt;&gt; TypeConverter
&lt;&lt;interface&gt;&gt; ConversionService
&lt;&lt;interface&gt;&gt; PropertyEditorRegistry

  </pre></div><ul><li>å®ƒä»¬éƒ½å®ç°äº† TypeConverter è¿™ä¸ªé«˜å±‚è½¬æ¢æ¥å£ï¼Œåœ¨è½¬æ¢æ—¶ï¼Œä¼šç”¨åˆ° TypeConverter Delegate å§”æ´¾ConversionService ä¸ PropertyEditorRegistry çœŸæ­£æ‰§è¡Œè½¬æ¢ï¼ˆFacade é—¨é¢æ¨¡å¼ï¼‰<ul><li>é¦–å…ˆçœ‹æ˜¯å¦æœ‰è‡ªå®šä¹‰è½¬æ¢å™¨, @InitBinder æ·»åŠ çš„å³å±äºè¿™ç§ (ç”¨äº†é€‚é…å™¨æ¨¡å¼æŠŠ Formatter è½¬ä¸ºéœ€è¦çš„ PropertyEditor)</li><li>å†çœ‹æœ‰æ²¡æœ‰ ConversionService è½¬æ¢</li><li>å†åˆ©ç”¨é»˜è®¤çš„ PropertyEditor è½¬æ¢</li><li>æœ€åæœ‰ä¸€äº›ç‰¹æ®Šå¤„ç†</li></ul></li><li>SimpleTypeConverter ä»…åšç±»å‹è½¬æ¢</li><li>BeanWrapperImpl ä¸º bean çš„å±æ€§èµ‹å€¼ï¼Œå½“éœ€è¦æ—¶åšç±»å‹è½¬æ¢ï¼Œèµ° Property</li><li>DirectFieldAccessor ä¸º bean çš„å±æ€§èµ‹å€¼ï¼Œå½“éœ€è¦æ—¶åšç±»å‹è½¬æ¢ï¼Œèµ° Field</li><li>ServletRequestDataBinder ä¸º bean çš„å±æ€§æ‰§è¡Œç»‘å®šï¼Œå½“éœ€è¦æ—¶åšç±»å‹è½¬æ¢ï¼Œæ ¹æ® directFieldAccess é€‰æ‹©èµ° Property è¿˜æ˜¯ Fieldï¼Œå…·å¤‡æ ¡éªŒä¸è·å–æ ¡éªŒç»“æœåŠŸèƒ½</li></ul><h4 id="æ¼”ç¤º1-ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š"><a href="#æ¼”ç¤º1-ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š" class="headerlink" title="æ¼”ç¤º1 - ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š"></a>æ¼”ç¤º1 - ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š</h4><h5 id="ä»£ç å‚è€ƒ-30"><a href="#ä»£ç å‚è€ƒ-30" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a23</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-35"><a href="#æ”¶è·ğŸ’¡-35" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>åŸºæœ¬çš„ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®šç”¨æ³•</p><ul><li>SimpleTypeConverter</li><li>BeanWrapperImpl</li><li>DirectFieldAccessor</li><li>ServletRequestDataBinder</li></ul><h4 id="æ¼”ç¤º2-æ•°æ®ç»‘å®šå·¥å‚"><a href="#æ¼”ç¤º2-æ•°æ®ç»‘å®šå·¥å‚" class="headerlink" title="æ¼”ç¤º2 - æ•°æ®ç»‘å®šå·¥å‚"></a>æ¼”ç¤º2 - æ•°æ®ç»‘å®šå·¥å‚</h4><h5 id="ä»£ç å‚è€ƒ-31"><a href="#ä»£ç å‚è€ƒ-31" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a23.TestServletDataBinderFactory</strong></p><h4 id="æ”¶è·ğŸ’¡-36"><a href="#æ”¶è·ğŸ’¡-36" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>ServletRequestDataBinderFactory çš„ç”¨æ³•å’Œæ‰©å±•ç‚¹</p><ol><li>å¯ä»¥è§£ææ§åˆ¶å™¨çš„ @InitBinder æ ‡æ³¨æ–¹æ³•ä½œä¸ºæ‰©å±•ç‚¹ï¼Œæ·»åŠ è‡ªå®šä¹‰è½¬æ¢å™¨<ul><li>æ§åˆ¶å™¨ç§æœ‰èŒƒå›´</li></ul></li><li>å¯ä»¥é€šè¿‡ ConfigurableWebBindingInitializer é…ç½® ConversionService ä½œä¸ºæ‰©å±•ç‚¹ï¼Œæ·»åŠ è‡ªå®šä¹‰è½¬æ¢å™¨<ul><li>å…¬å…±èŒƒå›´</li></ul></li><li>åŒæ—¶åŠ äº† @InitBinder å’Œ ConversionService çš„è½¬æ¢ä¼˜å…ˆçº§<ol><li>ä¼˜å…ˆé‡‡ç”¨ @InitBinder çš„è½¬æ¢å™¨</li><li>å…¶æ¬¡ä½¿ç”¨ ConversionService çš„è½¬æ¢å™¨</li><li>ä½¿ç”¨é»˜è®¤è½¬æ¢å™¨</li><li>ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚æœ‰å‚æ„é€ ï¼‰</li></ol></li></ol><h4 id="æ¼”ç¤º3-è·å–æ³›å‹å‚æ•°"><a href="#æ¼”ç¤º3-è·å–æ³›å‹å‚æ•°" class="headerlink" title="æ¼”ç¤º3 - è·å–æ³›å‹å‚æ•°"></a>æ¼”ç¤º3 - è·å–æ³›å‹å‚æ•°</h4><h5 id="ä»£ç å‚è€ƒ-32"><a href="#ä»£ç å‚è€ƒ-32" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a23.sub</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-37"><a href="#æ”¶è·ğŸ’¡-37" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>java api è·å–æ³›å‹å‚æ•°</li><li>spring api è·å–æ³›å‹å‚æ•°</li></ol><h3 id="24-ControllerAdvice-ä¹‹-InitBinder"><a href="#24-ControllerAdvice-ä¹‹-InitBinder" class="headerlink" title="24) @ControllerAdvice ä¹‹ @InitBinder"></a>24) @ControllerAdvice ä¹‹ @InitBinder</h3><h4 id="æ¼”ç¤º-å‡†å¤‡-InitBinder"><a href="#æ¼”ç¤º-å‡†å¤‡-InitBinder" class="headerlink" title="æ¼”ç¤º - å‡†å¤‡ @InitBinder"></a>æ¼”ç¤º - å‡†å¤‡ @InitBinder</h4><p><strong>å‡†å¤‡ @InitBinder</strong> åœ¨æ•´ä¸ª HandlerAdapter è°ƒç”¨è¿‡ç¨‹ä¸­æ‰€å¤„çš„ä½ç½®</p><pre><code class="highlight mermaid">sequenceDiagram
participant adapter as HandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers 
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer
rect rgb(200, 150, 255)
adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
end
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 

adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter:</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram
participant adapter as HandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers 
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer
rect rgb(200, 150, 255)
adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
end
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 

adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter: 

  </pre></div><ul><li>RequestMappingHandlerAdapter åœ¨å›¾ä¸­ç¼©å†™ä¸º HandlerAdapter</li><li>HandlerMethodArgumentResolverComposite åœ¨å›¾ä¸­ç¼©å†™ä¸º ArgumentResolvers</li><li>HandlerMethodReturnValueHandlerComposite åœ¨å›¾ä¸­ç¼©å†™ä¸º ReturnValueHandlers</li></ul><h4 id="æ”¶è·ğŸ’¡-38"><a href="#æ”¶è·ğŸ’¡-38" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>RequestMappingHandlerAdapter åˆå§‹åŒ–æ—¶ä¼šè§£æ @ControllerAdvice ä¸­çš„ @InitBinder æ–¹æ³•</li><li>RequestMappingHandlerAdapter ä¼šä»¥ç±»ä¸ºå•ä½ï¼Œåœ¨è¯¥ç±»é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè§£ææ­¤ç±»çš„ @InitBinder æ–¹æ³•</li><li>ä»¥ä¸Šä¸¤ç§ @InitBinder çš„è§£æç»“æœéƒ½ä¼šç¼“å­˜æ¥é¿å…é‡å¤è§£æ</li><li>æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šç»¼åˆåˆ©ç”¨æœ¬ç±»çš„ @InitBinder æ–¹æ³•å’Œ @ControllerAdvice ä¸­çš„ @InitBinder æ–¹æ³•åˆ›å»ºç»‘å®šå·¥å‚</li></ol><h3 id="25-æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹"><a href="#25-æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹" class="headerlink" title="25) æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹"></a>25) æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹</h3><h4 id="å›¾1"><a href="#å›¾1" class="headerlink" title="å›¾1"></a>å›¾1</h4><pre><code class="highlight mermaid">classDiagram
class ServletInvocableHandlerMethod &#123;
	+invokeAndHandle(ServletWebRequest,ModelAndViewContainer)
&#125;
HandlerMethod &lt;|-- ServletInvocableHandlerMethod
HandlerMethod o-- bean
HandlerMethod o-- method
ServletInvocableHandlerMethod o-- WebDataBinderFactory
ServletInvocableHandlerMethod o-- ParameterNameDiscoverer
ServletInvocableHandlerMethod o-- HandlerMethodArgumentResolverComposite
ServletInvocableHandlerMethod o-- HandlerMethodReturnValueHandlerComposite</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
classDiagram
class ServletInvocableHandlerMethod {
	+invokeAndHandle(ServletWebRequest,ModelAndViewContainer)
}
HandlerMethod &lt;|-- ServletInvocableHandlerMethod
HandlerMethod o-- bean
HandlerMethod o-- method
ServletInvocableHandlerMethod o-- WebDataBinderFactory
ServletInvocableHandlerMethod o-- ParameterNameDiscoverer
ServletInvocableHandlerMethod o-- HandlerMethodArgumentResolverComposite
ServletInvocableHandlerMethod o-- HandlerMethodReturnValueHandlerComposite

  </pre></div><p>HandlerMethod éœ€è¦</p><ul><li>bean å³æ˜¯å“ªä¸ª Controller</li><li>method å³æ˜¯ Controller ä¸­çš„å“ªä¸ªæ–¹æ³•</li></ul><p>ServletInvocableHandlerMethod éœ€è¦</p><ul><li>WebDataBinderFactory è´Ÿè´£å¯¹è±¡ç»‘å®šã€ç±»å‹è½¬æ¢</li><li>ParameterNameDiscoverer è´Ÿè´£å‚æ•°åè§£æ</li><li>HandlerMethodArgumentResolverComposite è´Ÿè´£è§£æå‚æ•°</li><li>HandlerMethodReturnValueHandlerComposite è´Ÿè´£å¤„ç†è¿”å›å€¼</li></ul><h4 id="å›¾2"><a href="#å›¾2" class="headerlink" title="å›¾2"></a>å›¾2</h4><pre><code class="highlight mermaid">sequenceDiagram
participant adapter as RequestMappingHandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant container as ModelAndViewContainer
adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter:</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram
participant adapter as RequestMappingHandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant container as ModelAndViewContainer
adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 

  </pre></div><h4 id="å›¾3"><a href="#å›¾3" class="headerlink" title="å›¾3"></a>å›¾3</h4><pre><code class="highlight mermaid">sequenceDiagram
participant adapter as RequestMappingHandlerAdapter
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer

adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”Ÿæˆæ¨¡å‹æ•°æ®
container --&gt;&gt; ar: 
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter:</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram
participant adapter as RequestMappingHandlerAdapter
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer

adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”Ÿæˆæ¨¡å‹æ•°æ®
container --&gt;&gt; ar: 
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter: 

  </pre></div><h3 id="26-ControllerAdvice-ä¹‹-ModelAttribute"><a href="#26-ControllerAdvice-ä¹‹-ModelAttribute" class="headerlink" title="26) @ControllerAdvice ä¹‹ @ModelAttribute"></a>26) @ControllerAdvice ä¹‹ @ModelAttribute</h3><h4 id="æ¼”ç¤º-å‡†å¤‡-ModelAttribute"><a href="#æ¼”ç¤º-å‡†å¤‡-ModelAttribute" class="headerlink" title="æ¼”ç¤º - å‡†å¤‡ @ModelAttribute"></a>æ¼”ç¤º - å‡†å¤‡ @ModelAttribute</h4><h5 id="ä»£ç å‚è€ƒ-33"><a href="#ä»£ç å‚è€ƒ-33" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a26</strong> åŒ…</p><p><strong>å‡†å¤‡ @ModelAttribute</strong> åœ¨æ•´ä¸ª HandlerAdapter è°ƒç”¨è¿‡ç¨‹ä¸­æ‰€å¤„çš„ä½ç½®</p><pre><code class="highlight mermaid">sequenceDiagram
participant adapter as HandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers 
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer

adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
rect rgb(200, 150, 255)
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 
end
adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter:</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram
participant adapter as HandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers 
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer

adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
rect rgb(200, 150, 255)
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 
end
adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter:  

  </pre></div><h4 id="æ”¶è·ğŸ’¡-39"><a href="#æ”¶è·ğŸ’¡-39" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>RequestMappingHandlerAdapter åˆå§‹åŒ–æ—¶ä¼šè§£æ @ControllerAdvice ä¸­çš„ @ModelAttribute æ–¹æ³•</li><li>RequestMappingHandlerAdapter ä¼šä»¥ç±»ä¸ºå•ä½ï¼Œåœ¨è¯¥ç±»é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œè§£ææ­¤ç±»çš„ @ModelAttribute æ–¹æ³•</li><li>ä»¥ä¸Šä¸¤ç§ @ModelAttribute çš„è§£æç»“æœéƒ½ä¼šç¼“å­˜æ¥é¿å…é‡å¤è§£æ</li><li>æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šç»¼åˆåˆ©ç”¨æœ¬ç±»çš„ @ModelAttribute æ–¹æ³•å’Œ @ControllerAdvice ä¸­çš„ @ModelAttribute æ–¹æ³•åˆ›å»ºæ¨¡å‹å·¥å‚</li></ol><h3 id="27-è¿”å›å€¼å¤„ç†å™¨"><a href="#27-è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="27) è¿”å›å€¼å¤„ç†å™¨"></a>27) è¿”å›å€¼å¤„ç†å™¨</h3><h4 id="æ¼”ç¤º-å¸¸è§è¿”å›å€¼å¤„ç†å™¨"><a href="#æ¼”ç¤º-å¸¸è§è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="æ¼”ç¤º - å¸¸è§è¿”å›å€¼å¤„ç†å™¨"></a>æ¼”ç¤º - å¸¸è§è¿”å›å€¼å¤„ç†å™¨</h4><h5 id="ä»£ç å‚è€ƒ-34"><a href="#ä»£ç å‚è€ƒ-34" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a27</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-40"><a href="#æ”¶è·ğŸ’¡-40" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å¸¸è§çš„è¿”å›å€¼å¤„ç†å™¨<ul><li>ModelAndViewï¼Œåˆ†åˆ«è·å–å…¶æ¨¡å‹å’Œè§†å›¾åï¼Œæ”¾å…¥ ModelAndViewContainer</li><li>è¿”å›å€¼ç±»å‹ä¸º String æ—¶ï¼ŒæŠŠå®ƒå½“åšè§†å›¾åï¼Œæ”¾å…¥ ModelAndViewContainer</li><li>è¿”å›å€¼æ·»åŠ äº† @ModelAttribute æ³¨è§£æ—¶ï¼Œå°†è¿”å›å€¼ä½œä¸ºæ¨¡å‹ï¼Œæ”¾å…¥ ModelAndViewContainer<ul><li>æ­¤æ—¶éœ€æ‰¾åˆ°é»˜è®¤è§†å›¾å</li></ul></li><li>è¿”å›å€¼çœç•¥ @ModelAttribute æ³¨è§£ä¸”è¿”å›éç®€å•ç±»å‹æ—¶ï¼Œå°†è¿”å›å€¼ä½œä¸ºæ¨¡å‹ï¼Œæ”¾å…¥ ModelAndViewContainer<ul><li>æ­¤æ—¶éœ€æ‰¾åˆ°é»˜è®¤è§†å›¾å</li></ul></li><li>è¿”å›å€¼ç±»å‹ä¸º ResponseEntity æ—¶<ul><li>æ­¤æ—¶èµ° MessageConverterï¼Œå¹¶è®¾ç½® ModelAndViewContainer.requestHandled ä¸º true</li></ul></li><li>è¿”å›å€¼ç±»å‹ä¸º HttpHeaders æ—¶<ul><li>ä¼šè®¾ç½® ModelAndViewContainer.requestHandled ä¸º true</li></ul></li><li>è¿”å›å€¼æ·»åŠ äº† @ResponseBody æ³¨è§£æ—¶<ul><li>æ­¤æ—¶èµ° MessageConverterï¼Œå¹¶è®¾ç½® ModelAndViewContainer.requestHandled ä¸º true</li></ul></li></ul></li><li>ç»„åˆæ¨¡å¼åœ¨ Spring ä¸­çš„ä½“ç° + 1</li></ol><h3 id="28-MessageConverter"><a href="#28-MessageConverter" class="headerlink" title="28) MessageConverter"></a>28) MessageConverter</h3><h4 id="æ¼”ç¤º-MessageConverter-çš„ä½œç”¨"><a href="#æ¼”ç¤º-MessageConverter-çš„ä½œç”¨" class="headerlink" title="æ¼”ç¤º - MessageConverter çš„ä½œç”¨"></a>æ¼”ç¤º - MessageConverter çš„ä½œç”¨</h4><h5 id="ä»£ç å‚è€ƒ-35"><a href="#ä»£ç å‚è€ƒ-35" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a28.A28</strong></p><h4 id="æ”¶è·ğŸ’¡-41"><a href="#æ”¶è·ğŸ’¡-41" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>MessageConverter çš„ä½œç”¨<ul><li>@ResponseBody æ˜¯è¿”å›å€¼å¤„ç†å™¨è§£æçš„</li><li>ä½†å…·ä½“è½¬æ¢å·¥ä½œæ˜¯ MessageConverter åšçš„</li></ul></li><li>å¦‚ä½•é€‰æ‹© MediaType<ul><li>é¦–å…ˆçœ‹ @RequestMapping ä¸Šæœ‰æ²¡æœ‰æŒ‡å®š</li><li>å…¶æ¬¡çœ‹ request çš„ Accept å¤´æœ‰æ²¡æœ‰æŒ‡å®š</li><li>æœ€åæŒ‰ MessageConverter çš„é¡ºåº, è°èƒ½è°å…ˆè½¬æ¢</li></ul></li></ol><h3 id="29-ControllerAdvice-ä¹‹-ResponseBodyAdvice"><a href="#29-ControllerAdvice-ä¹‹-ResponseBodyAdvice" class="headerlink" title="29) @ControllerAdvice ä¹‹ ResponseBodyAdvice"></a>29) @ControllerAdvice ä¹‹ ResponseBodyAdvice</h3><h4 id="æ¼”ç¤º-ResponseBodyAdvice-å¢å¼º"><a href="#æ¼”ç¤º-ResponseBodyAdvice-å¢å¼º" class="headerlink" title="æ¼”ç¤º - ResponseBodyAdvice å¢å¼º"></a>æ¼”ç¤º - ResponseBodyAdvice å¢å¼º</h4><h5 id="ä»£ç å‚è€ƒ-36"><a href="#ä»£ç å‚è€ƒ-36" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a29</strong> åŒ…</p><p><strong>ResponseBodyAdvice å¢å¼º</strong> åœ¨æ•´ä¸ª HandlerAdapter è°ƒç”¨è¿‡ç¨‹ä¸­æ‰€å¤„çš„ä½ç½®</p><pre><code class="highlight mermaid">sequenceDiagram
participant adapter as HandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers 
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer

adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 
adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rect rgb(200, 150, 255)
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
end
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter:</code></pre><div class="mermaid-wrap"><pre class="mermaid-src" hidden>
    
sequenceDiagram
participant adapter as HandlerAdapter
participant bf as WebDataBinderFactory
participant mf as ModelFactory
participant ihm as ServletInvocableHandlerMethod
participant ar as ArgumentResolvers 
participant rh as ReturnValueHandlers
participant container as ModelAndViewContainer

adapter -&gt;&gt; +bf: å‡†å¤‡ @InitBinder
bf --&gt;&gt; -adapter: 
adapter -&gt;&gt; +mf: å‡†å¤‡ @ModelAttribute
mf -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®
container --&gt;&gt; -mf: 
mf --&gt;&gt; -adapter: 
adapter -&gt;&gt; +ihm: invokeAndHandle
ihm -&gt;&gt; +ar: è·å– args
ar -&gt;&gt; ar: æœ‰çš„è§£æå™¨æ¶‰åŠ RequestBodyAdvice
ar -&gt;&gt; container: æœ‰çš„è§£æå™¨æ¶‰åŠæ•°æ®ç»‘å®šç”ŸæˆModelæ•°æ®
ar --&gt;&gt; -ihm: args
ihm -&gt;&gt; ihm: method.invoke(bean,args) å¾—åˆ° returnValue
ihm -&gt;&gt; +rh: å¤„ç† returnValue
rect rgb(200, 150, 255)
rh -&gt;&gt; rh: æœ‰çš„å¤„ç†å™¨æ¶‰åŠ ResponseBodyAdvice
end
rh -&gt;&gt; +container: æ·»åŠ Modelæ•°æ®,å¤„ç†è§†å›¾å,æ˜¯å¦æ¸²æŸ“ç­‰
container --&gt;&gt; -rh: 
rh --&gt;&gt; -ihm: 
ihm --&gt;&gt; -adapter: 
adapter -&gt;&gt; +container: è·å– ModelAndView
container --&gt;&gt; -adapter: 

  </pre></div><h4 id="æ”¶è·ğŸ’¡-42"><a href="#æ”¶è·ğŸ’¡-42" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ResponseBodyAdvice è¿”å›å“åº”ä½“å‰åŒ…è£…</li></ol><h3 id="30-å¼‚å¸¸è§£æå™¨"><a href="#30-å¼‚å¸¸è§£æå™¨" class="headerlink" title="30) å¼‚å¸¸è§£æå™¨"></a>30) å¼‚å¸¸è§£æå™¨</h3><h4 id="æ¼”ç¤º-ExceptionHandlerExceptionResolver"><a href="#æ¼”ç¤º-ExceptionHandlerExceptionResolver" class="headerlink" title="æ¼”ç¤º - ExceptionHandlerExceptionResolver"></a>æ¼”ç¤º - ExceptionHandlerExceptionResolver</h4><h5 id="ä»£ç å‚è€ƒ-37"><a href="#ä»£ç å‚è€ƒ-37" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a30.A30</strong></p><h4 id="æ”¶è·ğŸ’¡-43"><a href="#æ”¶è·ğŸ’¡-43" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å®ƒèƒ½å¤Ÿé‡ç”¨å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ï¼Œå®ç°ç»„ä»¶é‡ç”¨</li><li>å®ƒèƒ½å¤Ÿæ”¯æŒåµŒå¥—å¼‚å¸¸</li></ol><h3 id="31-ControllerAdvice-ä¹‹-ExceptionHandler"><a href="#31-ControllerAdvice-ä¹‹-ExceptionHandler" class="headerlink" title="31) @ControllerAdvice ä¹‹ @ExceptionHandler"></a>31) @ControllerAdvice ä¹‹ @ExceptionHandler</h3><h4 id="æ¼”ç¤º-å‡†å¤‡-ExceptionHandler"><a href="#æ¼”ç¤º-å‡†å¤‡-ExceptionHandler" class="headerlink" title="æ¼”ç¤º - å‡†å¤‡ @ExceptionHandler"></a>æ¼”ç¤º - å‡†å¤‡ @ExceptionHandler</h4><h5 id="ä»£ç å‚è€ƒ-38"><a href="#ä»£ç å‚è€ƒ-38" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a31</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-44"><a href="#æ”¶è·ğŸ’¡-44" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ExceptionHandlerExceptionResolver åˆå§‹åŒ–æ—¶ä¼šè§£æ @ControllerAdvice ä¸­çš„ @ExceptionHandler æ–¹æ³•</li><li>ExceptionHandlerExceptionResolver ä¼šä»¥ç±»ä¸ºå•ä½ï¼Œåœ¨è¯¥ç±»é¦–æ¬¡å¤„ç†å¼‚å¸¸æ—¶ï¼Œè§£ææ­¤ç±»çš„ @ExceptionHandler æ–¹æ³•</li><li>ä»¥ä¸Šä¸¤ç§ @ExceptionHandler çš„è§£æç»“æœéƒ½ä¼šç¼“å­˜æ¥é¿å…é‡å¤è§£æ</li></ol><h3 id="32-Tomcat-å¼‚å¸¸å¤„ç†"><a href="#32-Tomcat-å¼‚å¸¸å¤„ç†" class="headerlink" title="32) Tomcat å¼‚å¸¸å¤„ç†"></a>32) Tomcat å¼‚å¸¸å¤„ç†</h3><ul><li><p>æˆ‘ä»¬çŸ¥é“ @ExceptionHandler åªèƒ½å¤„ç†å‘ç”Ÿåœ¨ mvc æµç¨‹ä¸­çš„å¼‚å¸¸ï¼Œä¾‹å¦‚æ§åˆ¶å™¨å†…ã€æ‹¦æˆªå™¨å†…ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯ Filter å‡ºç°äº†å¼‚å¸¸ï¼Œå¦‚ä½•è¿›è¡Œå¤„ç†å‘¢ï¼Ÿ</p></li><li><p>åœ¨ Spring Boot ä¸­ï¼Œæ˜¯è¿™ä¹ˆå®ç°çš„ï¼š</p><ol><li>å› ä¸ºå†…åµŒäº† Tomcat å®¹å™¨ï¼Œå› æ­¤å¯ä»¥é…ç½® Tomcat çš„é”™è¯¯é¡µé¢ï¼ŒFilter ä¸ é”™è¯¯é¡µé¢ä¹‹é—´æ˜¯é€šè¿‡è¯·æ±‚è½¬å‘è·³è½¬çš„ï¼Œå¯ä»¥åœ¨è¿™é‡Œåšæ‰‹è„š</li><li>å…ˆé€šè¿‡ ErrorPageRegistrarBeanPostProcessor è¿™ä¸ªåå¤„ç†å™¨é…ç½®é”™è¯¯é¡µé¢åœ°å€ï¼Œé»˜è®¤ä¸º <code>/error</code> ä¹Ÿå¯ä»¥é€šè¿‡ <code>$&#123;server.error.path&#125;</code> è¿›è¡Œé…ç½®</li><li>å½“ Filter å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¸ä¼šèµ° Spring æµç¨‹ï¼Œä½†ä¼šèµ° Tomcat çš„é”™è¯¯å¤„ç†ï¼Œäºæ˜¯å°±å¸Œæœ›è½¬å‘è‡³ <code>/error</code> è¿™ä¸ªåœ°å€<ul><li>å½“ç„¶ï¼Œå¦‚æœæ²¡æœ‰ @ExceptionHandlerï¼Œé‚£ä¹ˆæœ€ç»ˆä¹Ÿä¼šèµ°åˆ° Tomcat çš„é”™è¯¯å¤„ç†</li></ul></li><li>Spring Boot åˆæä¾›äº†ä¸€ä¸ª BasicErrorControllerï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ ‡å‡† @Controllerï¼Œ@RequestMapping é…ç½®ä¸º <code>/error</code>ï¼Œæ‰€ä»¥å¤„ç†å¼‚å¸¸çš„èŒè´£å°±åˆå›åˆ°äº† Spring</li><li>å¼‚å¸¸ä¿¡æ¯ç”±äºä¼šè¢« Tomcat æ”¾å…¥ request ä½œç”¨åŸŸï¼Œå› æ­¤ BasicErrorController é‡Œä¹Ÿèƒ½è·å–åˆ°</li><li>å…·ä½“å¼‚å¸¸ä¿¡æ¯ä¼šç”± DefaultErrorAttributes å°è£…å¥½</li><li>BasicErrorController é€šè¿‡ Accept å¤´åˆ¤æ–­éœ€è¦ç”Ÿæˆå“ªç§ MediaType çš„å“åº”<ul><li>å¦‚æœè¦çš„ä¸æ˜¯ text&#x2F;htmlï¼Œèµ° MessageConverter æµç¨‹</li><li>å¦‚æœéœ€è¦ text&#x2F;htmlï¼Œèµ° mvc æµç¨‹ï¼Œæ­¤æ—¶åˆåˆ†ä¸¤ç§æƒ…å†µ<ul><li>é…ç½®äº† ErrorViewResolverï¼Œæ ¹æ®çŠ¶æ€ç å»æ‰¾ View</li><li>æ²¡é…ç½®æˆ–æ²¡æ‰¾åˆ°ï¼Œç”¨ BeanNameViewResolver æ ¹æ®ä¸€ä¸ªå›ºå®šä¸º error çš„åå­—æ‰¾åˆ° Viewï¼Œå³æ‰€è°“çš„ WhitelabelErrorView</li></ul></li></ul></li></ol></li></ul><blockquote><p><em><strong>è¯„ä»·</strong></em></p><ul><li>ä¸€ä¸ªé”™è¯¯å¤„ç†æå¾—è¿™ä¹ˆå¤æ‚ï¼Œå°±é—®æ¶å¿ƒä¸ï¼Ÿ</li></ul></blockquote><h4 id="æ¼”ç¤º1-é”™è¯¯é¡µå¤„ç†"><a href="#æ¼”ç¤º1-é”™è¯¯é¡µå¤„ç†" class="headerlink" title="æ¼”ç¤º1 - é”™è¯¯é¡µå¤„ç†"></a>æ¼”ç¤º1 - é”™è¯¯é¡µå¤„ç†</h4><h5 id="å…³é”®ä»£ç -1"><a href="#å…³é”®ä»£ç -1" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸ä¿®æ”¹äº† Tomcat æœåŠ¡å™¨é»˜è®¤é”™è¯¯åœ°å€, å‡ºé”™æ—¶ä½¿ç”¨è¯·æ±‚è½¬å‘æ–¹å¼è·³è½¬</span></span><br><span class="line"><span class="keyword">public</span> ErrorPageRegistrar <span class="title function_">errorPageRegistrar</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> webServerFactory -&gt; webServerFactory.addErrorPages(<span class="keyword">new</span> <span class="title class_">ErrorPage</span>(<span class="string">&quot;/error&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸TomcatServletWebServerFactory åˆå§‹åŒ–å‰ç”¨å®ƒå¢å¼º, æ³¨å†Œæ‰€æœ‰ ErrorPageRegistrar</span></span><br><span class="line"><span class="keyword">public</span> ErrorPageRegistrarBeanPostProcessor <span class="title function_">errorPageRegistrarBeanPostProcessor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ErrorPageRegistrarBeanPostProcessor</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-45"><a href="#æ”¶è·ğŸ’¡-45" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Tomcat çš„é”™è¯¯é¡µå¤„ç†æ‰‹æ®µ</li></ol><h4 id="æ¼”ç¤º2-BasicErrorController"><a href="#æ¼”ç¤º2-BasicErrorController" class="headerlink" title="æ¼”ç¤º2 - BasicErrorController"></a>æ¼”ç¤º2 - BasicErrorController</h4><h5 id="å…³é”®ä»£ç -2"><a href="#å…³é”®ä»£ç -2" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸ErrorProperties å°è£…ç¯å¢ƒé”®å€¼, ErrorAttributes æ§åˆ¶æœ‰å“ªäº›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> BasicErrorController <span class="title function_">basicErrorController</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ErrorProperties</span> <span class="variable">errorProperties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ErrorProperties</span>();</span><br><span class="line">    errorProperties.setIncludeException(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BasicErrorController</span>(<span class="keyword">new</span> <span class="title class_">DefaultErrorAttributes</span>(), errorProperties);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸åç§°ä¸º error çš„è§†å›¾, ä½œä¸º BasicErrorController çš„ text/html å“åº”ç»“æœ</span></span><br><span class="line"><span class="keyword">public</span> View <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">View</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(</span></span><br><span class="line"><span class="params">            Map&lt;String, ?&gt; model, </span></span><br><span class="line"><span class="params">            HttpServletRequest request, </span></span><br><span class="line"><span class="params">            HttpServletResponse response</span></span><br><span class="line"><span class="params">        )</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            System.out.println(model);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;h3&gt;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                    &quot;&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// â¬…ï¸æ”¶é›†å®¹å™¨ä¸­æ‰€æœ‰ View å¯¹è±¡, bean çš„åå­—ä½œä¸ºè§†å›¾å</span></span><br><span class="line"><span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanNameViewResolver</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-46"><a href="#æ”¶è·ğŸ’¡-46" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>Spring Boot ä¸­ BasicErrorController å¦‚ä½•å·¥ä½œ</li></ol><h3 id="33-BeanNameUrlHandlerMapping-ä¸-SimpleControllerHandlerAdapter"><a href="#33-BeanNameUrlHandlerMapping-ä¸-SimpleControllerHandlerAdapter" class="headerlink" title="33) BeanNameUrlHandlerMapping ä¸ SimpleControllerHandlerAdapter"></a>33) BeanNameUrlHandlerMapping ä¸ SimpleControllerHandlerAdapter</h3><h4 id="æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"><a href="#æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨" class="headerlink" title="æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"></a>æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</h4><h5 id="å…³é”®ä»£ç -3"><a href="#å…³é”®ä»£ç -3" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> BeanNameUrlHandlerMapping <span class="title function_">beanNameUrlHandlerMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanNameUrlHandlerMapping</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleControllerHandlerAdapter <span class="title function_">simpleControllerHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleControllerHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/c3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Controller <span class="title function_">controller3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (request, response) -&gt; &#123;</span><br><span class="line">        response.getWriter().print(<span class="string">&quot;this is c3&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-47"><a href="#æ”¶è·ğŸ’¡-47" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>BeanNameUrlHandlerMappingï¼Œä»¥ &#x2F; å¼€å¤´çš„ bean çš„åå­—ä¼šè¢«å½“ä½œæ˜ å°„è·¯å¾„</li><li>è¿™äº› bean æœ¬èº«å½“ä½œ handlerï¼Œè¦æ±‚å®ç° Controller æ¥å£</li><li>SimpleControllerHandlerAdapterï¼Œè°ƒç”¨ handler</li><li>æ¨¡æ‹Ÿå®ç°è¿™ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</li></ol><h3 id="34-RouterFunctionMapping-ä¸-HandlerFunctionAdapter"><a href="#34-RouterFunctionMapping-ä¸-HandlerFunctionAdapter" class="headerlink" title="34) RouterFunctionMapping ä¸ HandlerFunctionAdapter"></a>34) RouterFunctionMapping ä¸ HandlerFunctionAdapter</h3><h4 id="æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨-1"><a href="#æ¼”ç¤º-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨-1" class="headerlink" title="æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"></a>æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</h4><h5 id="å…³é”®ä»£ç -4"><a href="#å…³é”®ä»£ç -4" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RouterFunctionMapping <span class="title function_">routerFunctionMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RouterFunctionMapping</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HandlerFunctionAdapter <span class="title function_">handlerFunctionAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HandlerFunctionAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="title function_">r1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//           â¬‡ï¸æ˜ å°„æ¡ä»¶   â¬‡ï¸handler</span></span><br><span class="line">    <span class="keyword">return</span> route(GET(<span class="string">&quot;/r1&quot;</span>), request -&gt; ok().body(<span class="string">&quot;this is r1&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-48"><a href="#æ”¶è·ğŸ’¡-48" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>RouterFunctionMapping, é€šè¿‡ RequestPredicate æ¡ä»¶æ˜ å°„</li><li>handler è¦å®ç° HandlerFunction æ¥å£</li><li>HandlerFunctionAdapter, è°ƒç”¨ handler</li></ol><h3 id="35-SimpleUrlHandlerMapping-ä¸-HttpRequestHandlerAdapter"><a href="#35-SimpleUrlHandlerMapping-ä¸-HttpRequestHandlerAdapter" class="headerlink" title="35) SimpleUrlHandlerMapping ä¸ HttpRequestHandlerAdapter"></a>35) SimpleUrlHandlerMapping ä¸ HttpRequestHandlerAdapter</h3><h4 id="æ¼”ç¤º1-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"><a href="#æ¼”ç¤º1-æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨" class="headerlink" title="æ¼”ç¤º1 - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨"></a>æ¼”ç¤º1 - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</h4><h5 id="ä»£ç å‚è€ƒ-39"><a href="#ä»£ç å‚è€ƒ-39" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>org.springframework.boot.autoconfigure.web.servlet.A35</strong></p><h5 id="å…³é”®ä»£ç -5"><a href="#å…³é”®ä»£ç -5" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleUrlHandlerMapping <span class="title function_">simpleUrlHandlerMapping</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">    <span class="type">SimpleUrlHandlerMapping</span> <span class="variable">handlerMapping</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleUrlHandlerMapping</span>();</span><br><span class="line">    Map&lt;String, ResourceHttpRequestHandler&gt; map </span><br><span class="line">        = context.getBeansOfType(ResourceHttpRequestHandler.class);</span><br><span class="line">    handlerMapping.setUrlMap(map);</span><br><span class="line">    <span class="keyword">return</span> handlerMapping;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HttpRequestHandlerAdapter <span class="title function_">httpRequestHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HttpRequestHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;static/&quot;</span>)));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/img/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;images/&quot;</span>)));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-49"><a href="#æ”¶è·ğŸ’¡-49" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>SimpleUrlHandlerMapping ä¸ä¼šåœ¨åˆå§‹åŒ–æ—¶æ”¶é›†æ˜ å°„ä¿¡æ¯ï¼Œéœ€è¦æ‰‹åŠ¨æ”¶é›†</li><li>SimpleUrlHandlerMapping æ˜ å°„è·¯å¾„</li><li>ResourceHttpRequestHandler ä½œä¸ºé™æ€èµ„æº handler</li><li>HttpRequestHandlerAdapter, è°ƒç”¨æ­¤ handler</li></ol><h4 id="æ¼”ç¤º2-é™æ€èµ„æºè§£æä¼˜åŒ–"><a href="#æ¼”ç¤º2-é™æ€èµ„æºè§£æä¼˜åŒ–" class="headerlink" title="æ¼”ç¤º2 - é™æ€èµ„æºè§£æä¼˜åŒ–"></a>æ¼”ç¤º2 - é™æ€èµ„æºè§£æä¼˜åŒ–</h4><h5 id="å…³é”®ä»£ç -6"><a href="#å…³é”®ä»£ç -6" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean(&quot;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;static/&quot;</span>)));</span><br><span class="line">    handler.setResourceResolvers(List.of(</span><br><span class="line">        	<span class="comment">// â¬‡ï¸ç¼“å­˜ä¼˜åŒ–</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">CachingResourceResolver</span>(<span class="keyword">new</span> <span class="title class_">ConcurrentMapCache</span>(<span class="string">&quot;cache1&quot;</span>)),</span><br><span class="line">        	<span class="comment">// â¬‡ï¸å‹ç¼©ä¼˜åŒ–</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">EncodedResourceResolver</span>(),</span><br><span class="line">        	<span class="comment">// â¬‡ï¸åŸå§‹èµ„æºè§£æ</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">PathResourceResolver</span>()</span><br><span class="line">    ));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-50"><a href="#æ”¶è·ğŸ’¡-50" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>è´£ä»»é“¾æ¨¡å¼ä½“ç°</li><li>å‹ç¼©æ–‡ä»¶éœ€è¦æ‰‹åŠ¨ç”Ÿæˆ</li></ol><h4 id="æ¼”ç¤º3-æ¬¢è¿é¡µ"><a href="#æ¼”ç¤º3-æ¬¢è¿é¡µ" class="headerlink" title="æ¼”ç¤º3 - æ¬¢è¿é¡µ"></a>æ¼”ç¤º3 - æ¬¢è¿é¡µ</h4><h5 id="å…³é”®ä»£ç -7"><a href="#å…³é”®ä»£ç -7" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title function_">welcomePageHandlerMapping</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">    <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> context.getResource(<span class="string">&quot;classpath:static/index.html&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WelcomePageHandlerMapping</span>(<span class="literal">null</span>, context, resource, <span class="string">&quot;/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleControllerHandlerAdapter <span class="title function_">simpleControllerHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleControllerHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-51"><a href="#æ”¶è·ğŸ’¡-51" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>æ¬¢è¿é¡µæ”¯æŒé™æ€æ¬¢è¿é¡µä¸åŠ¨æ€æ¬¢è¿é¡µ</li><li>WelcomePageHandlerMapping æ˜ å°„æ¬¢è¿é¡µï¼ˆå³åªæ˜ å°„ &#39;&#x2F;&#39;ï¼‰<ul><li>å®ƒå†…ç½®çš„ handler ParameterizableViewController ä½œç”¨æ˜¯ä¸æ‰§è¡Œé€»è¾‘ï¼Œä»…æ ¹æ®è§†å›¾åæ‰¾è§†å›¾</li><li>è§†å›¾åå›ºå®šä¸º forward:index.html</li></ul></li><li>SimpleControllerHandlerAdapter, è°ƒç”¨ handler<ul><li>è½¬å‘è‡³ &#x2F;index.html</li><li>å¤„ç† &#x2F;index.html åˆä¼šèµ°ä¸Šé¢çš„é™æ€èµ„æºå¤„ç†æµç¨‹</li></ul></li></ol><h4 id="æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“"><a href="#æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“" class="headerlink" title="æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“"></a>æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“</h4><ol><li>HandlerMapping è´Ÿè´£å»ºç«‹è¯·æ±‚ä¸æ§åˆ¶å™¨ä¹‹é—´çš„æ˜ å°„å…³ç³»<ul><li>RequestMappingHandlerMapping (ä¸ @RequestMapping åŒ¹é…)</li><li>WelcomePageHandlerMapping (&#x2F;)</li><li>BeanNameUrlHandlerMapping (ä¸ bean çš„åå­—åŒ¹é… ä»¥ &#x2F; å¼€å¤´)</li><li>RouterFunctionMapping (å‡½æ•°å¼ RequestPredicate, HandlerFunction)</li><li>SimpleUrlHandlerMapping (é™æ€èµ„æº é€šé…ç¬¦ &#x2F;** &#x2F;img&#x2F;**)</li><li>ä¹‹é—´ä¹Ÿä¼šæœ‰é¡ºåºé—®é¢˜, boot ä¸­é»˜è®¤é¡ºåºå¦‚ä¸Š</li></ul></li><li>HandlerAdapter è´Ÿè´£å®ç°å¯¹å„ç§å„æ ·çš„ handler çš„é€‚é…è°ƒç”¨<ul><li>RequestMappingHandlerAdapter å¤„ç†ï¼š@RequestMapping æ–¹æ³•<ul><li>å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ä½“ç°äº†ç»„åˆæ¨¡å¼</li></ul></li><li>SimpleControllerHandlerAdapter å¤„ç†ï¼šController æ¥å£</li><li>HandlerFunctionAdapter å¤„ç†ï¼šHandlerFunction å‡½æ•°å¼æ¥å£</li><li>HttpRequestHandlerAdapter å¤„ç†ï¼šHttpRequestHandler æ¥å£ (é™æ€èµ„æºå¤„ç†)</li><li>è¿™ä¹Ÿæ˜¯å…¸å‹é€‚é…å™¨æ¨¡å¼ä½“ç°</li></ul></li></ol><h3 id="36-mvc-å¤„ç†æµç¨‹"><a href="#36-mvc-å¤„ç†æµç¨‹" class="headerlink" title="36) mvc å¤„ç†æµç¨‹"></a>36) mvc å¤„ç†æµç¨‹</h3><p>å½“æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ <code>http://localhost:8080/hello</code> åï¼Œè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œå…¶å¤„ç†æµç¨‹æ˜¯ï¼š</p><ol><li><p>æœåŠ¡å™¨æä¾›äº† DispatcherServletï¼Œå®ƒä½¿ç”¨çš„æ˜¯æ ‡å‡† Servlet æŠ€æœ¯</p><ul><li>è·¯å¾„ï¼šé»˜è®¤æ˜ å°„è·¯å¾„ä¸º <code>/</code>ï¼Œå³ä¼šåŒ¹é…åˆ°æ‰€æœ‰è¯·æ±‚ URLï¼Œå¯ä½œä¸ºè¯·æ±‚çš„ç»Ÿä¸€å…¥å£ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸º<strong>å‰æ§åˆ¶å™¨</strong><ul><li>jsp ä¸ä¼šåŒ¹é…åˆ° DispatcherServlet</li><li>å…¶å®ƒæœ‰è·¯å¾„çš„ Servlet åŒ¹é…ä¼˜å…ˆçº§ä¹Ÿé«˜äº DispatcherServlet</li></ul></li><li>åˆ›å»ºï¼šåœ¨ Boot ä¸­ï¼Œç”± DispatcherServletAutoConfiguration è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æä¾› DispatcherServlet çš„ bean</li><li>åˆå§‹åŒ–ï¼šDispatcherServlet åˆå§‹åŒ–æ—¶ä¼šä¼˜å…ˆåˆ°å®¹å™¨é‡Œå¯»æ‰¾å„ç§ç»„ä»¶ï¼Œä½œä¸ºå®ƒçš„æˆå‘˜å˜é‡<ul><li>HandlerMappingï¼Œåˆå§‹åŒ–æ—¶è®°å½•æ˜ å°„å…³ç³»</li><li>HandlerAdapterï¼Œåˆå§‹åŒ–æ—¶å‡†å¤‡å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ã€æ¶ˆæ¯è½¬æ¢å™¨</li><li>HandlerExceptionResolverï¼Œåˆå§‹åŒ–æ—¶å‡†å¤‡å‚æ•°è§£æå™¨ã€è¿”å›å€¼å¤„ç†å™¨ã€æ¶ˆæ¯è½¬æ¢å™¨</li><li>ViewResolver</li></ul></li></ul></li><li><p>DispatcherServlet ä¼šåˆ©ç”¨ RequestMappingHandlerMapping æŸ¥æ‰¾æ§åˆ¶å™¨æ–¹æ³•</p><ul><li><p>ä¾‹å¦‚æ ¹æ® &#x2F;hello è·¯å¾„æ‰¾åˆ° @RequestMapping(&quot;&#x2F;hello&quot;) å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</p></li><li><p>æ§åˆ¶å™¨æ–¹æ³•ä¼šè¢«å°è£…ä¸º HandlerMethod å¯¹è±¡ï¼Œå¹¶ç»“åˆåŒ¹é…åˆ°çš„æ‹¦æˆªå™¨ä¸€èµ·è¿”å›ç»™ DispatcherServlet</p></li><li><p>HandlerMethod å’Œæ‹¦æˆªå™¨åˆåœ¨ä¸€èµ·ç§°ä¸º HandlerExecutionChainï¼ˆè°ƒç”¨é“¾ï¼‰å¯¹è±¡</p></li></ul></li><li><p>DispatcherServlet æ¥ä¸‹æ¥ä¼šï¼š</p><ol><li>è°ƒç”¨æ‹¦æˆªå™¨çš„ preHandle æ–¹æ³•</li><li>RequestMappingHandlerAdapter è°ƒç”¨ handle æ–¹æ³•ï¼Œå‡†å¤‡æ•°æ®ç»‘å®šå·¥å‚ã€æ¨¡å‹å·¥å‚ã€ModelAndViewContainerã€å°† HandlerMethod å®Œå–„ä¸º ServletInvocableHandlerMethod<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹1ï¸âƒ£ï¼šè¡¥å……æ¨¡å‹æ•°æ®</li><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹2ï¸âƒ£ï¼šè¡¥å……è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</li><li>ä½¿ç”¨ HandlerMethodArgumentResolver å‡†å¤‡å‚æ•°<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹3ï¸âƒ£ï¼šRequestBody å¢å¼º</li></ul></li><li>è°ƒç”¨ ServletInvocableHandlerMethod</li><li>ä½¿ç”¨ HandlerMethodReturnValueHandler å¤„ç†è¿”å›å€¼<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹4ï¸âƒ£ï¼šResponseBody å¢å¼º</li></ul></li><li>æ ¹æ® ModelAndViewContainer è·å– ModelAndView<ul><li>å¦‚æœè¿”å›çš„ ModelAndView ä¸º nullï¼Œä¸èµ°ç¬¬ 4 æ­¥è§†å›¾è§£æåŠæ¸²æŸ“æµç¨‹<ul><li>ä¾‹å¦‚ï¼Œæœ‰çš„è¿”å›å€¼å¤„ç†å™¨è°ƒç”¨äº† HttpMessageConverter æ¥å°†ç»“æœè½¬æ¢ä¸º JSONï¼Œè¿™æ—¶ ModelAndView å°±ä¸º null</li></ul></li><li>å¦‚æœè¿”å›çš„ ModelAndView ä¸ä¸º nullï¼Œä¼šåœ¨ç¬¬ 4 æ­¥èµ°è§†å›¾è§£æåŠæ¸²æŸ“æµç¨‹</li></ul></li></ul></li><li>è°ƒç”¨æ‹¦æˆªå™¨çš„ postHandle æ–¹æ³•</li><li>å¤„ç†å¼‚å¸¸æˆ–è§†å›¾æ¸²æŸ“<ul><li>å¦‚æœ 1~3 å‡ºç°å¼‚å¸¸ï¼Œèµ° ExceptionHandlerExceptionResolver å¤„ç†å¼‚å¸¸æµç¨‹<ul><li>@ControllerAdvice å…¨å±€å¢å¼ºç‚¹5ï¸âƒ£ï¼š@ExceptionHandler å¼‚å¸¸å¤„ç†</li></ul></li><li>æ­£å¸¸ï¼Œèµ°è§†å›¾è§£æåŠæ¸²æŸ“æµç¨‹</li></ul></li><li>è°ƒç”¨æ‹¦æˆªå™¨çš„ afterCompletion æ–¹æ³•</li></ol></li></ol><h2 id="Boot"><a href="#Boot" class="headerlink" title="Boot"></a>Boot</h2><h3 id="37-Boot-éª¨æ¶é¡¹ç›®"><a href="#37-Boot-éª¨æ¶é¡¹ç›®" class="headerlink" title="37) Boot éª¨æ¶é¡¹ç›®"></a>37) Boot éª¨æ¶é¡¹ç›®</h3><p>å¦‚æœæ˜¯ linux ç¯å¢ƒï¼Œç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è·å– spring boot çš„éª¨æ¶ pom.xml</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -G https://start.spring.io/pom.xml -d dependencies=web,mysql,mybatis -o pom.xml</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Postman ç­‰å·¥å…·å®ç°</p><p>è‹¥æƒ³è·å–æ›´å¤šç”¨æ³•ï¼Œè¯·å‚è€ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://start.spring.io</span><br></pre></td></tr></table></figure><h3 id="38-Boot-Waré¡¹ç›®"><a href="#38-Boot-Waré¡¹ç›®" class="headerlink" title="38) Boot Waré¡¹ç›®"></a>38) Boot Waré¡¹ç›®</h3><p>æ­¥éª¤1ï¼šåˆ›å»ºæ¨¡å—ï¼ŒåŒºåˆ«åœ¨äºæ‰“åŒ…æ–¹å¼é€‰æ‹© war</p><img src="/img/loading.gif" data-lazy-src="/posts/f86c337f/image-20211021160145072.png" title="å›¾ç‰‡"><p>æ¥ä¸‹æ¥å‹¾é€‰ Spring Web æ”¯æŒ</p><img src="/img/loading.gif" data-lazy-src="/posts/f86c337f/image-20211021162416525.png" title="å›¾ç‰‡"><p>æ­¥éª¤2ï¼šç¼–å†™æ§åˆ¶å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">abc</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥äº†æ§åˆ¶å™¨&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤3ï¼šç¼–å†™ jsp è§†å›¾ï¼Œæ–°å»º webapp ç›®å½•å’Œä¸€ä¸ª hello.jsp æ–‡ä»¶ï¼Œæ³¨æ„æ–‡ä»¶åä¸æ§åˆ¶å™¨æ–¹æ³•è¿”å›çš„è§†å›¾é€»è¾‘åä¸€è‡´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">	|- main</span><br><span class="line">		|- java</span><br><span class="line">		|- resources</span><br><span class="line">		|- webapp</span><br><span class="line">			|- hello.jsp</span><br></pre></td></tr></table></figure><p>æ­¥éª¤4ï¼šé…ç½®è§†å›¾è·¯å¾„ï¼Œæ‰“å¼€ application.properties æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.mvc.view.prefix</span>=<span class="string">/</span></span><br><span class="line"><span class="attr">spring.mvc.view.suffix</span>=<span class="string">.jsp</span></span><br></pre></td></tr></table></figure><blockquote><p>å°†æ¥ prefix + æ§åˆ¶å™¨æ–¹æ³•è¿”å›å€¼ + suffix å³ä¸ºè§†å›¾å®Œæ•´è·¯å¾„</p></blockquote><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>å¦‚æœç”¨ mvn æ’ä»¶ <code>mvn spring-boot:run</code> æˆ– main æ–¹æ³•æµ‹è¯•</p><ul><li>å¿…é¡»æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼Œå› ä¸ºæ­¤æ—¶ç”¨çš„è¿˜æ˜¯å†…åµŒ tomcatï¼Œè€Œå†…åµŒ tomcat é»˜è®¤ä¸å¸¦ jasperï¼ˆç”¨æ¥è§£æ jspï¼‰</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Idea é…ç½® tomcat æ¥æµ‹è¯•ï¼Œæ­¤æ—¶ç”¨çš„æ˜¯å¤–ç½® tomcat</p><ul><li>éª¨æ¶ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œå¤šäº†ä¸€ä¸ª ServletInitializerï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯é…ç½®å¤–ç½® Tomcat ä½¿ç”¨çš„ï¼Œåœ¨å¤–ç½® Tomcat å¯åŠ¨åï¼Œå»è°ƒç”¨å®ƒåˆ›å»ºå’Œè¿è¡Œ SpringApplication</li></ul><h4 id="å¯ç¤º"><a href="#å¯ç¤º" class="headerlink" title="å¯ç¤º"></a>å¯ç¤º</h4><p>å¯¹äº jar é¡¹ç›®ï¼Œè‹¥è¦æ”¯æŒ jspï¼Œä¹Ÿå¯ä»¥åœ¨åŠ å…¥ jasper ä¾èµ–çš„å‰æä¸‹ï¼ŒæŠŠ jsp æ–‡ä»¶ç½®å…¥ <code>META-INF/resources</code></p><h3 id="39-Boot-å¯åŠ¨è¿‡ç¨‹"><a href="#39-Boot-å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="39) Boot å¯åŠ¨è¿‡ç¨‹"></a>39) Boot å¯åŠ¨è¿‡ç¨‹</h3><p>é˜¶æ®µä¸€ï¼šSpringApplication æ„é€ </p><ol><li>è®°å½• BeanDefinition æº</li><li>æ¨æ–­åº”ç”¨ç±»å‹</li><li>è®°å½• ApplicationContext åˆå§‹åŒ–å™¨</li><li>è®°å½•ç›‘å¬å™¨</li><li>æ¨æ–­ä¸»å¯åŠ¨ç±»</li></ol><p>é˜¶æ®µäºŒï¼šæ‰§è¡Œ run æ–¹æ³•</p><ol><li><p>å¾—åˆ° SpringApplicationRunListenersï¼Œåå­—å–å¾—ä¸å¥½ï¼Œå®é™…æ˜¯äº‹ä»¶å‘å¸ƒå™¨</p><ul><li>å‘å¸ƒ application starting äº‹ä»¶1ï¸âƒ£</li></ul></li><li><p>å°è£…å¯åŠ¨ args</p></li><li><p>å‡†å¤‡ Environment æ·»åŠ å‘½ä»¤è¡Œå‚æ•°ï¼ˆ*ï¼‰</p></li><li><p>ConfigurationPropertySources å¤„ç†ï¼ˆ*ï¼‰</p><ul><li>å‘å¸ƒ application environment å·²å‡†å¤‡äº‹ä»¶2ï¸âƒ£</li></ul></li><li><p>é€šè¿‡ EnvironmentPostProcessorApplicationListener è¿›è¡Œ env åå¤„ç†ï¼ˆ*ï¼‰</p><ul><li>application.propertiesï¼Œç”± StandardConfigDataLocationResolver è§£æ</li><li>spring.application.json</li></ul></li><li><p>ç»‘å®š spring.main åˆ° SpringApplication å¯¹è±¡ï¼ˆ*ï¼‰</p></li><li><p>æ‰“å° bannerï¼ˆ*ï¼‰</p></li><li><p>åˆ›å»ºå®¹å™¨</p></li><li><p>å‡†å¤‡å®¹å™¨</p><ul><li>å‘å¸ƒ application context å·²åˆå§‹åŒ–äº‹ä»¶3ï¸âƒ£</li></ul></li><li><p>åŠ è½½ bean å®šä¹‰</p><ul><li>å‘å¸ƒ application prepared äº‹ä»¶4ï¸âƒ£</li></ul></li><li><p>refresh å®¹å™¨</p><ul><li>å‘å¸ƒ application started äº‹ä»¶5ï¸âƒ£</li></ul></li><li><p>æ‰§è¡Œ runner</p><ul><li><p>å‘å¸ƒ application ready äº‹ä»¶6ï¸âƒ£</p></li><li><p>è¿™å…¶ä¸­æœ‰å¼‚å¸¸ï¼Œå‘å¸ƒ application failed äº‹ä»¶7ï¸âƒ£</p></li></ul></li></ol><blockquote><p>å¸¦ * çš„æœ‰ç‹¬ç«‹çš„ç¤ºä¾‹</p></blockquote><h4 id="æ¼”ç¤º-å¯åŠ¨è¿‡ç¨‹"><a href="#æ¼”ç¤º-å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º - å¯åŠ¨è¿‡ç¨‹"></a>æ¼”ç¤º - å¯åŠ¨è¿‡ç¨‹</h4><p><strong>com.itheima.a39.A39_1</strong> å¯¹åº” SpringApplication æ„é€ </p><p><strong>com.itheima.a39.A39_2</strong> å¯¹åº”ç¬¬1æ­¥ï¼Œå¹¶æ¼”ç¤º 7 ä¸ªäº‹ä»¶</p><p><strong>com.itheima.a39.A39_3</strong> å¯¹åº”ç¬¬2ã€8åˆ°12æ­¥</p><p><strong>org.springframework.boot.Step3</strong></p><p><strong>org.springframework.boot.Step4</strong></p><p><strong>org.springframework.boot.Step5</strong></p><p><strong>org.springframework.boot.Step6</strong></p><p><strong>org.springframework.boot.Step7</strong></p><h4 id="æ”¶è·ğŸ’¡-52"><a href="#æ”¶è·ğŸ’¡-52" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>SpringApplication æ„é€ æ–¹æ³•ä¸­æ‰€åšçš„æ“ä½œ<ul><li>å¯ä»¥æœ‰å¤šç§æºç”¨æ¥åŠ è½½ bean å®šä¹‰</li><li>åº”ç”¨ç±»å‹æ¨æ–­</li><li>æ·»åŠ å®¹å™¨åˆå§‹åŒ–å™¨</li><li>æ·»åŠ ç›‘å¬å™¨</li><li>æ¼”ç¤ºä¸»ç±»æ¨æ–­</li></ul></li><li>å¦‚ä½•è¯»å– spring.factories ä¸­çš„é…ç½®</li><li>ä»é…ç½®ä¸­è·å–é‡è¦çš„äº‹ä»¶å‘å¸ƒå™¨ï¼šSpringApplicationRunListeners</li><li>å®¹å™¨çš„åˆ›å»ºã€åˆå§‹åŒ–å™¨å¢å¼ºã€åŠ è½½ bean å®šä¹‰ç­‰</li><li>CommandLineRunnerã€ApplicationRunner çš„ä½œç”¨</li><li>ç¯å¢ƒå¯¹è±¡<ol><li>å‘½ä»¤è¡Œ PropertySource</li><li>ConfigurationPropertySources è§„èŒƒç¯å¢ƒé”®åç§°</li><li>EnvironmentPostProcessor åå¤„ç†å¢å¼º<ul><li>ç”± EventPublishingRunListener é€šè¿‡ç›‘å¬äº‹ä»¶2ï¸âƒ£æ¥è°ƒç”¨</li></ul></li><li>ç»‘å®š spring.main å‰ç¼€çš„ key value è‡³ SpringApplication</li></ol></li><li>Banner</li></ol><h3 id="40-Tomcat-å†…åµŒå®¹å™¨"><a href="#40-Tomcat-å†…åµŒå®¹å™¨" class="headerlink" title="40) Tomcat å†…åµŒå®¹å™¨"></a>40) Tomcat å†…åµŒå®¹å™¨</h3><p>Tomcat åŸºæœ¬ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Server</span><br><span class="line">â””â”€â”€â”€Service</span><br><span class="line">    â”œâ”€â”€â”€Connector (åè®®, ç«¯å£)</span><br><span class="line">    â””â”€â”€â”€Engine</span><br><span class="line">        â””â”€â”€â”€Host(è™šæ‹Ÿä¸»æœº localhost)</span><br><span class="line">            â”œâ”€â”€â”€Context1 (åº”ç”¨1, å¯ä»¥è®¾ç½®è™šæ‹Ÿè·¯å¾„, / å³ url èµ·å§‹è·¯å¾„; é¡¹ç›®ç£ç›˜è·¯å¾„, å³ docBase )</span><br><span class="line">            â”‚   â”‚   index.html</span><br><span class="line">            â”‚   â””â”€â”€â”€WEB-INF</span><br><span class="line">            â”‚       â”‚   web.xml (servlet, filter, listener) 3.0</span><br><span class="line">            â”‚       â”œâ”€â”€â”€classes (servlet, controller, service ...)</span><br><span class="line">            â”‚       â”œâ”€â”€â”€jsp</span><br><span class="line">            â”‚       â””â”€â”€â”€lib (ç¬¬ä¸‰æ–¹ jar åŒ…)</span><br><span class="line">            â””â”€â”€â”€Context2 (åº”ç”¨2)</span><br><span class="line">                â”‚   index.html</span><br><span class="line">                â””â”€â”€â”€WEB-INF</span><br><span class="line">                        web.xml</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º1-Tomcat-å†…åµŒå®¹å™¨"><a href="#æ¼”ç¤º1-Tomcat-å†…åµŒå®¹å™¨" class="headerlink" title="æ¼”ç¤º1 - Tomcat å†…åµŒå®¹å™¨"></a>æ¼”ç¤º1 - Tomcat å†…åµŒå®¹å™¨</h4><h5 id="å…³é”®ä»£ç -8"><a href="#å…³é”®ä»£ç -8" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> LifecycleException, IOException &#123;</span><br><span class="line">    <span class="comment">// 1.åˆ›å»º Tomcat å¯¹è±¡</span></span><br><span class="line">    <span class="type">Tomcat</span> <span class="variable">tomcat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tomcat</span>();</span><br><span class="line">    tomcat.setBaseDir(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹, å³ docBase æ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">docBase</span> <span class="operator">=</span> Files.createTempDirectory(<span class="string">&quot;boot.&quot;</span>).toFile();</span><br><span class="line">    docBase.deleteOnExit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.åˆ›å»º Tomcat é¡¹ç›®, åœ¨ Tomcat ä¸­ç§°ä¸º Context</span></span><br><span class="line">    <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> tomcat.addContext(<span class="string">&quot;&quot;</span>, docBase.getAbsolutePath());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.ç¼–ç¨‹æ·»åŠ  Servlet</span></span><br><span class="line">    context.addServletContainerInitializer(<span class="keyword">new</span> <span class="title class_">ServletContainerInitializer</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">            <span class="type">HelloServlet</span> <span class="variable">helloServlet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HelloServlet</span>();</span><br><span class="line">            ctx.addServlet(<span class="string">&quot;aaa&quot;</span>, helloServlet).addMapping(<span class="string">&quot;/hello&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, Collections.emptySet());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.å¯åŠ¨ Tomcat</span></span><br><span class="line">    tomcat.start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.åˆ›å»ºè¿æ¥å™¨, è®¾ç½®ç›‘å¬ç«¯å£</span></span><br><span class="line">    <span class="type">Connector</span> <span class="variable">connector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Connector</span>(<span class="keyword">new</span> <span class="title class_">Http11Nio2Protocol</span>());</span><br><span class="line">    connector.setPort(<span class="number">8080</span>);</span><br><span class="line">    tomcat.setConnector(connector);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º2-é›†æˆ-Spring-å®¹å™¨"><a href="#æ¼”ç¤º2-é›†æˆ-Spring-å®¹å™¨" class="headerlink" title="æ¼”ç¤º2 - é›†æˆ Spring å®¹å™¨"></a>æ¼”ç¤º2 - é›†æˆ Spring å®¹å™¨</h4><h5 id="å…³é”®ä»£ç -9"><a href="#å…³é”®ä»£ç -9" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">WebApplicationContext</span> <span class="variable">springContext</span> <span class="operator">=</span> getApplicationContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.ç¼–ç¨‹æ·»åŠ  Servlet</span></span><br><span class="line">context.addServletContainerInitializer(<span class="keyword">new</span> <span class="title class_">ServletContainerInitializer</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// â¬‡ï¸é€šè¿‡ ServletRegistrationBean æ·»åŠ  DispatcherServlet ç­‰</span></span><br><span class="line">        <span class="keyword">for</span> (ServletRegistrationBean registrationBean : </span><br><span class="line">             springContext.getBeansOfType(ServletRegistrationBean.class).values()) &#123;</span><br><span class="line">            registrationBean.onStartup(ctx);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, Collections.emptySet());</span><br></pre></td></tr></table></figure><h3 id="41-Boot-è‡ªåŠ¨é…ç½®"><a href="#41-Boot-è‡ªåŠ¨é…ç½®" class="headerlink" title="41) Boot è‡ªåŠ¨é…ç½®"></a>41) Boot è‡ªåŠ¨é…ç½®</h3><h4 id="AopAutoConfiguration"><a href="#AopAutoConfiguration" class="headerlink" title="AopAutoConfiguration"></a>AopAutoConfiguration</h4><p>Spring Boot æ˜¯åˆ©ç”¨äº†è‡ªåŠ¨é…ç½®ç±»æ¥ç®€åŒ–äº† aop ç›¸å…³é…ç½®</p><ul><li>AOP è‡ªåŠ¨é…ç½®ç±»ä¸º <code>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration</code></li><li>å¯ä»¥é€šè¿‡ <code>spring.aop.auto=false</code> ç¦ç”¨ aop è‡ªåŠ¨é…ç½®</li><li>AOP è‡ªåŠ¨é…ç½®çš„æœ¬è´¨æ˜¯é€šè¿‡ <code>@EnableAspectJAutoProxy</code> æ¥å¼€å¯äº†è‡ªåŠ¨ä»£ç†ï¼Œå¦‚æœåœ¨å¼•å¯¼ç±»ä¸Šè‡ªå·±æ·»åŠ äº† <code>@EnableAspectJAutoProxy</code> é‚£ä¹ˆä»¥è‡ªå·±æ·»åŠ çš„ä¸ºå‡†</li><li><code>@EnableAspectJAutoProxy</code> çš„æœ¬è´¨æ˜¯å‘å®¹å™¨ä¸­æ·»åŠ äº† <code>AnnotationAwareAspectJAutoProxyCreator</code> è¿™ä¸ª bean åå¤„ç†å™¨ï¼Œå®ƒèƒ½å¤Ÿæ‰¾åˆ°å®¹å™¨ä¸­æ‰€æœ‰åˆ‡é¢ï¼Œå¹¶ä¸ºåŒ¹é…åˆ‡ç‚¹çš„ç›®æ ‡ç±»åˆ›å»ºä»£ç†ï¼Œåˆ›å»ºä»£ç†çš„å·¥ä½œä¸€èˆ¬æ˜¯åœ¨ bean çš„åˆå§‹åŒ–é˜¶æ®µå®Œæˆçš„</li></ul><h4 id="DataSourceAutoConfiguration"><a href="#DataSourceAutoConfiguration" class="headerlink" title="DataSourceAutoConfiguration"></a>DataSourceAutoConfiguration</h4><ul><li>å¯¹åº”çš„è‡ªåŠ¨é…ç½®ç±»ä¸ºï¼šorg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</li><li>å®ƒå†…éƒ¨é‡‡ç”¨äº†æ¡ä»¶è£…é…ï¼Œé€šè¿‡æ£€æŸ¥å®¹å™¨çš„ beanï¼Œä»¥åŠç±»è·¯å¾„ä¸‹çš„ classï¼Œæ¥å†³å®šè¯¥ @Bean æ˜¯å¦ç”Ÿæ•ˆ</li></ul><p>ç®€å•è¯´æ˜ä¸€ä¸‹ï¼ŒSpring Boot æ”¯æŒä¸¤å¤§ç±»æ•°æ®æºï¼š</p><ul><li>EmbeddedDatabase - å†…åµŒæ•°æ®åº“è¿æ¥æ± </li><li>PooledDataSource - éå†…åµŒæ•°æ®åº“è¿æ¥æ± </li></ul><p>PooledDataSource åˆæ”¯æŒå¦‚ä¸‹æ•°æ®æº</p><ul><li>hikari æä¾›çš„ HikariDataSource</li><li>tomcat-jdbc æä¾›çš„ DataSource</li><li>dbcp2 æä¾›çš„ BasicDataSource</li><li>oracle æä¾›çš„ PoolDataSourceImpl</li></ul><p>å¦‚æœçŸ¥é“æ•°æ®æºçš„å®ç°ç±»ç±»å‹ï¼Œå³æŒ‡å®šäº† <code>spring.datasource.type</code>ï¼Œç†è®ºä¸Šå¯ä»¥æ”¯æŒæ‰€æœ‰æ•°æ®æºï¼Œä½†è¿™æ ·åšçš„ä¸€ä¸ªæœ€å¤§é—®é¢˜æ˜¯æ— æ³•è®¢åˆ¶æ¯ç§æ•°æ®æºçš„è¯¦ç»†é…ç½®ï¼ˆå¦‚æœ€å¤§ã€æœ€å°è¿æ¥æ•°ç­‰ï¼‰</p><h4 id="MybatisAutoConfiguration"><a href="#MybatisAutoConfiguration" class="headerlink" title="MybatisAutoConfiguration"></a>MybatisAutoConfiguration</h4><ul><li>MyBatis è‡ªåŠ¨é…ç½®ç±»ä¸º <code>org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration</code></li><li>å®ƒä¸»è¦é…ç½®äº†ä¸¤ä¸ª bean<ul><li>SqlSessionFactory - MyBatis æ ¸å¿ƒå¯¹è±¡ï¼Œç”¨æ¥åˆ›å»º SqlSession</li><li>SqlSessionTemplate - SqlSession çš„å®ç°ï¼Œæ­¤å®ç°ä¼šä¸å½“å‰çº¿ç¨‹ç»‘å®š</li><li>ç”¨ ImportBeanDefinitionRegistrar çš„æ–¹å¼æ‰«ææ‰€æœ‰æ ‡æ³¨äº† @Mapper æ³¨è§£çš„æ¥å£</li><li>ç”¨ AutoConfigurationPackages æ¥ç¡®å®šæ‰«æçš„åŒ…</li></ul></li><li>è¿˜æœ‰ä¸€ä¸ªç›¸å…³çš„ beanï¼šMybatisPropertiesï¼Œå®ƒä¼šè¯»å–é…ç½®æ–‡ä»¶ä¸­å¸¦ <code>mybatis.</code> å‰ç¼€çš„é…ç½®é¡¹è¿›è¡Œå®šåˆ¶é…ç½®</li></ul><p>@MapperScan æ³¨è§£çš„ä½œç”¨ä¸ MybatisAutoConfiguration ç±»ä¼¼ï¼Œä¼šæ³¨å†Œ MapperScannerConfigurer æœ‰å¦‚ä¸‹åŒºåˆ«</p><ul><li>@MapperScan æ‰«æå…·ä½“åŒ…ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é…ç½®å…³æ³¨å“ªä¸ªæ³¨è§£ï¼‰</li><li>@MapperScan å¦‚æœä¸æŒ‡å®šæ‰«æå…·ä½“åŒ…ï¼Œåˆ™ä¼šæŠŠå¼•å¯¼ç±»èŒƒå›´å†…ï¼Œæ‰€æœ‰æ¥å£å½“åš Mapper æ¥å£</li><li>MybatisAutoConfiguration å…³æ³¨çš„æ˜¯æ‰€æœ‰æ ‡æ³¨ @Mapper æ³¨è§£çš„æ¥å£ï¼Œä¼šå¿½ç•¥æ‰é @Mapper æ ‡æ³¨çš„æ¥å£</li></ul><p>è¿™é‡Œæœ‰åŒå­¦æœ‰ç–‘é—®ï¼Œä¹‹å‰ä»‹ç»çš„éƒ½æ˜¯å°†å…·ä½“ç±»äº¤ç»™ Spring ç®¡ç†ï¼Œæ€ä¹ˆåˆ°äº† MyBatis è¿™å„¿ï¼Œæ¥å£å°±å¯ä»¥è¢«ç®¡ç†å‘¢ï¼Ÿ</p><ul><li>å…¶å®å¹¶éå°†æ¥å£äº¤ç»™ Spring ç®¡ç†ï¼Œè€Œæ˜¯æ¯ä¸ªæ¥å£ä¼šå¯¹åº”ä¸€ä¸ª MapperFactoryBeanï¼Œæ˜¯åè€…è¢« Spring æ‰€ç®¡ç†ï¼Œæ¥å£åªæ˜¯ä½œä¸º MapperFactoryBean çš„ä¸€ä¸ªå±æ€§æ¥é…ç½®</li></ul><h4 id="TransactionAutoConfiguration"><a href="#TransactionAutoConfiguration" class="headerlink" title="TransactionAutoConfiguration"></a>TransactionAutoConfiguration</h4><ul><li><p>äº‹åŠ¡è‡ªåŠ¨é…ç½®ç±»æœ‰ä¸¤ä¸ªï¼š</p><ul><li><code>org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration</code></li><li><code>org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration</code></li></ul></li><li><p>å‰è€…é…ç½®äº† DataSourceTransactionManager ç”¨æ¥æ‰§è¡Œäº‹åŠ¡çš„æäº¤ã€å›æ»šæ“ä½œ</p></li><li><p>åè€…åŠŸèƒ½ä¸Šå¯¹æ ‡ @EnableTransactionManagementï¼ŒåŒ…å«ä»¥ä¸‹ä¸‰ä¸ª bean</p><ul><li>BeanFactoryTransactionAttributeSourceAdvisor äº‹åŠ¡åˆ‡é¢ç±»ï¼ŒåŒ…å«é€šçŸ¥å’Œåˆ‡ç‚¹</li><li>TransactionInterceptor äº‹åŠ¡é€šçŸ¥ç±»ï¼Œç”±å®ƒåœ¨ç›®æ ‡æ–¹æ³•è°ƒç”¨å‰ååŠ å…¥äº‹åŠ¡æ“ä½œ</li><li>AnnotationTransactionAttributeSource ä¼šè§£æ @Transactional åŠäº‹åŠ¡å±æ€§ï¼Œä¹ŸåŒ…å«äº†åˆ‡ç‚¹åŠŸèƒ½</li></ul></li><li><p>å¦‚æœè‡ªå·±é…ç½®äº† DataSourceTransactionManager æˆ–æ˜¯åœ¨å¼•å¯¼ç±»åŠ äº† @EnableTransactionManagementï¼Œåˆ™ä»¥è‡ªå·±é…ç½®çš„ä¸ºå‡†</p></li></ul><h4 id="ServletWebServerFactoryAutoConfiguration"><a href="#ServletWebServerFactoryAutoConfiguration" class="headerlink" title="ServletWebServerFactoryAutoConfiguration"></a>ServletWebServerFactoryAutoConfiguration</h4><ul><li>æä¾› ServletWebServerFactory</li></ul><h4 id="DispatcherServletAutoConfiguration"><a href="#DispatcherServletAutoConfiguration" class="headerlink" title="DispatcherServletAutoConfiguration"></a>DispatcherServletAutoConfiguration</h4><ul><li>æä¾› DispatcherServlet</li><li>æä¾› DispatcherServletRegistrationBean</li></ul><h4 id="WebMvcAutoConfiguration"><a href="#WebMvcAutoConfiguration" class="headerlink" title="WebMvcAutoConfiguration"></a>WebMvcAutoConfiguration</h4><ul><li>é…ç½® DispatcherServlet çš„å„é¡¹ç»„ä»¶ï¼Œæä¾›çš„ bean è§è¿‡çš„æœ‰<ul><li>å¤šé¡¹ HandlerMapping</li><li>å¤šé¡¹ HandlerAdapter</li><li>HandlerExceptionResolver</li></ul></li></ul><h4 id="ErrorMvcAutoConfiguration"><a href="#ErrorMvcAutoConfiguration" class="headerlink" title="ErrorMvcAutoConfiguration"></a>ErrorMvcAutoConfiguration</h4><ul><li>æä¾›çš„ bean æœ‰ BasicErrorController</li></ul><h4 id="MultipartAutoConfiguration"><a href="#MultipartAutoConfiguration" class="headerlink" title="MultipartAutoConfiguration"></a>MultipartAutoConfiguration</h4><ul><li>å®ƒæä¾›äº† org.springframework.web.multipart.support.StandardServletMultipartResolver</li><li>è¯¥ bean ç”¨æ¥è§£æ multipart&#x2F;form-data æ ¼å¼çš„æ•°æ®</li></ul><h4 id="HttpEncodingAutoConfiguration"><a href="#HttpEncodingAutoConfiguration" class="headerlink" title="HttpEncodingAutoConfiguration"></a>HttpEncodingAutoConfiguration</h4><ul><li>POST è¯·æ±‚å‚æ•°å¦‚æœæœ‰ä¸­æ–‡ï¼Œæ— éœ€ç‰¹æ®Šè®¾ç½®ï¼Œè¿™æ˜¯å› ä¸º Spring Boot å·²ç»é…ç½®äº† org.springframework.boot.web.servlet.filter.OrderedCharacterEncodingFilter</li><li>å¯¹åº”é…ç½® server.servlet.encoding.charset&#x3D;UTF-8ï¼Œé»˜è®¤å°±æ˜¯ UTF-8</li><li>å½“ç„¶ï¼Œå®ƒåªå½±å“é json æ ¼å¼çš„æ•°æ®</li></ul><h4 id="æ¼”ç¤º-è‡ªåŠ¨é…ç½®ç±»åŸç†"><a href="#æ¼”ç¤º-è‡ªåŠ¨é…ç½®ç±»åŸç†" class="headerlink" title="æ¼”ç¤º - è‡ªåŠ¨é…ç½®ç±»åŸç†"></a>æ¼”ç¤º - è‡ªåŠ¨é…ç½®ç±»åŸç†</h4><h5 id="å…³é”®ä»£ç -10"><a href="#å…³é”®ä»£ç -10" class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h5><p>å‡è®¾å·²æœ‰ç¬¬ä¸‰æ–¹çš„ä¸¤ä¸ªè‡ªåŠ¨é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// â¬…ï¸ç¬¬ä¸‰æ–¹çš„é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration1</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean1 <span class="title function_">bean1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean1</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// â¬…ï¸ç¬¬ä¸‰æ–¹çš„é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration2</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean2 <span class="title function_">bean2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean2</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶ META-INF&#x2F;spring.factoriesï¼Œkey ä¸ºå¯¼å…¥å™¨ç±»åï¼Œå€¼ä¸ºå¤šä¸ªè‡ªåŠ¨é…ç½®ç±»åï¼Œç”¨é€—å·åˆ†éš”</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">MyImportSelector</span>=<span class="string">\</span></span><br><span class="line"><span class="string">AutoConfiguration1,\</span></span><br><span class="line"><span class="string">AutoConfiguration2</span></span><br></pre></td></tr></table></figure><blockquote><p><em><strong>æ³¨æ„</strong></em></p><ul><li>ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ MyImportSelector ä¸ AutoConfiguration1ï¼ŒAutoConfiguration2 ä¸ºç®€æ´å‡çœç•¥äº†åŒ…åï¼Œè‡ªå·±æµ‹è¯•æ—¶è¯·å°†åŒ…åæ ¹æ®æƒ…å†µè¡¥å…¨</li></ul></blockquote><p>å¼•å…¥è‡ªåŠ¨é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// â¬…ï¸æœ¬é¡¹ç›®çš„é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Import(MyImportSelector.class)</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Config</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">DeferredImportSelector</span> &#123;</span><br><span class="line">    <span class="comment">// â¬‡ï¸è¯¥æ–¹æ³•ä» META-INF/spring.factories è¯»å–è‡ªåŠ¨é…ç½®ç±»åï¼Œè¿”å›çš„ String[] å³ä¸ºè¦å¯¼å…¥çš„é…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="keyword">return</span> SpringFactoriesLoader</span><br><span class="line">            .loadFactoryNames(MyImportSelector.class, <span class="literal">null</span>).toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-53"><a href="#æ”¶è·ğŸ’¡-53" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>è‡ªåŠ¨é…ç½®ç±»æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé…ç½®ç±»è€Œå·²ï¼Œåªæ˜¯ç”¨ META-INF&#x2F;spring.factories ç®¡ç†ï¼Œä¸åº”ç”¨é…ç½®ç±»è§£è€¦</li><li>@Enable æ‰“å¤´çš„æ³¨è§£æœ¬è´¨æ˜¯åˆ©ç”¨äº† @Import</li><li>@Import é…åˆ DeferredImportSelector å³å¯å®ç°å¯¼å…¥ï¼ŒselectImports æ–¹æ³•çš„è¿”å›å€¼å³ä¸ºè¦å¯¼å…¥çš„é…ç½®ç±»å</li><li>DeferredImportSelector çš„å¯¼å…¥ä¼šåœ¨æœ€åæ‰§è¡Œï¼Œä¸ºçš„æ˜¯è®©å…¶å®ƒé…ç½®ä¼˜å…ˆè§£æ</li></ol><h3 id="42-æ¡ä»¶è£…é…åº•å±‚"><a href="#42-æ¡ä»¶è£…é…åº•å±‚" class="headerlink" title="42) æ¡ä»¶è£…é…åº•å±‚"></a>42) æ¡ä»¶è£…é…åº•å±‚</h3><p>æ¡ä»¶è£…é…çš„åº•å±‚æ˜¯æœ¬è´¨ä¸Šæ˜¯ @Conditional ä¸ Conditionï¼Œè¿™ä¸¤ä¸ªæ³¨è§£ã€‚å¼•å…¥è‡ªåŠ¨é…ç½®ç±»æ—¶ï¼ŒæœŸæœ›æ»¡è¶³ä¸€å®šæ¡ä»¶æ‰èƒ½è¢« Spring ç®¡ç†ï¼Œä¸æ»¡è¶³åˆ™ä¸ç®¡ç†ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>æ¯”å¦‚æ¡ä»¶æ˜¯ã€ç±»è·¯å¾„ä¸‹å¿…é¡»æœ‰ dataSourceã€‘è¿™ä¸ª bean ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>é¦–å…ˆç¼–å†™æ¡ä»¶åˆ¤æ–­ç±»ï¼Œå®ƒå®ç° Condition æ¥å£ï¼Œç¼–å†™æ¡ä»¶åˆ¤æ–­é€»è¾‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyCondition1</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123; </span><br><span class="line">    <span class="comment">// â¬‡ï¸å¦‚æœå­˜åœ¨ Druid ä¾èµ–ï¼Œæ¡ä»¶æˆç«‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ClassUtils.isPresent(<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œåœ¨è¦å¯¼å…¥çš„è‡ªåŠ¨é…ç½®ç±»ä¸Šæ·»åŠ  <code>@Conditional(MyCondition1.class)</code>ï¼Œå°†æ¥æ­¤ç±»è¢«å¯¼å…¥æ—¶å°±ä¼šåšæ¡ä»¶æ£€æŸ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// ç¬¬ä¸‰æ–¹çš„é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Conditional(MyCondition1.class)</span> <span class="comment">// â¬…ï¸åŠ å…¥æ¡ä»¶</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration1</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean1 <span class="title function_">bean1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean1</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«æµ‹è¯•åŠ å…¥å’Œå»é™¤ druid ä¾èµ–ï¼Œè§‚å¯Ÿ bean1 æ˜¯å¦å­˜åœ¨äºå®¹å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ”¶è·ğŸ’¡-54"><a href="#æ”¶è·ğŸ’¡-54" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å­¦ä¹ ä¸€ç§ç‰¹æ®Šçš„ if - else</li></ol><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><h3 id="43-FactoryBean"><a href="#43-FactoryBean" class="headerlink" title="43) FactoryBean"></a>43) FactoryBean</h3><h4 id="æ¼”ç¤º-FactoryBean"><a href="#æ¼”ç¤º-FactoryBean" class="headerlink" title="æ¼”ç¤º - FactoryBean"></a>æ¼”ç¤º - FactoryBean</h4><h5 id="ä»£ç å‚è€ƒ-40"><a href="#ä»£ç å‚è€ƒ-40" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a43</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-55"><a href="#æ”¶è·ğŸ’¡-55" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>å®ƒçš„ä½œç”¨æ˜¯ç”¨åˆ¶é€ åˆ›å»ºè¿‡ç¨‹è¾ƒä¸ºå¤æ‚çš„äº§å“, å¦‚ SqlSessionFactory, ä½† @Bean å·²å…·å¤‡ç­‰ä»·åŠŸèƒ½</li><li>ä½¿ç”¨ä¸Šè¾ƒä¸ºå¤æ€ª, ä¸€ä¸ç•™ç¥å°±ä¼šç”¨é”™<ol><li>è¢« FactoryBean åˆ›å»ºçš„äº§å“<ul><li>ä¼šè®¤ä¸ºåˆ›å»ºã€ä¾èµ–æ³¨å…¥ã€Aware æ¥å£å›è°ƒã€å‰åˆå§‹åŒ–è¿™äº›éƒ½æ˜¯ FactoryBean çš„èŒè´£, è¿™äº›æµç¨‹éƒ½ä¸ä¼šèµ°</li><li>å”¯æœ‰ååˆå§‹åŒ–çš„æµç¨‹ä¼šèµ°, ä¹Ÿå°±æ˜¯äº§å“å¯ä»¥è¢«ä»£ç†å¢å¼º</li><li>å•ä¾‹çš„äº§å“ä¸ä¼šå­˜å‚¨äº BeanFactory çš„ singletonObjects æˆå‘˜ä¸­, è€Œæ˜¯å¦ä¸€ä¸ª factoryBeanObjectCache æˆå‘˜ä¸­</li></ul></li><li>æŒ‰åå­—å»è·å–æ—¶, æ‹¿åˆ°çš„æ˜¯äº§å“å¯¹è±¡, åå­—å‰é¢åŠ  &amp; è·å–çš„æ˜¯å·¥å‚å¯¹è±¡</li></ol></li></ol><h3 id="44-Indexed-åŸç†"><a href="#44-Indexed-åŸç†" class="headerlink" title="44) @Indexed åŸç†"></a>44) @Indexed åŸç†</h3><p>çœŸå®é¡¹ç›®ä¸­ï¼Œåªéœ€è¦åŠ å…¥ä»¥ä¸‹ä¾èµ–å³å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-indexer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ¼”ç¤º-Indexed"><a href="#æ¼”ç¤º-Indexed" class="headerlink" title="æ¼”ç¤º - @Indexed"></a>æ¼”ç¤º - @Indexed</h4><h5 id="ä»£ç å‚è€ƒ-41"><a href="#ä»£ç å‚è€ƒ-41" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a44</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-56"><a href="#æ”¶è·ğŸ’¡-56" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>åœ¨ç¼–è¯‘æ—¶å°±æ ¹æ® @Indexed ç”Ÿæˆ META-INF&#x2F;spring.components æ–‡ä»¶</li><li>æ‰«ææ—¶<ul><li>å¦‚æœå‘ç° META-INF&#x2F;spring.components å­˜åœ¨, ä»¥å®ƒä¸ºå‡†åŠ è½½ bean definition</li><li>å¦åˆ™, ä¼šéå†åŒ…ä¸‹æ‰€æœ‰ class èµ„æº (åŒ…æ‹¬ jar å†…çš„)</li></ul></li><li>è§£å†³çš„é—®é¢˜ï¼Œåœ¨ç¼–è¯‘æœŸå°±æ‰¾åˆ° @Component ç»„ä»¶ï¼ŒèŠ‚çœè¿è¡ŒæœŸé—´æ‰«æ @Component çš„æ—¶é—´</li></ol><h3 id="45-ä»£ç†è¿›ä¸€æ­¥ç†è§£"><a href="#45-ä»£ç†è¿›ä¸€æ­¥ç†è§£" class="headerlink" title="45) ä»£ç†è¿›ä¸€æ­¥ç†è§£"></a>45) ä»£ç†è¿›ä¸€æ­¥ç†è§£</h3><h4 id="æ¼”ç¤º-ä»£ç†"><a href="#æ¼”ç¤º-ä»£ç†" class="headerlink" title="æ¼”ç¤º - ä»£ç†"></a>æ¼”ç¤º - ä»£ç†</h4><h5 id="ä»£ç å‚è€ƒ-42"><a href="#ä»£ç å‚è€ƒ-42" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a45</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-57"><a href="#æ”¶è·ğŸ’¡-57" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li><p>spring ä»£ç†çš„è®¾è®¡ç‰¹ç‚¹</p><ul><li><p>ä¾èµ–æ³¨å…¥å’Œåˆå§‹åŒ–å½±å“çš„æ˜¯åŸå§‹å¯¹è±¡</p><ul><li>å› æ­¤ cglib ä¸èƒ½ç”¨ MethodProxy.invokeSuper()</li></ul></li><li><p>ä»£ç†ä¸ç›®æ ‡æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼ŒäºŒè€…æˆå‘˜å˜é‡å¹¶ä¸å…±ç”¨æ•°æ®</p></li></ul></li><li><p>static æ–¹æ³•ã€final æ–¹æ³•ã€private æ–¹æ³•å‡æ— æ³•å¢å¼º</p><ul><li>è¿›ä¸€æ­¥ç†è§£ä»£ç†å¢å¼ºåŸºäºæ–¹æ³•é‡å†™</li></ul></li></ol><h3 id="46-Value-è£…é…åº•å±‚"><a href="#46-Value-è£…é…åº•å±‚" class="headerlink" title="46) @Value è£…é…åº•å±‚"></a>46) @Value è£…é…åº•å±‚</h3><h4 id="æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤"><a href="#æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤" class="headerlink" title="æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤"></a>æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤</h4><ol><li>æŸ¥çœ‹éœ€è¦çš„ç±»å‹æ˜¯å¦ä¸º Optionalï¼Œæ˜¯ï¼Œåˆ™è¿›è¡Œå°è£…ï¼ˆéå»¶è¿Ÿï¼‰ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>æŸ¥çœ‹éœ€è¦çš„ç±»å‹æ˜¯å¦ä¸º ObjectFactory æˆ– ObjectProviderï¼Œæ˜¯ï¼Œåˆ™è¿›è¡Œå°è£…ï¼ˆå»¶è¿Ÿï¼‰ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>æŸ¥çœ‹éœ€è¦çš„ç±»å‹ï¼ˆæˆå‘˜æˆ–å‚æ•°ï¼‰ä¸Šæ˜¯å¦ç”¨ @Lazy ä¿®é¥°ï¼Œæ˜¯ï¼Œåˆ™è¿”å›ä»£ç†ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>è§£æ @Value çš„å€¼<ol><li>å¦‚æœéœ€è¦çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆè§£æ ${ }ï¼Œå†è§£æ #{ }</li><li>ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦ç”¨ TypeConverter è½¬æ¢</li></ol></li><li>çœ‹éœ€è¦çš„ç±»å‹æ˜¯å¦ä¸º Streamã€Arrayã€Collectionã€Mapï¼Œæ˜¯ï¼Œåˆ™æŒ‰é›†åˆå¤„ç†ï¼Œå¦åˆ™å‘ä¸‹èµ°</li><li>åœ¨ BeanFactory çš„ resolvableDependencies ä¸­æ‰¾æœ‰æ²¡æœ‰ç±»å‹åˆé€‚çš„å¯¹è±¡æ³¨å…¥ï¼Œæ²¡æœ‰å‘ä¸‹èµ°</li><li>åœ¨ BeanFactory åŠçˆ¶å·¥å‚ä¸­æ‰¾ç±»å‹åŒ¹é…çš„ bean è¿›è¡Œç­›é€‰ï¼Œç­›é€‰æ—¶ä¼šè€ƒè™‘ @Qualifier åŠæ³›å‹</li><li>ç»“æœä¸ªæ•°ä¸º 0 æŠ›å‡º NoSuchBeanDefinitionException å¼‚å¸¸</li><li>å¦‚æœç»“æœ &gt; 1ï¼Œå†æ ¹æ® @Primary è¿›è¡Œç­›é€‰</li><li>å¦‚æœç»“æœä» &gt; 1ï¼Œå†æ ¹æ®æˆå‘˜åæˆ–å˜é‡åè¿›è¡Œç­›é€‰</li><li>ç»“æœä» &gt; 1ï¼ŒæŠ›å‡º NoUniqueBeanDefinitionException å¼‚å¸¸</li></ol><h4 id="æ¼”ç¤º-Value-è£…é…è¿‡ç¨‹"><a href="#æ¼”ç¤º-Value-è£…é…è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º - @Value è£…é…è¿‡ç¨‹"></a>æ¼”ç¤º - @Value è£…é…è¿‡ç¨‹</h4><h5 id="ä»£ç å‚è€ƒ-43"><a href="#ä»£ç å‚è€ƒ-43" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a46</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-58"><a href="#æ”¶è·ğŸ’¡-58" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>ContextAnnotationAutowireCandidateResolver ä½œç”¨ä¹‹ä¸€ï¼Œè·å– @Value çš„å€¼</li><li>äº†è§£ ${ } å¯¹åº”çš„è§£æå™¨</li><li>äº†è§£ #{ } å¯¹åº”çš„è§£æå™¨</li><li>TypeConvert çš„ä¸€é¡¹ä½“ç°</li></ol><h3 id="47-Autowired-è£…é…åº•å±‚"><a href="#47-Autowired-è£…é…åº•å±‚" class="headerlink" title="47) @Autowired è£…é…åº•å±‚"></a>47) @Autowired è£…é…åº•å±‚</h3><h4 id="æ¼”ç¤º-Autowired-è£…é…è¿‡ç¨‹"><a href="#æ¼”ç¤º-Autowired-è£…é…è¿‡ç¨‹" class="headerlink" title="æ¼”ç¤º - @Autowired è£…é…è¿‡ç¨‹"></a>æ¼”ç¤º - @Autowired è£…é…è¿‡ç¨‹</h4><h5 id="ä»£ç å‚è€ƒ-44"><a href="#ä»£ç å‚è€ƒ-44" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a47</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-59"><a href="#æ”¶è·ğŸ’¡-59" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><ol><li>@Autowired æœ¬è´¨ä¸Šæ˜¯æ ¹æ®æˆå‘˜å˜é‡æˆ–æ–¹æ³•å‚æ•°çš„ç±»å‹è¿›è¡Œè£…é…</li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯ Optionalï¼Œéœ€è¦æ ¹æ® Optional æ³›å‹æ‰¾åˆ° beanï¼Œå†å°è£…ä¸º Optional å¯¹è±¡è£…é…</li><li>å¦‚æœå¾…è£…é…çš„ç±»å‹æ˜¯ ObjectFactoryï¼Œéœ€è¦æ ¹æ® ObjectFactory æ³›å‹åˆ›å»º ObjectFactory å¯¹è±¡è£…é…<ul><li>æ­¤æ–¹æ³•å¯ä»¥å»¶è¿Ÿ bean çš„è·å–</li></ul></li><li>å¦‚æœå¾…è£…é…çš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•å‚æ•°ä¸Šç”¨ @Lazy æ ‡æ³¨ï¼Œä¼šåˆ›å»ºä»£ç†å¯¹è±¡è£…é…<ul><li>æ­¤æ–¹æ³•å¯ä»¥å»¶è¿ŸçœŸå® bean çš„è·å–</li><li>è¢«è£…é…çš„ä»£ç†ä¸ä½œä¸º bean</li></ul></li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯æ•°ç»„ï¼Œéœ€è¦è·å–æ•°ç»„å…ƒç´ ç±»å‹ï¼Œæ ¹æ®æ­¤ç±»å‹æ‰¾åˆ°å¤šä¸ª bean è¿›è¡Œè£…é…</li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯ Collection æˆ–å…¶å­æ¥å£ï¼Œéœ€è¦è·å– Collection æ³›å‹ï¼Œæ ¹æ®æ­¤ç±»å‹æ‰¾åˆ°å¤šä¸ª bean</li><li>å¦‚æœå¾…è£…é…ç±»å‹æ˜¯ ApplicationContext ç­‰ç‰¹æ®Šç±»å‹<ul><li>ä¼šåœ¨ BeanFactory çš„ resolvableDependencies æˆå‘˜æŒ‰ç±»å‹æŸ¥æ‰¾è£…é…</li><li>resolvableDependencies æ˜¯ map é›†åˆï¼Œkey æ˜¯ç‰¹æ®Šç±»å‹ï¼Œvalue æ˜¯å…¶å¯¹åº”å¯¹è±¡</li><li>ä¸èƒ½ç›´æ¥æ ¹æ® key è¿›è¡ŒæŸ¥æ‰¾ï¼Œè€Œæ˜¯ç”¨ isAssignableFrom é€ä¸€å°è¯•å³è¾¹ç±»å‹æ˜¯å¦å¯ä»¥è¢«èµ‹å€¼ç»™å·¦è¾¹çš„ key ç±»å‹</li></ul></li><li>å¦‚æœå¾…è£…é…ç±»å‹æœ‰æ³›å‹å‚æ•°<ul><li>éœ€è¦åˆ©ç”¨ ContextAnnotationAutowireCandidateResolver æŒ‰æ³›å‹å‚æ•°ç±»å‹ç­›é€‰</li></ul></li><li>å¦‚æœå¾…è£…é…ç±»å‹æœ‰ @Qualifier<ul><li>éœ€è¦åˆ©ç”¨ ContextAnnotationAutowireCandidateResolver æŒ‰æ³¨è§£æä¾›çš„ bean åç§°ç­›é€‰</li></ul></li><li>æœ‰ @Primary æ ‡æ³¨çš„ @Component æˆ– @Bean çš„å¤„ç†</li><li>ä¸æˆå‘˜å˜é‡åæˆ–æ–¹æ³•å‚æ•°ååŒå bean çš„å¤„ç†</li></ol><h3 id="48-äº‹ä»¶ç›‘å¬å™¨"><a href="#48-äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="48) äº‹ä»¶ç›‘å¬å™¨"></a>48) äº‹ä»¶ç›‘å¬å™¨</h3><h4 id="æ¼”ç¤º-äº‹ä»¶ç›‘å¬å™¨"><a href="#æ¼”ç¤º-äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="æ¼”ç¤º - äº‹ä»¶ç›‘å¬å™¨"></a>æ¼”ç¤º - äº‹ä»¶ç›‘å¬å™¨</h4><h5 id="ä»£ç å‚è€ƒ-45"><a href="#ä»£ç å‚è€ƒ-45" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a48</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-60"><a href="#æ”¶è·ğŸ’¡-60" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>äº‹ä»¶ç›‘å¬å™¨çš„ä¸¤ç§æ–¹å¼</p><ol><li>å®ç° ApplicationListener æ¥å£<ul><li>æ ¹æ®æ¥å£æ³›å‹ç¡®å®šäº‹ä»¶ç±»å‹</li></ul></li><li>@EventListener æ ‡æ³¨ç›‘å¬æ–¹æ³•<ul><li>æ ¹æ®ç›‘å¬å™¨æ–¹æ³•å‚æ•°ç¡®å®šäº‹ä»¶ç±»å‹</li><li>è§£ææ—¶æœºï¼šåœ¨ SmartInitializingSingletonï¼ˆæ‰€æœ‰å•ä¾‹åˆå§‹åŒ–å®Œæˆåï¼‰ï¼Œè§£ææ¯ä¸ªå•ä¾‹ bean</li></ul></li></ol><h3 id="49-äº‹ä»¶å‘å¸ƒå™¨"><a href="#49-äº‹ä»¶å‘å¸ƒå™¨" class="headerlink" title="49) äº‹ä»¶å‘å¸ƒå™¨"></a>49) äº‹ä»¶å‘å¸ƒå™¨</h3><h4 id="æ¼”ç¤º-äº‹ä»¶å‘å¸ƒå™¨"><a href="#æ¼”ç¤º-äº‹ä»¶å‘å¸ƒå™¨" class="headerlink" title="æ¼”ç¤º - äº‹ä»¶å‘å¸ƒå™¨"></a>æ¼”ç¤º - äº‹ä»¶å‘å¸ƒå™¨</h4><h5 id="ä»£ç å‚è€ƒ-46"><a href="#ä»£ç å‚è€ƒ-46" class="headerlink" title="ä»£ç å‚è€ƒ"></a>ä»£ç å‚è€ƒ</h5><p><strong>com.itheima.a49</strong> åŒ…</p><h4 id="æ”¶è·ğŸ’¡-61"><a href="#æ”¶è·ğŸ’¡-61" class="headerlink" title="æ”¶è·ğŸ’¡"></a>æ”¶è·ğŸ’¡</h4><p>äº‹ä»¶å‘å¸ƒå™¨æ¨¡æ‹Ÿå®ç°</p><ol><li>addApplicationListenerBean è´Ÿè´£æ”¶é›†å®¹å™¨ä¸­çš„ç›‘å¬å™¨<ul><li>ç›‘å¬å™¨ä¼šç»Ÿä¸€è½¬æ¢ä¸º GenericApplicationListener å¯¹è±¡ï¼Œä»¥æ”¯æŒåˆ¤æ–­äº‹ä»¶ç±»å‹</li></ul></li><li>multicastEvent éå†ç›‘å¬å™¨é›†åˆï¼Œå‘å¸ƒäº‹ä»¶<ul><li>å‘å¸ƒå‰å…ˆé€šè¿‡ GenericApplicationListener.supportsEventType åˆ¤æ–­æ”¯æŒè¯¥äº‹ä»¶ç±»å‹æ‰å‘äº‹ä»¶</li><li>å¯ä»¥åˆ©ç”¨çº¿ç¨‹æ± è¿›è¡Œå¼‚æ­¥å‘äº‹ä»¶ä¼˜åŒ–</li></ul></li><li>å¦‚æœå‘é€çš„äº‹ä»¶å¯¹è±¡ä¸æ˜¯ ApplicationEvent ç±»å‹ï¼ŒSpring ä¼šæŠŠå®ƒåŒ…è£…ä¸º PayloadApplicationEvent å¹¶ç”¨æ³›å‹æŠ€æœ¯è§£æäº‹ä»¶å¯¹è±¡çš„åŸå§‹ç±»å‹<ul><li>è§†é¢‘ä¸­æœªè®²è§£</li></ul></li></ol></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang">å°äº”</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang/posts/f86c337f/">https://xiaowu95.wang/posts/f86c337f/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://xiaowu95.wang" target="_blank">å°äº”çš„ä¸ªäººæ‚è´§é“º</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/spring/">spring</a><a class="post-meta__tags" href="/tags/spring-native/">spring-native</a></div><div class="post-share"><div class="social-share" data-image="/img/nba-logo7.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>æ„Ÿè°¢æ”¯æŒ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wxpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/wxpay.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/becb9bb3/" title="rancherçš„è§’è‰²æƒé™åˆ†é…å®è·µ"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo5.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">rancherçš„è§’è‰²æƒé™åˆ†é…å®è·µ</div></div><div class="info-2"><div class="info-item-1">rancheråˆ†ä¸º3ç§è§’è‰², å„è‡ªé€‚ç”¨èŒƒå›´ä¹Ÿä¸åŒ å…¨å±€ é›†ç¾¤ é¡¹ç›® é¡¹ç›®ä¸‹åˆåŒ…æ‹¬äº†å¤šä¸ªnamespace å…ˆä½¿ç”¨ç®¡ç†å‘˜ç™»é™†åˆ›å»º1ä¸ªå¯ä»¥ç®¡ç†å…¨å±€çš„è´¦æˆ·å’Œè§’è‰²çš„ç”¨æˆ·(å…¨å±€ç®¡ç†å‘˜è´¦æˆ·) æ³¨: æ­¤ç”¨æˆ·ä»…ç”¨æ¥ç®¡ç†ç”¨æˆ·å’Œè§’è‰², adminæƒé™å¤ªå¤§, ä¹‹åä¸å†ä½¿ç”¨å®ƒè¿›è¡Œç™»é™†ç”¨æˆ·å: UserManageræ‹¥æœ‰è§’è‰²:Manage RolesManage Users é€€å‡ºç®¡ç†å‘˜, ç„¶åä½¿ç”¨å…¨å±€ç®¡ç†å‘˜è´¦æˆ·åˆ›å»ºä¸€ä¸ªé›†ç¾¤ç®¡ç†å‘˜è´¦æˆ·(é›†ç¾¤ç®¡ç†å‘˜è´¦æˆ·)å…¨å±€æƒé™: Standard User ç”¨æˆ·å: ClusterManager ç”¨ClusterManagerèº«ä»½ç™»é™†å¹¶è¿›è¡Œåˆ›å»ºé›†ç¾¤.ç•¥ åˆ›å»ºé›†ç¾¤æˆ–é¡¹ç›®æ—¶ï¼ŒRancher ä¼šè‡ªåŠ¨å°†åˆ›å»ºè€…åˆ†é…ä¸ºæ‰€æœ‰è€…ã€‚åˆ†é…äº†æ‰€æœ‰è€…è§’è‰²çš„ç”¨æˆ·å¯ä»¥åœ¨é›†ç¾¤æˆ–é¡¹ç›®ä¸­ç»™å…¶ä»–ç”¨æˆ·åˆ†é…è§’è‰²ã€‚ ç„¶åä½¿ç”¨UserManagerä¸ºå„é›†ç¾¤(ä¸€ä¸ªClusterManagerè´¦æˆ·ä¸‹å¯ä»¥åˆ›å»ºå¤šä¸ªé›†ç¾¤, ä¾‹å¦‚release&#x2F;production)åˆ›å»ºç”¨æˆ· é¡¹ç›®ç®¡ç†å‘˜ProjectsAdmin å…¨å±€æƒé™: Standard User åˆ›å»ºå’Œç®¡ç†é¡¹ç›®, æŸ¥çœ‹ç›‘æ§ç­‰, å¯ä»¥ç»ç”±ä¸‹ä¸€çº§é€šçŸ¥...</div></div></div></a><a class="pagination-related" href="/posts/1722731a/" title="jmeterè¿æ¥jdbc"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">jmeterè¿æ¥jdbc</div></div><div class="info-2"><div class="info-item-1">æ•°æ®åº“é©±åŠ¨åŒ…ä¸‹è½½ä¸å®‰è£… ç¤ºä¾‹: è¿æ¥mysql ä¸‹è½½connectorhttps://dev.mysql.com/downloads/connector/j/ å®‰è£…ä¸‹è½½å®Œæˆåè§£å‹æ”¾åˆ°jmeterçš„lib&#x2F;extä¸‹ é‡å¯jmeter JDBCçš„è¿æ¥é…ç½®æ·»åŠ é…ç½®å…ƒä»¶-JDBC Connection Configuration å‚æ•°è¯¦è§£ Variable Name for created pool:è‡ªå·±å®šä¹‰è¿æ¥æ•°æ®åº“çš„åç§°, éœ€è¦è®°ä½, è¿™é‡Œä¼šåœ¨åç»­ä½¿ç”¨jdbc requestä¸­ç”¨åˆ°Database URLï¼šæ•°æ®åº“urlï¼Œjdbc:mysql:&#x2F;&#x2F;ä¸»æœºipæˆ–è€…æœºå™¨åç§°:mysqlç›‘å¬çš„ç«¯å£å·&#x2F;æ•°æ®åº“åç§°ï¼Œå¦‚ï¼šjdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;kyjurlåé¢çš„å‚æ•°ï¼ˆå¯ä»¥ä¸å†™ï¼‰characterEncoding&#x3D;utf8&amp;useSSL&#x3D;true&amp;serverTimezone&#x3D;UTCè®¾ç½®æ—¶åŒºå’Œç¼–ç æ ¼å¼JDBC Driver clas...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/cbd11a98/" title="SpringBooté¡¹ç›®å¯åŠ¨æ—¶åˆå§‹åŒ–æ“ä½œçš„6ç§æ–¹å¼"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-16</div><div class="info-item-2">SpringBooté¡¹ç›®å¯åŠ¨æ—¶åˆå§‹åŒ–æ“ä½œçš„6ç§æ–¹å¼</div></div><div class="info-2"><div class="info-item-1">SpringBooté¡¹ç›®å¯åŠ¨æ—¶åˆå§‹åŒ–æ“ä½œçš„6ç§æ–¹å¼1ã€ç›‘å¬å®¹å™¨åˆ·æ–°å®Œæˆæ‰©å±•ç‚¹ApplicationListener&lt;ContextRefreshedEvent&gt;ApplicationContextäº‹ä»¶æœºåˆ¶æ˜¯è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼å®ç°çš„ï¼Œé€šè¿‡ApplicationEventå’ŒApplicationListenerè¿™ä¸¤ä¸ªæ¥å£å®ç°ApplicationContextçš„äº‹ä»¶æœºåˆ¶ã€‚ Springä¸­ä¸€äº›å†…ç½®çš„äº‹ä»¶å¦‚ä¸‹ï¼š ContextRefreshedEventï¼šApplicationContext è¢«åˆå§‹åŒ–æˆ–åˆ·æ–°æ—¶ï¼Œè¯¥äº‹ä»¶è¢«å‘å¸ƒã€‚è¿™ä¹Ÿå¯ä»¥åœ¨ ConfigurableApplicationContextæ¥å£ä¸­ä½¿ç”¨ refresh() æ–¹æ³•æ¥å‘ç”Ÿã€‚æ­¤å¤„çš„åˆå§‹åŒ–æ˜¯æŒ‡ï¼šæ‰€æœ‰çš„Beanè¢«æˆåŠŸè£…è½½ï¼Œåå¤„ç†Beanè¢«æ£€æµ‹å¹¶æ¿€æ´»ï¼Œæ‰€æœ‰Singleton Bean è¢«é¢„å®ä¾‹åŒ–ï¼ŒApplicationContextå®¹å™¨å·²å°±ç»ªå¯ç”¨ã€‚ ContextStartedEventï¼šå½“ä½¿ç”¨ ConfigurableApplicationContext ï¼ˆApplicationContextå­æ¥å£ï¼‰æ¥å£ä¸­çš„ star...</div></div></div></a><a class="pagination-related" href="/posts/d5f5ab89/" title="Spring-native&#x2F;GraalVM"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo15.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-09-12</div><div class="info-item-2">Spring-native&#x2F;GraalVM</div></div><div class="info-2"><div class="info-item-1">åˆè¯†spring nativeå®˜æ–¹ä»‹ç» Spring Nativeæä¾›äº†ä½¿ç”¨GraalVM æœ¬æœºå›¾åƒç¼–è¯‘å™¨å°†Springåº”ç”¨ç¨‹åºç¼–è¯‘ä¸ºæœ¬æœºå¯æ‰§è¡Œæ–‡ä»¶çš„æ”¯æŒã€‚ä¸Javaè™šæ‹Ÿæœºç›¸æ¯”ï¼Œæœ¬æœºæ˜ åƒå¯ä»¥ä¸ºè®¸å¤šç±»å‹çš„å·¥ä½œè´Ÿè½½æä¾›æ›´ä¾¿å®œï¼Œæ›´å¯æŒç»­çš„æ‰˜ç®¡ã€‚è¿™äº›åŒ…æ‹¬å¾®æœåŠ¡ï¼ŒåŠŸèƒ½å·¥ä½œè´Ÿè½½ï¼Œéå¸¸é€‚åˆå®¹å™¨å’ŒKubernetesä½¿ç”¨æœ¬æœºæ˜ åƒå…·æœ‰å…³é”®ä¼˜åŠ¿ï¼Œä¾‹å¦‚å³æ—¶å¯åŠ¨ï¼Œå³æ—¶å³°å€¼æ€§èƒ½å’Œå‡å°‘çš„å†…å­˜æ¶ˆè€—ã€‚GraalVMæœ¬æœºé¡¹ç›®å¸Œæœ›éšç€æ—¶é—´çš„æ¨ç§»ä¼šæ”¹å–„ä¸€äº›ç¼ºç‚¹å’ŒæŠ˜è¡·æ–¹æ¡ˆã€‚æ„å»ºæœ¬æœºæ˜ åƒæ˜¯ä¸€ä¸ªç¹é‡çš„è¿‡ç¨‹ï¼Œæ¯”å¸¸è§„åº”ç”¨ç¨‹åºè¦æ…¢ã€‚é¢„çƒ­åï¼Œæœ¬æœºæ˜ åƒå…·æœ‰è¾ƒå°‘çš„è¿è¡Œæ—¶ä¼˜åŒ–ã€‚æœ€åï¼Œå®ƒæ¯”å…·æœ‰æŸäº›ä¸åŒè¡Œä¸ºçš„JVMè¿˜ä¸æˆç†Ÿã€‚å¸¸è§„JVMå’Œæ­¤æœ¬æœºæ˜ åƒå¹³å°ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼š - åœ¨æ„å»ºæ—¶å°†æœªä½¿ç”¨çš„é›¶ä»¶åˆ é™¤ã€‚ - åå°„ï¼Œèµ„æºå’ŒåŠ¨æ€ä»£ç†éœ€è¦é…ç½®ã€‚ - ç±»è·¯å¾„åœ¨æ„å»ºæ—¶æ˜¯å›ºå®šçš„ã€‚ - æ²¡æœ‰ç±»å»¶è¿ŸåŠ è½½ï¼šå¯æ‰§è¡Œæ–‡ä»¶ä¸­é™„å¸¦çš„æ‰€æœ‰å†…å®¹éƒ½å°†åœ¨å¯åŠ¨æ—¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ - ä¸€äº›ä»£ç å°†åœ¨æ„å»ºæ—¶è¿è¡Œã€‚ - å›´ç»•Javaåº”ç”¨ç¨‹åºçš„æŸäº›æ–¹é¢å­˜åœ¨ä¸€äº›å±€é™æ€§ï¼Œè¿™äº›å±€é™æ€§æœªå¾—åˆ°å®Œå…¨æ”¯æŒã€‚ ç®€å•æ¥è¯´,å°±æ˜¯æ›´å¿«.æ›´çŸ­,æ›´å° æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦ æ›´çŸ­çš„å“åº”æ—¶é—´ æ›´å°çš„å†…å­˜æ¶ˆè€— ååˆ†é€‚ç”¨...</div></div></div></a><a class="pagination-related" href="/posts/70d707f9/" title="GraalVMåœ¨windowsä¸Šçš„ç¯å¢ƒæ­å»º"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo25.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-08-21</div><div class="info-item-2">GraalVMåœ¨windowsä¸Šçš„ç¯å¢ƒæ­å»º</div></div><div class="info-2"><div class="info-item-1">å‰è¨€ GraalVMæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€äº‘åŸç”Ÿã€æ”¯æŒå¤šç§è¯­è¨€çš„è™šæ‹Ÿæœºã€‚ GraalVMç¯å¢ƒæ­å»ºåˆ†ä¸ºä¸¤æ­¥ï¼š 1ã€ä¸‹è½½é…ç½®GraalVMå’Œä¸‹è½½native-imageã€‚ 2ï¼Œä¸‹è½½é…ç½®windows sdkå’Œmsvcã€‚ GraalVMä¸‹è½½é…ç½®GraalVM è¿›å…¥åˆ° GitHub ä¸Šçš„ GraalVM å‘å¸ƒå­˜å‚¨åº“ã€‚é€‰æ‹©é€‚ç”¨äº Windows çš„åŸºäº Java 11ã€17 æˆ– 19 çš„å‘è¡Œç‰ˆï¼Œç„¶åä¸‹è½½ã€‚æˆ‘é€‰æ‹©çš„æ˜¯java17-22.3.0çš„ã€‚ å°†ç›®å½•æ›´æ”¹ä¸ºè¦å®‰è£… GraalVM çš„ä½ç½®ï¼Œç„¶åå°†.zipå­˜æ¡£æ–‡ä»¶ç§»åŠ¨åˆ°è¯¥ç›®å½•ã€‚æˆ‘è¿™é‡Œæ˜¯æ”¾åœ¨D:\JDK å°†å­˜æ¡£è§£å‹ç¼©åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚ä¾‹å¦‚D:\JDK é…ç½®ç¯å¢ƒå˜é‡12GRAALVM_HOME=D:\JDK\graalvm-ce-java17-22.3.0JAVA_HOME=D:\JDK\graalvm-ce-java17-22.3.0 éªŒè¯1234D:\testNative&gt;java -versionopenjdk version &quot;17.0.5&quot; 2022-10-18OpenJDK Runtime Environment G...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">å°äº”</div><div class="author-info-description">Tomorrow will be better,Everything will be fine</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/wang-xiaowu"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="/random" target="_blank" title="éšä¾¿é€›é€›"><i class="fa-solid fa-shuffle"></i></a><a class="social-icon" href="mailto:wangxiaowu950330@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/30655189?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E4%B8%8E-bean"><span class="toc-number">1.</span> <span class="toc-text">å®¹å™¨ä¸ bean</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%B9%E5%99%A8%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.</span> <span class="toc-text">1) å®¹å™¨æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-BeanFactory-%E4%B8%8E-ApplicationContext-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.1.1.</span> <span class="toc-text">æ¼”ç¤º1 - BeanFactory ä¸ ApplicationContext çš„åŒºåˆ«</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1"><span class="toc-number">1.1.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">1.1.3.</span> <span class="toc-text">æ¼”ç¤º2 - å›½é™…åŒ–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.</span> <span class="toc-text">2) å®¹å™¨å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-DefaultListableBeanFactory"><span class="toc-number">1.2.1.</span> <span class="toc-text">æ¼”ç¤º1 - DefaultListableBeanFactory</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-1"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E5%B8%B8%E8%A7%81-ApplicationContext-%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.3.</span> <span class="toc-text">æ¼”ç¤º2 - å¸¸è§ ApplicationContext å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-2"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-2"><span class="toc-number">1.2.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Bean-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.3.</span> <span class="toc-text">3) Bean çš„ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.3.1.</span> <span class="toc-text">æ¼”ç¤º1 - bean ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-3"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-3"><span class="toc-number">1.3.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text">æ¼”ç¤º2 - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-bean-%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8%E6%8E%92%E5%BA%8F"><span class="toc-number">1.3.4.</span> <span class="toc-text">æ¼”ç¤º3 - bean åå¤„ç†å™¨æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-4"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-4"><span class="toc-number">1.3.5.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Bean-%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">1.4.</span> <span class="toc-text">4) Bean åå¤„ç†å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8%E4%BD%9C%E7%94%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">æ¼”ç¤º1 - åå¤„ç†å™¨ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-5"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-5"><span class="toc-number">1.4.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-Autowired-bean-%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8%E8%BF%90%E8%A1%8C%E5%88%86%E6%9E%90"><span class="toc-number">1.4.3.</span> <span class="toc-text">æ¼”ç¤º2 - @Autowired bean åå¤„ç†å™¨è¿è¡Œåˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-6"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-6"><span class="toc-number">1.4.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-BeanFactory-%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">1.5.</span> <span class="toc-text">5) BeanFactory åå¤„ç†å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-BeanFactory-%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.5.1.</span> <span class="toc-text">æ¼”ç¤º1 - BeanFactory åå¤„ç†å™¨çš„ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-7"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-7"><span class="toc-number">1.5.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E6%A8%A1%E6%8B%9F%E8%A7%A3%E6%9E%90-ComponentScan"><span class="toc-number">1.5.3.</span> <span class="toc-text">æ¼”ç¤º2 - æ¨¡æ‹Ÿè§£æ @ComponentScan</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-8"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-8"><span class="toc-number">1.5.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E6%A8%A1%E6%8B%9F%E8%A7%A3%E6%9E%90-Bean"><span class="toc-number">1.5.5.</span> <span class="toc-text">æ¼”ç¤º3 - æ¨¡æ‹Ÿè§£æ @Bean</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-9"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-9"><span class="toc-number">1.5.6.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA4-%E6%A8%A1%E6%8B%9F%E8%A7%A3%E6%9E%90-Mapper-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.5.7.</span> <span class="toc-text">æ¼”ç¤º4 - æ¨¡æ‹Ÿè§£æ Mapper æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-10"><span class="toc-number">1.5.7.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-10"><span class="toc-number">1.5.8.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Aware-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.6.</span> <span class="toc-text">6) Aware æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-Aware-%E6%8E%A5%E5%8F%A3%E5%8F%8A-InitializingBean-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.6.1.</span> <span class="toc-text">æ¼”ç¤º - Aware æ¥å£åŠ InitializingBean æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-11"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-11"><span class="toc-number">1.6.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BB-Autowired-%E5%A4%B1%E6%95%88%E5%88%86%E6%9E%90"><span class="toc-number">1.6.3.</span> <span class="toc-text">é…ç½®ç±» @Autowired å¤±æ•ˆåˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E9%94%80%E6%AF%81"><span class="toc-number">1.7.</span> <span class="toc-text">7) åˆå§‹åŒ–ä¸é”€æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%94%80%E6%AF%81%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.7.1.</span> <span class="toc-text">æ¼”ç¤º - åˆå§‹åŒ–é”€æ¯é¡ºåº</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-12"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-12"><span class="toc-number">1.7.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Scope"><span class="toc-number">1.8.</span> <span class="toc-text">8) Scope</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-request-session-application-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.8.1.</span> <span class="toc-text">æ¼”ç¤º1 - request, session, application ä½œç”¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-13"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-13"><span class="toc-number">1.8.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90-singleton-%E6%B3%A8%E5%85%A5%E5%85%B6%E5%AE%83-scope-%E5%A4%B1%E6%95%88"><span class="toc-number">1.8.3.</span> <span class="toc-text">åˆ†æ - singleton æ³¨å…¥å…¶å®ƒ scope å¤±æ•ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-4%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-number">1.8.4.</span> <span class="toc-text">æ¼”ç¤º2 - 4ç§è§£å†³æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-14"><span class="toc-number">1.8.4.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-14"><span class="toc-number">1.8.5.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP"><span class="toc-number">2.</span> <span class="toc-text">AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-AOP-%E5%AE%9E%E7%8E%B0%E4%B9%8B-ajc-%E7%BC%96%E8%AF%91%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text">9) AOP å®ç°ä¹‹ ajc ç¼–è¯‘å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-15"><span class="toc-number">2.1.1.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-AOP-%E5%AE%9E%E7%8E%B0%E4%B9%8B-agent-%E7%B1%BB%E5%8A%A0%E8%BD%BD"><span class="toc-number">2.2.</span> <span class="toc-text">10) AOP å®ç°ä¹‹ agent ç±»åŠ è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-16"><span class="toc-number">2.2.1.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-AOP-%E5%AE%9E%E7%8E%B0%E4%B9%8B-proxy"><span class="toc-number">2.3.</span> <span class="toc-text">11) AOP å®ç°ä¹‹ proxy</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-jdk-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">2.3.1.</span> <span class="toc-text">æ¼”ç¤º1 - jdk åŠ¨æ€ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-17"><span class="toc-number">2.3.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-cglib-%E4%BB%A3%E7%90%86"><span class="toc-number">2.3.3.</span> <span class="toc-text">æ¼”ç¤º2 - cglib ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-18"><span class="toc-number">2.3.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-jdk-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%BF%9B%E9%98%B6"><span class="toc-number">2.4.</span> <span class="toc-text">12) jdk åŠ¨æ€ä»£ç†è¿›é˜¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E6%A8%A1%E6%8B%9F-jdk-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">2.4.1.</span> <span class="toc-text">æ¼”ç¤º1 - æ¨¡æ‹Ÿ jdk åŠ¨æ€ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-19"><span class="toc-number">2.4.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E6%96%B9%E6%B3%95%E5%8F%8D%E5%B0%84%E4%BC%98%E5%8C%96"><span class="toc-number">2.4.3.</span> <span class="toc-text">æ¼”ç¤º2 - æ–¹æ³•åå°„ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-15"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-20"><span class="toc-number">2.4.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-cglib-%E4%BB%A3%E7%90%86%E8%BF%9B%E9%98%B6"><span class="toc-number">2.5.</span> <span class="toc-text">13) cglib ä»£ç†è¿›é˜¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E6%A8%A1%E6%8B%9F-cglib-%E4%BB%A3%E7%90%86"><span class="toc-number">2.5.1.</span> <span class="toc-text">æ¼”ç¤º - æ¨¡æ‹Ÿ cglib ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-16"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-21"><span class="toc-number">2.5.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-cglib-%E9%81%BF%E5%85%8D%E5%8F%8D%E5%B0%84%E8%B0%83%E7%94%A8"><span class="toc-number">2.6.</span> <span class="toc-text">14) cglib é¿å…åå°„è°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-cglib-%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E5%8F%8D%E5%B0%84"><span class="toc-number">2.6.1.</span> <span class="toc-text">æ¼”ç¤º - cglib å¦‚ä½•é¿å…åå°„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-17"><span class="toc-number">2.6.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-22"><span class="toc-number">2.6.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-jdk-%E5%92%8C-cglib-%E5%9C%A8-Spring-%E4%B8%AD%E7%9A%84%E7%BB%9F%E4%B8%80"><span class="toc-number">2.7.</span> <span class="toc-text">15) jdk å’Œ cglib åœ¨ Spring ä¸­çš„ç»Ÿä¸€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%BA%95%E5%B1%82%E5%88%87%E7%82%B9%E3%80%81%E9%80%9A%E7%9F%A5%E3%80%81%E5%88%87%E9%9D%A2"><span class="toc-number">2.7.1.</span> <span class="toc-text">æ¼”ç¤º - åº•å±‚åˆ‡ç‚¹ã€é€šçŸ¥ã€åˆ‡é¢</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-18"><span class="toc-number">2.7.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-23"><span class="toc-number">2.7.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E5%88%87%E7%82%B9%E5%8C%B9%E9%85%8D"><span class="toc-number">2.8.</span> <span class="toc-text">16) åˆ‡ç‚¹åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%88%87%E7%82%B9%E5%8C%B9%E9%85%8D"><span class="toc-number">2.8.1.</span> <span class="toc-text">æ¼”ç¤º - åˆ‡ç‚¹åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-19"><span class="toc-number">2.8.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-24"><span class="toc-number">2.8.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E4%BB%8E-Aspect-%E5%88%B0-Advisor"><span class="toc-number">2.9.</span> <span class="toc-text">17) ä» @Aspect åˆ° Advisor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E4%BB%A3%E7%90%86%E5%88%9B%E5%BB%BA%E5%99%A8"><span class="toc-number">2.9.1.</span> <span class="toc-text">æ¼”ç¤º1 - ä»£ç†åˆ›å»ºå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-20"><span class="toc-number">2.9.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-25"><span class="toc-number">2.9.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E4%BB%A3%E7%90%86%E5%88%9B%E5%BB%BA%E6%97%B6%E6%9C%BA"><span class="toc-number">2.9.3.</span> <span class="toc-text">æ¼”ç¤º2 - ä»£ç†åˆ›å»ºæ—¶æœº</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-21"><span class="toc-number">2.9.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-26"><span class="toc-number">2.9.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-Before-%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BD%8E%E7%BA%A7%E9%80%9A%E7%9F%A5"><span class="toc-number">2.9.5.</span> <span class="toc-text">æ¼”ç¤º3 - @Before å¯¹åº”çš„ä½çº§é€šçŸ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-22"><span class="toc-number">2.9.5.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-27"><span class="toc-number">2.9.6.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-%E9%9D%99%E6%80%81%E9%80%9A%E7%9F%A5%E8%B0%83%E7%94%A8"><span class="toc-number">2.10.</span> <span class="toc-text">18) é™æ€é€šçŸ¥è°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E9%80%9A%E7%9F%A5%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">2.10.1.</span> <span class="toc-text">æ¼”ç¤º1 - é€šçŸ¥è°ƒç”¨è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-23"><span class="toc-number">2.10.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-28"><span class="toc-number">2.10.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E6%A8%A1%E6%8B%9F-MethodInvocation"><span class="toc-number">2.10.3.</span> <span class="toc-text">æ¼”ç¤º2 - æ¨¡æ‹Ÿ MethodInvocation</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-24"><span class="toc-number">2.10.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-29"><span class="toc-number">2.10.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E5%8A%A8%E6%80%81%E9%80%9A%E7%9F%A5%E8%B0%83%E7%94%A8"><span class="toc-number">2.11.</span> <span class="toc-text">19) åŠ¨æ€é€šçŸ¥è°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%B8%A6%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A%E7%9A%84%E9%80%9A%E7%9F%A5%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8"><span class="toc-number">2.11.1.</span> <span class="toc-text">æ¼”ç¤º - å¸¦å‚æ•°ç»‘å®šçš„é€šçŸ¥æ–¹æ³•è°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-25"><span class="toc-number">2.11.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-30"><span class="toc-number">2.11.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WEB"><span class="toc-number">3.</span> <span class="toc-text">WEB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-RequestMappingHandlerMapping-%E4%B8%8E-RequestMappingHandlerAdapter"><span class="toc-number">3.1.</span> <span class="toc-text">20) RequestMappingHandlerMapping ä¸ RequestMappingHandlerAdapter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-DispatcherServlet-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">3.1.1.</span> <span class="toc-text">æ¼”ç¤º1 - DispatcherServlet åˆå§‹åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-26"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-31"><span class="toc-number">3.1.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0%E4%B8%8E%E8%BF%94%E5%9B%9E%E5%80%BC%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">3.1.3.</span> <span class="toc-text">æ¼”ç¤º2 - è‡ªå®šä¹‰å‚æ•°ä¸è¿”å›å€¼å¤„ç†å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-27"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-32"><span class="toc-number">3.1.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">21) å‚æ•°è§£æå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%B8%B8%E8%A7%81%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">3.2.1.</span> <span class="toc-text">æ¼”ç¤º - å¸¸è§å‚æ•°è§£æå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-28"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-33"><span class="toc-number">3.2.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%8F%82%E6%95%B0%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="toc-number">3.3.</span> <span class="toc-text">22) å‚æ•°åè§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E5%90%8D"><span class="toc-number">3.3.1.</span> <span class="toc-text">æ¼”ç¤º - ä¸¤ç§æ–¹æ³•è·å–å‚æ•°å</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-29"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-34"><span class="toc-number">3.3.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.4.</span> <span class="toc-text">23) å¯¹è±¡ç»‘å®šä¸ç±»å‹è½¬æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E7%AC%AC%E4%B8%80%E5%A5%97%E8%BD%AC%E6%8D%A2%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.4.1.</span> <span class="toc-text">åº•å±‚ç¬¬ä¸€å¥—è½¬æ¢æ¥å£ä¸å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E7%AC%AC%E4%BA%8C%E5%A5%97%E8%BD%AC%E6%8D%A2%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.4.2.</span> <span class="toc-text">åº•å±‚ç¬¬äºŒå¥—è½¬æ¢æ¥å£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E5%B1%82%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.4.3.</span> <span class="toc-text">é«˜å±‚æ¥å£ä¸å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">3.4.4.</span> <span class="toc-text">æ¼”ç¤º1 - ç±»å‹è½¬æ¢ä¸æ•°æ®ç»‘å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-30"><span class="toc-number">3.4.4.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-35"><span class="toc-number">3.4.5.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E5%B7%A5%E5%8E%82"><span class="toc-number">3.4.6.</span> <span class="toc-text">æ¼”ç¤º2 - æ•°æ®ç»‘å®šå·¥å‚</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-31"><span class="toc-number">3.4.6.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-36"><span class="toc-number">3.4.7.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E8%8E%B7%E5%8F%96%E6%B3%9B%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">3.4.8.</span> <span class="toc-text">æ¼”ç¤º3 - è·å–æ³›å‹å‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-32"><span class="toc-number">3.4.8.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-37"><span class="toc-number">3.4.9.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-ControllerAdvice-%E4%B9%8B-InitBinder"><span class="toc-number">3.5.</span> <span class="toc-text">24) @ControllerAdvice ä¹‹ @InitBinder</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%87%86%E5%A4%87-InitBinder"><span class="toc-number">3.5.1.</span> <span class="toc-text">æ¼”ç¤º - å‡†å¤‡ @InitBinder</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-38"><span class="toc-number">3.5.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">3.6.</span> <span class="toc-text">25) æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œæµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE1"><span class="toc-number">3.6.1.</span> <span class="toc-text">å›¾1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE2"><span class="toc-number">3.6.2.</span> <span class="toc-text">å›¾2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE3"><span class="toc-number">3.6.3.</span> <span class="toc-text">å›¾3</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-ControllerAdvice-%E4%B9%8B-ModelAttribute"><span class="toc-number">3.7.</span> <span class="toc-text">26) @ControllerAdvice ä¹‹ @ModelAttribute</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%87%86%E5%A4%87-ModelAttribute"><span class="toc-number">3.7.1.</span> <span class="toc-text">æ¼”ç¤º - å‡†å¤‡ @ModelAttribute</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-33"><span class="toc-number">3.7.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-39"><span class="toc-number">3.7.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-%E8%BF%94%E5%9B%9E%E5%80%BC%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">3.8.</span> <span class="toc-text">27) è¿”å›å€¼å¤„ç†å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%B8%B8%E8%A7%81%E8%BF%94%E5%9B%9E%E5%80%BC%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">3.8.1.</span> <span class="toc-text">æ¼”ç¤º - å¸¸è§è¿”å›å€¼å¤„ç†å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-34"><span class="toc-number">3.8.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-40"><span class="toc-number">3.8.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-MessageConverter"><span class="toc-number">3.9.</span> <span class="toc-text">28) MessageConverter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-MessageConverter-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">3.9.1.</span> <span class="toc-text">æ¼”ç¤º - MessageConverter çš„ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-35"><span class="toc-number">3.9.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-41"><span class="toc-number">3.9.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-ControllerAdvice-%E4%B9%8B-ResponseBodyAdvice"><span class="toc-number">3.10.</span> <span class="toc-text">29) @ControllerAdvice ä¹‹ ResponseBodyAdvice</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-ResponseBodyAdvice-%E5%A2%9E%E5%BC%BA"><span class="toc-number">3.10.1.</span> <span class="toc-text">æ¼”ç¤º - ResponseBodyAdvice å¢å¼º</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-36"><span class="toc-number">3.10.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-42"><span class="toc-number">3.10.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30-%E5%BC%82%E5%B8%B8%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">3.11.</span> <span class="toc-text">30) å¼‚å¸¸è§£æå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-ExceptionHandlerExceptionResolver"><span class="toc-number">3.11.1.</span> <span class="toc-text">æ¼”ç¤º - ExceptionHandlerExceptionResolver</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-37"><span class="toc-number">3.11.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-43"><span class="toc-number">3.11.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#31-ControllerAdvice-%E4%B9%8B-ExceptionHandler"><span class="toc-number">3.12.</span> <span class="toc-text">31) @ControllerAdvice ä¹‹ @ExceptionHandler</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%87%86%E5%A4%87-ExceptionHandler"><span class="toc-number">3.12.1.</span> <span class="toc-text">æ¼”ç¤º - å‡†å¤‡ @ExceptionHandler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-38"><span class="toc-number">3.12.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-44"><span class="toc-number">3.12.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-Tomcat-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">3.13.</span> <span class="toc-text">32) Tomcat å¼‚å¸¸å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E9%94%99%E8%AF%AF%E9%A1%B5%E5%A4%84%E7%90%86"><span class="toc-number">3.13.1.</span> <span class="toc-text">æ¼”ç¤º1 - é”™è¯¯é¡µå¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-1"><span class="toc-number">3.13.1.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-45"><span class="toc-number">3.13.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-BasicErrorController"><span class="toc-number">3.13.3.</span> <span class="toc-text">æ¼”ç¤º2 - BasicErrorController</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-2"><span class="toc-number">3.13.3.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-46"><span class="toc-number">3.13.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-BeanNameUrlHandlerMapping-%E4%B8%8E-SimpleControllerHandlerAdapter"><span class="toc-number">3.14.</span> <span class="toc-text">33) BeanNameUrlHandlerMapping ä¸ SimpleControllerHandlerAdapter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E6%9C%AC%E7%BB%84%E6%98%A0%E5%B0%84%E5%99%A8%E5%92%8C%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">3.14.1.</span> <span class="toc-text">æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-3"><span class="toc-number">3.14.1.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-47"><span class="toc-number">3.14.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-RouterFunctionMapping-%E4%B8%8E-HandlerFunctionAdapter"><span class="toc-number">3.15.</span> <span class="toc-text">34) RouterFunctionMapping ä¸ HandlerFunctionAdapter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E6%9C%AC%E7%BB%84%E6%98%A0%E5%B0%84%E5%99%A8%E5%92%8C%E9%80%82%E9%85%8D%E5%99%A8-1"><span class="toc-number">3.15.1.</span> <span class="toc-text">æ¼”ç¤º - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-4"><span class="toc-number">3.15.1.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-48"><span class="toc-number">3.15.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#35-SimpleUrlHandlerMapping-%E4%B8%8E-HttpRequestHandlerAdapter"><span class="toc-number">3.16.</span> <span class="toc-text">35) SimpleUrlHandlerMapping ä¸ HttpRequestHandlerAdapter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E6%9C%AC%E7%BB%84%E6%98%A0%E5%B0%84%E5%99%A8%E5%92%8C%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">3.16.1.</span> <span class="toc-text">æ¼”ç¤º1 - æœ¬ç»„æ˜ å°„å™¨å’Œé€‚é…å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-39"><span class="toc-number">3.16.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-5"><span class="toc-number">3.16.1.2.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-49"><span class="toc-number">3.16.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%A7%A3%E6%9E%90%E4%BC%98%E5%8C%96"><span class="toc-number">3.16.3.</span> <span class="toc-text">æ¼”ç¤º2 - é™æ€èµ„æºè§£æä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-6"><span class="toc-number">3.16.3.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-50"><span class="toc-number">3.16.4.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E6%AC%A2%E8%BF%8E%E9%A1%B5"><span class="toc-number">3.16.5.</span> <span class="toc-text">æ¼”ç¤º3 - æ¬¢è¿é¡µ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-7"><span class="toc-number">3.16.5.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-51"><span class="toc-number">3.16.6.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E5%99%A8%E4%B8%8E%E9%80%82%E9%85%8D%E5%99%A8%E5%B0%8F%E7%BB%93"><span class="toc-number">3.16.7.</span> <span class="toc-text">æ˜ å°„å™¨ä¸é€‚é…å™¨å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-mvc-%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="toc-number">3.17.</span> <span class="toc-text">36) mvc å¤„ç†æµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Boot"><span class="toc-number">4.</span> <span class="toc-text">Boot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#37-Boot-%E9%AA%A8%E6%9E%B6%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.1.</span> <span class="toc-text">37) Boot éª¨æ¶é¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#38-Boot-War%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.2.</span> <span class="toc-text">38) Boot Waré¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">4.2.1.</span> <span class="toc-text">æµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%A4%BA"><span class="toc-number">4.2.2.</span> <span class="toc-text">å¯ç¤º</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#39-Boot-%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">4.3.</span> <span class="toc-text">39) Boot å¯åŠ¨è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">4.3.1.</span> <span class="toc-text">æ¼”ç¤º - å¯åŠ¨è¿‡ç¨‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-52"><span class="toc-number">4.3.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#40-Tomcat-%E5%86%85%E5%B5%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">4.4.</span> <span class="toc-text">40) Tomcat å†…åµŒå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-Tomcat-%E5%86%85%E5%B5%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">4.4.1.</span> <span class="toc-text">æ¼”ç¤º1 - Tomcat å†…åµŒå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-8"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E9%9B%86%E6%88%90-Spring-%E5%AE%B9%E5%99%A8"><span class="toc-number">4.4.2.</span> <span class="toc-text">æ¼”ç¤º2 - é›†æˆ Spring å®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-9"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#41-Boot-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">4.5.</span> <span class="toc-text">41) Boot è‡ªåŠ¨é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AopAutoConfiguration"><span class="toc-number">4.5.1.</span> <span class="toc-text">AopAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DataSourceAutoConfiguration"><span class="toc-number">4.5.2.</span> <span class="toc-text">DataSourceAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MybatisAutoConfiguration"><span class="toc-number">4.5.3.</span> <span class="toc-text">MybatisAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TransactionAutoConfiguration"><span class="toc-number">4.5.4.</span> <span class="toc-text">TransactionAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ServletWebServerFactoryAutoConfiguration"><span class="toc-number">4.5.5.</span> <span class="toc-text">ServletWebServerFactoryAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DispatcherServletAutoConfiguration"><span class="toc-number">4.5.6.</span> <span class="toc-text">DispatcherServletAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WebMvcAutoConfiguration"><span class="toc-number">4.5.7.</span> <span class="toc-text">WebMvcAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ErrorMvcAutoConfiguration"><span class="toc-number">4.5.8.</span> <span class="toc-text">ErrorMvcAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MultipartAutoConfiguration"><span class="toc-number">4.5.9.</span> <span class="toc-text">MultipartAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpEncodingAutoConfiguration"><span class="toc-number">4.5.10.</span> <span class="toc-text">HttpEncodingAutoConfiguration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E5%8E%9F%E7%90%86"><span class="toc-number">4.5.11.</span> <span class="toc-text">æ¼”ç¤º - è‡ªåŠ¨é…ç½®ç±»åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-10"><span class="toc-number">4.5.11.1.</span> <span class="toc-text">å…³é”®ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-53"><span class="toc-number">4.5.12.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E6%9D%A1%E4%BB%B6%E8%A3%85%E9%85%8D%E5%BA%95%E5%B1%82"><span class="toc-number">4.6.</span> <span class="toc-text">42) æ¡ä»¶è£…é…åº•å±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-54"><span class="toc-number">4.6.1.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-number">5.</span> <span class="toc-text">å…¶å®ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#43-FactoryBean"><span class="toc-number">5.1.</span> <span class="toc-text">43) FactoryBean</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-FactoryBean"><span class="toc-number">5.1.1.</span> <span class="toc-text">æ¼”ç¤º - FactoryBean</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-40"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-55"><span class="toc-number">5.1.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#44-Indexed-%E5%8E%9F%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text">44) @Indexed åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-Indexed"><span class="toc-number">5.2.1.</span> <span class="toc-text">æ¼”ç¤º - @Indexed</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-41"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-56"><span class="toc-number">5.2.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#45-%E4%BB%A3%E7%90%86%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3"><span class="toc-number">5.3.</span> <span class="toc-text">45) ä»£ç†è¿›ä¸€æ­¥ç†è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E4%BB%A3%E7%90%86"><span class="toc-number">5.3.1.</span> <span class="toc-text">æ¼”ç¤º - ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-42"><span class="toc-number">5.3.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-57"><span class="toc-number">5.3.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#46-Value-%E8%A3%85%E9%85%8D%E5%BA%95%E5%B1%82"><span class="toc-number">5.4.</span> <span class="toc-text">46) @Value è£…é…åº•å±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%B1%BB%E5%9E%8B%E8%A3%85%E9%85%8D%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">5.4.1.</span> <span class="toc-text">æŒ‰ç±»å‹è£…é…çš„æ­¥éª¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-Value-%E8%A3%85%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="toc-number">5.4.2.</span> <span class="toc-text">æ¼”ç¤º - @Value è£…é…è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-43"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-58"><span class="toc-number">5.4.3.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#47-Autowired-%E8%A3%85%E9%85%8D%E5%BA%95%E5%B1%82"><span class="toc-number">5.5.</span> <span class="toc-text">47) @Autowired è£…é…åº•å±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-Autowired-%E8%A3%85%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="toc-number">5.5.1.</span> <span class="toc-text">æ¼”ç¤º - @Autowired è£…é…è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-44"><span class="toc-number">5.5.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-59"><span class="toc-number">5.5.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#48-%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">5.6.</span> <span class="toc-text">48) äº‹ä»¶ç›‘å¬å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">5.6.1.</span> <span class="toc-text">æ¼”ç¤º - äº‹ä»¶ç›‘å¬å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-45"><span class="toc-number">5.6.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-60"><span class="toc-number">5.6.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#49-%E4%BA%8B%E4%BB%B6%E5%8F%91%E5%B8%83%E5%99%A8"><span class="toc-number">5.7.</span> <span class="toc-text">49) äº‹ä»¶å‘å¸ƒå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA-%E4%BA%8B%E4%BB%B6%E5%8F%91%E5%B8%83%E5%99%A8"><span class="toc-number">5.7.1.</span> <span class="toc-text">æ¼”ç¤º - äº‹ä»¶å‘å¸ƒå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83-46"><span class="toc-number">5.7.1.1.</span> <span class="toc-text">ä»£ç å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E8%8E%B7%F0%9F%92%A1-61"><span class="toc-number">5.7.2.</span> <span class="toc-text">æ”¶è·ğŸ’¡</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo16.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"></a><div class="content"><a class="title" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—">Clawdbotå®Œæ•´é…ç½®æŒ‡å—</a><time datetime="2026-02-11T10:15:08.000Z" title="å‘è¡¨äº 2026-02-11 18:15:08">2026-02-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"></a><div class="content"><a class="title" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;">å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;</a><time datetime="2026-02-03T06:02:28.000Z" title="å‘è¡¨äº 2026-02-03 14:02:28">2026-02-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/nba-logo7.jpg)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2026 By å°äº”</span><span class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div><div class="footer_custom_text"><a href="https://www.foreverblog.cn/" rel="external nofollow noreferrer" target="_blank"><img src="/img/loading.gif" data-lazy-src="https://img.foreverblog.cn/logo_en_default.png" alt="åå¹´ä¹‹çº¦" style="width:auto;height:16px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach(((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(a,r),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then((({svg:e})=>m(e)))}))})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const t=(e,a)=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach((r=>{const n=e[r];"object"==typeof n&&null!==n&&(n[a]?e[r]=n[a]:t(n,a))}))},e=e=>{window.loadChartJS=!0,Array.from(e).forEach(((e,a)=>{const r=e.firstElementChild,n=e.getAttribute("data-chartjs-id")||"chartjs-"+a,d=e.getAttribute("data-width"),o=document.getElementById(n);o&&o.parentNode.remove();const c=r.textContent,l=document.createElement("canvas");l.id=n;const s=document.createElement("div");s.className="chartjs-wrap",d&&(s.style.width=d),s.appendChild(l),r.insertAdjacentElement("afterend",s);const h=document.getElementById(n).getContext("2d"),i=JSON.parse(c),m="dark"===document.documentElement.getAttribute("data-theme")?"dark-mode":"light-mode";(t=>{"dark-mode"===t?(Chart.defaults.color="rgba(255, 255, 255, 0.8)",Chart.defaults.borderColor="rgba(255, 255, 255, 0.2)",Chart.defaults.scale.ticks.backdropColor="transparent"):(Chart.defaults.color="rgba(0, 0, 0, 0.8)",Chart.defaults.borderColor="rgba(0, 0, 0, 0.1)",Chart.defaults.scale.ticks.backdropColor="transparent")})(m),t(i,m),new Chart(h,i)}))},a=()=>{const t=document.querySelectorAll("#article-container .chartjs-container");0!==t.length&&(window.loadChartJS?e(t):btf.getScript("https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js").then((()=>e(t))))};btf.addGlobalFn("themeChange",a,"chartjs"),btf.addGlobalFn("encrypt",a,"chartjs"),window.pjax?a():document.addEventListener("DOMContentLoaded",a)})()</script></div><div class="aplayer no-destroy" data-id="9061017364" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="false" muted></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>ç½‘ç«™å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">ç‚¹å‡»åˆ·æ–°</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬",backgroundColor:t,duration:5e5,pos:e,actionText:"ç‚¹å‡»åˆ·æ–°",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/diytitle.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/talking/"]):not([href="/artitalk/"])',selectors:['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:description"]','link[rel="canonical"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!0,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>{try{e()}catch(e){console.debug("Pjax callback failed:",e)}}))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{if(404===e.request.status){!0?pjax.loadUrl("/404"):window.location.href="/404"}}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div id="algolia-search-input"><div class="ais-SearchBox"><form class="ais-SearchBox-form" action="" role="search" novalidate><input class="ais-SearchBox-input" type="search" placeholder="æœç´¢æ–‡ç« " autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" maxlength="512" aria-label="Search"><button class="ais-SearchBox-submit" type="submit" title="Submit the search query" style="display:none"><svg class="ais-SearchBox-submitIcon" width="10" height="10" viewBox="0 0 40 40" aria-hidden="true"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path></svg></button></form></div><hr><div id="algolia-search-results"><div id="algolia-hits"><div id="algolia-hits-empty" style="display:none"></div><div class="ais-Hits" style="display:none"><ol class="ais-Hits-list"></ol></div></div><div class="ais-Pagination" id="algolia-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="algolia-info"><span class="ais-Stats-text"></span><a class="algolia-poweredBy" href="https://www.algolia.com/?utm_source=algoliasearch.js&amp;utm_medium=website&amp;utm_content=localhost&amp;utm_campaign=poweredby" target="_blank" aria-label="Search by Algolia" rel="noopener noreferrer"><svg class="ais-PoweredBy-logo" height="1.2em" viewBox="0 0 572 64" style="width:auto"><path fill="#36395A" d="M16 48.3c-3.4 0-6.3-.6-8.7-1.7A12.4 12.4 0 0 1 1.9 42C.6 40 0 38 0 35.4h6.5a6.7 6.7 0 0 0 3.9 6c1.4.7 3.3 1.1 5.6 1.1 2.2 0 4-.3 5.4-1a7 7 0 0 0 3-2.4 6 6 0 0 0 1-3.4c0-1.5-.6-2.8-1.9-3.7-1.3-1-3.3-1.6-5.9-1.8l-4-.4c-3.7-.3-6.6-1.4-8.8-3.4a10 10 0 0 1-3.3-7.9c0-2.4.6-4.6 1.8-6.4a12 12 0 0 1 5-4.3c2.2-1 4.7-1.6 7.5-1.6s5.5.5 7.6 1.6a12 12 0 0 1 5 4.4c1.2 1.8 1.8 4 1.8 6.7h-6.5a6.4 6.4 0 0 0-3.5-5.9c-1-.6-2.6-1-4.4-1s-3.2.3-4.4 1c-1.1.6-2 1.4-2.6 2.4-.5 1-.8 2-.8 3.1a5 5 0 0 0 1.5 3.6c1 1 2.6 1.7 4.7 1.9l4 .3c2.8.2 5.2.8 7.2 1.8 2.1 1 3.7 2.2 4.9 3.8a9.7 9.7 0 0 1 1.7 5.8c0 2.5-.7 4.7-2 6.6a13 13 0 0 1-5.6 4.4c-2.4 1-5.2 1.6-8.4 1.6Zm35.6 0c-2.6 0-4.8-.4-6.7-1.3a13 13 0 0 1-4.7-3.5 17.1 17.1 0 0 1-3.6-10.4v-1c0-2 .3-3.8 1-5.6a13 13 0 0 1 7.3-8.3 15 15 0 0 1 6.3-1.4A13.2 13.2 0 0 1 64 24.3c1 2.2 1.6 4.6 1.6 7.2V34H39.4v-4.3h21.8l-1.8 2.2c0-2-.3-3.7-.9-5.1a7.3 7.3 0 0 0-2.7-3.4c-1.2-.7-2.7-1.1-4.6-1.1s-3.4.4-4.7 1.3a8 8 0 0 0-2.9 3.6c-.6 1.5-.9 3.3-.9 5.4 0 2 .3 3.7 1 5.3a7.9 7.9 0 0 0 2.8 3.7c1.3.8 3 1.3 5 1.3s3.8-.5 5.1-1.3c1.3-1 2.1-2 2.4-3.2h6a11.8 11.8 0 0 1-7 8.7 16 16 0 0 1-6.4 1.2ZM80 48c-2.2 0-4-.3-5.7-1a8.4 8.4 0 0 1-3.7-3.3 9.7 9.7 0 0 1-1.3-5.2c0-2 .5-3.8 1.5-5.2a9 9 0 0 1 4.3-3.1c1.8-.7 4-1 6.7-1H89v4.1h-7.5c-2 0-3.4.5-4.4 1.4-1 1-1.6 2.1-1.6 3.6s.5 2.7 1.6 3.6c1 1 2.5 1.4 4.4 1.4 1.1 0 2.2-.2 3.2-.7 1-.4 1.9-1 2.6-2 .6-1 1-2.4 1-4.2l1.7 2.1c-.2 2-.7 3.8-1.5 5.2a9 9 0 0 1-3.4 3.3 12 12 0 0 1-5.3 1Zm9.5-.7v-8.8h-1v-10c0-1.8-.5-3.2-1.4-4.1-1-1-2.4-1.4-4.2-1.4a142.9 142.9 0 0 0-10.2.4v-5.6a74.8 74.8 0 0 1 8.6-.4c3 0 5.5.4 7.5 1.2s3.4 2 4.4 3.6c1 1.7 1.4 4 1.4 6.7v18.4h-5Zm12.9 0V17.8h5v12.3h-.2c0-4.2 1-7.4 2.8-9.5a11 11 0 0 1 8.3-3.1h1v5.6h-2a9 9 0 0 0-6.3 2.2c-1.5 1.5-2.2 3.6-2.2 6.4v15.6h-6.4Zm34.4 1a15 15 0 0 1-6.6-1.3c-1.9-.9-3.4-2-4.7-3.5a15.5 15.5 0 0 1-2.7-5c-.6-1.7-1-3.6-1-5.4v-1c0-2 .4-3.8 1-5.6a15 15 0 0 1 2.8-4.9c1.3-1.5 2.8-2.6 4.6-3.5a16.4 16.4 0 0 1 13.3.2c2 1 3.5 2.3 4.8 4a12 12 0 0 1 2 6H144c-.2-1.6-1-3-2.2-4.1a7.5 7.5 0 0 0-5.2-1.7 8 8 0 0 0-4.7 1.3 8 8 0 0 0-2.8 3.6 13.8 13.8 0 0 0 0 10.3c.6 1.5 1.5 2.7 2.8 3.6s2.8 1.3 4.8 1.3c1.5 0 2.7-.2 3.8-.8a7 7 0 0 0 2.6-2c.7-1 1-2 1.2-3.2h6.2a11 11 0 0 1-2 6.2 15.1 15.1 0 0 1-11.8 5.5Zm19.7-1v-40h6.4V31h-1.3c0-3 .4-5.5 1.1-7.6a9.7 9.7 0 0 1 3.5-4.8A9.9 9.9 0 0 1 172 17h.3c3.5 0 6 1.1 7.9 3.5 1.7 2.3 2.6 5.7 2.6 10v16.8h-6.4V29.6c0-2.1-.6-3.8-1.8-5a6.4 6.4 0 0 0-4.8-1.8c-2 0-3.7.7-5 2a7.8 7.8 0 0 0-1.9 5.5v17h-6.4Zm63.8 1a12.2 12.2 0 0 1-10.9-6.2 19 19 0 0 1-1.8-7.3h1.4v12.5h-5.1v-40h6.4v19.8l-2 3.5c.2-3.1.8-5.7 1.9-7.7a11 11 0 0 1 4.4-4.5c1.8-1 3.9-1.5 6.1-1.5a13.4 13.4 0 0 1 12.8 9.1c.7 1.9 1 3.8 1 6v1c0 2.2-.3 4.1-1 6a13.6 13.6 0 0 1-13.2 9.4Zm-1.2-5.5a8.4 8.4 0 0 0 7.9-5c.7-1.5 1.1-3.3 1.1-5.3s-.4-3.8-1.1-5.3a8.7 8.7 0 0 0-3.2-3.6 9.6 9.6 0 0 0-9.2-.2 8.5 8.5 0 0 0-3.3 3.2c-.8 1.4-1.3 3-1.3 5v2.3a9 9 0 0 0 1.3 4.8 9 9 0 0 0 3.4 3c1.4.7 2.8 1 4.4 1Zm27.3 3.9-10-28.9h6.5l9.5 28.9h-6Zm-7.5 12.2v-5.7h4.9c1 0 2-.1 2.9-.4a4 4 0 0 0 2-1.4c.4-.7.9-1.6 1.2-2.7l8.6-30.9h6.2l-9.3 32.4a14 14 0 0 1-2.5 5 8.9 8.9 0 0 1-4 2.8c-1.5.6-3.4.9-5.6.9h-4.4Zm9-12.2v-5.2h6.4v5.2H248Z"></path><path fill="#003DFF" d="M534.4 9.1H528a.8.8 0 0 1-.7-.7V1.8c0-.4.2-.7.6-.8l6.5-1c.4 0 .8.2.9.6v7.8c0 .4-.4.7-.8.7zM428 35.2V.8c0-.5-.3-.8-.7-.8h-.2l-6.4 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.5 0 .8-.4.8-.8V43c0-.4-.3-.7-.6-.8-4.5-.5-4.5-6-4.5-7zm106.5-21.8H528c-.4 0-.7.4-.7.8v34c0 .4.3.8.7.8h6.5c.4 0 .8-.4.8-.8v-34c0-.5-.4-.8-.8-.8zm-17.7 21.8V.8c0-.5-.3-.8-.8-.8l-6.5 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.4 0 .8-.4.8-.8V43c0-.4-.3-.7-.7-.8-4.4-.5-4.4-6-4.4-7zm-22.2-20.6a16.5 16.5 0 0 1 8.6 9.3c.8 2.2 1.3 4.8 1.3 7.5a19.4 19.4 0 0 1-4.6 12.6 14.8 14.8 0 0 1-5.2 3.6c-2 .9-5.2 1.4-6.8 1.4a21 21 0 0 1-6.7-1.4 15.4 15.4 0 0 1-8.6-9.3 21.3 21.3 0 0 1 0-14.4 15.2 15.2 0 0 1 8.6-9.3c2-.8 4.3-1.2 6.7-1.2s4.6.4 6.7 1.2zm-6.7 27.6c2.7 0 4.7-1 6.2-3s2.2-4.3 2.2-7.8-.7-6.3-2.2-8.3-3.5-3-6.2-3-4.7 1-6.1 3c-1.5 2-2.2 4.8-2.2 8.3s.7 5.8 2.2 7.8 3.5 3 6.2 3zm-88.8-28.8c-6.2 0-11.7 3.3-14.8 8.2a18.6 18.6 0 0 0 4.8 25.2c1.8 1.2 4 1.8 6.2 1.7s.1 0 .1 0h.9c4.2-.7 8-4 9.1-8.1v7.4c0 .4.3.7.8.7h6.4a.7.7 0 0 0 .7-.7V14.2c0-.5-.3-.8-.7-.8h-13.5zm6.3 26.5a9.8 9.8 0 0 1-5.7 2h-.5a10 10 0 0 1-9.2-14c1.4-3.7 5-6.3 9-6.3h6.4v18.3zm152.3-26.5h13.5c.5 0 .8.3.8.7v33.7c0 .4-.3.7-.8.7h-6.4a.7.7 0 0 1-.8-.7v-7.4c-1.2 4-4.8 7.4-9 8h-.1a4.2 4.2 0 0 1-.5.1h-.9a10.3 10.3 0 0 1-7-2.6c-4-3.3-6.5-8.4-6.5-14.2 0-3.7 1-7.2 3-10 3-5 8.5-8.3 14.7-8.3zm.6 28.4c2.2-.1 4.2-.6 5.7-2V21.7h-6.3a9.8 9.8 0 0 0-9 6.4 10.2 10.2 0 0 0 9.1 13.9h.5zM452.8 13.4c-6.2 0-11.7 3.3-14.8 8.2a18.5 18.5 0 0 0 3.6 24.3 10.4 10.4 0 0 0 13 .6c2.2-1.5 3.8-3.7 4.5-6.1v7.8c0 2.8-.8 5-2.2 6.3-1.5 1.5-4 2.2-7.5 2.2l-6-.3c-.3 0-.7.2-.8.5l-1.6 5.5c-.1.4.1.8.5 1h.1c2.8.4 5.5.6 7 .6 6.3 0 11-1.4 14-4.1 2.7-2.5 4.2-6.3 4.5-11.4V14.2c0-.5-.4-.8-.8-.8h-13.5zm6.3 8.2v18.3a9.6 9.6 0 0 1-5.6 2h-1a10.3 10.3 0 0 1-8.8-14c1.4-3.7 5-6.3 9-6.3h6.4zM291 31.5A32 32 0 0 1 322.8 0h30.8c.6 0 1.2.5 1.2 1.2v61.5c0 1.1-1.3 1.7-2.2 1l-19.2-17a18 18 0 0 1-11 3.4 18.1 18.1 0 1 1 18.2-14.8c-.1.4-.5.7-.9.6-.1 0-.3 0-.4-.2l-3.8-3.4c-.4-.3-.6-.8-.7-1.4a12 12 0 1 0-2.4 8.3c.4-.4 1-.5 1.6-.2l14.7 13.1v-46H323a26 26 0 1 0 10 49.7c.8-.4 1.6-.2 2.3.3l3 2.7c.3.2.3.7 0 1l-.2.2a32 32 0 0 1-47.2-28.6z"></path></svg></a></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.39.0/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/search/algolia.min.js"></script></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"==location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo3.jpg" alt="/img/nba-logo3.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2024-02-02</span><a class="blog-slider__title" href="posts/1bcb0ad4/">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</a><div class="blog-slider__text">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</div><a class="blog-slider__button" href="posts/1bcb0ad4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-06-14</span><a class="blog-slider__title" href="posts/aa43cc95/">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</a><div class="blog-slider__text">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</div><a class="blog-slider__button" href="posts/aa43cc95/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" alt="/img/nba-logo29.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-13</span><a class="blog-slider__title" href="posts/15957791/">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</a><div class="blog-slider__text">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</div><a class="blog-slider__button" href="posts/15957791/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/4ecfb081/">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</a><div class="blog-slider__text">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</div><a class="blog-slider__button" href="posts/4ecfb081/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/37032a87/">k3sé«˜å¯ç”¨å®‰è£…</a><div class="blog-slider__text">k3sé«˜å¯ç”¨å®‰è£…</div><a class="blog-slider__button" href="posts/37032a87/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo5.jpg" alt="/img/nba-logo5.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="posts/20b19ed4/">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</a><div class="blog-slider__text">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</div><a class="blog-slider__button" href="posts/20b19ed4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-02</span><a class="blog-slider__title" href="posts/6de14387/">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</a><div class="blog-slider__text">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</div><a class="blog-slider__button" href="posts/6de14387/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-12-11</span><a class="blog-slider__title" href="posts/fb9adcb6/">è®°å½•windows11+wsl2ç¯å¢ƒæ­é…</a><div class="blog-slider__text">windows11+wsl2å¼€å‘ç¯å¢ƒé…ç½®</div><a class="blog-slider__button" href="posts/fb9adcb6/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2026-01-28</span><a class="blog-slider__title" href="posts/2a9d73ff/">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</a><div class="blog-slider__text">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</div><a class="blog-slider__button" href="posts/2a9d73ff/">è¯¦æƒ…</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';console.log("å·²æŒ‚è½½swiper"),parent.insertAdjacentHTML("afterbegin",child)}</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script><style></style><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("å·²æŒ‚è½½history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300,hOffset:20,vOffset:-20},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/"})</script></body></html>
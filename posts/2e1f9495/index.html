<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>LDAP学习总结 | 小五的个人杂货铺</title><meta name="author" content="小五"><meta name="copyright" content="小五"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="摘自：https:&#x2F;&#x2F;lework.github.io&#x2F;2019&#x2F;07&#x2F;18&#x2F;ldap&#x2F;  安装使用参考：  http:&#x2F;&#x2F;ldapdoc.eryajf.net&#x2F;pages&#x2F;f081dc&#x2F; https:&#x2F;&#x2F;github.com&#x2F;behappy-project&#x2F;behappy-docker-application&#x2F;tree&#x2F;master&#x2F;ldap  LDAP概念LDAP是轻量目录访问协议,英文全称"><meta property="og:type" content="article"><meta property="og:title" content="LDAP学习总结"><meta property="og:url" content="https://xiaowu95.wang/posts/2e1f9495/"><meta property="og:site_name" content="小五的个人杂货铺"><meta property="og:description" content="摘自：https:&#x2F;&#x2F;lework.github.io&#x2F;2019&#x2F;07&#x2F;18&#x2F;ldap&#x2F;  安装使用参考：  http:&#x2F;&#x2F;ldapdoc.eryajf.net&#x2F;pages&#x2F;f081dc&#x2F; https:&#x2F;&#x2F;github.com&#x2F;behappy-project&#x2F;behappy-docker-application&#x2F;tree&#x2F;master&#x2F;ldap  LDAP概念LDAP是轻量目录访问协议,英文全称"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xiaowu95.wang/img/nba-logo9.jpg"><meta property="article:published_time" content="2023-04-21T16:00:00.000Z"><meta property="article:modified_time" content="2023-04-21T16:00:00.000Z"><meta property="article:author" content="小五"><meta property="article:tag" content="ldap"><meta property="article:tag" content="身份认证,角色授权"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaowu95.wang/img/nba-logo9.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://xiaowu95.wang/posts/2e1f9495/"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="kHfLZxYQ7y3s3AR7gyJDdJkQvGNjQsvopp6N3gEEx0s"><meta name="baidu-site-verification" content="codeva-aVS4F6wAjS"><link rel="manifest" href="/wang-xiaowu/pwa/site.webmanifest"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/wang-xiaowu/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/wang-xiaowu/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/wang-xiaowu/pwa/favicon-16x16.png"><link rel="mask-icon" href="/wang-xiaowu/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.2.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),c=window.matchMedia("(prefers-color-scheme: dark)"),r=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(r.matches)a();else if(c.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}c.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?86cb34987e15c900c39e12ebdf08c50d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-1MFQ47191J"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1MFQ47191J"),btf.addGlobalFn("pjaxComplete",(()=>{gtag("config","G-1MFQ47191J",{page_path:window.location.pathname})}),"google_analytics")</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"M91QAWRVY4",apiKey:"ecc30a5e06136e1cc491685e39801190",indexName:"xiaowu-blog",hitsPerPage:6,languages:{input_placeholder:"搜索文章",hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，耗时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400,highlightFullpage:!0,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!0},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:150,languages:{author:"作者: 小五",link:"链接: ",source:"来源: 小五的个人杂货铺",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"LDAP学习总结",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/font.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="/css/titleStyle.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/custom.css"><style>.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="alternate" href="/atom.xml" title="小五的个人杂货铺" type="application/atom+xml"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",(()=>{Pace.restart()}),"pace_restart")</script><link rel="stylesheet" href="/css/pace.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">550</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">163</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">58</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>关于我</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>便携小空调</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>博客短记</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>杂记</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>图库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>影视|番剧</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>书单</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>游戏</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBili追番</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBili追剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>友链</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>🚀 LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>🚀 Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>🚀 百度统计</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>🚀 百度站点管理</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>🚀 谷歌分析</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>🚀 谷歌站点管理</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>🚀 谷歌广告联盟</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>🚀 Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>🚀 Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>🚀 ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>🚀 Poe聚合</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>🚀 后浪云</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>🚀 西部数据</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>🚀 闪电</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>🚀 小火箭</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>🚀 狗狗加速</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/nba-logo9.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">小五的个人杂货铺</span></a><a class="nav-page-title" href="/"><span class="site-name">LDAP学习总结</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>关于我</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>便携小空调</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>博客短记</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>杂记</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>图库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>影视|番剧</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>书单</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>游戏</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBili追番</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBili追剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>友链</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>🚀 LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>🚀 Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>🚀 百度统计</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>🚀 百度站点管理</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>🚀 谷歌分析</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>🚀 谷歌站点管理</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>🚀 谷歌广告联盟</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>🚀 Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>🚀 Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>🚀 ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>🚀 Poe聚合</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>🚀 后浪云</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>🚀 西部数据</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>🚀 闪电</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>🚀 小火箭</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>🚀 狗狗加速</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">LDAP学习总结<a class="post-edit-link" href="https://github.com/wang-xiaowu/wang-xiaowu.github.io/issues/new?_posts/身份认证,角色授权/LDAP学习总结.md" rel="external nofollow noreferrer" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-21T16:00:00.000Z" title="发表于 2023-04-22 00:00:00">2023-04-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-21T16:00:00.000Z" title="更新于 2023-04-22 00:00:00">2023-04-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-%E8%A7%92%E8%89%B2%E6%8E%88%E6%9D%83/">身份认证,角色授权</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">7.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>25分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;距离上一次更新该文章已经过了&quot;,&quot;messageNext&quot;:&quot;天，文章所描述的內容可能已经发生变化，请留意。&quot;,&quot;postUpdate&quot;:&quot;2023-04-22 00:00:00&quot;}" hidden></div><blockquote><p>摘自：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://lework.github.io/2019/07/18/ldap/">https://lework.github.io/2019/07/18/ldap/</a></p></blockquote><h2 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h2><p>参考：</p><ol><li><a target="_blank" rel="noopener external nofollow noreferrer" href="http://ldapdoc.eryajf.net/pages/f081dc/">http://ldapdoc.eryajf.net/pages/f081dc/</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/behappy-project/behappy-docker-application/tree/master/ldap">https://github.com/behappy-project/behappy-docker-application/tree/master/ldap</a></li></ol><h2 id="LDAP概念"><a href="#LDAP概念" class="headerlink" title="LDAP概念"></a>LDAP概念</h2><p>LDAP是轻量目录访问协议,英文全称是Lightweight Directory Access Protocol,一般都简称为LDAP.它是基于<code>X.500</code>标准的,但是简单多了并且可以根据需要定制.与X.500不同,LDAP支持<code>TCP/IP</code>,这对访问Internet是必须的.LDAP的核心规范在RFC中都有定义,所有与LDAP相关的RFC都可以在LDAPman RFC网页中找到.简单说来,LDAP是一个得到关于人或者资源的集中、静态数据的快速方式. LDAP是一个用来发布目录信息到许多不同资源的协议.通常它都作为一个集中的地址本使用,不过根据组织者的需要,它可以做得更加强大.</p><p>现在市场上有关LDAP的产品已有很多,各大软件公司都在他们的产品中集成了LDAP服务,如Microsoft的<code>ActiveDirectory</code>、Lotus的<code>Domino Directory</code>、IBM的<code>WebSphere</code>中也集成了LDAP服务.LDAP的开源实现是<code>OpenLDAP</code>,它比商业产品一点也不差,而且源码开放.</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.openldap.org/">OpenLDAP</a>是最常用的目录服务之一,它是一个由开源社区及志愿者开发和管理的一个开源项目,提供了目录服务的所有功能,包括目录搜索、身份认证、安全通道、过滤器等等.大多数的Linux发行版里面都带有OpenLDAP的安装包.<code>OpenLDAP</code>服务默认使用非加密的<code>TCP/IP</code>协议来接收服务的请求,并将查询结果传回到客户端.由于大多数目录服务都是用于系统的安全认证部分比如:用户登录和身份验证,所以它也支持使用基于 SSL&#x2F;TLS 的加密协议来保证数据传送的保密性和完整性.<code>OpenLDAP</code>是使用<code>OpenSSL</code>来实现<code>SSL/TLS</code>加密通信的.</p><p>LDAP的信息模型是建立在”条目”(entries)的基础上.一个条目是一些属性的集合,并且具有一个全局唯一的”可区分名称”DN,一个条目可以通过DN来引用.每一个条目的属性具有一个类型和一个或者多个值.类型通常是容易记忆的名称,比如”cn”是通用名称(common name),或者”mail”是电子邮件地址.条目的值的语法取决于属性类型.比如,cn属性可能具有一个值”Babs Jensen” .一个mail属性可能包含”<a href="mailto:&#x62;&#98;&#115;&#64;&#101;&#x78;&#x61;&#x6d;&#112;&#x6c;&#101;&#x2e;&#x63;&#x6f;&#109;" rel="external nofollow noreferrer">&#x62;&#98;&#115;&#64;&#101;&#x78;&#x61;&#x6d;&#112;&#x6c;&#101;&#x2e;&#x63;&#x6f;&#109;</a>” .一个jpegphoto属性可能包含一幅JPEG(二进制)格式的图片.</p><h3 id="LDAP常用关键字列表"><a href="#LDAP常用关键字列表" class="headerlink" title="LDAP常用关键字列表"></a>LDAP常用关键字列表</h3><p>LDAP通过属性objectClass来控制哪一个属性必须出现或允许出现在一个条目中,它的值决定了该条目必须遵守的模式规则.</p><table><thead><tr><th align="left">关键字</th><th align="left">英文全称</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">dc</td><td align="left">Domain Component</td><td align="left">域名的部分,其格式是将完整的域名分成几部分,如域名为example.com变成dc&#x3D;example,dc&#x3D;com</td></tr><tr><td align="left">uid</td><td align="left">User Id</td><td align="left">用户ID,如“tom”</td></tr><tr><td align="left">ou</td><td align="left">Organization Unit</td><td align="left">组织单位,类似于Linux文件系统中的子目录,它是一个容器对象,组织单位可以包含其他各种对象(包括其他组织单元),如“market”</td></tr><tr><td align="left">cn</td><td align="left">Common Name</td><td align="left">公共名称,如“Thomas Johansson”</td></tr><tr><td align="left">sn</td><td align="left">Surname</td><td align="left">姓,如“Johansson”</td></tr><tr><td align="left">dn</td><td align="left">Distinguished Name</td><td align="left">惟一辨别名,类似于Linux文件系统中的绝对路径,每个对象都有一个惟一的名称,如“uid&#x3D; tom,ou&#x3D;market,dc&#x3D;example,dc&#x3D;com”,在一个目录树中DN总是惟一的</td></tr><tr><td align="left">rdn</td><td align="left">Relative dn</td><td align="left">相对辨别名,类似于文件系统中的相对路径,它是与目录树结构无关的部分,如“uid&#x3D;tom”或“cn&#x3D; Thomas Johansson”</td></tr><tr><td align="left">c</td><td align="left">Country</td><td align="left">国家,如“CN”或“US”等.</td></tr><tr><td align="left">o</td><td align="left">Organization</td><td align="left">组织名,如“Example,Inc.”</td></tr></tbody></table><h3 id="LDAP支持的目录操作"><a href="#LDAP支持的目录操作" class="headerlink" title="LDAP支持的目录操作"></a>LDAP支持的目录操作</h3><p>包括:查询目录、更新目录、增加条目、删除条目、改变条目名称,搜索信息,最常用的LDAP操作是搜索信息操作. LDAP的搜索操作允许搜索目录的一部分,例如查找匹配某个搜索过滤器规则的条目,搜索在<code>dc=example,dc=com</code>条目之中或者之下的整个目录子树,查找一个名字叫做<code>Barbara Jensen</code>的个人,并且获取每一个找到的条目的电子邮件地址.</p><h3 id="LDAP协议介绍"><a href="#LDAP协议介绍" class="headerlink" title="LDAP协议介绍"></a>LDAP协议介绍</h3><p>目录是一组具有类似属性、以一定逻辑和层次组合的信息.常见的例子是通讯簿,由以字母顺序排列的名字、地址和电话号码组成. 目录服务是一种在分布式环境中发现目标的方法.目录具有两个主要组成部分:</p><ul><li>第一部分是数据库,数据库是分布式的,且拥有一个描述数据的规划.</li><li>第二部分则是访问和处理数据的各种协议.</li></ul><p>目录服务其实也是一种数据库系统,只是这种数据库是一种树形结构,而不是通常使用的关系数据库.目录服务与关系数据库之间的主要区别在于:二者都允许对存储数据进行访问,只是目录主要用于读取,其查询的效率很高,而关系数据库则是为读写而设计的.</p><blockquote><p>温馨提示:目录服务不适于进行频繁的更新,属于典型的分布式结构.</p></blockquote><p>LDAP是一个目录服务协议,目前存在众多版本的LDAP,而最常见的则是V2和V3两个版本,它们分别于1995年和1997年首次发布.</p><p>1.2 LDAP的基本模型 LDAP的基本模型是建立在”条目”(Entry)的基础上.一个条目是一个或多个属性的集合,并且具有一个全局唯一的”可区分名称”(用dn表示).与关系型数据(后面简称数据库)进行类比,一个条目相当于数据库中的一条记录,而dn相当于数据库中记录的关键字,属性相当于数据库中的字段.</p><blockquote><p>温馨提示:dn必须是全局唯一的.</p></blockquote><p>LDAP中,将数据组织成一个树形结构,这与现实生活中的很多数据结构可以对应起来,而不像设计关系型数据库的表,需要进行多种变化.如下图所展示的就是一个树形结构的数据.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">               +-------------------------------------------+</span><br><span class="line">               |             o=example.com                 |</span><br><span class="line">               +-------------------+-----------------------+</span><br><span class="line">               |                   |                       |</span><br><span class="line">   +-----------+              +----+----+                  +---------+</span><br><span class="line">   |ou=managers|              |ou=people|                  |ou=group |  </span><br><span class="line">   +----+---+--+              +--+---+--+                  +--+---+--+</span><br><span class="line">        |   |                    |   |                        |   |</span><br><span class="line">+--------+  +-----+     +--------+   +--------+      +--------&gt;   +-------+</span><br><span class="line">|cn=admin|  |cn=le|     |ou=test1|   |ou=test2|      |cn=admin|   |cn=ldap|</span><br><span class="line">+--------+  +-----+     +--------+   +--------+      +--------+   +-------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在上图所示的树形结构中,树的根结点是一个组织的域名(example.com),其下分为3个部分,分别是managers、people和group,可将这3个组看作组织中的3个部门:如managers用来管理所有管理人员,people用来管理登录系统的用户,group用来管理系统中的用户组.当然,在该图中还可继续增加其他分支.</p><p>对于图中所示的树形结构,使用关系数据库来保存数据的话,需要设置多个表,一层一层分别保存,当需要查找某个信息时,再逐层进行查询,最终得到结果.</p><p>若使用目录来保存该图中的数据,则更直观.图中每个结点用一个条目来保存,不同类型的结点需要保存的数据可能不同,在LDAP中通过一个称为objectClass的类型来控制不同结点需要的数据(称为属性).</p><p>对于目录中的数据怎样进行引用呢?前面提到过,每一个条目都有一个dn,因为dn是唯一的,因此就可找到需要结点的数据.dn的构造方式如下:</p><p>首先得到条目自己的名称(rdn,称为相对dn),然后开始向上逐级查找父结点,一直到根项为止.例如,对于图1-1中最右下方的结点,其dn为:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dn: cn=ldap,ou=group,o=dlw.com</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>通过这样的方式,即可唯一标识每一个结点.在现实生活中,有很多这种树形结构的数据,如计算机文件系统的目录结构、Internet中的域名等.这些类型的数据,只要不需要频繁的更新,都适合用目录来保存.</p><p>LDAP主要的简称含义:</p><ul><li>o-&gt;　organization(组织-公司)</li><li>ou-&gt;　organization unit(组织单元-部门)</li><li>c-&gt;　countryName(国家)</li><li>dc-&gt; domainComponent(域名)</li><li>sn-&gt; suer name(真实名称)</li><li>cn-&gt; common name(常用名称)</li></ul><h3 id="LDAP的功能"><a href="#LDAP的功能" class="headerlink" title="LDAP的功能"></a>LDAP的功能</h3><p>在LDAP的功能模型中定义了一系列利用LDAP协议的操作,主要包含以下4部分:</p><ul><li>查询操作:允许查询目录和取得数据,其查询性能比关系数据库好.</li><li>更新操作:目录的更新操作没关系数据库方便,更新性能较差,但也同样允许进行添加、删除、修改等操作.</li><li>复制操作:前面也提到过,LDAP是一种典型的分布式结构,提供复制操作,可将主服务器的数据的更新复制到设置的从服务器中.</li><li>认证和管理操作:允许客户端在目录中识别自己,并且能够控制一个会话的性质.</li></ul><p>LDAP的高级功能:</p><ul><li>实现账号统一集中管理；</li><li>权限控制策略管理；</li><li>密码控制策略管理；</li><li>密码审计管理；</li><li>主机控制管理；</li><li>同步机制管理；</li><li>TLS&#x2F;SASL加密传输；</li><li>高可用负载均衡架构；</li><li>自定义schema；</li><li>各种集中平台账号集中管理；</li></ul><h3 id="LDAP协议的特点"><a href="#LDAP协议的特点" class="headerlink" title="LDAP协议的特点"></a>LDAP协议的特点</h3><ul><li>LDAP是一种目录服务,保存在特殊的数据库中,数据的读取速度远高于写入速度.</li><li>LDAP对查询做了优化,读取速度优于普通关系数据库.</li><li>LDAP不支持事务、不能进行回滚,需要进行这些操作的应用只有选择关系数据库.</li><li>LDAP采用服务器&#x2F;客户端模式,服务器端用于存储数据,客户端提供操作目录信息树的工具,支持分布式结构.</li><li>LDAP中的条目以树形结构组织和存储.</li><li>LDAP基于Internet协议,直接运行在简单和通用的TCP&#x2F;IP或其他可靠的传输协议层上,使连接的建立和包的处理简单、快捷,对于互联网和企业网应用都很方便.</li><li>LDAP协议简单,通过使用查找操作实现列表操作和读操作.</li><li>LDAP通过引用机制实现分布式访问,通过客户端API实现分布式操作(对于应用透明),平衡了负载.</li><li>LDAP实现具有低费用、易配置和易管理的特点,并提供了满足应用程序对目录服务所需求的特性.</li></ul><h3 id="LDAP目录服务"><a href="#LDAP目录服务" class="headerlink" title="LDAP目录服务"></a>LDAP目录服务</h3><p>目录是一个为查询、浏览和搜索而优化的专业分布式数据库,它呈树状结构组织数据,就好象Linux&#x2F;Unix系统中的文件目录一样.目录数据库和关系数据库不同,它有优异的读性能,但写性能差,并且没有事务处理、回滚等复杂功能,不适于存储修改频繁的数据.所以目录天生是用来查询的,就好象它的名字一样.</p><p>目录服务是由目录数据库和一套访问协议组成的系统.类似以下的信息适合储存在目录中:</p><ul><li>企业员工信息,如姓名、电话、邮箱等</li><li>公司的物理设备信息,如服务器,它的IP地址、存放位置、厂商、购买时间等</li><li>客户的联系信息</li><li>软件包的配置信息</li><li>公用证书和安全密匙</li></ul><p>与LDAP一样提供类似的目录服务软件还有ApacheDS、Active Directory、Red Hat Directory Service .</p><h3 id="LDAP组织数据的方式"><a href="#LDAP组织数据的方式" class="headerlink" title="LDAP组织数据的方式"></a>LDAP组织数据的方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">                   +----------------------+</span><br><span class="line">                   |  dc=example,doc=com  |</span><br><span class="line">                   +-----------+----------+</span><br><span class="line">                   |           |          |</span><br><span class="line">                   v           v          v</span><br><span class="line">          +--------+      +----+----+     +---------+</span><br><span class="line">          |ou=admin|      |ou=people|     |ou=device|</span><br><span class="line">          +--------+      +---------+     +---------+</span><br><span class="line">          |               |         |</span><br><span class="line">          v               v         v</span><br><span class="line">+---------+     +---------+         +----------+</span><br><span class="line">| cn=admin|     |ou=market|         |ou=network|</span><br><span class="line">+---------+     +---------+         +----------+</span><br><span class="line">                |         |</span><br><span class="line">                v         v</span><br><span class="line">       +--------+         +-------+</span><br><span class="line">       |cn=scott|         |cn=baby|</span><br><span class="line">       +--------+         +-------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="身份认证在LDAP中提供三种认证机制"><a href="#身份认证在LDAP中提供三种认证机制" class="headerlink" title="身份认证在LDAP中提供三种认证机制"></a>身份认证在LDAP中提供三种认证机制</h3><ul><li><p>匿名认证:即不对用户进行认证,该方法仅对完全公开的方式适用</p></li><li><p>基本认证:通过用户名和密码进行身份识别,又分为简单密码和MD5密码认证</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ldapadd -x -D &quot;cn=root,dc=example,dc=cn&quot; -W -f base.ldif</span><br><span class="line">Enter LDAP Password: 输入admin123</span><br><span class="line">adding new entry &quot;dc=example,dc=cn&quot;</span><br><span class="line">adding new entry &quot;ou=People,dc=example,dc=cn&quot;</span><br><span class="line">adding new entry &quot;ou=Group,dc=example,dc=cn&quot;</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>SASL认证:即LDAP提供的在SSL和TLS安全通道基础上进行的身份认证,包括数字证书的认证.</p></li></ul><h3 id="TLS安全性"><a href="#TLS安全性" class="headerlink" title="TLS安全性"></a>TLS安全性</h3><p>分布式LDAP是以明文的格式通过网络来发送信息的,包括client访问sldap的密码.TLS(SSL 的后继者,由OpenSSL包加密机制来解决这个问题.</p><h3 id="LDAP目录数据结构"><a href="#LDAP目录数据结构" class="headerlink" title="LDAP目录数据结构"></a>LDAP目录数据结构</h3><ul><li>在LDAP中目录是按照树型结构组织——目录信息树(DIT),DIT是一个主要进行读操作的数据库</li><li>DIT由条目(Entry)组成,条目相当于关系数据库中表的记录；条目是具有分辨名DN(Distinguished Name)的属性-值对(Attribute-value,简称AV)的集合</li></ul><p>在目录树中怎么组织数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">uid=test1,ou=People,dc=example,dc=com</span><br><span class="line"></span><br><span class="line">                 +----------------------+</span><br><span class="line">                 |Base:dc=example,dc=com|</span><br><span class="line">                 +-----------+----------+</span><br><span class="line">                             |</span><br><span class="line">             +---------------+-------------+</span><br><span class="line">             |                             |</span><br><span class="line">             v                             v</span><br><span class="line">       +-----+---+                    +----+----+</span><br><span class="line">       |ou=People|                    |ou=Groups|</span><br><span class="line">       +----+----+                    +----+----+</span><br><span class="line">            |                              |</span><br><span class="line">     +------+------+                +------+------+</span><br><span class="line">     |             |                |             |</span><br><span class="line">     v             v                v             v</span><br><span class="line">+----+----+   +----+----+     +-----+----+  +-----+----+</span><br><span class="line">|uid=test1|   |uid=test2|     |gid=group1|  |gid=group2|</span><br><span class="line">+---------+   +---------+     +----------+  +----------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>在UNIX文件系统中,最顶层是根目录(root),LDAP目录也通常用ROOT做根,通常称为BaseDN.</li><li>因为历史(X.500)的原因,LDAP目录用OU(Organization Unit)从逻辑上把数据分开来. Ou也是一种条目,容器条目</li><li>Ou下就是真正的用户条目</li></ul><p>什么是dn?</p><p>dn即distinguished name的简称,在LDAP中,一个条目的分辨名叫做”dn”,dn是该条目在整个树中的唯一名称标识;dn相当于关系数据库表中的关键字(Primary Key);dn是一个识别属性,通常用于检索</p><p>常见的两种dn设置:</p><table><thead><tr><th align="left">基于cn(姓名)</th><th align="left">cn&#x3D;test1,ou&#x3D;People,dc&#x3D;example,dc&#x3D;com(dn就是这一串字符)最常见的cn是<code>/etc/group</code>转换的条目</th></tr></thead><tbody><tr><td align="left">基于uid(User ID)</td><td align="left">uid&#x3D;test1,ou&#x3D;People,dc&#x3D;example,dc&#x3D;com，最常见的uid是<code>/etc/passwd</code>,<code>/etc/shadow</code>转换的条目</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@ldap-server ~]# ldapsearch -x -LLL &quot;uid=mac*&quot;</span><br><span class="line">dn: uid=mac,ou=People,dc=example,dc=cn         唯一标识</span><br><span class="line">uid: mac</span><br><span class="line">cn: mac</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="LDAP基本管理"><a href="#LDAP基本管理" class="headerlink" title="LDAP基本管理"></a>LDAP基本管理</h2><p>启动OpenLDAP服务器程序之后,接下来的操作就是通过客户端程序对目录进行操作,包括添加、修改、删除和搜索数据等操作.</p><h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><p>条目,也叫记录项,是LDAP中最基本的颗粒,就像字典中的词条,或者是数据库中的记录.通常对LDAP的添加、删除、更改、检索都是以条目为基本对象的.</p><ul><li>dn:每一个条目都有一个唯一的标识名(distinguished Name,DN),如上述中一个 dn:”uid&#x3D;mac,ou&#x3D;People,dc&#x3D;example,dc&#x3D;cn”.通过DN的层次型语法结构,可以方便地表示出条目在LDAP树中的位置,通常用于检索.</li><li>rdn:一般指dn逗号最左边的部分,如cn&#x3D;baby.它与RootDN不同,RootDN通常与RootPW同时出现,特指管理LDAP中信息的最高权限用户.</li><li>Base DN:LDAP目录树的最顶部就是根,也就是所谓的“Base DN”,如”dc&#x3D;example,dc&#x3D;com”.</li></ul><h3 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h3><p>对象类(ObjectClass)、属性类型(AttributeType)、语法(Syntax)分别约定了条目、属性、值,他们之间的关系如下图所示.所以这些构成了模式(Schema)——对象类的集合.条目数据在导入时通常需要接受模式检查,它确保了目录中所有的条目数据结构都是一致的.</p><p>schema(一般在<code>/etc/ldap/schema/</code>目录)在导入时要注意前后顺序.</p><p>对于LDAP目录中保存的信息,可以使用<code>LDIF</code>(LDAP Interchange Format)格式来保存.这是一种标准文本文件格式,使用这种格式保存得的LDAP服务器数据库中的数据可方便读取和修改,这也是其他大多数服务配置文件所采取的格式.</p><p>LDIF文件常用来向目录导入或更改记录信息,这些信息需要按照LDAP中schema的格式进行组织,并会接受schema的检查,不符合其要求的格式将会出现报错信息.</p><p>在LDAP中,schema用来指定一个目录中所包含的对象(objects)的类型(objectClass),以及每一个类型(objectClass)中必须提供的属性(Atrribute)和可选的属性.可将schema理解为面向对象程序设计中的类,通过类定义一个具体的对象.LDIF中的数据条目可理解为是一个具体的对象,是通过schema来规划创建的.因此,schema是一个数据模型,用来决定数据按什么方式存储,并定义存储在不同的条目(Entry)下的数据之间的关系.schema需要在主配置文件slapd.conf中指定,以用来决定在目录中可以使用哪些objectClass.</p><p>在<code>/etc/openldap/schema/</code>目录中提供了许多schema文件,只需要在配置文件<code>slapd.conf</code>中使用include命令将需要使用的schema包含即可.例如,配置文件默认包含了以下schema文件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">include /etc/openldap/schema/core.schema</span><br><span class="line">include /etc/openldap/schema/cosine.schema</span><br><span class="line">include /etc/openldap/schema/inetorgperson.schema</span><br><span class="line">include /etc/openldap/schema/nis.schema</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>温馨提示:通常使用系统提供的schema就可解决大部分应用.管理员也可以自己设计制定schema,一般包括属性定义(AttributeDefinition)、类定义(ClassDefinition)以及语法定义(SyntaxDefinition)等部分.这里就不介绍具体的设计方法了.</p></blockquote><h3 id="向目录数据库中添加数据"><a href="#向目录数据库中添加数据" class="headerlink" title="向目录数据库中添加数据"></a>向目录数据库中添加数据</h3><p>初始状态下,LDAP是一个空目录,即没有任何数据.可通过程序代码向目录数据库中添加数据,也可使用OpenLDAP客户端工具<code>ldapadd</code>命令来完成添加数据的操作,该命令可将一个LDIF文件中的条目添加到目录.因此,需要首先创建一个LDIF文件,然后再进行添加操作.</p><p>1)LDIF文本条目格式</p><p>LDIF(LDAP Data Interchange Format,数据交换格式)是LDAP数据库信息的一种文本格式,用于数据的导入导出,每行都是”属性: 值”对.</p><p>LDIF用文本格式表示目录数据库的信息,以方便用户创建、阅读和修改.在LDIF文件中,一个条目的基本格式如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 注释</span><br><span class="line">dn: 条目名</span><br><span class="line">属性描述: 值</span><br><span class="line">属性描述: 值</span><br><span class="line">属性描述: 值</span><br><span class="line">... ...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>dn行类似于关系数据库中一条记录的关键字,不能与其他dn重复.一个LDIF文件中可以包含多个条目,每个条目之间用一个空行分隔. 例如,以下内容组成一个条目:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dn: dc=example,dc=com</span><br><span class="line">objectclass: top</span><br><span class="line">objectclass: dcobject</span><br><span class="line">objectclass: organization</span><br><span class="line">dc: example</span><br><span class="line">o: Example,Inc.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在以上文本中,各行含义如下:</p><ul><li>第1行的dn定义该条目的标识.</li><li>第2～4行定义该条目的objectcCass,可以定义多个属性,如上面代码中定义了3个objectClass.条目的属性根据objectClass的不同而不同,有的objectClass有必须设置的属性.在2～4行的3个objectClass中,top没有必须定义的属性,dcobject必须定义属性dc,用来表示一个域名的部分,而organization必须定义属性o,用来表示一个组织的名称.</li><li>根据objectClass的要求,第5、6行分别定义属性dc和属性o的值.</li></ul><h3 id="objectClass"><a href="#objectClass" class="headerlink" title="objectClass"></a>objectClass</h3><p>LDAP中,一个条目必须包含一个objectClass属性,且需要赋予至少一个值.每一个值将用作一条LDAP条目进行数据存储的模板；模板中包含了一个条目必须被赋值的属性和可选的属性. objectClass有着严格的等级之分,最顶层是<code>top</code>和<code>alias</code>.例如,organizationalPerson这个objectClass就隶属于person,而person又隶属于top.</p><p>objectClass可分为以下3类:</p><ul><li>结构型(Structural):如person和organizationUnit；</li><li>辅助型(Auxiliary):如extensibeObject；</li><li>抽象型(Abstract):如top,抽象型的objectClass不能直接使用.</li></ul><p>对象类是属性的集合,LDAP预想了很多人员组织机构中常见的对象,并将其封装成对象类.比如人员(person)含有姓(sn)、名(cn)、电话(telephoneNumber)、密码(userPassword)等属性,单位职工(organizationalPerson)是人员(person)的继承类,除了上述属性之外还含有职务(title)、邮政编码(postalCode)、通信地址(postalAddress)等属性.</p><p>通过对象类可以方便的定义条目类型.每个条目可以直接继承多个对象类,这样就继承了各种属性.如果2个对象类中有相同的属性,则条目继承后只会保留1个属性.对象类同时也规定了哪些属性是基本信息,必须含有(Must 活Required,必要属性):哪些属性是扩展信息,可以含有(May或Optional,可选属性).</p><p>对象类有三种类型:结构类型(Structural)、抽象类型(Abstract)和辅助类型(Auxiliary).结构类型是最基本的类型,它规定了对象实体的基本属性,每个条目属于且仅属于一个结构型对象类.抽象类型可以是结构类型或其他抽象类型父类,它将对象属性中共性的部分组织在一起,称为其他类的模板,条目不能直接集成抽象型对象类.辅助类型规定了对象实体的扩展属性.每个条目至少有一个结构性对象类.</p><p>对象类本身是可以相互继承的,所以对象类的根类是top抽象型对象类.以常用的人员类型为例,他们的继承关系:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">                 +----------+</span><br><span class="line">                 |top       |</span><br><span class="line">                 |(Abstract)|</span><br><span class="line">                 +----------+</span><br><span class="line">                       ^</span><br><span class="line">                       |</span><br><span class="line">                +------------+     +-----------+</span><br><span class="line">                |person      |     |ePerson    |</span><br><span class="line">                |(Structural)+&lt;----+(Auxiliary)|</span><br><span class="line">                +------------+     +-----------+</span><br><span class="line">                ^            ^</span><br><span class="line">                |            |</span><br><span class="line">+-------------------+      +----------------+</span><br><span class="line">|organizationaPerson|      |residentiaPerson|</span><br><span class="line">|(Structural)       |      |(Structural)    |</span><br><span class="line">+-------------------+      +----------------+</span><br><span class="line">         ^</span><br><span class="line">         |</span><br><span class="line">  +--------------+</span><br><span class="line">  |inetOrgPerson |</span><br><span class="line">  |(Structural)  |</span><br><span class="line">  +--------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在OpenLDAP的schema中定义了很多objectClass,下面列出部分常用的objectClass的名称.</p><ul><li>account</li><li>alias</li><li>dcobject</li><li>domain</li><li>ipHost</li><li>organization</li><li>organizationalRole</li><li>organizationalUnit</li><li>person</li><li>organizationalPerson</li><li>inetOrgPerson</li><li>residentialPerson</li><li>posixAccount</li><li>posixGroup</li></ul><h3 id="Attribute"><a href="#Attribute" class="headerlink" title="Attribute"></a>Attribute</h3><p>属性(Attribute)类似于程序设计中的变量,可以被赋值.在OpenLDAP中声明了许多常用的Attribute(用户也可自己定义Attribute).</p><p>每个条目都可以有很多属性(Attribute),比如常见的人都有姓名、地址、电话等属性.每个属性都有名称及对应的值,属性值可以有单个、多个,比如你有多个邮箱.</p><p>属性不是随便定义的,需要符合一定的规则,而这个规则可以通过schema制定.比如,如果一个entry没有包含在 inetorgperson 这个 schema 中的objectClass: inetOrgPerson,那么就不能为它指定employeeNumber属性,因为employeeNumber是在inetOrgPerson中定义的.</p><p>LDAP为人员组织机构中常见的对象都设计了属性(比如commonName,surname).下面有一些常用的别名:</p><table><thead><tr><th align="left">属性</th><th align="left">别名</th><th align="left">语法</th><th align="left">描述</th><th align="left">值（举例）</th></tr></thead><tbody><tr><td align="left">commonName</td><td align="left">cn</td><td align="left">Directory String</td><td align="left">姓名</td><td align="left">sean</td></tr><tr><td align="left">surname</td><td align="left">sn</td><td align="left">Directory String</td><td align="left">姓</td><td align="left">Chow</td></tr><tr><td align="left">organizationalUnitName</td><td align="left">ou</td><td align="left">Directory String</td><td align="left">单位（部门）名称</td><td align="left">IT</td></tr><tr><td align="left">organization</td><td align="left">o</td><td align="left">Directory String</td><td align="left">组织（公司）名称</td><td align="left">example</td></tr><tr><td align="left">telephoneNumber</td><td align="left"></td><td align="left">Telephone Number</td><td align="left">电话号码</td><td align="left">110</td></tr><tr><td align="left">objectClass</td><td align="left"></td><td align="left"></td><td align="left">内置熟悉</td><td align="left">top</td></tr></tbody></table><p>常见的Attribute含义如下:</p><ul><li>c:国家.</li><li>cn:common name,指一个对象的名字.如果指人,需要使用其全名.</li><li>dc:domain Component,常用来指一个域名的一部分.</li><li>givenName:指一个人的名字,不能用来指姓.</li><li>l:指一个地名,如一个城市或者其他地理区域的名字.</li><li>mail:电子信箱地址.</li><li>o:organizationName,指一个组织的名字.</li><li>ou:organizationalUnitName,指一个组织单元的名字.</li><li>sn:surname,指一个人的姓.</li><li>telephoneNumber:电话号码,应该带有所在的国家的代码.</li><li>uid:userid,通常指某个用户的登录名,与Linux系统中用户的uid不同.</li></ul><blockquote><p>温馨提示:objectClass是一种特殊的Attribute,它包含其他用到的Attribute以及其自身.</p></blockquote><p>对于不同的objectClass,通常具有一些必设属性值和一些可选属性值.例如,可使用person这个objectClass来表示系统中一个用户的条目,对于系统中用户通常需要有这样一些信息:姓名、电话、密码、描述等.如下图所示,对于person,通过cn和sn设置用户的名和姓,这是必须设置的,而其他属性则是可选的.</p><p>下面列出部分常用objectClass要求必设的属性.</p><ul><li>account:userid.</li><li>organization:o.</li><li>person:cn和sn.</li><li>organizationalPerson:与person相同.</li><li>organizationalRole:cn.</li><li>organizationUnit:ou.</li><li>posixGroup:cn、gidNumber.</li><li>posixAccount:cn、gidNumber、homeDirectory、uid、uidNumber.</li></ul><h3 id="创建LDIF文件"><a href="#创建LDIF文件" class="headerlink" title="创建LDIF文件"></a>创建LDIF文件</h3><p>对以上内容有一定了解之后,就可以编写输入LDIF文件,编辑需要向目录数据库添加的条目了. 下面根据如下图所示的结构,创建LDIF文件example.com.ldif.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">              +----------------------+</span><br><span class="line">              |  dc=example,doc=com  |</span><br><span class="line">              +----------------------+</span><br><span class="line">              |</span><br><span class="line">              v</span><br><span class="line">     +--------+--+</span><br><span class="line">     |ou=managers|</span><br><span class="line">     +-+------+--+</span><br><span class="line">       |      |</span><br><span class="line">       v      v</span><br><span class="line">+------+-+   ++-------+</span><br><span class="line">|cn=admin|   |cn=test|</span><br><span class="line">+--------+   +--------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>对上图进行分析,该目录结构分为3层,有4个结点.根据上图可创建LDIF文件如下:</p><blockquote><p>温馨提示:每个结点可用一个dn表示,对于每个结点,又可继续添加新的结点.如在根结点中可添加其他部门ou,在ou&#x3D;managers结点也可继续添加其他管理人员的信息.</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">dn:dc=example,dc=com</span><br><span class="line">objectclass:top</span><br><span class="line">objectclass:dcobject</span><br><span class="line">objectclass:organization</span><br><span class="line">dc:example</span><br><span class="line">o:example,Inc.</span><br><span class="line"></span><br><span class="line">dn:ou=managers,dc=dlw,dc=com</span><br><span class="line">ou:managers</span><br><span class="line">objectclass:organizationalUnit</span><br><span class="line"></span><br><span class="line">dn:cn=admin,ou=managers,dc=dlw,dc=com</span><br><span class="line">cn:admin</span><br><span class="line">sn:admin</span><br><span class="line">objectclass:person</span><br><span class="line"></span><br><span class="line">dn:cn=test,ou=managers,dc=dlw,dc=com</span><br><span class="line">cn:test</span><br><span class="line">sn:test</span><br><span class="line">objectclass:person</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以上文件中各行的含义如下:</p><ul><li>第1～6行创建根结点,这部分在前面也有介绍,就不再重复了.</li><li>第7、11、16行为空行,用来分隔4个dn条目(4个结点).</li><li>第8～10行定义cn&#x3D;managers结点的条目,该条目的objectClass为organizationalUnit,因此需要用ou属性定义组织名称.</li><li>第12～15行定义cn&#x3D;dlw结点的条目,该条目使用的objectClass为person,因此需设置cn和sn两个属性值.</li><li>第17～20行与第12～15行的意义相同.</li></ul><p>在以上LDIF文件中,第1、8、12、17行以dn开头,这部分内容必须唯一,并且在向目录数据库添加这些数据时,也要确保这些数据不能与目录数据库中已有数据相同,否则,添加操作将中断.</p><h2 id="ldap命令的使用"><a href="#ldap命令的使用" class="headerlink" title="ldap命令的使用"></a>ldap命令的使用</h2><h3 id="增加-ldapadd"><a href="#增加-ldapadd" class="headerlink" title="增加:ldapadd"></a>增加:ldapadd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选项:</span><br><span class="line">-x   进行简单认证</span><br><span class="line">-D   用来绑定服务器的DN</span><br><span class="line">-h   目录服务的地址</span><br><span class="line">-w   绑定DN的密码</span><br><span class="line">-f   使用ldif文件进行条目添加的文件</span><br><span class="line"></span><br><span class="line">exp:</span><br><span class="line">将test.ldif中的数据导入ldap</span><br><span class="line"># ldapadd -x -D &quot;cn=root,dc=example,dc=com&quot; -w password -f /root/test.ldif</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="删除-ldapdelete"><a href="#删除-ldapdelete" class="headerlink" title="删除:ldapdelete"></a>删除:ldapdelete</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选项:</span><br><span class="line">-c         连续运行模式 (运行出错时跳过继续执行)</span><br><span class="line">-f file    指定文件</span><br><span class="line">-M         启用管理DSA IT控制</span><br><span class="line">-P version 协议版本(default: 3)</span><br><span class="line">-r         递归删除</span><br><span class="line"></span><br><span class="line">exp:</span><br><span class="line"># ldapdelete -x -D &quot;cn=Manager,dc=example,dc=com&quot; -w password &quot;uid=test1,ou=People,dc=test,dc=com&quot;</span><br><span class="line"># ldapdelete -x -D &#x27;cn=root,dc=it,dc=com&#x27; -w password &#x27;uid=zyx,dc=it,dc=com&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="修改-ldapmodify"><a href="#修改-ldapmodify" class="headerlink" title="修改:ldapmodify"></a>修改:ldapmodify</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">选项</span><br><span class="line">-a 添加新的条目.缺省的是修改存在的条目.</span><br><span class="line">-C 自动追踪引用.</span><br><span class="line">-c 出错后继续执行程序并不中止.缺省情况下出错的立即停止.</span><br><span class="line">-D binddn 指定搜索的用户名(一般为一dn 值).</span><br><span class="line">-e 设置客户端证书文件,例: -e cert/client.crt</span><br><span class="line">-E 设置客户端证书私钥文件,例: -E cert/client.key</span><br><span class="line">-f file 从文件内读取条目的修改信息而不是从标准输入读取.</span><br><span class="line">-H ldapuri 指定连接到服务器uri.常见格式为ldap://hostname:port</span><br><span class="line">-h ldaphost 指定要连接的主机的名称/ip 地址.它和-p 一起使用.</span><br><span class="line">-p ldapport 指定要连接目录服务器的端口号.它和-h 一起使用.</span><br><span class="line">-M[M] 打开manage DSA IT 控制. -MM 把该控制设置为重要的.</span><br><span class="line">-n 用于调试到服务器的通讯.但并不实际执行搜索.服务器关闭时,返回错误；服务器打开时,常和-v 参数一起测试到服务器是否是一条通路.</span><br><span class="line">-v 运行在详细模块.在标准输出中打出一些比较详细的信息.比如:连接到服务器的ip 地址和端口号等.</span><br><span class="line">-V 启用证书认证功能,目录服务器使用客户端证书进行身份验证,必须与-ZZ 强制启用TLS 方式配合使用,并且匿名绑定到目录服务器.</span><br><span class="line">-W 指定了该参数,系统将弹出一提示入用户的密码.它和-w 参数相对使用.</span><br><span class="line">-w bindpasswd 直接指定用户的密码. 它和-W 参数相对使用.</span><br><span class="line">-x 使用简单认证.</span><br><span class="line">-Z[Z] 使用StartTLS 扩展操作.如果使用-ZZ,命令强制使用StartTLS 握手成功.</span><br><span class="line"></span><br><span class="line">exp:</span><br><span class="line"># ldapmodify -x -D &quot;cn=root,dc=it,dc=com&quot; -W -f modify.ldif</span><br><span class="line"># 交互式修改</span><br><span class="line"># ldapmodify -x -D &quot;cn=root,dc=it,dc=com&quot; -W secret</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="查询-ldapsearch"><a href="#查询-ldapsearch" class="headerlink" title="查询:ldapsearch"></a>查询:ldapsearch</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">选项</span><br><span class="line">-x   进行简单认证</span><br><span class="line">-D   用来绑定服务器的DN</span><br><span class="line">-w   绑定DN的密码</span><br><span class="line">-b   指定要查询的根节点</span><br><span class="line">-H   制定要查询的服务器</span><br><span class="line"></span><br><span class="line">exp:</span><br><span class="line"># ldapsearch -x -D &quot;cn=root,dc=kevin,dc=com&quot; -w secret -b &quot;dc=kevin,dc=com&quot;</span><br><span class="line"></span><br><span class="line"># 使用简单认证,用 &quot;cn=root,dc=kevin,dc=com&quot; 进行绑定,要查询的根是 &quot;dc=kevin,dc=com&quot;.这样会把绑定的用户能访问&quot;dc=kevin,dc=com&quot;下的所有数据显示出来.</span><br><span class="line"></span><br><span class="line"># ldapsearch -x -W -D &quot;cn=administrator,cn=users,dc=osdn,dc=cn&quot; -b &quot;cn=administrator,cn=users,dc=osdn,dc=cn&quot; -h troy.osdn.zzti.edu.cn</span><br><span class="line"># ldapsearch -b &quot;dc=canon-is,dc=jp&quot; -H ldaps://192.168.10.192:389</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="设置密码-ldappasswd"><a href="#设置密码-ldappasswd" class="headerlink" title="设置密码:ldappasswd"></a>设置密码:ldappasswd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">选项</span><br><span class="line">-x   进行简单认证</span><br><span class="line">-D   用来绑定服务器的DN</span><br><span class="line">-w   绑定DN的密码</span><br><span class="line">-S   提示的输入密码</span><br><span class="line">-s pass 把密码设置为pass</span><br><span class="line">-a pass 设置old passwd为pass</span><br><span class="line">-A   提示的设置old passwd</span><br><span class="line">-H   是指要绑定的服务器</span><br><span class="line">-I   使用sasl会话方式</span><br><span class="line"></span><br><span class="line">exp:</span><br><span class="line"># ldappasswd -x -D &#x27;cm=root,dc=it,dc=com&#x27; -w secret &#x27;uid=zyx,dc=it,dc=com&#x27; -S</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据导出-slapcat"><a href="#数据导出-slapcat" class="headerlink" title="数据导出: slapcat"></a>数据导出: slapcat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">选项</span><br><span class="line">-l   表示导出为LDIF文件格式</span><br><span class="line"></span><br><span class="line">exp:</span><br><span class="line"># slapcat -l export.ldif</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>温馨提示:从导出结果可看出,除了使用ldapadd命令添加到目录数据库中的条目数据外,还导出了很多其他信息,包括条目录UUID、时间戳等信息.</p></blockquote></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang">小五</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang/posts/2e1f9495/">https://xiaowu95.wang/posts/2e1f9495/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://xiaowu95.wang" target="_blank">小五的个人杂货铺</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ldap/">ldap</a><a class="post-meta__tags" href="/tags/%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-%E8%A7%92%E8%89%B2%E6%8E%88%E6%9D%83/">身份认证,角色授权</a></div><div class="post-share"><div class="social-share" data-image="/img/nba-logo9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>感谢支持</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wxpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/wxpay.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/76732688/" title="Jenkinsfile的使用"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo3.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Jenkinsfile的使用</div></div><div class="info-2"><div class="info-item-1">什么是流水线jenkins 有 2 种流水线分为声明式流水线与脚本化流水线，脚本化流水线是 jenkins 旧版本使用的流水线脚本，新版本 Jenkins 推荐使用声明式流水线。文档只介绍声明流水线。 1、声明式流水线在声明式流水线语法中，流水线过程定义在 Pipeline&#123;&#125;中，Pipeline 块定义了整个流水线中完成的所有工作，比如 参数说明： agent any：在任何可用的代理上执行流水线或它的任何阶段，也就是执行流水线过程的位置，也可以指定到具体的节点 stage：定义流水线的执行过程（相当于一个阶段），比如下文所示的 Build、Test、Deploy， 但是这个名字是根据实际情况进行定义的，并非固定的名字 steps：执行某阶段具体的步骤。 123456789101112131415161718192021//Jenkinsfile (Declarative Pipeline)pipeline &#123; agent any stages &#123; stage(&#x27;Build&#x27;) &#123; ...</div></div></div></a><a class="pagination-related" href="/posts/ca95835b/" title="python生成requirements.txt的方法"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo14.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">python生成requirements.txt的方法</div></div><div class="info-2"><div class="info-item-1">python项目如何在另一个环境上重新构建项目所需要的运行环境依赖包？ 使用的时候边记边加载是个很麻烦的事情，总会出现遗漏的包的问题，这个时候手动安装也很麻烦，不能确定代码报错的需要安装的包是什么版本。这些问题，requirements.txt都可以解决！ 生成requirements.txt，有两种方式： 第一种 适用于单虚拟环境的情况1pip3 freeze &gt; requirements.txt 为什么只适用于单虚拟环境？因为这种方式，会将环境中的依赖包全都加入，如果使用的全局环境，则下载的所有包在里面，不管是不是当前项目依赖的 当然这种情况并不是我们想要的，当我们使用的是全局环境时，可以使用第二种方法。 第二种 (推荐) 使用pipreqs github地址为：pipreq 12345# 安装# pip3 install pipreqs -i https://pypi.tuna.tsinghua.edu.cn/simple/pip3 install pipreqs# 在当前目录生成pipreqs . --encoding=utf8...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/9bbf0b6e/" title="keycloak https required"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo14.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-16</div><div class="info-item-2">keycloak https required</div></div><div class="info-2"><div class="info-item-1">keycloak登录提示 At this point, you have two options; 1) Install HTTPS in Wildfly or 2) Tunnel via SSH into the remote machine and proxy your browser through it, go to the admin console and turn off the SSL requirement (Realm Settings -&gt; Login -&gt; Require SSL). This works because SSL is not required for local connections. keycloak 用私有地址可以不使用ssl登录方式，如果用公网就需要用ssl登录方式。 解决方案：设置某realm不强制使用ssl 启动: 1./standalone.sh -b 0.0.0.0 -bmanagement 0.0.0.0 添加账号 1./add-user-keycloak -r master -u...</div></div></div></a><a class="pagination-related" href="/posts/54998311/" title="记录各类第三方服务的ldap对接"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-01-05</div><div class="info-item-2">记录各类第三方服务的ldap对接</div></div><div class="info-2"><div class="info-item-1">Rancher测试版本：2.7.x 参考文档：http://ranchermanager.docs.rancher.com/zh/pages-for-subheaders/configure-openldap Nexus3配置步骤登录nexus管理账户，进入配置界面 依次点击Security&gt;&gt;LDAP进入配置页面点击 “Create Connection” 创建LDAP连接 1234567891011121314name：此连接的名称，可自定义LDAP server address Protocol：是否启用SSL，是选用 LDAPS，否则选用 LDAP Hostname：LDAP的服务器地址 Port：LDAP端口号Search base：基本DN，即一般从域的根节点开始搜索，如 dc=test,dc=comAuthentication method：加密方式Username or DN：输入用于获取LDAP用户的账户，建议使用只读账户 用户名：格式为 用户名@域名，如 userget@test.com ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">小五</div><div class="author-info-description">Tomorrow will be better,Everything will be fine</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">550</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">163</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">58</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/wang-xiaowu"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="/random" target="_blank" title="随便逛逛"><i class="fa-solid fa-shuffle"></i></a><a class="social-icon" href="mailto:wangxiaowu950330@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/30655189?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">安装使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LDAP%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">LDAP概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E5%B8%B8%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E8%A1%A8"><span class="toc-number">2.1.</span> <span class="toc-text">LDAP常用关键字列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E6%94%AF%E6%8C%81%E7%9A%84%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-number">2.2.</span> <span class="toc-text">LDAP支持的目录操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.3.</span> <span class="toc-text">LDAP协议介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">2.4.</span> <span class="toc-text">LDAP的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.5.</span> <span class="toc-text">LDAP协议的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.6.</span> <span class="toc-text">LDAP目录服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E7%BB%84%E7%BB%87%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.7.</span> <span class="toc-text">LDAP组织数据的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E5%9C%A8LDAP%E4%B8%AD%E6%8F%90%E4%BE%9B%E4%B8%89%E7%A7%8D%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-number">2.8.</span> <span class="toc-text">身份认证在LDAP中提供三种认证机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TLS%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">2.9.</span> <span class="toc-text">TLS安全性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E7%9B%AE%E5%BD%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.10.</span> <span class="toc-text">LDAP目录数据结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LDAP%E5%9F%BA%E6%9C%AC%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">LDAP基本管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Entry"><span class="toc-number">3.1.</span> <span class="toc-text">Entry</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#schema"><span class="toc-number">3.2.</span> <span class="toc-text">schema</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E7%9B%AE%E5%BD%95%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.</span> <span class="toc-text">向目录数据库中添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#objectClass"><span class="toc-number">3.4.</span> <span class="toc-text">objectClass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Attribute"><span class="toc-number">3.5.</span> <span class="toc-text">Attribute</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BALDIF%E6%96%87%E4%BB%B6"><span class="toc-number">3.6.</span> <span class="toc-text">创建LDIF文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ldap%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.</span> <span class="toc-text">ldap命令的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0-ldapadd"><span class="toc-number">4.1.</span> <span class="toc-text">增加:ldapadd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-ldapdelete"><span class="toc-number">4.2.</span> <span class="toc-text">删除:ldapdelete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-ldapmodify"><span class="toc-number">4.3.</span> <span class="toc-text">修改:ldapmodify</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-ldapsearch"><span class="toc-number">4.4.</span> <span class="toc-text">查询:ldapsearch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81-ldappasswd"><span class="toc-number">4.5.</span> <span class="toc-text">设置密码:ldappasswd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA-slapcat"><span class="toc-number">4.6.</span> <span class="toc-text">数据导出: slapcat</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c75c82a0/" title="使用 TypeScript 创建 Koa 服务器"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo16.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="使用 TypeScript 创建 Koa 服务器"></a><div class="content"><a class="title" href="/posts/c75c82a0/" title="使用 TypeScript 创建 Koa 服务器">使用 TypeScript 创建 Koa 服务器</a><time datetime="2025-10-11T06:00:11.000Z" title="发表于 2025-10-11 14:00:11">2025-10-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c9d8bfa7/" title="Nodejs应用提取heap并加以分析的一些常用方法"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo24.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Nodejs应用提取heap并加以分析的一些常用方法"></a><div class="content"><a class="title" href="/posts/c9d8bfa7/" title="Nodejs应用提取heap并加以分析的一些常用方法">Nodejs应用提取heap并加以分析的一些常用方法</a><time datetime="2025-09-28T07:54:43.000Z" title="发表于 2025-09-28 15:54:43">2025-09-28</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/nba-logo9.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By 小五</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a href="https://www.foreverblog.cn/" rel="external nofollow noreferrer" target="_blank"><img src="/img/loading.gif" data-lazy-src="https://img.foreverblog.cn/logo_en_default.png" alt="十年之约" style="width:auto;height:16px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.2.2/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.2.2/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.2.2/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach(((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(a,r),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then((({svg:e})=>m(e)))}))})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid@11.4.0/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const t=document.querySelectorAll("#article-container .chartjs-container");if(0===t.length)return;const e=(t,a)=>{"object"==typeof t&&null!==t&&Object.keys(t).forEach((r=>{const n=t[r];"object"==typeof n&&null!==n&&(n[a]?t[r]=n[a]:e(n,a))}))},a=()=>{window.loadChartJS=!0,Array.from(t).forEach(((t,a)=>{const r=t.firstElementChild,n=t.getAttribute("data-chartjs-id")||"chartjs-"+a,d=t.getAttribute("data-width"),o=document.getElementById(n);o&&o.parentNode.remove();const c=r.textContent,l=document.createElement("canvas");l.id=n;const s=document.createElement("div");s.className="chartjs-wrap",d&&(s.style.width=d),s.appendChild(l),r.insertAdjacentElement("afterend",s);const h=document.getElementById(n).getContext("2d"),i=JSON.parse(c),m="dark"===document.documentElement.getAttribute("data-theme")?"dark-mode":"light-mode";(t=>{"dark-mode"===t?(Chart.defaults.color="rgba(255, 255, 255, 0.8)",Chart.defaults.borderColor="rgba(255, 255, 255, 0.2)",Chart.defaults.scale.ticks.backdropColor="transparent"):(Chart.defaults.color="rgba(0, 0, 0, 0.8)",Chart.defaults.borderColor="rgba(0, 0, 0, 0.1)",Chart.defaults.scale.ticks.backdropColor="transparent")})(m),e(i,m),new Chart(h,i)}))},r=()=>{window.loadChartJS?a():btf.getScript("https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js").then(a)};btf.addGlobalFn("themeChange",a,"chartjs"),btf.addGlobalFn("encrypt",a,"chartjs"),window.pjax?r():document.addEventListener("DOMContentLoaded",r)})()</script></div><div class="aplayer no-destroy" data-id="9061017364" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="false" muted></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>网站已更新最新版本</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">点击刷新</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/diytitle.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/metingjs/dist/Meting.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/talking/"]):not([href="/artitalk/"])',selectors:['link[rel="canonical"]','meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!0,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>e()))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404")}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.12.0/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.75.3/dist/instantsearch.production.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.2.2/source/js/search/algolia.min.js"></script></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"==location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo25.jpg" alt="/img/nba-logo25.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2024-02-02</span><a class="blog-slider__title" href="posts/1bcb0ad4/">单环境,多分支并行开发方案(流量染色/istio)</a><div class="blog-slider__text">单环境,多分支并行开发方案(流量染色/istio)</div><a class="blog-slider__button" href="posts/1bcb0ad4/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo15.jpg" alt="/img/nba-logo15.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-04-06</span><a class="blog-slider__title" href="posts/2a9d73ff/">教你如何零成本从0到1，开发上线一个对接了openAI的机器人</a><div class="blog-slider__text">教你如何零成本从0到1，开发上线一个对接了openAI的机器人</div><a class="blog-slider__button" href="posts/2a9d73ff/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo3.jpg" alt="/img/nba-logo3.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-06-14</span><a class="blog-slider__title" href="posts/aa43cc95/">记录k8s环境下结合alinode的使用</a><div class="blog-slider__text">记录k8s环境下结合alinode的使用</div><a class="blog-slider__button" href="posts/aa43cc95/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" alt="/img/nba-logo29.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-13</span><a class="blog-slider__title" href="posts/15957791/">k8s环境下,nginx做websocket负载的方案梳理</a><div class="blog-slider__text">k8s环境下,nginx做websocket负载的方案梳理</div><a class="blog-slider__button" href="posts/15957791/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo12.jpg" alt="/img/nba-logo12.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/4ecfb081/">记录一次k8s网络DNS问题排查过程</a><div class="blog-slider__text">记录一次k8s网络DNS问题排查过程</div><a class="blog-slider__button" href="posts/4ecfb081/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo12.jpg" alt="/img/nba-logo12.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/37032a87/">k3s高可用安装</a><div class="blog-slider__text">k3s高可用安装</div><a class="blog-slider__button" href="posts/37032a87/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo17.jpg" alt="/img/nba-logo17.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="posts/20b19ed4/">分词搜索需求整理</a><div class="blog-slider__text">分词搜索需求整理</div><a class="blog-slider__button" href="posts/20b19ed4/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo9.jpg" alt="/img/nba-logo9.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-02</span><a class="blog-slider__title" href="posts/6de14387/">整理wsl2配合开发的一些配置</a><div class="blog-slider__text">整理wsl2配合开发的一些配置</div><a class="blog-slider__button" href="posts/6de14387/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src= "/img/loading.gif" data-lazy-src="/img/nba-logo30.jpg" alt="/img/nba-logo30.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-12-11</span><a class="blog-slider__title" href="posts/fb9adcb6/">记录windows11+wsl2环境搭配</a><div class="blog-slider__text">windows11+wsl2开发环境配置</div><a class="blog-slider__button" href="posts/fb9adcb6/">详情</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';console.log("已挂载swiper"),parent.insertAdjacentHTML("afterbegin",child)}</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script><style></style><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300,hOffset:20,vOffset:-20},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/"})</script></body></html>
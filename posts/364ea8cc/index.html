<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>è®¾è®¡æ¨¡å¼ | å°äº”çš„ä¸ªäººæ‚è´§é“º</title><meta name="author" content="å°äº”"><meta name="copyright" content="å°äº”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™æˆ‘ä»¬åœ¨è¿›è¡Œè½¯ä»¶å¼€å‘æ—¶ï¼Œä¸ä»…ä»…éœ€è¦å°†æœ€åŸºæœ¬çš„ä¸šåŠ¡ç»™å®Œæˆï¼Œè¿˜è¦è€ƒè™‘æ•´ä¸ªé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ï¼Œæˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸å•å•éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç»´æŠ¤ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å…¶ä»–çš„å¼€å‘è€…ä¸€èµ·æ¥è¿›è¡Œå…±åŒç»´æŠ¤ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½çš„è§„èŒƒã€‚å¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ä¸æ³¨é‡è¿™äº›é—®é¢˜ï¼Œæ•´ä¸ªå›¢é˜Ÿé¡¹ç›®å°±åƒä¸€åº§å±å±±ï¼Œéšç€é¡¹ç›®çš„ä¸æ–­æ‰©å¤§ï¼Œæ•´ä½“ç»“æ„åªä¼šè¶Šæ¥è¶Šé­ã€‚ ç”šè‡³åˆ°æœ€åä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„ç¨‹åºå±…ç„¶æ˜¯ç¨³å®šè¿è¡Œåœ¨BUGä¹‹ä¸Šçš„â€¦ æ‰€"><meta property="og:type" content="article"><meta property="og:title" content="è®¾è®¡æ¨¡å¼"><meta property="og:url" content="https://xiaowu95.wang/posts/364ea8cc/"><meta property="og:site_name" content="å°äº”çš„ä¸ªäººæ‚è´§é“º"><meta property="og:description" content="é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™æˆ‘ä»¬åœ¨è¿›è¡Œè½¯ä»¶å¼€å‘æ—¶ï¼Œä¸ä»…ä»…éœ€è¦å°†æœ€åŸºæœ¬çš„ä¸šåŠ¡ç»™å®Œæˆï¼Œè¿˜è¦è€ƒè™‘æ•´ä¸ªé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ï¼Œæˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸å•å•éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç»´æŠ¤ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å…¶ä»–çš„å¼€å‘è€…ä¸€èµ·æ¥è¿›è¡Œå…±åŒç»´æŠ¤ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½çš„è§„èŒƒã€‚å¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ä¸æ³¨é‡è¿™äº›é—®é¢˜ï¼Œæ•´ä¸ªå›¢é˜Ÿé¡¹ç›®å°±åƒä¸€åº§å±å±±ï¼Œéšç€é¡¹ç›®çš„ä¸æ–­æ‰©å¤§ï¼Œæ•´ä½“ç»“æ„åªä¼šè¶Šæ¥è¶Šé­ã€‚ ç”šè‡³åˆ°æœ€åä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„ç¨‹åºå±…ç„¶æ˜¯ç¨³å®šè¿è¡Œåœ¨BUGä¹‹ä¸Šçš„â€¦ æ‰€"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xiaowu95.wang/img/nba-logo17.jpg"><meta property="article:published_time" content="2022-06-20T16:00:00.000Z"><meta property="article:modified_time" content="2023-06-16T02:13:01.000Z"><meta property="article:author" content="å°äº”"><meta property="article:tag" content="java"><meta property="article:tag" content="jvm"><meta property="article:tag" content="è®¾è®¡æ¨¡å¼"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaowu95.wang/img/nba-logo17.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "è®¾è®¡æ¨¡å¼",
  "url": "https://xiaowu95.wang/posts/364ea8cc/",
  "image": "https://xiaowu95.wang/img/nba-logo17.jpg",
  "datePublished": "2022-06-20T16:00:00.000Z",
  "dateModified": "2023-06-16T02:13:01.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "å°äº”",
      "url": "https://xiaowu95.wang"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://xiaowu95.wang/posts/364ea8cc/"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="kHfLZxYQ7y3s3AR7gyJDdJkQvGNjQsvopp6N3gEEx0s"><meta name="baidu-site-verification" content="codeva-aVS4F6wAjS"><link rel="manifest" href="/wang-xiaowu/pwa/site.webmanifest"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/wang-xiaowu/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/wang-xiaowu/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/wang-xiaowu/pwa/favicon-16x16.png"><link rel="mask-icon" href="/wang-xiaowu/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),c=window.matchMedia("(prefers-color-scheme: dark)"),r=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(r.matches)a();else if(c.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}c.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?86cb34987e15c900c39e12ebdf08c50d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-1MFQ47191J"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1MFQ47191J"),btf.addGlobalFn("pjaxComplete",(()=>{gtag("config","G-1MFQ47191J",{page_path:window.location.pathname})}),"google_analytics")</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"M91QAWRVY4",apiKey:"ecc30a5e06136e1cc491685e39801190",indexName:"xiaowu-blog",hitsPerPage:6,languages:{hits_empty:"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œè€—æ—¶ ${time} æ¯«ç§’"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç°¡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400,highlightFullpage:!0,highlightMacStyle:!0},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶å¤±è´¥",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"å¤©",dateSuffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:{limitCount:150,languages:{author:"ä½œè€…: å°äº”",link:"é“¾æ¥: ",source:"æ¥æº: å°äº”çš„ä¸ªäººæ‚è´§é“º",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡",cht_to_chs:"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡",day_to_night:"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js",buttonText:"åŠ è½½æ›´å¤š"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"è®¾è®¡æ¨¡å¼",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/font.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="/css/titleStyle.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/custom.css"><style>.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="alternate" href="/atom.xml" title="å°äº”çš„ä¸ªäººæ‚è´§é“º" type="application/atom+xml"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",(()=>{Pace.restart()}),"pace_restart")</script><link rel="stylesheet" href="/css/pace.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/nba-logo17.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">å°äº”çš„ä¸ªäººæ‚è´§é“º</span></a><a class="nav-page-title" href="/"><span class="site-name">è®¾è®¡æ¨¡å¼</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">è®¾è®¡æ¨¡å¼<a class="post-edit-link" href="https://github.com/wang-xiaowu/wang-xiaowu.github.io/issues/new?_posts/java/è®¾è®¡æ¨¡å¼.md" rel="external nofollow noreferrer" title="ç¼–è¾‘" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-06-20T16:00:00.000Z" title="å‘è¡¨äº 2022-06-21 00:00:00">2022-06-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-06-16T02:13:01.000Z" title="æ›´æ–°äº 2023-06-16 10:13:01">2023-06-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">24.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>84åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°è¯¥æ–‡ç« å·²ç»è¿‡äº†&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œæ–‡ç« æ‰€æè¿°çš„å…§å®¹å¯èƒ½å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œè¯·ç•™æ„ã€‚&quot;,&quot;postUpdate&quot;:&quot;2023-06-16 10:13:01&quot;}" hidden></div><h1 id="é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™"><a href="#é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™" class="headerlink" title="é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™"></a>é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™</h1><p>æˆ‘ä»¬åœ¨è¿›è¡Œè½¯ä»¶å¼€å‘æ—¶ï¼Œä¸ä»…ä»…éœ€è¦å°†æœ€åŸºæœ¬çš„ä¸šåŠ¡ç»™å®Œæˆï¼Œè¿˜è¦è€ƒè™‘æ•´ä¸ªé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ï¼Œæˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸å•å•éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç»´æŠ¤ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å…¶ä»–çš„å¼€å‘è€…ä¸€èµ·æ¥è¿›è¡Œå…±åŒç»´æŠ¤ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½çš„è§„èŒƒã€‚å¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ä¸æ³¨é‡è¿™äº›é—®é¢˜ï¼Œæ•´ä¸ªå›¢é˜Ÿé¡¹ç›®å°±åƒä¸€åº§å±å±±ï¼Œéšç€é¡¹ç›®çš„ä¸æ–­æ‰©å¤§ï¼Œæ•´ä½“ç»“æ„åªä¼šè¶Šæ¥è¶Šé­ã€‚</p><p>ç”šè‡³åˆ°æœ€åä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„ç¨‹åºå±…ç„¶æ˜¯ç¨³å®šè¿è¡Œåœ¨BUGä¹‹ä¸Šçš„â€¦</p><p>æ‰€ä»¥ï¼Œä¸ºäº†å°½å¯èƒ½é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œæˆ‘ä»¬å°±æ¥èŠèŠé¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ã€‚</p><h2 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h2><p>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSimple Responsibility Pincipleï¼ŒSRPï¼‰æ˜¯æœ€ç®€å•çš„é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ï¼Œå®ƒç”¨äºæ§åˆ¶ç±»çš„ç²’åº¦å¤§å°ã€‚</p><blockquote><p>ä¸€ä¸ªå¯¹è±¡åº”è¯¥åªåŒ…å«å•ä¸€çš„èŒè´£ï¼Œå¹¶ä¸”è¯¥èŒè´£è¢«å®Œæ•´åœ°å°è£…åœ¨ä¸€ä¸ªç±»ä¸­ã€‚</p></blockquote><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªPeopleç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸€ä¸ªäººç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äººç±»ä¼šç¼–ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;int mian() &#123;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;   printf(\&quot;Holle Wrold!\&quot;);&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å•Šå˜ï¼Œæ€ä¹ˆè¿è¡Œä¸èµ·ï¼Ÿæ˜æ˜ç…§ç€è€å¸ˆæ•²çš„å•Š&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥å‚æ‰“èºä¸ä¹Ÿä¼š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çœŸå¼€å¿ƒï¼Œèƒ½è¿›åˆ°å¯ŒåœŸåº·æ‰“èºä¸&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯¶ï¼Œæ€ä¹ˆå·¥å‹éƒ½ææ¡¶è·‘è·¯äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€å¤–å–ä¹Ÿä¼š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ride</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»Šå¤©ç»ˆäºé€šè¿‡ç¾å›¢æœ€ç»ˆé¢ï¼ŒåŠ å…¥äº†æ¢¦å¯ä»¥æ±‚çš„å¤§å‚äº†&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„Ÿè§‰é¢è¯•æŒºç®€å•çš„ï¼Œå°±æ˜¯ä¸çŸ¥é“ä¸ºå•¥æˆ‘åŒå­¦æ˜¯ç°åœºåšä¸€é“åŠ›æ‰£æ¥é›¨æ°´ï¼Œè€Œæˆ‘æ˜¯ç°åœºé—®ä¼šä¸ä¼šéª‘è½¦&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ï¼ˆè¿«ä¸åŠå¾…ç©¿ä¸Šå¤–å–æœè£…ï¼‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªPeopleç±»å¯ä»¥è¯´æ˜¯åå…«èˆ¬æ­¦è‰ºæ ·æ ·ç²¾é€šäº†ï¼Œå•¥éƒ½ä¼šï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæˆ‘ä»¬æ¯ä¸ªäººæœ€ç»ˆéƒ½æ˜¯åœ¨è‡ªå·±æ‰€æ“…é•¿çš„é¢†åŸŸå·¥ä½œï¼Œæ‰€è°“é—»é“æœ‰å…ˆåï¼Œæœ¯ä¸šæœ‰ä¸“æ”»ï¼Œä¼šç¼–ç¨‹çš„å°±åº”è¯¥æ˜¯ç¨‹åºå‘˜ï¼Œä¼šæ‰“èºä¸çš„å°±åº”è¯¥æ˜¯å·¥äººï¼Œä¼šé€å¤–å–çš„åº”è¯¥æ˜¯éª‘æ‰‹ï¼Œæ˜¾ç„¶è¿™ä¸ªPeopleå¤ªè¿‡è‡ƒè‚¿ï¼ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä»»æ„ä¸€ç§è¡Œä¸ºéƒ½éœ€è¦ä¿®æ”¹Peopleç±»ï¼Œå®ƒæ‹¥æœ‰ä¸æ­¢ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ï¼‰ï¼Œæ‰€ä»¥æ ¹æ®å•ä¸€èŒè´£åŸåˆ™ï¼Œæˆ‘ä»¬ä¸‹éœ€è¦è¿›è¡Œæ›´æ˜ç¡®çš„åˆ’åˆ†ï¼ŒåŒç§ç±»å‹çš„æ“ä½œæˆ‘ä»¬ä¸€èˆ¬æ‰æ”¾åœ¨ä¸€èµ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¨‹åºå‘˜ä¼šç¼–ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;int mian() &#123;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;   printf(\&quot;Hello World!\&quot;)&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å•Šå˜ï¼Œæ€ä¹ˆè¿è¡Œä¸èµ·ï¼Ÿæ˜æ˜ç…§ç€è€å¸ˆæ•²çš„å•Š&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Worker</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥äººä¼šæ‰“èºä¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çœŸå¼€å¿ƒï¼Œèƒ½è¿›åˆ°å¯ŒåœŸåº·æ‰“èºä¸&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯¶ï¼Œæ€ä¹ˆå·¥å‹éƒ½ææ¡¶è·‘è·¯äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rider</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éª‘æ‰‹ä¼šé€å¤–å–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ride</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»Šå¤©ç»ˆäºé€šè¿‡ç¾å›¢æœ€ç»ˆé¢ï¼ŒåŠ å…¥äº†æ¢¦å¯ä»¥æ±‚çš„å¤§å‚&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„Ÿè§‰é¢è¯•æŒºç®€å•çš„ï¼Œå°±æ˜¯ä¸çŸ¥é“ä¸ºå•¥æˆ‘åŒå­¦æ˜¯ç°åœºåšä¸€é“åŠ›æ‰£æ¥é›¨æ°´ï¼Œæˆ‘æ˜¯ç°åœºé—®ä¼šä¸ä¼šéª‘è½¦&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ï¼ˆè¿«ä¸åŠå¾…ç©¿ä¸Šå¤–å–æœè£…ï¼‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†ç±»çš„ç²’åº¦è¿›è¡Œæ›´è¿‘ä¸€æ­¥çš„åˆ’åˆ†ï¼Œè¿™æ ·å°±å¾ˆæ¸…æ™°äº†ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä»¥ååœ¨è®¾è®¡Mapperã€Serviceã€Controllerç­‰ç­‰ï¼Œæ ¹æ®ä¸åŒçš„ä¸šåŠ¡è¿›è¡Œåˆ’åˆ†ï¼Œéƒ½å¯ä»¥é‡‡ç”¨å•ä¸€èŒè´£åŸåˆ™ï¼Œä»¥å®ƒä½œä¸ºæˆ‘ä»¬å®ç°<strong>é«˜å†…èšä½è€¦åˆ</strong>çš„æŒ‡å¯¼æ–¹é’ˆã€‚å®é™…ä¸Šæˆ‘ä»¬çš„å¾®æœåŠ¡ä¹Ÿæ˜¯å‚è€ƒäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªå¾®æœåŠ¡åªåº”æ‹…è´Ÿä¸€ä¸ªèŒè´£ã€‚</p><h2 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h2><p>å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰ä¹Ÿæ˜¯é‡è¦çš„é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ã€‚</p><blockquote><p>è½¯ä»¶å®ä½“åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p></blockquote><p>ä¸€ä¸ªè½¯ä»¶å®ä½“ï¼Œæ¯”å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å…¶ä¸­ï¼Œå¯¹æ‰©å±•å¼€æ”¾æ˜¯é’ˆå¯¹æä¾›æ–¹æ¥è¯´çš„ï¼Œå¯¹ä¿®æ”¹å…³é—­æ˜¯é’ˆå¯¹è°ƒç”¨æ–¹æ¥è¯´çš„ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬çš„ç¨‹åºå‘˜åˆ†ä¸ºJavaç¨‹åºå‘˜ã€C#ç¨‹åºå‘˜ã€Cè‰¹ç¨‹åºå‘˜ã€PHPç¨‹åºå‘˜ã€å‰ç«¯ç¨‹åºå‘˜ç­‰ï¼Œè€Œä»–ä»¬è¦åšçš„éƒ½æ˜¯å»æ‰“ä»£ç ï¼Œè€Œå…·ä½“å¦‚ä½•æ‰“ä»£ç æ˜¯æ ¹æ®ä¸åŒè¯­è¨€çš„ç¨‹åºå‘˜æ¥å†³å®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¨‹åºå‘˜æ‰“ä»£ç è¿™ä¸€ä¸ªè¡Œä¸ºæŠ½è±¡æˆä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æˆ–æ˜¯æŠ½è±¡ç±»ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ»¡è¶³äº†å¼€é—­åŸåˆ™çš„ç¬¬ä¸€ä¸ªè¦æ±‚ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œä¸åŒçš„ç¨‹åºå‘˜å¯ä»¥è‡ªç”±åœ°å†³å®šä»–ä»¬è¯¥å¦‚ä½•è¿›è¡Œç¼–ç¨‹ã€‚è€Œå…·ä½“å“ªä¸ªç¨‹åºå‘˜ä½¿ç”¨ä»€ä¹ˆè¯­è¨€æ€ä¹ˆç¼–ç¨‹ï¼Œæ˜¯è‡ªå·±åœ¨è´Ÿè´£ï¼Œä¸éœ€è¦å…¶ä»–ç¨‹åºå‘˜å¹²æ¶‰ï¼Œæ‰€ä»¥æ»¡è¶³ç¬¬äºŒä¸ªè¦æ±‚ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">JavaCoder</span> <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Javaå¤ªå·äº†T_Tï¼Œå¿«å»å­¦Goå§ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">PHPCoder</span> <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;PHPæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">C</span>#Coder <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç¬‘æ­»ï¼ŒJavaå†ç‰›é€¼åº•å±‚ä¸è¿˜å¾—æ‰¾æˆ‘ï¼Ÿ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æä¾›ä¸€ä¸ªCoderæŠ½è±¡ç±»ï¼Œå®šä¹‰å‡ºç¼–ç¨‹çš„è¡Œä¸ºï¼Œä½†æ˜¯ä¸è¿›è¡Œå®ç°ï¼Œè€Œæ˜¯å¼€æ”¾ç»™å…¶ä»–å…·ä½“ç±»å‹çš„ç¨‹åºå‘˜æ¥å®ç°ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡è¿›è¡Œçµæ´»æ‰©å±•äº†ï¼Œå…·æœ‰è¾ƒå¥½çš„å»¶ç»­æ€§ã€‚</p><p>ä¸è¿‡ï¼Œå›é¡¾æˆ‘ä»¬è¿™ä¸€è·¯çš„å­¦ä¹ ï¼Œå¥½åƒå¤„å¤„éƒ½åœ¨ä½¿ç”¨å¼€é—­åŸåˆ™ã€‚</p><h2 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h2><p>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰æ˜¯å¯¹å­ç±»å‹çš„ç‰¹åˆ«å®šä¹‰ã€‚å®ƒç”±èŠ­èŠ­æ‹‰Â·åˆ©æ–¯ç§‘å¤«ï¼ˆBarbara Liskovï¼‰åœ¨1987å¹´åœ¨ä¸€æ¬¡ä¼šè®®ä¸Šåä¸º â€œæ•°æ®çš„æŠ½è±¡ä¸å±‚æ¬¡â€ çš„æ¼”è¯´ä¸­é¦–å…ˆæå‡ºã€‚</p><blockquote><p>æ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚</p></blockquote><p>ç®€å•çš„è¯´å°±æ˜¯ï¼Œå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ï¼š</p><ol><li>å­ç±»å¯ä»¥å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éæŠ½è±¡æ–¹æ³•ã€‚</li><li>å­ç±»å¯ä»¥å¢åŠ è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ã€‚</li><li>å½“å­ç±»çš„æ–¹æ³•é‡è½½çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„è¾“å…¥&#x2F;å…¥å‚ï¼‰è¦æ¯”çˆ¶ç±»æ–¹æ³•çš„è¾“å…¥å‚æ•°æ›´å®½æ¾ã€‚</li><li>å½“å­ç±»çš„æ–¹æ³•å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼ˆé‡å†™&#x2F;é‡è½½æˆ–å®ç°æŠ½è±¡æ–¹æ³•ï¼‰ï¼Œæ–¹æ³•çš„åç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„è¾“å‡º&#x2F;è¿”å›å€¼ï¼‰è¦æ¯”çˆ¶ç±»æ›´ä¸¥æ ¼æˆ–ä¸çˆ¶ç±»ä¸€æ ·ã€‚</li></ol><p>æ¯”å¦‚æˆ‘ä»¬ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘ä¼šæ‰“ä»£ç &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">JavaCoder</span> <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å­ç±»é™¤äº†ä¼šæ‰“ä»£ç ä¹‹å¤–ï¼Œè¿˜ä¼šæ‰“æ¸¸æˆ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">game</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è‰¾æ¬§å°¼äºšæœ€å¼ºç‹è€…å·²ä¸Šå·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°JavaCoderè™½ç„¶ç»§æ‰¿è‡ªCoderï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯¹çˆ¶ç±»æ–¹æ³•è¿›è¡Œé‡å†™ï¼Œå¹¶ä¸”è¿˜åœ¨çˆ¶ç±»çš„åŸºç¡€ä¸Šè¿›è¡Œé¢å¤–æ‰©å±•ï¼Œç¬¦åˆé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚ä½†æ˜¯æˆ‘ä»¬å†æ¥çœ‹ä¸‹é¢çš„è¿™ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘ä¼šæ‰“ä»£ç &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">JavaCoder</span> <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">game</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è‰¾æ¬§å°¼äºšæœ€å¼ºç‹è€…å·²ä¸Šå·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¿™é‡Œæˆ‘ä»¬å¯¹çˆ¶ç±»çš„è¡Œä¸ºè¿›è¡Œäº†é‡å†™ï¼Œç°åœ¨å®ƒä¸å†å…·å¤‡çˆ¶ç±»åŸæœ¬çš„èƒ½åŠ›äº†</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘å¯’çª—è‹¦è¯»åå…­å¹´ï¼Œåˆ°æœ€åè¿˜ä¸å¦‚åŸ¹è®­ç­ä¸‰ä¸ªæœˆå‡ºæ¥çš„ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æƒ³æ¥æƒ³å»ï¼Œæˆ¿å­è½¦å­ç»“å©šå½©ç¤¼ï¼Œä¸ºä»€ä¹ˆè¿™è¾ˆå­è¦æ´»çš„è¿™ä¹ˆç´¯å‘¢ï¼Ÿ&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;éš¾é“æ¥åˆ°è¿™ä¸–é—´èµ°è¿™ä¸€é­å°±ä¸ºäº†èŠ±ä¸€è¾ˆå­æ—¶é—´ä¹°ä¸ªæˆ¿å­å—ï¼Ÿä¸€ä¸ªäººä¸æ˜¯ä¹Ÿèƒ½æ´»çš„è½»æ¾å¿«ä¹å—ï¼Ÿ&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ‘†çƒ‚äº†ï¼Œå•Šå¯¹å¯¹å¯¹&quot;</span>);  </span><br><span class="line">          	<span class="comment">//å¥½äº†ï¼Œemoç»“æŸï¼Œç»§ç»­å·å§ï¼Œäººç”Ÿå› å¥‹æ–—è€Œç¾ä¸½ï¼Œè¿™ä¸ªä¸–ç•Œè™½ç„¶æ»¡ç›®ç–®ç—ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¾ˆå¤šç¾å¥½å€¼å¾—æœŸå¾…</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨æˆ‘ä»¬å¯¹çˆ¶ç±»çš„æ–¹æ³•è¿›è¡Œäº†é‡å†™ï¼Œæ˜¾ç„¶ï¼Œçˆ¶ç±»çš„è¡Œä¸ºå·²ç»è¢«æˆ‘ä»¬ç»™è¦†ç›–äº†ï¼Œè¿™ä¸ªå­ç±»å·²ç»ä¸å…·å¤‡çˆ¶ç±»çš„åŸæœ¬çš„è¡Œä¸ºï¼Œå¾ˆæ˜¾ç„¶è¿èƒŒäº†é‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</p><p>è¦æ˜¯ç¨‹åºå‘˜è¿æ•²ä»£ç éƒ½ä¸ä¼šäº†ï¼Œè¿˜èƒ½å«åšç¨‹åºå‘˜å—ï¼Ÿ</p><p>æ‰€ä»¥ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸éœ€è¦å†ç»§æ‰¿è‡ªCoderäº†ï¼Œæˆ‘ä»¬å¯ä»¥æå‡ä¸€ä¸‹ï¼Œå°†æ­¤è¡Œä¸ºå®šä¹‰åˆ°Peopleä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span>;   <span class="comment">//è¿™ä¸ªè¡Œä¸ºè¿˜æ˜¯å®šä¹‰å‡ºæ¥ï¼Œä½†æ˜¯ä¸å®ç°</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Coder</span> <span class="keyword">extends</span> <span class="title class_">People</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘ä¼šæ‰“ä»£ç &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">JavaCoder</span> <span class="keyword">extends</span> <span class="title class_">People</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">game</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è‰¾æ¬§å°¼äºšæœ€å¼ºç‹è€…å·²ä¸Šå·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ‘†çƒ‚äº†ï¼Œå•Šå¯¹å¯¹å¯¹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡Œæ°æ›¿æ¢ä¹Ÿæ˜¯å®ç°å¼€é—­åŸåˆ™çš„é‡è¦æ–¹å¼ä¹‹ä¸€ã€‚</p><h2 id="ä¾èµ–å€’è½¬åŸåˆ™"><a href="#ä¾èµ–å€’è½¬åŸåˆ™" class="headerlink" title="ä¾èµ–å€’è½¬åŸåˆ™"></a>ä¾èµ–å€’è½¬åŸåˆ™</h2><p>ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ä¹Ÿæ˜¯æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨çš„ï¼Œæœ€æ˜æ˜¾çš„å°±æ˜¯æˆ‘ä»¬çš„Springæ¡†æ¶äº†ã€‚</p><blockquote><p>é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–äºåº•å±‚æ¨¡å—ï¼Œå®ƒä»¬éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚æŠ½è±¡ä¸åº”ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p></blockquote><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨æˆ‘ä»¬ä¹‹å‰çš„å­¦ä¹ ä¸­ä¸ºä»€ä¹ˆè¦ä¸€ç›´ä½¿ç”¨æ¥å£æ¥è¿›è¡ŒåŠŸèƒ½å®šä¹‰ï¼Œç„¶åå†å»å®ç°å—ï¼Ÿæˆ‘ä»¬å›é¡¾ä¸€ä¸‹åœ¨ä½¿ç”¨Springæ¡†æ¶ä¹‹å‰çš„æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserController</span> <span class="variable">controller</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserController</span>();</span><br><span class="line">      	<span class="comment">//è¯¥æ€ä¹ˆç”¨å°±è¿™ä¹ˆç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">        <span class="comment">//CRUD...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMapper</span>();</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç ....</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç ....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯çªç„¶æœ‰ä¸€å¤©ï¼Œå…¬å¸ä¸šåŠ¡éœ€æ±‚å˜åŒ–ï¼Œç°åœ¨ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡æ“ä½œéœ€è¦ä½¿ç”¨æ–°çš„å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserController</span> <span class="variable">controller</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserController</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">        <span class="comment">//CRUD...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserServiceNew</span> &#123;   <span class="comment">//ç”±äºUserServiceNewå‘ç”Ÿå˜åŒ–ï¼Œä¼šç›´æ¥å½±å“åˆ°å…¶ä»–é«˜å±‚æ¨¡å—</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMapper</span>();</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç ....</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;   <span class="comment">//ç„¯ï¼Œå¹²å˜›æ”¹åº•å±‚å•Šï¼Œæˆ‘è¿™åˆå¾—é‡å†™äº†</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();   <span class="comment">//å“¦è±ï¼ŒåŸæ¥çš„ä¸èƒ½ç”¨äº†</span></span><br><span class="line">        <span class="type">UserServiceNew</span> <span class="variable">serviceNew</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceNew</span>();   <span class="comment">//åªèƒ½ä¿®æ”¹æˆæ–°çš„äº†</span></span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç ....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬çš„å„ä¸ªæ¨¡å—ä¹‹é—´å®é™…ä¸Šæ˜¯å…·æœ‰å¼ºå…³è”çš„ï¼Œä¸€ä¸ªæ¨¡å—æ˜¯ç›´æ¥æŒ‡å®šä¾èµ–äºå¦ä¸€ä¸ªæ¨¡å—ï¼Œè™½ç„¶è¿™æ ·ç»“æ„æ¸…æ™°ï¼Œä½†æ˜¯åº•å±‚æ¨¡å—çš„å˜åŠ¨ï¼Œä¼šç›´æ¥å½±å“åˆ°å…¶ä»–ä¾èµ–äºå®ƒçš„é«˜å±‚æ¨¡å—ï¼Œå¦‚æœæˆ‘ä»¬çš„é¡¹ç›®å˜å¾—å¾ˆåºå¤§ï¼Œé‚£ä¹ˆè¿™æ ·çš„ä¿®æ”¹å°†æ˜¯ä¸€åœºç¾éš¾ã€‚</p><p>è€Œæœ‰äº†Springæ¡†æ¶ä¹‹åï¼Œæˆ‘ä»¬çš„å¼€å‘æ¨¡å¼å°±å‘ç”Ÿäº†å˜åŒ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserController</span> <span class="variable">controller</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserController</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">        <span class="comment">//æ¥å£ä¸­åªåšCRUDæ–¹æ³•å®šä¹‰</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">        <span class="comment">//å®ç°ç±»å®ŒæˆCRUDå…·ä½“å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç å®šä¹‰....</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">        <span class="meta">@Resource</span>   <span class="comment">//ç°åœ¨ç”±Springæ¥ä¸ºæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªæŒ‡å®šçš„å®ç°ç±»ï¼Œç„¶åæ³¨å…¥ï¼Œè€Œä¸æ˜¯ç”±æˆ‘ä»¬åœ¨ç±»ä¸­ç¡¬ç¼–ç è¿›è¡ŒæŒ‡å®š</span></span><br><span class="line">        UserMapper mapper;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç å…·ä½“å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">        <span class="meta">@Resource</span></span><br><span class="line">        UserService service;   <span class="comment">//ç›´æ¥ä½¿ç”¨æ¥å£ï¼Œå°±ç®—ä½ æ”¹å®ç°ï¼Œæˆ‘ä¹Ÿä¸éœ€è¦å†ä¿®æ”¹ä»£ç äº†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸šåŠ¡ä»£ç ....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ä½¿ç”¨æ¥å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†åŸæœ‰çš„å¼ºå…³è”ç»™å¼±åŒ–ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“æ¥å£ä¸­å®šä¹‰äº†ä»€ä¹ˆæ–¹æ³•ç„¶åå»ä½¿ç”¨å³å¯ï¼Œè€Œå…·ä½“çš„æ“ä½œç”±æ¥å£çš„å®ç°ç±»æ¥å®Œæˆï¼Œå¹¶ç”±Springæ¥ä¸ºæˆ‘ä»¬æ³¨å…¥ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬é€šè¿‡ç¡¬ç¼–ç çš„æ–¹å¼å»æŒ‡å®šã€‚</p><h2 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h2><p>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principle, ISPï¼‰å®é™…ä¸Šæ˜¯å¯¹æ¥å£çš„ç»†åŒ–ã€‚</p><blockquote><p>å®¢æˆ·ç«¯ä¸åº”ä¾èµ–é‚£äº›å®ƒä¸éœ€è¦çš„æ¥å£ã€‚</p></blockquote><p>æˆ‘ä»¬åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„æ§åˆ¶æ¥å£çš„ç²’åº¦ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Device</span> &#123;</span><br><span class="line">    String <span class="title function_">getCpu</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getType</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getMemory</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µè„‘å°±æ˜¯ä¸€ç§ç”µå­è®¾å¤‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å®ç°æ­¤æ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span> <span class="keyword">implements</span> <span class="title class_">Device</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCpu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;i9-12900K&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç”µè„‘&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMemory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;32G DDR5&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µé£æ‰‡ä¹Ÿç®—æ˜¯ä¸€ç§ç”µå­è®¾å¤‡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fan</span> <span class="keyword">implements</span> <span class="title class_">Device</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCpu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;   <span class="comment">//å°±ä¸€ä¸ªç ´é£æ‰‡ï¼Œè¿˜éœ€è¦CPUï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;é£æ‰‡&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMemory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;   <span class="comment">//é£æ‰‡ä¹Ÿä¸éœ€è¦å†…å­˜å§</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªDeviceæ¥å£ï¼Œä½†æ˜¯ç”±äºæ­¤æ¥å£çš„ç²’åº¦ä¸å¤Ÿç»†ï¼Œè™½ç„¶æ¯”è¾ƒå¥‘åˆç”µè„‘è¿™ç§è®¾å¤‡ï¼Œä½†æ˜¯ä¸é€‚åˆé£æ‰‡è¿™ç§è®¾å¤‡ï¼Œå› ä¸ºé£æ‰‡å‹æ ¹å°±ä¸éœ€è¦CPUå’Œå†…å­˜ï¼Œæ‰€ä»¥é£æ‰‡å®Œå…¨ä¸éœ€è¦è¿™äº›æ–¹æ³•ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¿…é¡»è¦å¯¹å…¶è¿›è¡Œæ›´ç»†ç²’åº¦çš„åˆ’åˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SmartDevice</span> &#123;   <span class="comment">//æ™ºèƒ½è®¾å¤‡æ‰æœ‰getCpuå’ŒgetMemory</span></span><br><span class="line">    String <span class="title function_">getCpu</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getType</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getMemory</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">NormalDevice</span> &#123;   <span class="comment">//æ™®é€šè®¾å¤‡åªæœ‰getType</span></span><br><span class="line">    String <span class="title function_">getType</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µè„‘å°±æ˜¯ä¸€ç§ç”µå­è®¾å¤‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç»§æ‰¿æ­¤æ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span> <span class="keyword">implements</span> <span class="title class_">SmartDevice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCpu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;i9-12900K&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç”µè„‘&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMemory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;32G DDR5&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µé£æ‰‡ä¹Ÿç®—æ˜¯ä¸€ç§ç”µå­è®¾å¤‡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fan</span> <span class="keyword">implements</span> <span class="title class_">NormalDevice</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;é£æ‰‡&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†æ¥å£è¿›è¡Œäº†ç»†ç²’åº¦çš„åˆ’åˆ†ï¼Œä¸åŒç±»å‹çš„ç”µå­è®¾å¤‡å°±å¯ä»¥æ ¹æ®åˆ’åˆ†å»å®ç°ä¸åŒçš„æ¥å£äº†ã€‚å½“ç„¶ï¼Œä¹Ÿä¸èƒ½åˆ’åˆ†å¾—å¤ªå°ï¼Œè¿˜æ˜¯è¦æ ¹æ®å®é™…æƒ…å†µæ¥è¿›è¡Œå†³å®šã€‚</p><h2 id="åˆæˆå¤ç”¨åŸåˆ™"><a href="#åˆæˆå¤ç”¨åŸåˆ™" class="headerlink" title="åˆæˆå¤ç”¨åŸåˆ™"></a>åˆæˆå¤ç”¨åŸåˆ™</h2><p>åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰çš„æ ¸å¿ƒå°±æ˜¯å§”æ´¾ã€‚</p><blockquote><p>ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚</p></blockquote><p>åœ¨ä¸€ä¸ªæ–°çš„å¯¹è±¡é‡Œé¢ä½¿ç”¨ä¸€äº›å·²æœ‰çš„å¯¹è±¡ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œæ–°çš„å¯¹è±¡é€šè¿‡å‘è¿™äº›å¯¹è±¡çš„å§”æ´¾è¾¾åˆ°å¤ç”¨å·²æœ‰åŠŸèƒ½çš„ç›®çš„ã€‚å®é™…ä¸Šæˆ‘ä»¬åœ¨è€ƒè™‘å°†æŸä¸ªç±»é€šè¿‡ç»§æ‰¿å…³ç³»åœ¨å­ç±»å¾—åˆ°çˆ¶ç±»å·²ç»å®ç°çš„æ–¹æ³•ä¹‹å¤–ï¼ˆæ¯”å¦‚Aç±»å®ç°äº†è¿æ¥æ•°æ®åº“çš„åŠŸèƒ½ï¼Œæ°å·§Bç±»ä¸­ä¹Ÿéœ€è¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥è·å¾—Aå·²ç»å†™å¥½çš„è¿æ¥æ•°æ®åº“çš„åŠŸèƒ½ï¼Œè¿™æ ·å°±èƒ½ç›´æ¥å¤ç”¨Aä¸­å·²ç»å†™å¥½çš„é€»è¾‘ï¼‰æˆ‘ä»¬åº”è¯¥åº”è¯¥ä¼˜å…ˆåœ°å»è€ƒè™‘ä½¿ç”¨åˆæˆçš„æ–¹å¼æ¥å®ç°å¤ç”¨ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDatabase</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯è¿æ¥æ•°æ®åº“æ“ä½œï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;    <span class="comment">//ç›´æ¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼ï¼Œå¾—åˆ°Açš„æ•°æ®åº“è¿æ¥é€»è¾‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯Bçš„æ–¹æ³•ï¼Œæˆ‘ä¹Ÿéœ€è¦è¿æ¥æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line">        connectDatabase();   <span class="comment">//ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•å°±è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¿™æ ·çœ‹èµ·æ¥æ²¡å•¥æ¯›ç—…ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨æˆ‘ä»¬ä¹‹å‰è¯´çš„é‚£ä¸ªé—®é¢˜ï¼Œè€¦åˆåº¦å¤ªé«˜äº†ã€‚</p><p>å¯ä»¥çœ‹åˆ°é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°å¤ç”¨ï¼Œæˆ‘ä»¬æ˜¯å°†ç±»Bç›´æ¥æŒ‡å®šç»§æ‰¿è‡ªç±»Açš„ï¼Œé‚£ä¹ˆå¦‚æœæœ‰ä¸€å¤©ï¼Œç”±äºä¸šåŠ¡çš„æ›´æ”¹ï¼Œæˆ‘ä»¬çš„æ•°æ®åº“è¿æ¥æ“ä½œï¼Œä¸å†ç”±Aæ¥è´Ÿè´£ï¼Œè€Œæ˜¯ç”±æ–°æ¥çš„Cå»è´Ÿè´£ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸å°†éœ€è¦å¤ç”¨Aä¸­æ–¹æ³•çš„å­ç±»å…¨éƒ¨è¿›è¡Œä¿®æ”¹ï¼Œå¾ˆæ˜¾ç„¶è¿™æ ·æ˜¯è´¹æ—¶è´¹åŠ›çš„ã€‚</p><p>å¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œé€šè¿‡ç»§æ‰¿å­ç±»ä¼šå¾—åˆ°ä¸€äº›çˆ¶ç±»ä¸­çš„å®ç°ç»†èŠ‚ï¼Œæ¯”å¦‚æŸäº›å­—æ®µæˆ–æ˜¯æ–¹æ³•ï¼Œè¿™æ ·ç›´æ¥æš´éœ²ç»™å­ç±»ï¼Œå¹¶ä¸å®‰å…¨ã€‚</p><p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬éœ€è¦å®ç°å¤ç”¨æ—¶ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘ä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDatabase</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯è¿æ¥æ•°æ®åº“æ“ä½œï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;   <span class="comment">//ä¸è¿›è¡Œç»§æ‰¿ï¼Œè€Œæ˜¯åœ¨ç”¨çš„æ—¶å€™ç»™æˆ‘ä¸€ä¸ªAï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªæ¥å£ï¼Œæ›´åŠ çµæ´»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(A a)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯Bçš„æ–¹æ³•ï¼Œæˆ‘ä¹Ÿéœ€è¦è¿æ¥æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line">        a.connectDatabase();   <span class="comment">//åœ¨é€šè¿‡ä¼ å…¥çš„å¯¹è±¡Aå»æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDatabase</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯è¿æ¥æ•°æ®åº“æ“ä½œï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    </span><br><span class="line">    A a;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">B</span><span class="params">(A a)</span>&#123;   <span class="comment">//åœ¨æ„é€ æ—¶å°±æŒ‡å®šå¥½</span></span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯Bçš„æ–¹æ³•ï¼Œæˆ‘ä¹Ÿéœ€è¦è¿æ¥æ•°æ®åº“ï¼&quot;</span>);</span><br><span class="line">        a.connectDatabase();   <span class="comment">//ä¹Ÿæ˜¯é€šè¿‡å¯¹è±¡Aå»æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å¯¹è±¡ä¹‹é—´çš„ç»„åˆï¼Œæˆ‘ä»¬å°±å¤§å¤§é™ä½äº†ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶ä¸”Açš„å®ç°ç»†èŠ‚æˆ‘ä»¬ä¹Ÿä¸ä¼šç›´æ¥å¾—åˆ°äº†ã€‚</p><h2 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h2><p>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeterï¼‰åˆç§°æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œæ˜¯å¯¹ç¨‹åºå†…éƒ¨æ•°æ®äº¤äº’çš„é™åˆ¶ã€‚</p><blockquote><p>æ¯ä¸€ä¸ªè½¯ä»¶å•ä½å¯¹å…¶ä»–å•ä½éƒ½åªæœ‰æœ€å°‘çš„çŸ¥è¯†ï¼Œè€Œä¸”å±€é™äºé‚£äº›ä¸æœ¬å•ä½å¯†åˆ‡ç›¸å…³çš„è½¯ä»¶å•ä½ã€‚</p></blockquote><p>ç®€å•æ¥è¯´å°±æ˜¯ï¼Œä¸€ä¸ªç±»&#x2F;æ¨¡å—å¯¹å…¶ä»–çš„ç±»&#x2F;æ¨¡å—æœ‰è¶Šå°‘çš„äº¤äº’è¶Šå¥½ã€‚å½“ä¸€ä¸ªç±»å‘ç”Ÿæ”¹åŠ¨ï¼Œé‚£ä¹ˆï¼Œä¸å…¶ç›¸å…³çš„ç±»ï¼ˆæ¯”å¦‚ç”¨åˆ°æ­¤ç±»å•¥æ–¹æ³•çš„ç±»ï¼‰éœ€è¦å°½å¯èƒ½å°‘çš„å—å½±å“ï¼ˆæ¯”å¦‚ä¿®æ”¹äº†æ–¹æ³•åã€å­—æ®µåç­‰ï¼Œå¯èƒ½å…¶ä»–ç”¨åˆ°è¿™äº›æ–¹æ³•æˆ–æ˜¯å­—æ®µçš„ç±»ä¹Ÿéœ€è¦è·Ÿç€ä¿®æ”¹ï¼‰è¿™æ ·æˆ‘ä»¬åœ¨ç»´æŠ¤é¡¹ç›®çš„æ—¶å€™ä¼šæ›´åŠ è½»æ¾ä¸€äº›ã€‚</p><p>å…¶å®è¯´ç™½äº†ï¼Œè¿˜æ˜¯é™ä½è€¦åˆåº¦ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">8080</span>);   <span class="comment">//å‡è®¾æˆ‘ä»¬å½“å‰çš„ç¨‹åºéœ€è¦è¿›è¡Œç½‘ç»œé€šä¿¡</span></span><br><span class="line">        <span class="type">Test</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">        test.test(socket);   <span class="comment">//ç°åœ¨éœ€è¦æ‰§è¡Œtestæ–¹æ³•æ¥åšä¸€äº›äº‹æƒ…</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ¯”å¦‚testæ–¹æ³•éœ€è¦å¾—åˆ°æˆ‘ä»¬å½“å‰Socketè¿æ¥çš„æœ¬åœ°åœ°å€</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Socket socket)</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;IPåœ°å€ï¼š&quot;</span>+socket.getLocalAddress());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ä¸Šé¢è¿™ç§å†™æ³•æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬æä¾›ç›´æ¥æä¾›ä¸€ä¸ªSocketå¯¹è±¡ï¼Œç„¶åå†ç”±testæ–¹æ³•æ¥å–å‡ºIPåœ°å€ï¼Œä½†æ˜¯è¿™æ ·æ˜¾ç„¶è¿èƒŒäº†è¿ªç±³ç‰¹æ³•åˆ™ï¼Œå®é™…ä¸Šè¿™é‡Œçš„<code>test</code>æ–¹æ³•åªéœ€è¦ä¸€ä¸ªIPåœ°å€å³å¯ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ•´ä¸ªSocketå¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ä¸å…¶ä»–ç±»çš„äº¤äº’å°½å¯èƒ½çš„å°‘ã€‚</p><p>å°±åƒæˆ‘ä»¬åœ¨é¤å…åƒå®Œäº†é¥­ï¼Œåº”è¯¥æ˜¯æˆ‘ä»¬è‡ªå·±æ‰«ç ä»˜æ¬¾ï¼Œè€Œä¸æ˜¯ç›´æ¥æŠŠæ‰‹æœºäº¤ç»™è€æ¿æ¥å¸®ä½ æ“ä½œä»˜æ¬¾ã€‚</p><p>è¦æ˜¯æŸä¸€å¤©ï¼ŒSocketç±»ä¸­çš„è¿™äº›æ–¹æ³•å‘ç”Ÿä¿®æ”¹äº†ï¼Œé‚£æˆ‘ä»¬å°±å¾—è¿å¸¦ç€å»ä¿®æ”¹è¿™äº›ç±»ï¼Œå¾ˆéº»çƒ¦ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æ¥æ”¹è¿›æ”¹è¿›ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">8080</span>);</span><br><span class="line">        <span class="type">Test</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">        test.test(socket.getLocalAddress().getHostAddress());  <span class="comment">//åœ¨å¤–é¢è§£æå¥½å°±è¡Œäº†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(String str)</span>&#123;   <span class="comment">//ä¸€ä¸ªå­—ç¬¦ä¸²å°±èƒ½æå®šï¼Œå°±æ²¡å¿…è¦ä¸¢æ•´ä¸ªå¯¹è±¡è¿›æ¥</span></span><br><span class="line">            System.out.println(<span class="string">&quot;IPåœ°å€ï¼š&quot;</span>+str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆåº¦å†æ¬¡é™ä½ã€‚</p><h1 id="è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰"><a href="#è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰" class="headerlink" title="è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰"></a>è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰</h1><p>è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ï¼Œåˆç§°è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€ç¨‹åºçš„é‡ç”¨æ€§ã€‚</p><blockquote><p>è‚¯ç‰¹Â·è´å…‹å’Œ<a target="_blank" rel="noopener external nofollow noreferrer" href="https://baike.baidu.com/item/%E6%B2%83%E5%BE%B7%C2%B7%E5%9D%8E%E5%AE%81%E5%AE%89/6488429">æ²ƒå¾·Â·åå®å®‰</a>åœ¨1987å¹´åˆ©ç”¨å…‹é‡Œæ–¯æ‰˜ä½›Â·äºšå†å±±å¤§åœ¨å»ºç­‘è®¾è®¡é¢†åŸŸé‡Œçš„æ€æƒ³å¼€å‘äº†è®¾è®¡æ¨¡å¼å¹¶æŠŠæ­¤æ€æƒ³åº”ç”¨åœ¨Smalltalkä¸­çš„å›¾å½¢ç”¨æˆ·æ¥å£çš„ç”Ÿæˆä¸­ã€‚ä¸€å¹´åErich <a target="_blank" rel="noopener external nofollow noreferrer" href="https://so.csdn.net/so/search?q=Gamma&spm=1001.2101.3001.7020">Gamma</a>åœ¨ä»–çš„<a target="_blank" rel="noopener external nofollow noreferrer" href="https://baike.baidu.com/item/%E8%8B%8F%E9%BB%8E%E4%B8%96%E5%A4%A7%E5%AD%A6/1621125">è‹é»ä¸–å¤§å­¦</a>åšå£«æ¯•ä¸šè®ºæ–‡ä¸­å¼€å§‹å°è¯•æŠŠè¿™ç§æ€æƒ³æ”¹å†™ä¸ºé€‚ç”¨äºè½¯ä»¶å¼€å‘ã€‚ä¸æ­¤åŒæ—¶James Coplien åœ¨1989å¹´è‡³1991 å¹´ä¹Ÿåœ¨åˆ©ç”¨ç›¸åŒçš„æ€æƒ³è‡´åŠ›äºC++çš„å¼€å‘ï¼Œè€Œåäº1991å¹´å‘è¡¨äº†ä»–çš„è‘—ä½œAdvanced C++ Idiomsã€‚å°±åœ¨è¿™ä¸€å¹´Erich Gamma å¾—åˆ°äº†åšå£«å­¦ä½ï¼Œç„¶åå»äº†ç¾å›½ï¼Œåœ¨é‚£ä¸Richard Helm, Ralph Johnson ,John Vlissidesåˆä½œå‡ºç‰ˆäº†Design Patterns - Elements of Reusable Object-Oriented Software ä¸€ä¹¦ï¼Œåœ¨æ­¤ä¹¦ä¸­å…±æ”¶å½•äº†23ä¸ªè®¾è®¡æ¨¡å¼ã€‚è¿™å››ä½ä½œè€…åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸé‡Œä¹Ÿä»¥ä»–ä»¬çš„åŒ¿åè‘—ç§°Gang of Four(å››äººå¸®ï¼Œç®€ç§°GoF),å¹¶ä¸”æ˜¯ä»–ä»¬åœ¨æ­¤ä¹¦ä¸­çš„åä½œå¯¼è‡´äº†è½¯ä»¶è®¾è®¡æ¨¡å¼çš„çªç ´ã€‚</p></blockquote><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ‰å…³å¯¹è±¡åˆ›å»ºçš„å‡ ç§è®¾è®¡æ¨¡å¼ã€‚</p><h2 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h2><p>é¦–å½“å…¶å†²çš„æ˜¯æœ€ç®€å•çš„ä¸€ç§è®¾è®¡æ¨¡å¼â€”â€”å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœéœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç›´æ¥newä¸€ä¸ªå³å¯ã€‚è€Œå·¥å‚æ–¹æ³•æ¨¡å¼ä»£æ›¿äº†ä¼ ç»Ÿçš„ç›´æ¥newçš„å½¢å¼ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦æ›¿ä»£ä¼ ç»Ÿçš„newå½¢å¼å‘¢ï¼Ÿ</p><p>å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰çš„å¯¹è±¡æˆ‘ä»¬éƒ½é€šè¿‡newçš„æ–¹å¼å»åˆ›å»ºï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬çš„ç¨‹åºä¸­å¤§é‡ä½¿ç”¨æ­¤å¯¹è±¡æ—¶ï¼Œçªç„¶æœ‰ä¸€å¤©è¿™ä¸ªå¯¹è±¡çš„æ„é€ æ–¹æ³•æˆ–æ˜¯ç±»åå‘ç”Ÿäº†ä¿®æ”¹ï¼Œé‚£æˆ‘ä»¬å²‚ä¸æ˜¯å¾—æŒ¨ä¸ªå»è¿›è¡Œä¿®æ”¹ï¼Ÿæ ¹æ®è¿ªç±³ç‰¹æ³•åˆ™ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½åœ°å°‘ä¸å…¶ä»–ç±»è¿›è¡Œäº¤äº’ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†é‚£äº›éœ€è¦é¢‘ç¹å‡ºç°çš„å¯¹è±¡åˆ›å»ºï¼Œå°è£…åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹è±¡æ—¶ï¼Œç›´æ¥è°ƒç”¨å·¥å‚ç±»ä¸­çš„å·¥å‚æ–¹æ³•æ¥ä¸ºæˆ‘ä»¬ç”Ÿæˆå¯¹è±¡ï¼Œè¿™æ ·ï¼Œå°±ç®—ç±»å‡ºç°äº†å˜åŠ¨ï¼Œæˆ‘ä»¬ä¹Ÿåªéœ€è¦ä¿®æ”¹å·¥å‚ä¸­çš„ä»£ç å³å¯ï¼Œè€Œä¸æ˜¯å¤§é¢ç§¯åœ°è¿›è¡Œä¿®æ”¹ã€‚</p><p>åŒæ—¶ï¼Œå¯èƒ½æŸäº›å¯¹è±¡çš„åˆ›å»ºå¹¶ä¸åªæ˜¯ä¸€ä¸ªnewå°±å¯ä»¥æå®šï¼Œå¯èƒ½è¿˜éœ€è¦æ›´å¤šçš„æ­¥éª¤æ¥å‡†å¤‡æ„é€ æ–¹æ³•éœ€è¦çš„å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨<code>ç®€å•å·¥å‚æ¨¡å¼</code>æ¥åˆ›å»ºå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å·¥å‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥åˆ›å»ºç‚¹å·¥å‚éœ€è¦ç”Ÿäº§çš„ä¸œè¥¿ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Fruit</span> &#123;   <span class="comment">//æ°´æœæŠ½è±¡ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fruit</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name+<span class="string">&quot;@&quot;</span>+hashCode();   <span class="comment">//æ‰“å°ä¸€ä¸‹å½“å‰æ°´æœåç§°ï¼Œè¿˜æœ‰å¯¹è±¡çš„hashCode</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span>&#123;   <span class="comment">//è‹¹æœï¼Œç»§æ‰¿è‡ªæ°´æœ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Apple</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;è‹¹æœ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orange</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span>&#123;  <span class="comment">//æ©˜å­ï¼Œä¹Ÿæ˜¯ç»§æ‰¿è‡ªæ°´æœ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;æ©˜å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥newå°±å¯ä»¥å¾—åˆ°å¯¹è±¡äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Apple</span> <span class="variable">apple</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Apple</span>();</span><br><span class="line">        System.out.println(apple);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°†å¯¹è±¡çš„åˆ›å»ºå°è£…åˆ°å·¥å‚ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FruitFactory</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œå°±ç›´æ¥æ¥ä¸€ä¸ªé™æ€æ–¹æ³•æ ¹æ®æŒ‡å®šç±»å‹è¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type æ°´æœç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¯¹åº”çš„æ°´æœå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fruit <span class="title function_">getFruit</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;è‹¹æœ&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Apple</span>();</span><br><span class="line">           	<span class="keyword">case</span> <span class="string">&quot;æ©˜å­&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Orange</span>();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ­¤å·¥å‚æ¥åˆ›å»ºå¯¹è±¡äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Fruit</span> <span class="variable">fruit</span> <span class="operator">=</span> FruitFactory.getFruit(<span class="string">&quot;æ©˜å­&quot;</span>);   <span class="comment">//ç›´æ¥é—®å·¥å‚è¦ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±å»åˆ›å»º</span></span><br><span class="line">        System.out.println(fruit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™æ ·è¿˜æ˜¯æœ‰ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬å‰é¢æåˆ°äº†å¼€é—­åŸåˆ™ï¼Œä¸€ä¸ªè½¯ä»¶å®ä½“ï¼Œæ¯”å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç°åœ¨éœ€è¦æ–°å¢ä¸€ç§æ°´æœï¼Œæ¯”å¦‚æ¡ƒå­ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å°±å¾—å»ä¿®æ”¹å·¥å‚æä¾›çš„å·¥å‚æ–¹æ³•äº†ï¼Œä½†æ˜¯è¿™æ ·æ˜¯ä¸å¤ªç¬¦åˆå¼€é—­åŸåˆ™çš„ï¼Œå› ä¸ºå·¥å‚å®é™…ä¸Šæ˜¯é’ˆå¯¹äºè°ƒç”¨æ–¹æä¾›çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å¯¹ä¿®æ”¹å…³é—­ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­çš„æ€§è´¨ï¼Œå°†<code>ç®€å•å·¥å‚æ¨¡å¼</code>æ”¹è¿›ä¸º<code>å·¥å‚æ–¹æ³•æ¨¡å¼</code>ï¼Œé‚£ç°åœ¨æ—¢ç„¶ä¸è®©æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çœ‹çœ‹å¦‚ä½•å»ä½¿ç”¨æ‰©å±•çš„å½¢å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">FruitFactory</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; &#123;   <span class="comment">//å°†æ°´æœå·¥å‚æŠ½è±¡ä¸ºæŠ½è±¡ç±»ï¼Œæ·»åŠ æ³›å‹Tç”±å­ç±»æŒ‡å®šæ°´æœç±»å‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> T <span class="title function_">getFruit</span><span class="params">()</span>;  <span class="comment">//ä¸åŒçš„æ°´æœå·¥å‚ï¼Œé€šè¿‡æ­¤æ–¹æ³•ç”Ÿäº§ä¸åŒçš„æ°´æœ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppleFactory</span> <span class="keyword">extends</span> <span class="title class_">FruitFactory</span>&lt;Apple&gt; &#123;  <span class="comment">//è‹¹æœå·¥å‚ï¼Œç›´æ¥è¿”å›Appleï¼Œä¸€æ­¥åˆ°ä½</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Apple <span class="title function_">getFruit</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Apple</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸åŒç±»å‹çš„å·¥å‚æ¥ç”Ÿäº§ä¸åŒç±»å‹çš„æ°´æœäº†ï¼Œå¹¶ä¸”å¦‚æœæ–°å¢äº†æ°´æœç±»å‹ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥å‚ç±»å°±è¡Œï¼Œä¸éœ€è¦ä¿®æ”¹ä¹‹å‰å·²ç»ç¼–å†™å¥½çš„å†…å®¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        test(<span class="keyword">new</span> <span class="title class_">AppleFactory</span>()::getFruit);   <span class="comment">//æ¯”å¦‚æˆ‘ä»¬ç°åœ¨è¦åƒä¸€ä¸ªè‹¹æœï¼Œé‚£ä¹ˆå°±ç›´æ¥é€šè¿‡è‹¹æœå·¥å‚æ¥è·å–è‹¹æœ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­¤æ–¹æ³•æ¨¡æ‹Ÿåƒæ‰ä¸€ä¸ªæ°´æœ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Supplier&lt;Fruit&gt; supplier)</span>&#123;</span><br><span class="line">        System.out.println(supplier.get()+<span class="string">&quot; è¢«åƒæ‰äº†ï¼ŒçœŸå¥½åƒã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±ç®€å•å®ç°äº†å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œé€šè¿‡å·¥å‚æ¥å±è”½å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œä½¿ç”¨è€…åªéœ€è¦å…³å¿ƒå¦‚ä½•å»ä½¿ç”¨å¯¹è±¡å³å¯ã€‚</p><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œé€šè¿‡å®šä¹‰é¡¶å±‚æŠ½è±¡å·¥å‚ç±»ï¼Œé€šè¿‡ç»§æ‰¿çš„æ–¹å¼ï¼Œé’ˆå¯¹äºæ¯ä¸€ä¸ªäº§å“éƒ½æä¾›ä¸€ä¸ªå·¥å‚ç±»ç”¨äºåˆ›å»ºã€‚</p><p>ä¸è¿‡è¿™ç§æ¨¡å¼åªé€‚ç”¨äºç®€å•å¯¹è±¡ï¼Œå½“æˆ‘ä»¬éœ€è¦ç”Ÿäº§è®¸å¤šä¸ªäº§å“æ—çš„æ—¶å€™ï¼Œè¿™ç§æ¨¡å¼å°±æœ‰ç‚¹ä¹åŠ›äº†ï¼Œæ¯”å¦‚ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/eaed848573b384ea60cc83fa46d4fbc0.png" title="image-20220521162444703"><p>å®é™…ä¸Šè¿™äº›äº§å“éƒ½æ˜¯æˆæ—å‡ºç°çš„ï¼Œæ¯”å¦‚å°ç±³çš„äº§å“çº¿ä¸Šæœ‰å°ç±³12ï¼Œå°ç±³å¹³æ¿ç­‰ï¼Œåä¸ºçš„äº§å“çº¿ä¸Šä¹Ÿæœ‰åä¸ºæ‰‹æœºã€åä¸ºå¹³æ¿ï¼Œä½†æ˜¯å¦‚æœæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰å·¥å‚æ–¹æ³•æ¨¡å¼æ¥è¿›è¡Œè®¾è®¡ï¼Œé‚£å°±éœ€è¦å•ç‹¬è®¾è®¡9ä¸ªå·¥å‚æ¥ç”Ÿäº§ä¸Šé¢è¿™äº›äº§å“ï¼Œæ˜¾ç„¶è¿™æ ·å°±æ¯”è¾ƒæµªè´¹æ—¶é—´çš„ã€‚</p><p>ä½†æ˜¯ç°åœ¨æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†è¿™ç§æƒ…å†µå‘¢ï¼Ÿæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªäº§å“ï¼Œéƒ½æ”¾åœ¨ä¸€ä¸ªå·¥å‚ä¸­è¿›è¡Œç”Ÿæˆï¼ŒæŒ‰ä¸åŒçš„äº§å“æ—è¿›è¡Œåˆ’åˆ†ï¼Œæ¯”å¦‚å°ç±³ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥å®‰æ’ä¸€ä¸ªå°ç±³å·¥å‚ï¼Œè€Œè¿™ä¸ªå·¥å‚é‡Œé¢å°±å¯ä»¥ç”Ÿäº§æ•´æ¡äº§å“çº¿ä¸Šçš„å†…å®¹ï¼ŒåŒ…æ‹¬å°ç±³æ‰‹æœºã€å°ç±³å¹³æ¿ã€å°ç±³è·¯ç”±ç­‰ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦å»ºç«‹ä¸€ä¸ªæŠ½è±¡å·¥å‚å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Router</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Table</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Phone <span class="title function_">getPhone</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Table <span class="title function_">getTable</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Router <span class="title function_">getRouter</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå·¥å‚å¯ä»¥ç”Ÿäº§åŒä¸€ä¸ªäº§å“æ—çš„æ‰€æœ‰äº§å“ï¼Œè¿™æ ·æŒ‰æ—è¿›è¡Œåˆ†ç±»ï¼Œæ˜¾ç„¶æ¯”ä¹‹å‰çš„å·¥å‚æ–¹æ³•æ¨¡å¼æ›´å¥½ã€‚</p><p>ä¸è¿‡ï¼Œç¼ºç‚¹è¿˜æ˜¯æœ‰çš„ï¼Œå¦‚æœäº§å“æ—æ–°å¢äº†äº§å“ï¼Œé‚£ä¹ˆæˆ‘å°±ä¸å¾—ä¸å»ä¸ºæ¯ä¸€ä¸ªäº§å“æ—çš„å·¥å‚éƒ½å»æ·»åŠ æ–°äº§å“çš„ç”Ÿäº§æ–¹æ³•ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚</p><h2 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h2><p>å»ºé€ è€…æ¨¡å¼ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°æœ‰å¾ˆå¤šçš„æ¡†æ¶éƒ½ä¸ºæˆ‘ä»¬æä¾›äº†å½¢å¦‚<code>XXXBuilder</code>çš„ç±»å‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿæ˜¯ä½¿ç”¨è¿™äº›ç±»æ¥åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨JavaSEä¸­å°±å­¦ä¹ è¿‡çš„<code>StringBuiler</code>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();   <span class="comment">//åˆ›å»ºä¸€ä¸ªStringBuilderæ¥é€æ­¥æ„å»ºä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    builder.append(<span class="number">666</span>);   <span class="comment">//æ‹¼æ¥ä¸€ä¸ªæ•°å­—</span></span><br><span class="line">    builder.append(<span class="string">&quot;è€é“&quot;</span>);   <span class="comment">//æ‹¼æ¥ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">   	builder.insert(<span class="number">2</span>, <span class="string">&#x27;?&#x27;</span>);  <span class="comment">//åœ¨ç¬¬ä¸‰ä¸ªä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    System.out.println(builder.toString());   <span class="comment">//å·®ä¸å¤šæˆå½¢äº†ï¼Œæœ€åè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šæˆ‘ä»¬æ˜¯é€šè¿‡å»ºé€ è€…æ¥ä¸æ–­é…ç½®å‚æ•°æˆ–æ˜¯å†…å®¹ï¼Œå½“æˆ‘ä»¬é…ç½®å®Œæ‰€æœ‰å†…å®¹åï¼Œæœ€åå†è¿›è¡Œå¯¹è±¡çš„æ„å»ºã€‚</p><p>ç›¸æ¯”ç›´æ¥å»newä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå»ºé€ è€…æ¨¡å¼çš„é‡å¿ƒæ›´åŠ å…³æ³¨åœ¨å¦‚ä½•å®Œæˆæ¯ä¸€æ­¥çš„é…ç½®ï¼ŒåŒæ—¶å¦‚æœä¸€ä¸ªç±»çš„æ„é€ æ–¹æ³•å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬é€šè¿‡å»ºé€ è€…æ¨¡å¼æ¥åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œä¼šæ›´åŠ ä¼˜é›…ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå­¦ç”Ÿç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">int</span> grade;</span><br><span class="line">    String name;</span><br><span class="line">    String college;</span><br><span class="line">    String profession;</span><br><span class="line">    List&lt;String&gt; awards;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age, <span class="type">int</span> grade, String name, String college, String profession, List&lt;String&gt; awards)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.college = college;</span><br><span class="line">        <span class="built_in">this</span>.profession = profession;</span><br><span class="line">        <span class="built_in">this</span>.awards = awards;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå­¦ç”Ÿç±»çš„å±æ€§æ˜¯éå¸¸å¤šçš„ï¼Œæ‰€ä»¥æ„é€ æ–¹æ³•ä¸æ˜¯ä¸€èˆ¬çš„é•¿ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨ç›´æ¥é€šè¿‡newçš„æ–¹å¼å»åˆ›å»ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1</span>, <span class="number">18</span>, <span class="number">3</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="string">&quot;è®¡ç®—æœºå­¦é™¢&quot;</span>, <span class="string">&quot;è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯&quot;</span>, Arrays.asList(<span class="string">&quot;ICPC-ACM åŒºåŸŸèµ› é‡‘ç‰Œ&quot;</span>, <span class="string">&quot;LPL 2022æ˜¥å­£èµ› å† å†›&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å…‰æ˜¯å¡«å‚æ•°å°±éº»çƒ¦ï¼Œæˆ‘ä»¬è¿˜å¾—ä¸€ä¸ªä¸€ä¸ªå¯¹åº”ç€å»å¡«ï¼Œä¸€ä¸å°å¿ƒå¯èƒ½å°±æŠŠå‚æ•°å¡«åˆ°é”™è¯¯çš„ä½ç½®äº†ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">		...</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸€å¾‹ä½¿ç”¨å»ºé€ è€…æ¥åˆ›å»ºï¼Œä¸å¯¹å¤–ç›´æ¥å¼€æ”¾</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age, <span class="type">int</span> grade, String name, String college, String profession, List&lt;String&gt; awards)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StudentBuilder <span class="title function_">builder</span><span class="params">()</span>&#123;   <span class="comment">//é€šè¿‡builderæ–¹æ³•ç›´æ¥è·å–å»ºé€ è€…</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StudentBuilder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StudentBuilder</span>&#123;   <span class="comment">//è¿™é‡Œå°±ç›´æ¥åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»</span></span><br><span class="line">        <span class="comment">//Builderä¹Ÿéœ€è¦å°†æ‰€æœ‰çš„å‚æ•°éƒ½è¿›è¡Œæš‚æ—¶ä¿å­˜ï¼Œæ‰€ä»¥Studentæ€ä¹ˆå®šä¹‰çš„è¿™é‡Œå°±æ€ä¹ˆå®šä¹‰</span></span><br><span class="line">        <span class="type">int</span> id;</span><br><span class="line">        <span class="type">int</span> age;</span><br><span class="line">        <span class="type">int</span> grade;</span><br><span class="line">        String name;</span><br><span class="line">        String college;</span><br><span class="line">        String profession;</span><br><span class="line">        List&lt;String&gt; awards;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> StudentBuilder <span class="title function_">id</span><span class="params">(<span class="type">int</span> id)</span>&#123;    <span class="comment">//ç›´æ¥è°ƒç”¨å»ºé€ è€…å¯¹åº”çš„æ–¹æ³•ï¼Œä¸ºå¯¹åº”çš„å±æ€§èµ‹å€¼</span></span><br><span class="line">            <span class="built_in">this</span>.id = id;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;   <span class="comment">//ä¸ºäº†æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œè¿™é‡Œç›´æ¥è¿”å›å»ºé€ è€…æœ¬èº«ï¼Œä¸‹åŒ</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> StudentBuilder <span class="title function_">age</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">      	...</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> StudentBuilder <span class="title function_">awards</span><span class="params">(String... awards)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.awards = Arrays.asList(awards);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> Student <span class="title function_">build</span><span class="params">()</span>&#123;    <span class="comment">//æœ€åæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å»ºé€ è€…æä¾›çš„buildæ–¹æ³•å³å¯æ ¹æ®æˆ‘ä»¬çš„é…ç½®è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(id, age, grade, name, college, profession, awards);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¥ä¸ºæˆ‘ä»¬ç”Ÿæˆå¯¹è±¡äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> Student.builder()   <span class="comment">//è·å–å»ºé€ è€…</span></span><br><span class="line">            .id(<span class="number">1</span>)    <span class="comment">//é€æ­¥é…ç½®å„ä¸ªå‚æ•°</span></span><br><span class="line">            .age(<span class="number">18</span>)</span><br><span class="line">            .grade(<span class="number">3</span>)</span><br><span class="line">            .name(<span class="string">&quot;å°æ˜&quot;</span>)</span><br><span class="line">            .awards(<span class="string">&quot;ICPC-ACM åŒºåŸŸèµ› é‡‘ç‰Œ&quot;</span>, <span class="string">&quot;LPL 2022æ˜¥å­£èµ› å† å†›&quot;</span>)</span><br><span class="line">            .build();   <span class="comment">//æœ€åç›´æ¥å»ºé€ æˆ‘ä»¬æƒ³è¦çš„å¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©è¿™äº›å‚æ•°å¯¹å·å…¥åº§äº†ï¼Œå¹¶ä¸”ä¹Ÿæ¯”ä¹‹å‰çš„æ–¹å¼ä¼˜é›…è®¸å¤šã€‚</p><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><p>å•ä¾‹æ¨¡å¼å…¶å®åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­å·²ç»æ¼”ç¤ºè¿‡å¾ˆå¤šæ¬¡äº†ï¼Œè¿™ä¹Ÿæ˜¯ä½¿ç”¨é¢‘ç‡éå¸¸é«˜çš„ä¸€ç§æ¨¡å¼ã€‚</p><p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼å‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œå•ä¾‹é‚£ä¹ˆè‚¯å®šå°±æ˜¯åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œåœ¨æˆ‘ä»¬çš„æ•´ä¸ªç¨‹åºä¸­ï¼ŒåŒä¸€ä¸ªç±»å§‹ç»ˆåªä¼šæœ‰ä¸€ä¸ªå¯¹è±¡æ¥è¿›è¡Œæ“ä½œã€‚æ¯”å¦‚æ•°æ®åº“è¿æ¥ç±»ï¼Œå®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡æˆ–æ˜¯ç›´æ¥ä½¿ç”¨é™æ€æ–¹æ³•å°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦å»åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚</p><p>è¿™é‡Œè¿˜æ˜¯è¿˜åŸä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ç®€å•å•ä¾‹æ¨¡å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();   <span class="comment">//ç”¨äºå¼•ç”¨å…¨å±€å”¯ä¸€çš„å•ä¾‹å¯¹è±¡ï¼Œåœ¨ä¸€å¼€å§‹å°±åˆ›å»ºå¥½</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;   <span class="comment">//ä¸å…è®¸éšä¾¿newï¼Œéœ€è¦å¯¹è±¡ç›´æ¥æ‰¾getInstance</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;   <span class="comment">//è·å–å…¨å±€å”¯ä¸€çš„å•ä¾‹å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–æ­¤å¯¹è±¡æ—¶ï¼Œåªèƒ½é€šè¿‡<code>getInstance()</code>æ¥è·å–å”¯ä¸€çš„å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Singleton</span> <span class="variable">singleton</span> <span class="operator">=</span> Singleton.getInstance();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå•ä¾‹æ¨¡å¼é™¤äº†è¿™ç§å†™æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å†™æ³•ï¼Œè¿™ç§å†™æ³•è¢«ç§°ä¸ºé¥¿æ±‰å¼å•ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€å¼€å§‹ç±»åŠ è½½æ—¶å°±åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ç§å†™æ³•â€”â€”æ‡’æ±‰å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton INSTANCE;   <span class="comment">//åœ¨ä¸€å¼€å§‹å…ˆä¸è¿›è¡Œå¯¹è±¡åˆ›å»º</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;   <span class="comment">//ä¸ç”¨å¤šè¯´äº†å§</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;   <span class="comment">//å°†å¯¹è±¡çš„åˆ›å»ºå»¶ååˆ°éœ€è¦æ—¶å†è¿›è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span>(INSTANCE == <span class="literal">null</span>) &#123;    <span class="comment">//å¦‚æœå®ä¾‹ä¸ºç©ºï¼Œé‚£ä¹ˆå°±è¿›è¡Œåˆ›å»ºï¼Œä¸ä¸ºç©ºè¯´æ˜å·²ç»åˆ›å»ºè¿‡äº†ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›</span></span><br><span class="line">            INSTANCE = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‡’æ±‰å¼å°±çœŸçš„æ˜¯æ¡æ‡’ç‹—ï¼Œä½ ä¸å»ç”¨å®ƒï¼Œå®ƒæ˜¯ä¸ä¼šç»™ä½ æå‰å‡†å¤‡å•ä¾‹å¯¹è±¡çš„ï¼ˆå»¶è¿ŸåŠ è½½ï¼Œæ‡’åŠ è½½ï¼‰ï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–å¯¹è±¡æ—¶ï¼Œæ‰ä¼šè¿›è¡Œæ£€æŸ¥å¹¶åˆ›å»ºã€‚è™½ç„¶é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼å†™æ³•ä¸åŒï¼Œä½†æ˜¯æœ€åéƒ½æ˜¯æˆåŠŸå®ç°äº†å•ä¾‹æ¨¡å¼ã€‚</p><p>ä¸è¿‡ï¼Œè¿™é‡Œéœ€è¦ç‰¹åˆ«æé†’ä¸€ä¸‹ï¼Œç”±äºæ‡’æ±‰å¼æ˜¯åœ¨æ–¹æ³•ä¸­è¿›è¡Œçš„åˆå§‹åŒ–ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/8a0ab084a7761fb72d40b52687db34db.png" title="image-20220522161134092"><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸‰æ¡çº¿ç¨‹åŒæ—¶è°ƒç”¨<code>getInstance()</code>æ–¹æ³•ï¼Œä¼šåŒæ—¶è¿›è¡Œ<code>INSTANCE == null</code>çš„åˆ¤æ–­ï¼Œé‚£ä¹ˆæ­¤æ—¶ç”±äºç¡®å®è¿˜æ²¡æœ‰è¿›è¡Œä»»ä½•å®ä¾‹åŒ–ï¼Œæ‰€ä»¥å¯¼è‡´ä¸‰æ¡çº¿ç¨‹å…¨éƒ¨åˆ¤æ–­ä¸º<code>true</code>ï¼ˆè€Œé¥¿æ±‰å¼ç”±äºåœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®Œæˆï¼Œä¸ä¼šå­˜åœ¨è¿™æ ·çš„é—®é¢˜ï¼‰æ­¤æ—¶é—®é¢˜å°±æ¥äº†ï¼Œæˆ‘ä»¬æ—¢ç„¶è¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯åªå¸Œæœ›å¯¹è±¡åªè¢«åˆå§‹åŒ–ä¸€æ¬¡çš„ï¼Œä½†æ˜¯ç°åœ¨ç”±äºå¤šçº¿ç¨‹çš„æœºåˆ¶ï¼Œå¯¼è‡´å¯¹è±¡è¢«å¤šæ¬¡åˆ›å»ºã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†é¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé’ˆå¯¹äºæ‡’æ±‰å¼å•ä¾‹ï¼Œæˆ‘ä»¬è¿˜å¾—è¿›è¡Œä¸€äº›æ”¹è¿›ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;   <span class="comment">//æ–¹æ³•å¿…é¡»æ·»åŠ synchronizedå…³é”®å­—åŠ é”</span></span><br><span class="line">    <span class="keyword">if</span>(INSTANCE == <span class="literal">null</span>) &#123;</span><br><span class="line">        INSTANCE = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶å¤šä¸ªçº¿ç¨‹è¦è°ƒç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç›´æ¥åŠ ä¸€æŠŠé”ï¼Œåœ¨æ–¹æ³•ä¸Šæ·»åŠ <code>synchronized</code>å…³é”®å­—å³å¯ï¼Œè¿™æ ·åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥äº†ã€‚è™½ç„¶è¿™æ ·ç®€å•ç²—æš´ï¼Œä½†æ˜¯åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ•ˆç‡è‚¯å®šæ˜¯æ¯”è¾ƒä½çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(INSTANCE == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (Singleton.class) &#123;    <span class="comment">//å®é™…ä¸Šåªéœ€è¦å¯¹èµ‹å€¼è¿™ä¸€æ­¥è¿›è¡ŒåŠ é”å³å¯</span></span><br><span class="line">            INSTANCE = <span class="keyword">new</span> <span class="title class_">Singleton</span>();   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™æ ·è¿˜ä¸å®Œç¾ï¼Œå› ä¸ºè¿™æ ·è¿˜æ˜¯æœ‰å¯èƒ½å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆ¤æ–­ä¸º<code>null</code>è€Œè¿›å…¥ç­‰é”çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜å¾—åŠ ä¸€å±‚å†…å±‚åˆ¤æ–­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(INSTANCE == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">            <span class="keyword">if</span>(INSTANCE == <span class="literal">null</span>) INSTANCE = <span class="keyword">new</span> <span class="title class_">Singleton</span>();  <span class="comment">//å†…å±‚è¿˜è¦è¿›è¡Œä¸€æ¬¡æ£€æŸ¥ï¼ŒåŒé‡æ£€æŸ¥é”å®š</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡æˆ‘ä»¬è¿˜å°‘è€ƒè™‘äº†ä¸€æ ·å†…å®¹ï¼Œå…¶å®IDEAæ­¤æ—¶åº”è¯¥æ˜¯ç»™äº†é»„æ ‡äº†ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/406c2667238b85a4969437136716a26c.png" title="image-20220522162246278"><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒIDEAä¼šè¦æ±‚æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª<code>volatile</code>ç»™<code>INSTANCE</code>ï¼Œå„ä½è¿˜è®°å¾—è¿™ä¸ªå…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨å—ï¼Ÿæ²¡é”™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿è¯<code>INSTANCE</code>åœ¨çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œè¿™æ ·å½“å…¶ä»–çº¿ç¨‹è¿›å…¥ä¹‹åæ‰ä¼šæ‹¿<code>INSTANCE</code>ç”±å…¶ä»–çº¿ç¨‹æ›´æ–°çš„æœ€æ–°å€¼å»åˆ¤æ–­ï¼Œè¿™æ ·ï¼Œå°±å·®ä¸å¤šå®Œç¾äº†ã€‚</p><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ›´å¥½çš„ï¼Œä¸ç”¨åŠ é”çš„æ–¹å¼ä¹Ÿèƒ½å®ç°å»¶è¿ŸåŠ è½½çš„å†™æ³•å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Holder</span> &#123;   <span class="comment">//ç”±é™æ€å†…éƒ¨ç±»æŒæœ‰å•ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯æ ¹æ®ç±»åŠ è½½ç‰¹æ€§ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨Singletonç±»æ—¶ï¼Œä¸ä¼šå¯¹é™æ€å†…éƒ¨ç±»è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;   <span class="comment">//åªæœ‰çœŸæ­£ä½¿ç”¨å†…éƒ¨ç±»æ—¶ï¼Œæ‰ä¼šè¿›è¡Œç±»åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">return</span> Holder.INSTANCE;   <span class="comment">//ç›´æ¥è·å–å†…éƒ¨ç±»ä¸­çš„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼æ˜¾ç„¶æ˜¯æœ€å®Œç¾çš„æ‡’æ±‰å¼è§£å†³æ–¹æ¡ˆï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•çš„åŠ é”æ“ä½œï¼Œä¹Ÿèƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸è¿‡è¦å®ç°è¿™ç§å†™æ³•ï¼Œè·Ÿè¯­è¨€æœ¬èº«ä¹Ÿæœ‰ä¸€å®šçš„å…³è”ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è¯­è¨€éƒ½æ”¯æŒè¿™ç§å†™æ³•ã€‚</p><h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><p>åŸå‹æ¨¡å¼å®é™…ä¸Šä¸å¯¹è±¡çš„æ‹·è´æ¯æ¯ç›¸å…³ï¼ŒåŸå‹æ¨¡å¼ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šå¾…åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œå¹¶ä¸”é€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸå‹å¯¹è±¡ä½œä¸ºæ¨¡æ¿ï¼Œé€šè¿‡å…‹éš†æ“ä½œï¼Œæ¥äº§ç”Ÿæ›´å¤šçš„å¯¹è±¡ï¼Œå°±åƒç»†èƒçš„å¤åˆ¶ä¸€æ ·ã€‚</p><p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹å¯¹è±¡çš„æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹æµ…æ‹·è´ï¼š</p><ul><li><p>**æµ…æ‹·è´ï¼š**å¯¹äºç±»ä¸­åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¼šç›´æ¥å¤åˆ¶å€¼ç»™æ‹·è´å¯¹è±¡ï¼›å¯¹äºå¼•ç”¨ç±»å‹ï¼Œåªä¼šå¤åˆ¶å¯¹è±¡çš„åœ°å€ï¼Œè€Œå®é™…ä¸ŠæŒ‡å‘çš„è¿˜æ˜¯åŸæ¥çš„é‚£ä¸ªå¯¹è±¡ï¼Œæ‹·è´ä¸ªåŸºè«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> a;  <span class="comment">//åŸºæœ¬ç±»å‹æµ…æ‹·è´</span></span><br><span class="line">    System.out.println(a == b);</span><br><span class="line"></span><br><span class="line">    <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="type">Object</span> <span class="variable">k</span> <span class="operator">=</span> o;    <span class="comment">//å¼•ç”¨ç±»å‹æµ…æ‹·è´ï¼Œæ‹·è´çš„ä»…ä»…æ˜¯å¯¹ä¸Šé¢å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">    System.out.println(o == k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>**æ·±æ‹·è´ï¼š**æ— è®ºæ˜¯åŸºæœ¬ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ·±æ‹·è´ä¼šå°†å¼•ç”¨ç±»å‹çš„æ‰€æœ‰å†…å®¹ï¼Œå…¨éƒ¨æ‹·è´ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å¯¹è±¡å†…éƒ¨çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œä¹Ÿä¼šè¿›è¡Œæ‹·è´ã€‚</p></li></ul><p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Cloneableæ¥å£æä¾›çš„æ‹·è´æœºåˆ¶ï¼Œæ¥å®ç°åŸå‹æ¨¡å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>&#123;   <span class="comment">//æ³¨æ„éœ€è¦å®ç°Cloneableæ¥å£</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;   <span class="comment">//æå‡cloneæ–¹æ³•çš„è®¿é—®æƒé™</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹å…‹éš†çš„å¯¹è±¡æ˜¯ä¸æ˜¯åŸæ¥çš„å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student0</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student1</span> <span class="operator">=</span> (Student) student0.clone();</span><br><span class="line">    System.out.println(student0);</span><br><span class="line">    System.out.println(student1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡<code>clone()</code>æ–¹æ³•å…‹éš†çš„å¯¹è±¡å¹¶ä¸æ˜¯åŸæ¥çš„å¯¹è±¡ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚æœå¯¹è±¡å†…éƒ¨æœ‰å±æ€§ä¼šä¸ä¼šä¸€èµ·è¿›è¡Œå…‹éš†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>&#123;</span><br><span class="line">    </span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student0</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student1</span> <span class="operator">=</span> (Student) student0.clone();</span><br><span class="line">    System.out.println(student0.getName() == student1.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶Studentå¯¹è±¡æˆåŠŸæ‹·è´ï¼Œä½†æ˜¯å…¶å†…å±‚å¯¹è±¡å¹¶æ²¡æœ‰è¿›è¡Œæ‹·è´ï¼Œä¾ç„¶åªæ˜¯å¯¹è±¡å¼•ç”¨çš„å¤åˆ¶ï¼Œæ‰€ä»¥Javaä¸ºæˆ‘ä»¬æä¾›çš„<code>clone</code>æ–¹æ³•åªä¼šè¿›è¡Œæµ…æ‹·è´ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å®ç°æ·±æ‹·è´å‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;   <span class="comment">//è¿™é‡Œæˆ‘ä»¬æ”¹è¿›ä¸€ä¸‹ï¼Œé’ˆå¯¹æˆå‘˜å˜é‡ä¹Ÿè¿›è¡Œæ‹·è´</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) <span class="built_in">super</span>.clone();</span><br><span class="line">    student.name = <span class="keyword">new</span> <span class="title class_">String</span>(name);</span><br><span class="line">    <span class="keyword">return</span> student;   <span class="comment">//æˆå‘˜æ‹·è´å®Œæˆåï¼Œå†è¿”å›</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†æ·±æ‹·è´ã€‚</p><h1 id="è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰"><a href="#è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰" class="headerlink" title="è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰"></a>è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰</h1><p>ç»“æ„å‹è®¾è®¡æ¨¡å¼å…³æ³¨å¦‚ä½•å°†ç°æœ‰çš„ç±»æˆ–å¯¹è±¡ç»„ç»‡åœ¨ä¸€èµ·å½¢æˆæ›´åŠ å¼ºå¤§çš„ç»“æ„ã€‚å¹¶ä¸”æ ¹æ®æˆ‘ä»¬å‰é¢å­¦ä¹ çš„åˆæˆå¤ç”¨åŸåˆ™ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å°½å¯èƒ½åœ°ä½¿ç”¨å…³è”å…³ç³»æ¥ä»£æ›¿ç»§æ‰¿å…³ç³»æ˜¯æˆ‘ä»¬æœ¬ç‰ˆå—éœ€è¦é‡ç‚¹å­¦ä¹ çš„å†…å®¹ã€‚</p><h2 id="ç±»-å¯¹è±¡é€‚é…å™¨æ¨¡å¼"><a href="#ç±»-å¯¹è±¡é€‚é…å™¨æ¨¡å¼" class="headerlink" title="ç±»&#x2F;å¯¹è±¡é€‚é…å™¨æ¨¡å¼"></a>ç±»&#x2F;å¯¹è±¡é€‚é…å™¨æ¨¡å¼</h2><p>åœ¨ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼šç¬”è®°æœ¬å¤ªè½»è–„äº†ï¼Œä»¥è‡³äºæ²¡æœ‰RJ45ç½‘å£å’ŒUSB Aå£ï¼ˆæ¯”å¦‚Macbookä¸ºäº†è½»è–„ç”šè‡³å…¨æ˜¯type-cå½¢å¼çš„é›·ç”µå£ï¼‰ä½†æ˜¯ç°åœ¨æˆ‘ä»¬å› ä¸ºå·¥ä½œéœ€è¦ï¼Œåˆå¾—ä½¿ç”¨è¿™äº›æ¥å£æ¥è¿æ¥çº¿ç¼†ï¼Œè¿™æ—¶æˆ‘ä»¬æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯å»ä¹°ä¸€ä¸ªè½¬æ¥å£ï¼ˆæ‰©å±•åï¼‰ï¼Œæ‰©å±•åå¯ä»¥å°†type-cå£è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„æ¥å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯ä¸€ç§é€‚é…æ¨¡å¼ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/21d90d01020d7e17a5e22229a77bb674.png" title="image-20220523002617557"><p>ç”±äºæˆ‘ä»¬çš„ç”µè„‘æ²¡æœ‰è¿™äº›æ¥å£ï¼Œä½†æ˜¯æä¾›äº†type-cç±»å‹çš„æ¥å£ï¼Œè™½ç„¶æ¥å£ç±»å‹ä¸ä¸€æ ·ï¼Œä½†æ˜¯åŒæ ·å¯ä»¥åšå…¶ä»–æ¥å£èƒ½åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚USBæ–‡ä»¶ä¼ è¾“ã€æœ‰çº¿ç½‘ç»œè¿æ¥ç­‰ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ ä¸€ä¸ªä¸­é—´äººæ¥å¸®æˆ‘ä»¬è½¬æ¢ä¸€ä¸‹æ¥å£å½¢æ€å³å¯ã€‚åŒ…æ‹¬æˆ‘ä»¬å¸¸ç”¨çš„å……ç”µå¤´ï¼Œä¸ºä»€ä¹ˆå«ç”µæºé€‚é…å™¨å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ä¼ ç»Ÿçš„ä¾›ç”µæ˜¯220Väº¤æµç”µï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ‰‹æœºå¯èƒ½åªéœ€è¦5Vçš„ç”µå‹è¿›è¡Œå……ç”µï¼Œè™½ç„¶ç°åœ¨æœ‰ç”µï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥å……ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¯èƒ½è®©ç”µåŠ›å…¬å¸ä¸“é—¨ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ª5Vçš„ç›´æµç”µä½¿ç”¨ã€‚è¿™æ—¶ç”µæºé€‚é…å™¨å°±å¼€å§‹å‘æŒ¥ä½œç”¨äº†ï¼Œæ¯”å¦‚è‹¹æœçš„ç¥–ä¼ 5V1Aå……ç”µå¤´ï¼Œå®é™…ä¸Šå°±æ˜¯å°†220Väº¤æµç”µè½¬æ¢ä¸º5Vçš„ç›´æµç”µè¿›è¡Œä¼ è¾“ï¼Œè¿™æ ·å°±ç›¸å½“äºåœ¨220Väº¤æµç”µå’Œæˆ‘ä»¬çš„æ‰‹æœºä¹‹å‰ï¼Œåšäº†ä¸€ä¸ªé€‚é…å™¨çš„è§’è‰²ã€‚</p><p>åœ¨æˆ‘ä»¬çš„Javaç¨‹åºä¸­ï¼Œä¹Ÿä¼šç»å¸¸é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSupplier</span> &#123;   <span class="comment">//æ‰‹æœºä¾›åº”å•†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doSupply</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;iPhone 14 Pro&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestSupplier</span> <span class="variable">supplier</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestSupplier</span>();</span><br><span class="line">      	test( ? );   <span class="comment">//æˆ‘ä»¬æ²¡æœ‰Targetç±»å‹çš„æ‰‹æœºä¾›åº”å•†ï¼Œåªæœ‰å…¶ä»–çš„ï¼Œé‚£è¿™é‡Œè¯¥å¡«ä¸ªå•¥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Target target)</span>&#123;   <span class="comment">//ç°åœ¨æˆ‘ä»¬éœ€è¦è°ƒç”¨testæ–¹æ³•ï¼Œä½†æ˜¯testæ–¹æ³•éœ€è¦Targetç±»å‹çš„æ‰‹æœºä¾›åº”å•†</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æˆåŠŸå¾—åˆ°ï¼š&quot;</span>+target.supply());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Target</span> &#123;    <span class="comment">//ç°åœ¨çš„æ‰‹æœºä¾›åº”å•†ï¼Œå¹¶ä¸æ˜¯testæ–¹æ³•æ‰€éœ€è¦çš„é‚£ç§ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    String <span class="title function_">supply</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼äº†ï¼Œé€‚é…å™¨æ¨¡å¼åˆ†ä¸ºç±»é€‚é…å™¨å’Œå¯¹è±¡é€‚é…å™¨ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ç±»é€‚é…å™¨è§£å†³è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬ç›´æ¥åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestAdapter</span> <span class="keyword">extends</span> <span class="title class_">TestSupplier</span> <span class="keyword">implements</span> <span class="title class_">Target</span> &#123;  </span><br><span class="line">  <span class="comment">//è®©æˆ‘ä»¬çš„é€‚é…å™¨ç»§æ‰¿TestSupplierå¹¶ä¸”å®ç°Targetæ¥å£</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">supply</span><span class="params">()</span> &#123;   <span class="comment">//æ¥ç€å®ç°supplyæ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨TestSupplieræä¾›çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.doSupply();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªTargetç±»å‹çš„å®ç°ç±»ï¼Œå¹¶ä¸”åŒæ—¶é‡‡ç”¨çš„æ˜¯TestSupplieræä¾›çš„å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">TestAdapter</span> <span class="variable">adapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestAdapter</span>();</span><br><span class="line">    test(adapter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Target target)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æˆåŠŸå¾—åˆ°ï¼š&quot;</span>+target.supply());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œè¿™ç§å®ç°æ–¹å¼éœ€è¦å ç”¨ä¸€ä¸ªç»§æ‰¿å‘ä½ï¼Œå¦‚æœæ­¤æ—¶Targetä¸æ˜¯æ¥å£è€Œæ˜¯æŠ½åƒç±»çš„è¯ï¼Œç”±äºJavaä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œé‚£ä¹ˆå°±æ— æ³•å®ç°äº†ã€‚åŒæ—¶æ ¹æ®åˆæˆå¤ç”¨åŸåˆ™ï¼Œæˆ‘ä»¬åº”è¯¥æ›´å¤šçš„é€šè¿‡åˆæˆçš„æ–¹å¼å»å®ç°åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬äºŒç§ï¼Œä¹Ÿæ˜¯ç”¨çš„æ¯”è¾ƒå¤šçš„ä¸€ç§æ¨¡å¼ï¼Œå¯¹è±¡é€‚é…å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestAdapter</span> <span class="keyword">implements</span> <span class="title class_">Target</span>&#123;   <span class="comment">//ç°åœ¨ä¸å†ç»§æ‰¿TestSupplierï¼Œä»…å®ç°Target</span></span><br><span class="line"></span><br><span class="line">    TestSupplier supplier;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestAdapter</span><span class="params">(TestSupplier supplier)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.supplier = supplier;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">supply</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> supplier.doSupply();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å°†å¯¹è±¡ä»¥ç»„åˆçš„å½¢å¼å­˜æ”¾åœ¨TestAdapterä¸­ï¼Œä¾ç„¶æ˜¯é€šè¿‡å­˜æ”¾çš„å¯¹è±¡è°ƒç”¨å…·ä½“å®ç°ã€‚</p><h2 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h2><p>ç›¸ä¿¡å„ä½éƒ½å»å¥¶èŒ¶åº—ä¹°è¿‡å¥¶èŒ¶ï¼Œåœ¨è´­ä¹°å¥¶èŒ¶çš„æ—¶å€™ï¼Œåº—å‘˜é¦–å…ˆä¼šé—®æˆ‘ä»¬ï¼Œæ‚¨éœ€è¦ä»€ä¹ˆç±»å‹çš„å¥¶èŒ¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶ç‚¹äº†ä¸€æ¯å•µå•µèŠ‹åœ†å¥¶èŒ¶ï¼Œæ¥ç€åº—å‘˜ä¼šç›´æ¥é—®æˆ‘ä»¬éœ€è¦å¤§æ¯ã€ä¸­æ¯è¿˜æ˜¯å°æ¯ï¼Œæœ€åè¿˜ä¼šè¯¢é—®æˆ‘ä»¬éœ€è¦åŠ ä»€ä¹ˆé…æ–™ï¼Œæ¯”å¦‚æ¤°æœã€çç ç­‰ï¼Œæœ€åæ‰ä¼šç»™æˆ‘ä»¬åˆ¶ä½œå¥¶èŒ¶ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/9d9f729b9a2345ff424c58ef70893fb1.png" title="image-20220523233253071"><p>é‚£ä¹ˆç°åœ¨è®©ä½ æ¥è®¾è®¡ä¸€ä¸‹è¿™ç§æ¨¡å¼çš„Javaç±»ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼Œä¸€æ¯å¥¶èŒ¶é™¤äº†ç±»å‹ä¹‹å¤–ï¼Œè¿˜åˆ†å¤§ä¸­å°æ¯ï¼Œç”šè‡³å¯èƒ½è¿˜åˆ†åŠ ä»€ä¹ˆé…æ–™ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æŒ‰ç…§æ¥å£å®ç°çš„å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Tea</span> &#123;   <span class="comment">//ç”±å…·ä½“ç±»å‹çš„å¥¶èŒ¶å®ç°</span></span><br><span class="line">    String <span class="title function_">getType</span><span class="params">()</span>;   <span class="comment">//ä¸åŒçš„å¥¶èŒ¶è¿”å›çš„ç±»å‹ä¸åŒ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Size</span> &#123;   <span class="comment">//åˆ†å¤§æ¯å°æ¯ä¸­æ¯</span></span><br><span class="line">    String <span class="title function_">getSize</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤§æ¯èŠ‹åœ†å•µå•µå¥¶èŒ¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LargeKissTea</span> <span class="keyword">implements</span> <span class="title class_">Tea</span>, Size&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å¤§æ¯&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;èŠ‹åœ†å•µå•µå¥¶èŒ¶&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¿™æ ·è®¾è®¡èµ·æ¥è¿˜æŒºåˆç†çš„ï¼Œä½†æ˜¯å¦‚æœç°åœ¨æˆ‘ä»¬çš„å¥¶èŒ¶å“ç§å¤šèµ·æ¥äº†ï¼Œå¹¶ä¸”æ¯ç§å¥¶èŒ¶éƒ½æœ‰å¤§ä¸­å°æ¯ï¼Œç°åœ¨ä¸€å…±æœ‰ä¸¤ä¸ªç»´åº¦éœ€è¦è€ƒè™‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬å²‚ä¸æ˜¯å¾—ä¸€ä¸ªä¸€ä¸ªå»åˆ›å»ºè¿™äº›ç±»ï¼Ÿç”šè‡³å¦‚æœè¿˜è¦è€ƒè™‘é…æ–™ï¼Œé‚£ä¹ˆå…‰åˆ›å»ºç±»å°±å¾—åˆ›å»ºä¸çŸ¥é“å¤šå°‘ä¸ªäº†ã€‚æ˜¾ç„¶è¿™ç§è®¾è®¡ä¸å¤ªå¥½ï¼Œæˆ‘ä»¬å¾—æ¢ä¸ªæ–¹å¼ã€‚</p><p>è¿™æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„æ¡¥æ¥æ¨¡å¼äº†ï¼Œç°åœ¨æˆ‘ä»¬é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œç»´åº¦å¤ªå¤šï¼Œä¸å¯èƒ½å„ç§ç±»å‹å„ç§å°ºå¯¸çš„å¥¶èŒ¶éƒ½å»åˆ›å»ºä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¿˜æ˜¯å•ç‹¬å¯¹è¿™äº›æ¥å£è¿›è¡Œç®€å•çš„æ‰©å±•ï¼Œå•ç‹¬å¯¹ä¸åŒçš„ç»´åº¦è¿›è¡Œæ§åˆ¶ï¼Œä½†æ˜¯å¦‚ä½•å®ç°å‘¢ï¼Ÿæˆ‘ä»¬ä¸å¦¨å°†å¥¶èŒ¶çš„ç±»å‹ä½œä¸ºæœ€åŸºæœ¬çš„æŠ½è±¡ç±»ï¼Œç„¶åå¯¹å°ºå¯¸ã€é…æ–™ç­‰å±æ€§è¿›è¡Œæ¡¥æ¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractTea</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> Size size;   <span class="comment">//å°ºå¯¸ä½œä¸ºæ¡¥æ¥å±æ€§å­˜æ”¾åœ¨ç±»ä¸­</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">AbstractTea</span><span class="params">(Size size)</span>&#123;   <span class="comment">//åœ¨æ„é€ æ—¶éœ€è¦çŸ¥é“å°ºå¯¸å±æ€§</span></span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">getType</span><span class="params">()</span>;   <span class="comment">//å…·ä½“ç±»å‹ä¾ç„¶æ˜¯ç”±å­ç±»å†³å®š</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™ä¸ªæŠ½è±¡ç±»æä¾›çš„æ–¹æ³•è¿˜ä¸å…¨é¢ï¼Œä»…ä»…åªæœ‰Teaçš„getTypeæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ å…¶ä»–ç»´åº¦çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç»§ç»­ç¼–å†™ä¸€ä¸ªå­ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">RefinedAbstractTea</span> <span class="keyword">extends</span> <span class="title class_">AbstractTea</span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">RefinedAbstractTea</span><span class="params">(Size size)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(size);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSize</span><span class="params">()</span>&#123;   <span class="comment">//æ·»åŠ å°ºå¯¸ç»´åº¦è·å–æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> size.getSize();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åªéœ€è¦å•ç‹¬ä¸ºSizeåˆ›å»ºå­ç±»å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Large</span> <span class="keyword">implements</span> <span class="title class_">Size</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å¤§æ¯&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å¦‚æœéœ€è¦ä¸€ä¸ªå¤§æ¯çš„å•µå•µèŠ‹åœ†å¥¶èŒ¶ï¼Œåªéœ€è¦ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KissTea</span> <span class="keyword">extends</span> <span class="title class_">RefinedAbstractTea</span>&#123;   <span class="comment">//åˆ›å»ºä¸€ä¸ªå•µå•µèŠ‹åœ†å¥¶èŒ¶çš„å­ç±»</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">KissTea</span><span class="params">(Size size)</span> &#123;   <span class="comment">//åœ¨æ„é€ æ—¶éœ€è¦æŒ‡å®šå…·ä½“çš„å¤§å°å®ç°</span></span><br><span class="line">        <span class="built_in">super</span>(size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å•µå•µèŠ‹åœ†å¥¶èŒ¶&quot;</span>;   <span class="comment">//è¿”å›å¥¶èŒ¶ç±»å‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å°†ä¸¤ä¸ªç»´åº¦æ‹†å¼€ï¼Œå¯ä»¥åˆ†åˆ«è¿›è¡Œé…ç½®äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">KissTea</span> <span class="variable">tea</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">KissTea</span>(<span class="keyword">new</span> <span class="title class_">Large</span>());</span><br><span class="line">    System.out.println(tea.getType());</span><br><span class="line">    System.out.println(tea.getSize());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ¡¥æ¥æ¨¡å¼ï¼Œä½¿å¾—æŠ½è±¡å’Œå®ç°å¯ä»¥æ²¿ç€å„è‡ªçš„ç»´åº¦æ¥è¿›è¡Œå˜åŒ–ï¼Œä¸å†æ˜¯å›ºå®šçš„ç»‘å®šå…³ç³»ã€‚</p><h2 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h2><p>ç»„åˆæ¨¡å¼å®é™…ä¸Šå°±æ˜¯å°†å¤šä¸ªç»„ä»¶è¿›è¡Œç»„åˆï¼Œè®©ç”¨æˆ·å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œä¸€è‡´æ€§å¤„ç†ã€‚æ¯”å¦‚æˆ‘ä»¬çš„æ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­å¯ä»¥æœ‰å¾ˆå¤šä¸ªå­æ–‡ä»¶å¤¹æˆ–æ˜¯æ–‡ä»¶ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/58d4a7bff83bab85a8701ccc8adb526d.png" title="image-20220524001804908"><p>å®ƒå°±åƒæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ä¸€æ ·ï¼Œæœ‰åˆ†æ”¯æœ‰å¶å­ï¼Œè€Œç»„åˆæ¨¡å¼åˆ™æ˜¯å¯ä»¥å¯¹æ•´ä¸ªæ ‘å½¢ç»“æ„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œé€’å½’å¤„ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨å¸Œæœ›å°†æ‰€æœ‰æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶çš„åç§°å‰é¢éƒ½æ·»åŠ ä¸€ä¸ªå‰ç¼€ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/39c94c359287fda0ed99ceaa75a46f74.png" title="image-20220524083222697"><p>ç»„åˆæ¨¡å¼çš„ç¤ºä¾‹å¦‚ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç”¨æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ä¾‹å­æ¥è®²è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆåˆ›å»ºä¸€ä¸ªç»„ä»¶æŠ½è±¡ï¼Œç»„ä»¶å¯ä»¥åŒ…å«ç»„ä»¶ï¼Œç»„ä»¶æœ‰è‡ªå·±çš„ä¸šåŠ¡æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">addComponent</span><span class="params">(Component component)</span>;    <span class="comment">//æ·»åŠ å­ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">removeComponent</span><span class="params">(Component component)</span>;   <span class="comment">//åˆ é™¤å­ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Component <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> index)</span>;   <span class="comment">//è·å–å­ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;   <span class="comment">//æ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ–¹æ³•ï¼Œæ¯”å¦‚ä¿®æ”¹æ–‡ä»¶åç§°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬æ¥ç¼–å†™ä¸¤ç§å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Directory</span> <span class="keyword">extends</span> <span class="title class_">Component</span>&#123;   <span class="comment">//ç›®å½•å¯ä»¥åŒ…å«å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line"></span><br><span class="line">    List&lt;Component&gt; child = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();   <span class="comment">//è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Listæ¥å­˜æ”¾ç›®å½•ä¸­çš„å­ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addComponent</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        child.add(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeComponent</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        child.remove(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Component <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> child.get(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        child.forEach(Component::test);   <span class="comment">//å°†ç»§ç»­è°ƒç”¨æ‰€æœ‰å­ç»„ä»¶çš„testæ–¹æ³•æ‰§è¡Œä¸šåŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">File</span> <span class="keyword">extends</span> <span class="title class_">Component</span>&#123;   <span class="comment">//æ–‡ä»¶å°±ç›¸å½“äºæ˜¯æ ‘å¶ï¼Œæ— æ³•å†ç»§ç»­æ·»åŠ å­ç»„ä»¶äº†</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addComponent</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();   <span class="comment">//ä¸æ”¯æŒè¿™äº›æ“ä½œäº†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeComponent</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Component <span class="title function_">getChild</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶åç§°ä¿®æ”¹æˆåŠŸï¼&quot;</span>+<span class="built_in">this</span>);   <span class="comment">//å…·ä½“çš„åç§°ä¿®æ”¹æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Directory</span> <span class="variable">outer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Directory</span>();   <span class="comment">//æ–°å»ºä¸€ä¸ªå¤–å±‚ç›®å½•</span></span><br><span class="line">    <span class="type">Directory</span> <span class="variable">inner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Directory</span>();   <span class="comment">//æ–°å»ºä¸€ä¸ªå†…å±‚ç›®å½•</span></span><br><span class="line">    outer.addComponent(inner);</span><br><span class="line">    outer.addComponent(<span class="keyword">new</span> <span class="title class_">File</span>());   <span class="comment">//åœ¨å†…å±‚ç›®å½•å’Œå¤–å±‚ç›®å½•éƒ½æ·»åŠ ç‚¹æ–‡ä»¶ï¼Œæ³¨æ„åˆ«å¯¼é”™åŒ…äº†</span></span><br><span class="line">    inner.addComponent(<span class="keyword">new</span> <span class="title class_">File</span>());</span><br><span class="line">    inner.addComponent(<span class="keyword">new</span> <span class="title class_">File</span>());</span><br><span class="line">    outer.test();    <span class="comment">//å¼€å§‹æ‰§è¡Œæ–‡ä»¶åç§°ä¿®æ”¹æ“ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯¹æœ€å¤–å±‚ç›®å½•è¿›è¡Œæ“ä½œåï¼Œä¼šé€’å½’å‘ä¸‹å¤„ç†å½“å‰ç›®å½•å’Œå­ç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶ã€‚</p><h2 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h2><p>è£…é¥°æ¨¡å¼å°±åƒå…¶åå­—ä¸€æ ·ï¼Œä¸ºäº†å¯¹ç°æœ‰çš„ç±»è¿›è¡Œè£…é¥°ã€‚æ¯”å¦‚ä¸€å¼ ç›¸ç‰‡å°±ä¸€å¼ çº¸ï¼Œå¦‚æœç›´æ¥è´´åœ¨å¢™ä¸Šï¼Œæ€»æ„Ÿè§‰å°‘äº†ç‚¹ä»€ä¹ˆï¼Œä½†æ˜¯æˆ‘ä»¬ç»™å…¶æ·»åŠ ä¸€ä¸ªå¥½çœ‹çš„ç›¸æ¡†ï¼Œå°±ä¼šå˜å¾—éå¸¸å¯¹å‘³ã€‚è£…é¥°æ¨¡å¼çš„æ ¸å¿ƒå°±åœ¨äºä¸æ”¹å˜ä¸€ä¸ªå¯¹è±¡æœ¬èº«åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œç»™å¯¹è±¡æ·»åŠ é¢å¤–çš„è¡Œä¸ºï¼Œå¹¶ä¸”å®ƒæ˜¯é€šè¿‡ç»„åˆçš„å½¢å¼å®Œæˆçš„ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ç»§æ‰¿å…³ç³»ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæ™®é€šçš„åŠŸèƒ½ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Base</span> &#123;   <span class="comment">//é¡¶å±‚æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†ä¸€ä¸ªtestæ–¹æ³•æ‰§è¡Œä¸šåŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseImpl</span> <span class="keyword">extends</span> <span class="title class_">Base</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯ä¸šåŠ¡æ–¹æ³•&quot;</span>);   <span class="comment">//å…·ä½“çš„ä¸šåŠ¡æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ç°åœ¨çš„å®ç°ç±»å¤ªå•è°ƒäº†ï¼Œæˆ‘ä»¬æ¥æ·»åŠ ä¸€ç‚¹è£…é¥°ä¸Šå»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Decorator</span> <span class="keyword">extends</span> <span class="title class_">Base</span>&#123;   <span class="comment">//è£…é¥°è€…éœ€è¦å°†è£…é¥°ç›®æ ‡ç»„åˆåˆ°ç±»ä¸­</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Base base;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Decorator</span><span class="params">(Base base)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.base = base;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        base.test();    <span class="comment">//è¿™é‡Œæš‚æ—¶è¿˜æ˜¯ä½¿ç”¨ç›®æ ‡çš„åŸæœ¬æ–¹æ³•å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DecoratorImpl</span> <span class="keyword">extends</span> <span class="title class_">Decorator</span>&#123;   <span class="comment">//è£…é¥°å®ç°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DecoratorImpl</span><span class="params">(Base base)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(base);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;    <span class="comment">//å¯¹åŸæœ¬çš„æ–¹æ³•è¿›è¡Œè£…é¥°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰åéƒ½å»æ·»åŠ é¢å¤–æ“ä½œ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è£…é¥°æ–¹æ³•ï¼šæˆ‘æ˜¯æ“ä½œå‰é€»è¾‘&quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.test();</span><br><span class="line">        System.out.println(<span class="string">&quot;è£…é¥°æ–¹æ³•ï¼šæˆ‘æ˜¯æ“ä½œåé€»è¾‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±é€šè¿‡è£…é¥°æ¨¡å¼å¯¹ç±»çš„åŠŸèƒ½è¿›è¡Œäº†æ‰©å±•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Base</span> <span class="variable">base</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseImpl</span>();</span><br><span class="line">    <span class="type">Decorator</span> <span class="variable">decorator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecoratorImpl</span>(base);  <span class="comment">//å°†Baseå®ç°è£…é¥°ä¸€ä¸‹</span></span><br><span class="line">    <span class="type">Decorator</span> <span class="variable">outer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecoratorImpl</span>(decorator);  <span class="comment">//è£…é¥°è€…è¿˜å¯ä»¥åµŒå¥—</span></span><br><span class="line"></span><br><span class="line">    decorator.test();</span><br><span class="line"></span><br><span class="line">    outer.test();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†è£…é¥°æ¨¡å¼ã€‚</p><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><p>ä»£ç†æ¨¡å¼å’Œè£…é¥°æ¨¡å¼å¾ˆåƒï¼Œåˆå­¦è€…å¾ˆå®¹æ˜“ææ··ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¾—ç´§æ¥ç€æ¥è®²è§£ä¸€ä¸‹ã€‚é¦–å…ˆè¯·è®°ä½ï¼Œå½“æ— æ³•ç›´æ¥è®¿é—®æŸä¸ªå¯¹è±¡æˆ–è®¿é—®æŸä¸ªå¯¹è±¡å­˜åœ¨å›°éš¾æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥é—´æ¥è®¿é—®ã€‚</p><p>å®é™…ä¸Šä»£ç†åœ¨æˆ‘ä»¬ç”Ÿæ´»ä¸­å¤„å¤„éƒ½å­˜åœ¨ï¼Œæ¯”å¦‚æ‰‹æœºå‚å•†è¦å»é”€å”®æ‰‹æœºï¼Œä½†æ˜¯æ‰‹æœºå‚å•†æœ¬èº«æ²¡æœ‰ä»€ä¹ˆæ¸ é“å¯ä»¥å¤§è§„æ¨¡åœ°è¿›è¡Œå”®å–ï¼Œå¾ˆéš¾ä¸è¿™äº›æ¶ˆè´¹è€…è¿›è¡Œå¯¹æ¥ï¼Œè¿™æ—¶å°±å¾—äº¤ç»™ä»£ç†å•†å»è¿›è¡Œå‡ºå”®ï¼Œæ¯”å¦‚Appleåœ¨ä¸­å›½çš„ç›´è¥åº—å¾ˆå°‘ï¼Œä½†æ˜¯åœ¨ä¸­å›½çš„æˆæƒç»é”€å•†å´å¾ˆå¤šï¼Œæ‰‹æœºå‚å•†é€šè¿‡äº¤ç»™æ——ä¸‹ä»£ç†å•†çš„å½¢å¼æ¥è¿›è¡Œæ›´å¤§è§„æ¨¡çš„å‡ºå”®ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸è¦è®¿é—®Githubï¼Œä½†æ˜¯ç›´æ¥è¿æ¥ä¼šå‘ç°å¾ˆéš¾è¿çš„ä¸Šï¼Œè¿™æ—¶æˆ‘ä»¬åŠ äº†ä¸€ä¸ªä»£ç†å°±å¯ä»¥è½»æ¾è®¿é—®ï¼Œä¹Ÿæ˜¯åœ¨ä½“ç°ä»£ç†çš„ä½œç”¨ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/92cf57bfdbddbb26c7191bca1137acac.png" title="image-20220524110803328"><p>åŒæ—¶ï¼Œä»£ç†ç±»éœ€è¦ä¿è¯å®¢æˆ·ç«¯ä½¿ç”¨çš„é€æ˜æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æ“ä½œèµ·æ¥éœ€è¦ä¸åŸæœ¬çš„çœŸå®å¯¹è±¡ç›¸åŒï¼Œæ¯”å¦‚æˆ‘ä»¬è®¿é—®Githubåªéœ€è¦è¾“å…¥ç½‘å€å³å¯è®¿é—®ï¼Œè€Œæ·»åŠ ä»£ç†ä¹‹åï¼Œä¹Ÿæ˜¯ä½¿ç”¨åŒæ ·çš„æ–¹å¼å»è®¿é—®Githubï¼Œæ‰€ä»¥æ“ä½œèµ·æ¥æ˜¯ä¸€æ ·çš„ã€‚åŒ…æ‹¬Springæ¡†æ¶å…¶å®ä¹Ÿæ˜¯ä¾é ä»£ç†æ¨¡å¼å»å®ç°çš„AOPè®°å½•æ—¥å¿—ç­‰ã€‚</p><p>æ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç›®æ ‡ç±»ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨éœ€è¦é€šè¿‡ä»£ç†æ¥ä½¿ç”¨å®ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubjectImpl</span> <span class="keyword">extends</span> <span class="title class_">Subject</span>&#123;  <span class="comment">//æ­¤ç±»æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œä»£ç†</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯æµ‹è¯•æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬ä¸ºå…¶å»ºç«‹ä¸€ä¸ªä»£ç†ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">extends</span> <span class="title class_">Subject</span>&#123;   <span class="comment">//ä¸ºäº†ä¿è¯å’ŒSubjectæ“ä½œæ–¹å¼ä¸€æ ·ï¼Œä¿è¯é€æ˜æ€§ï¼Œä¹Ÿå¾—ç»§æ‰¿</span></span><br><span class="line"></span><br><span class="line">    Subject target;   <span class="comment">//è¢«ä»£ç†çš„å¯¹è±¡ï¼ˆç”šè‡³å¯ä»¥å¤šé‡ä»£ç†ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">(Subject subject)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.target = subject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;   <span class="comment">//ç”±ä»£ç†å»æ‰§è¡Œè¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å‰åæ·»æ²¹åŠ é†‹</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä»£ç†å‰ç»•æ–¹æ³•&quot;</span>);</span><br><span class="line">        target.test();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»£ç†åç»•æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹ï¼Œè¿™ä¸è·Ÿä¹‹å‰çš„è£…é¥°æ¨¡å¼ä¸€æ¨¡ä¸€æ ·å—ï¼Ÿ</p><p>å¯¹è£…é¥°å™¨æ¨¡å¼æ¥è¯´ï¼Œè£…é¥°è€…å’Œè¢«è£…é¥°è€…éƒ½å®ç°åŒä¸€ä¸ªæ¥å£&#x2F;æŠ½è±¡ç±»ã€‚å¯¹ä»£ç†æ¨¡å¼æ¥è¯´ï¼Œä»£ç†ç±»å’Œè¢«ä»£ç†çš„ç±»éƒ½å®ç°åŒä¸€ä¸ªæ¥å£&#x2F;æŠ½è±¡ç±»ï¼Œåœ¨ç»“æ„ä¸Šç¡®å®æ²¡æœ‰å•¥åŒºåˆ«ã€‚ä½†æ˜¯ä»–ä»¬çš„ä½œç”¨ä¸åŒï¼Œè£…é¥°å™¨æ¨¡å¼å¼ºè°ƒçš„æ˜¯å¢å¼ºè‡ªèº«ï¼Œåœ¨è¢«è£…é¥°ä¹‹åä½ èƒ½å¤Ÿåœ¨è¢«å¢å¼ºçš„ç±»ä¸Šä½¿ç”¨å¢å¼ºåçš„åŠŸèƒ½ï¼Œå¢å¼ºåä½ è¿˜æ˜¯ä½ ï¼Œåªä¸è¿‡è¢«å¼ºåŒ–äº†è€Œå·²ï¼›ä»£ç†æ¨¡å¼å¼ºè°ƒè¦è®©åˆ«äººå¸®ä½ å»åšäº‹æƒ…ï¼Œä»¥åŠæ·»åŠ ä¸€äº›æœ¬èº«ä¸ä½ ä¸šåŠ¡æ²¡æœ‰å¤ªå¤šå…³ç³»çš„äº‹æƒ…ï¼ˆè®°å½•æ—¥å¿—ã€è®¾ç½®ç¼“å­˜ç­‰ï¼‰é‡ç‚¹åœ¨äºè®©åˆ«äººå¸®ä½ åšã€‚</p><p>è£…é¥°æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„ä¸åŒä¹‹å¤„åœ¨äºæ€æƒ³ã€‚</p><p>å½“ç„¶å®ç°ä»£ç†æ¨¡å¼é™¤äº†æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„è¿™ç§æ–¹å¼ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨JDKä¸ºæˆ‘ä»¬æä¾›çš„åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦æ‰‹åŠ¨ç¼–å†™ç»§æ‰¿å…³ç³»åˆ›å»ºä»£ç†ç±»ï¼Œå®ƒèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶é€šè¿‡åå°„æœºåˆ¶ä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Subject</span> &#123;  <span class="comment">//JDKæä¾›çš„åŠ¨æ€ä»£ç†åªæ”¯æŒæ¥å£</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubjectImpl</span> <span class="keyword">implements</span> <span class="title class_">Subject</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯æµ‹è¯•æ–¹æ³•ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåŠ¨æ€ä»£ç†çš„å¤„ç†é€»è¾‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;    <span class="comment">//ä»£ç†ç±»ï¼Œéœ€è¦å®ç°InvocationHandleræ¥å£</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object object;   <span class="comment">//è¿™é‡Œéœ€è¦ä¿å­˜ä¸€ä¸‹è¢«ä»£ç†çš„å¯¹è±¡ï¼Œä¸‹é¢éœ€è¦ç”¨åˆ°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestProxy</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.object = object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>   <span class="comment">//æ­¤æ–¹æ³•å°±æ˜¯è°ƒç”¨ä»£ç†å¯¹è±¡çš„å¯¹åº”æ–¹æ³•æ—¶ä¼šè¿›å…¥ï¼Œè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ç¼–å†™å¦‚ä½•è¿›è¡Œä»£ç†äº†</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">     		<span class="comment">//methodå°±æ˜¯è°ƒç”¨çš„ä»£ç†å¯¹è±¡çš„å“ªä¸€ä¸ªæ–¹æ³•ï¼Œargsæ˜¯å®å‚æ•°ç»„</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä»£ç†çš„å¯¹è±¡ï¼š&quot;</span>+proxy.getClass());   <span class="comment">//proxyå°±æ˜¯ç”Ÿæˆçš„ä»£ç†å¯¹è±¡äº†ï¼Œæˆ‘ä»¬çœ‹çœ‹æ˜¯ä»€ä¹ˆç±»å‹çš„</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">res</span> <span class="operator">=</span> method.invoke(object, args);   <span class="comment">//åœ¨ä»£ç†ä¸­è°ƒç”¨è¢«ä»£ç†å¯¹è±¡åŸæœ¬çš„æ–¹æ³•ï¼Œå› ä¸ºä½ æ˜¯ä»£ç†ï¼Œè¿˜æ˜¯å¾—æ‰§è¡Œä¸€ä¸‹åˆ«äººçš„ä¸šåŠ¡ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸æ‰§è¡Œï¼Œä½†æ˜¯è¿™æ ·å°±å¤±å»ä»£ç†çš„æ„ä¹‰äº†ï¼Œæ³¨æ„è¦ç”¨ä¸Šé¢çš„object</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•è°ƒç”¨å®Œæˆï¼Œè¿”å›å€¼ä¸ºï¼š&quot;</span>+res);   <span class="comment">//çœ‹çœ‹è¿”å›å€¼æ˜¯ä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">return</span> res;   <span class="comment">//è¿”å›è¿”å›å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">SubjectImpl</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubjectImpl</span>();   <span class="comment">//è¢«ä»£ç†çš„å¤§å†¤ç§</span></span><br><span class="line">    <span class="type">InvocationHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestProxy</span>(subject);</span><br><span class="line">    <span class="type">Subject</span> <span class="variable">proxy</span> <span class="operator">=</span> (Subject) Proxy.newProxyInstance(</span><br><span class="line">            subject.getClass().getClassLoader(),    <span class="comment">//éœ€è¦ä¼ å…¥è¢«ä»£ç†çš„ç±»çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">            subject.getClass().getInterfaces(),    <span class="comment">//éœ€è¦ä¼ å…¥è¢«ä»£ç†çš„ç±»çš„æ¥å£åˆ—è¡¨</span></span><br><span class="line">            handler);    <span class="comment">//æœ€åä¼ å…¥æˆ‘ä»¬å®ç°çš„ä»£ç†å¤„ç†é€»è¾‘å®ç°ç±»</span></span><br><span class="line">    proxy.test();    <span class="comment">//æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è°ƒç”¨ä»£ç†ç±»çš„testæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥åˆ°æˆ‘ä»¬ä¸Šé¢TestProxyä¸­invokeæ–¹æ³•ï¼Œèµ°æˆ‘ä»¬çš„ä»£ç†é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸€æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°è°ƒç”¨ä»£ç†ç±»çš„æ–¹æ³•ï¼Œæœ€ç»ˆä¼šèµ°åˆ°æˆ‘ä»¬çš„invokeæ–¹æ³•ä¸­è¿›è¡Œï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/ac05ffd58be7e55643f6b72489892f46.png" title="image-20220524141757961"><p>æ ¹æ®æ¥å£ï¼Œä»£ç†å¯¹è±¡æ˜¯<code>com.sun.proxy.$Proxy0</code>ç±»ï¼ˆçœ‹åå­—å°±çŸ¥é“ä¸å¯¹åŠ²ï¼‰ï¼Œè¿™ä¸ªç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¹Ÿæ‰¾ä¸åˆ°å…·ä½“çš„æºä»£ç ã€‚</p><p>ä¸è¿‡JDKæä¾›çš„åŠ¨æ€ä»£ç†åªèƒ½ä½¿ç”¨æ¥å£ï¼Œå¦‚æœæ¢æˆæˆ‘ä»¬ä¸€å¼€å§‹çš„æŠ½è±¡ç±»ï¼Œå°±æ²¡åŠæ³•äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æ¶æ¥å®ç°æ›´å¤šæ–¹å¼çš„åŠ¨æ€ä»£ç†ï¼Œæ¯”å¦‚Springéƒ½åœ¨ä½¿ç”¨çš„CGLibæ¡†æ¶ï¼ŒMavenä¾èµ–å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”±äºCGlibåº•å±‚ä½¿ç”¨ASMæ¡†æ¶ï¼ˆJVMç¯‡è§†é¢‘æ•™ç¨‹æœ‰ä»‹ç»ï¼‰è¿›è¡Œå­—èŠ‚ç ç¼–è¾‘ï¼Œæ‰€ä»¥èƒ½å¤Ÿå®ç°ä¸ä»…ä»…å±€é™äºå¯¹æ¥å£çš„ä»£ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;  <span class="comment">//é¦–å…ˆè¿˜æ˜¯ç¼–å†™æˆ‘ä»¬çš„ä»£ç†é€»è¾‘</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object target;   <span class="comment">//è¿™äº›å’Œä¹‹å‰JDKåŠ¨æ€ä»£ç†å†™æ³•æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestProxy</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>   <span class="comment">//æˆ‘ä»¬ä¹Ÿæ˜¯éœ€è¦åœ¨è¿™é‡Œå»ç¼–å†™æˆ‘ä»¬çš„ä»£ç†é€»è¾‘</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç°åœ¨æ˜¯ç”±CGLibè¿›è¡Œä»£ç†æ“ä½œï¼&quot;</span>+o.getClass());</span><br><span class="line">        <span class="keyword">return</span> method.invoke(target, objects);   <span class="comment">//ä¹Ÿæ˜¯ç›´æ¥è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•å³å¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸‹ä»£ç†ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">SubjectImpl</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubjectImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();   <span class="comment">//å¢å¼ºå™¨ï¼Œä¸€ä¼šå°±éœ€è¦ä¾é å¢å¼ºå™¨æ¥ä¸ºæˆ‘ä»¬ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡</span></span><br><span class="line">    enhancer.setSuperclass(SubjectImpl.class);    <span class="comment">//ç›´æ¥é€‰æ‹©æˆ‘ä»¬éœ€è¦ä»£ç†çš„ç±»å‹ï¼Œç›´æ¥ä¸éœ€è¦æ¥å£æˆ–æ˜¯æŠ½è±¡ç±»ï¼ŒSuperClassä½œä¸ºä»£ç†ç±»çš„çˆ¶ç±»å­˜åœ¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§æŒ‡å®šç±»å‹çš„æ–¹å¼å»æ“ä½œä»£ç†ç±»äº†</span></span><br><span class="line">    enhancer.setCallback(<span class="keyword">new</span> <span class="title class_">TestProxy</span>(subject));  <span class="comment">//è®¾å®šæˆ‘ä»¬åˆšåˆšç¼–å†™å¥½çš„ä»£ç†é€»è¾‘</span></span><br><span class="line"></span><br><span class="line">    <span class="type">SubjectImpl</span> <span class="variable">proxy</span> <span class="operator">=</span> (SubjectImpl) enhancer.create();   <span class="comment">//ç›´æ¥åˆ›å»ºä»£ç†ç±»</span></span><br><span class="line"></span><br><span class="line">    proxy.test();   <span class="comment">//è°ƒç”¨ä»£ç†ç±»çš„testæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ•ˆæœå…¶å®æ˜¯å·®ä¸å¤šçš„ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/7a362ba820560b2a8012f401f14949fe.png" title="image-20220524143920720"><p>å¯ä»¥çœ‹åˆ°ä»£ç†ç±»æ˜¯<code>åŒ…å.SubjectImpl$$EnhancerByCGLIB$$47f6ed3a</code>ï¼Œä¹Ÿæ˜¯åŠ¨æ€ç”Ÿæˆçš„ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•å»æŸ¥çœ‹æºç ï¼Œä¸è¿‡æ­¤ç±»æ˜¯ç»§æ‰¿è‡ªæˆ‘ä»¬æŒ‡å®šçš„ç±»å‹çš„ã€‚</p><h2 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h2><p>ä½ æ˜¯å¦ç»å†è¿‡ç±»ä¼¼çš„æƒ…å†µï¼šä»Šå¹´è®¡ç®—æœºå­¦é™¢çš„å¥–å­¦é‡‘è¯„å®šå·¥ä½œå¼€å§‹äº†ï¼Œç”±äºä½ å»å¹´ä¸€ä¸å°å¿ƒæ‹¿äº†ä¸ªACMçš„åŒºåŸŸèµ›é‡‘ç‰Œï¼Œè§‰å¾—è‡ªå·±åˆè¡Œäº†ï¼Œäºæ˜¯ä¹Ÿæƒ³å‚ä¸åˆ°å¥–å­¦é‡‘çš„äº‰å¤ºä¸­ï¼Œé¦–å…ˆä½ çš„è¾…å¯¼å‘˜ä¼šé€šçŸ¥ä½ å»æ‰“å°ä½ çš„è·å¥–ææ–™ï¼Œç„¶åä½ é«˜é«˜å…´å…´æ‹¿ç»™è¾…å¯¼å‘˜ä¹‹åï¼Œè¾…å¯¼å‘˜åˆç»™äº†ä½ ä¸€å¼ è¡¨ï¼Œè®©ä½ æ‰“å°äº†ä¹‹åå¡«å†™ä¸€ä¸‹ï¼ŒåŒ…æ‹¬ä½ çš„ä¸ªäººä¿¡æ¯è¿˜æœ‰ä¸€äº›ä¸ªäººä»‹ç»ï¼Œå®Œæˆåï¼Œä½ æœ¬ä»¥ä¸ºå¯ä»¥åç­‰å‘å¥–äº†ï¼Œç»“æœè¾…å¯¼å‘˜åˆè·Ÿä½ è¯´æˆ‘ä»¬è¯„å®šè¿˜è¦å»æŸæŸåœ°æ–¹ç›–ç« ï¼Œç›–å®Œç« è¿˜è¦å»æ‰¾è°è°è°ç­¾å­—ï¼Œæœ€åè¿˜è¦å‚åŠ ä¸€ä¸‹ç­”è¾©â€¦ çœ‹ç€å¦‚æ­¤å¤æ‚çš„æµç¨‹ï¼Œä½ ç¬é—´ä¸æƒ³æäº†ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/8112da7ea8e19210cfbcc4593b515e29.png" title="image-20220524150153791"><p>å®é™…ä¸Šæˆ‘ä»¬ç”Ÿæ´»ä¸­å¾ˆå¤šæ—¶å€™éƒ½æ˜¯è¿™æ ·ï¼Œå¯èƒ½åœ¨åŠä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œç”±äºéƒ¨é—¨èŒèƒ½çš„ä¸åŒï¼Œä½ å¾—å„ä¸ªéƒ¨é—¨åˆ°å¤„è·‘ï¼Œä½ è‚¯å®šä¼šæŠ±æ€¨ä¸€å¥ï¼Œå°±ä¸èƒ½æœ‰ä¸ªäººæ¥ç»Ÿä¸€ä¸€ä¸‹å—ï¼Œå°±ä¸èƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ä¸€èµ·æŠŠäº‹æƒ…éƒ½åŠäº†å—ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ°å¤–è§‚æ¨¡å¼äº†ã€‚</p><p>å¤–è§‚æ¨¡å¼å……åˆ†ä½“ç°äº†è¿ªç±³ç‰¹æ³•åˆ™ã€‚å¯èƒ½æˆ‘ä»¬çš„æ•´ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šä¸ªå­ç³»ç»Ÿï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›å­ç³»ç»Ÿçš„ä¸Šé¢åŠ ä¸€ä¸ªé—¨é¢ï¼ˆFacadeï¼‰å½“æˆ‘ä»¬å¤–éƒ¨éœ€è¦ä¸å„ä¸ªå­ç³»ç»Ÿäº¤äº’æ—¶ï¼Œæ— éœ€å†å»ç›´æ¥ä½¿ç”¨å„ä¸ªå­ç³»ç»Ÿï¼Œè€Œæ˜¯ä¸é—¨é¢è¿›è¡Œäº¤äº’ï¼Œå†ç”±é—¨é¢ä¸åé¢çš„å„ä¸ªå­ç³»ç»Ÿæ“ä½œï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬ä»¥åéœ€è¦åŠä»€ä¹ˆäº‹æƒ…ï¼Œå°±ç»Ÿä¸€æ‰¾é—¨é¢å°±è¡Œäº†ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œé¦–å…ˆè‚¯å®šæ–¹ä¾¿äº†ä»£ç çš„ç¼–å†™ï¼Œç»Ÿä¸€æ‰¾é—¨é¢å°±è¡Œï¼Œä¸éœ€è¦å»è¯¦ç»†äº†è§£å­ç³»ç»Ÿï¼Œå¹¶ä¸”ï¼Œå½“å­ç³»ç»Ÿéœ€è¦ä¿®æ”¹æ—¶ï¼Œä¹Ÿåªéœ€è¦ä¿®æ”¹é—¨é¢ä¸­çš„é€»è¾‘ï¼Œä¸éœ€è¦å¤§é¢ç§¯çš„å˜åŠ¨ï¼Œéµå¾ªè¿ªç±³ç‰¹æ³•åˆ™å°½å¯èƒ½å°‘çš„äº¤äº’ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/a229e69761b4f7065cd15347d3e6f357.png" title="image-20220524150617434"><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è®¾è®¡äº†ä¸‰ä¸ªå­ç³»ç»Ÿï¼Œåˆ†åˆ«æ˜¯æ’é˜Ÿã€ç»“å©šã€é¢†è¯ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯éœ€è¦åˆ†åˆ«å»æ‰¾è¿™ä¸‰ä¸ªéƒ¨é—¨å»å®Œæˆçš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬é€šè¿‡é—¨é¢ç»Ÿä¸€æ¥å®Œæˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubSystemA</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’é˜Ÿ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubSystemB</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“å©š&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubSystemC</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é¢†è¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä¸‰ä¸ªç³»ç»Ÿå¤ªå¤æ‚äº†ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªé—¨é¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Facade</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">SubSystemA</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubSystemA</span>();</span><br><span class="line">    <span class="type">SubSystemB</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubSystemB</span>();</span><br><span class="line">    <span class="type">SubSystemC</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubSystemC</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">marry</span><span class="params">()</span>&#123;   <span class="comment">//çº¢ç™½å–œäº‹ä¸€æ¡é¾™æœåŠ¡</span></span><br><span class="line">        a.test1();</span><br><span class="line">        b.test2();</span><br><span class="line">        c.test3();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªé—¨é¢å°±èƒ½ç›´æ¥æŠŠäº‹æƒ…åŠå®Œäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Facade</span> <span class="variable">facade</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Facade</span>();</span><br><span class="line">    facade.marry();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œæˆ‘ä»¬å°±å¤§å¤§é™ä½äº†ç±»ä¸ç±»ç›´æ¥çš„å…³è”ç¨‹åº¦ï¼Œå¹¶ä¸”ç®€åŒ–äº†æµç¨‹ã€‚</p><h2 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h2><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ª&quot;äº«å…ƒ&quot;ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„é—®é¢˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;abcd&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²è™½ç„¶é•¿çŸ­ä¸åŒï¼Œä½†æ˜¯å´åŒ…å«äº†ä¸€æ®µç›¸åŒçš„éƒ¨åˆ†ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å¦‚æœè¦å¯¹å†…å­˜è¿›è¡Œä¼˜åŒ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;efg&quot;</span>;   <span class="comment">//ç”±äºstr1åŒ…å«str2ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»æ‰é‡å¤çš„éƒ¨åˆ†ï¼Œå½“éœ€è¦åŸæœ¬çš„str1æ—¶ï¼Œå†åˆåœ¨ä¸€èµ·</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;abcd&quot;</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;str1 = &quot;</span>+str2+str1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œäº«å…ƒæ¨¡å¼å°±æ˜¯è¿™ä¸ªæ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥å°†é‚£äº›é‡å¤å‡ºç°çš„å†…å®¹ä½œä¸ºå…±äº«éƒ¨åˆ†å–å‡ºï¼Œè¿™æ ·å½“æˆ‘ä»¬æ‹¥æœ‰å¤§é‡å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬æŠŠå…¶ä¸­å…±åŒçš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œç”±äºæå–çš„éƒ¨åˆ†æ˜¯å¤šä¸ªå¯¹è±¡å…±äº«åªæœ‰ä¸€ä»½ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‡è½»å†…å­˜çš„å‹åŠ›ã€‚åŒ…æ‹¬æˆ‘ä»¬çš„å›´æ£‹ï¼Œå®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦çŸ¥é“æ£‹ç›˜ä¸Šçš„å„ä¸ªä½ç½®æ˜¯é»‘æ£‹è¿˜æ˜¯ç™½æ£‹ï¼Œå®é™…ä¸Šæ²¡æœ‰æ¯•ä¸šåˆ›å»ºå¾ˆå¤šä¸ªæ£‹å­å¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦å»å¤ç”¨ä¸€ä¸ªé»‘æ£‹å’Œä¸€ä¸ªç™½æ£‹å­å¯¹è±¡å³å¯ã€‚</p><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœåŠ¡ï¼Œä½†æ˜¯ä»–ä»¬éƒ½éœ€è¦ä½¿ç”¨æ•°æ®åº“å·¥å…·ç±»æ¥æ“ä½œï¼Œå®é™…ä¸Šè¿™ä¸ªå·¥å…·ç±»æ²¡å¿…è¦åˆ›å»ºå¤šä¸ªï¼Œæˆ‘ä»¬è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼ï¼Œè®©æ•°æ®åº“å·¥å…·ç±»ä½œä¸ºäº«å…ƒç±»ï¼Œé€šè¿‡äº«å…ƒå·¥å‚æ¥æä¾›ä¸€ä¸ªå…±äº«çš„æ•°æ®åº“å·¥å…·ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectDB</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯æ•°æ®åº“æ“ä½œ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtilFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DBUtil</span> <span class="variable">UTIL</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBUtil</span>();   <span class="comment">//äº«å…ƒå¯¹è±¡è¢«å­˜æ”¾åœ¨å·¥å‚ä¸­</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DBUtil <span class="title function_">getFlyweight</span><span class="params">()</span>&#123;   <span class="comment">//è·å–äº«å…ƒå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> UTIL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åå½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨äº«å…ƒå¯¹è±¡æ—¶ï¼Œç›´æ¥æ‰¾äº«å…ƒå·¥å‚è¦å°±è¡Œäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;   <span class="comment">//ç”¨æˆ·æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DBUtil</span> <span class="variable">util</span> <span class="operator">=</span> DBUtilFactory.getFlyweight();   <span class="comment">//é€šè¿‡äº«å…ƒå·¥å‚æ‹¿åˆ°DBUtilå¯¹è±¡</span></span><br><span class="line">        util.selectDB();    <span class="comment">//è¯¥å¹²å˜›å¹²å˜›</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™åªæ˜¯ç®€å•çš„äº«å…ƒæ¨¡å¼å®ç°ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä¸€å¼€å§‹ä¸¾ä¾‹çš„Stringç±»ï¼Œä¹Ÿåœ¨ä½¿ç”¨äº«å…ƒæ¨¡å¼è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;abcd&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;abcd&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="string">&quot;ab&quot;</span> + <span class="string">&quot;cd&quot;</span>;</span><br><span class="line">    System.out.println(str1 == str2);</span><br><span class="line">    System.out.println(str1 == str3);   <span class="comment">//çŒœçŒœè¿™ä¸‰ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯éƒ½æ˜¯åŒä¸€ä¸ªï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶æˆ‘ä»¬è¿™é‡Œå®šä¹‰äº†ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸‰ä¸ªå¯¹è±¡æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå®é™…ä¸Šè¿™æ­£æ˜¯Javaè¯­è¨€å®ç°äº†æ•°æ®çš„å…±äº«</p><h1 id="è®¾è®¡æ¨¡å¼ï¼ˆè¡Œä¸ºå‹ï¼‰"><a href="#è®¾è®¡æ¨¡å¼ï¼ˆè¡Œä¸ºå‹ï¼‰" class="headerlink" title="è®¾è®¡æ¨¡å¼ï¼ˆè¡Œä¸ºå‹ï¼‰"></a>è®¾è®¡æ¨¡å¼ï¼ˆè¡Œä¸ºå‹ï¼‰</h1><p>å‰é¢æˆ‘ä»¬å·²ç»å­¦ä¹ äº†12ç§è®¾è®¡æ¨¡å¼ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>åˆ›å»ºå‹ï¼šå…³æ³¨å¯¹è±¡åˆ›å»º</li><li>ç»“æ„å‹ï¼šå…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»“æ„ç»„ç»‡</li></ul><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹æœ€åä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯æœ€å¤šçš„ä¸€ç§ï¼Œè¡Œä¸ºå‹è®¾è®¡æ¨¡å¼å…³æ³¨ç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œç ”ç©¶ç³»ç»Ÿåœ¨è¿è¡Œæ—¶å¯¹è±¡ä¹‹é—´çš„ç›¸äº’é€šä¿¡ä¸åä½œï¼Œè¿›ä¸€æ­¥æ˜ç¡®å¯¹è±¡çš„èŒè´£ã€‚</p><h2 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h2><p>è¿™ç§æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯è¾ƒå°‘ï¼Œå¾ˆå°‘ä½¿ç”¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè¿™é‡Œæä¸€ä¸‹å°±è¡Œã€‚</p><p>è§£é‡Šå™¨é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¯¹æˆ‘ä»¬çš„è¯­è¨€è¿›è¡Œè§£é‡Šï¼Œæ ¹æ®ä¸åŒçš„è¯­ä¹‰æ¥åšä¸åŒçš„äº‹æƒ…ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨SEä¸­å­¦ä¹ çš„åŒæ ˆè®¡ç®—å™¨ï¼Œæ­£æ˜¯æ ¹æ®æˆ‘ä»¬è¾“å…¥çš„ç®—å¼ï¼Œå»è¿›è¡Œè§£æï¼Œå¹¶æ ¹æ®ä¸åŒçš„è¿ç®—ç¬¦æ¥ä¸æ–­è¿›è¡Œè®¡ç®—ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è¾“å…¥ï¼š1+2*3</p><p>é‚£ä¹ˆè®¡ç®—å™¨å°±ä¼šè¿›è¡Œè§£æç„¶åæ ¹æ®è¯­ä¹‰ä¼˜å…ˆè®¡ç®—2*3çš„ç»“æœç„¶ååœ¨è®¡ç®—1+6æœ€åå¾—åˆ°7ã€‚</p><h2 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h2><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æˆ‘ä»¬ä¹‹å‰ä¹Ÿè§åˆ°è¿‡è®¸å¤šï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•ã€‚</p><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡å¯èƒ½éœ€è¦ç»å†å¾ˆå¤šä¸ªæ­¥éª¤æ¥å®Œæˆï¼Œæ¯”å¦‚æˆ‘ä»¬ç”Ÿç—…äº†åœ¨åŒ»é™¢çœ‹ç—…ï¼Œé¦–å…ˆæ˜¯å»é—¨è¯ŠæŒ‚å·ï¼Œç„¶åç­‰å¾…å«å·ï¼Œç„¶åæ˜¯å»æ‰¾åŒ»ç”Ÿçœ‹ç—…ï¼Œç¡®å®šç—…å› åï¼Œå°±æ ¹æ®åŒ»ç”Ÿçš„å¤„æ–¹å»å‰å°å¼€è¯ï¼Œæœ€åä»˜é’±ã€‚è¿™ä¸€æ•´å¥—æµç¨‹çœ‹ä¼¼æ˜¯è§„è§„çŸ©çŸ©çš„ï¼Œä½†æ˜¯åœ¨è¿™å…¶ä¸­ï¼ŒæŸäº›æ­¥éª¤å¹¶ä¸æ˜¯ç¡®å®šçš„ï¼Œæ¯”å¦‚åŒ»ç”Ÿçœ‹ç—…è¿™ä¸€æ­¥ï¼Œç”±äºä¸åŒçš„ç—…å› ï¼Œå¯èƒ½ä¼šè¿›è¡Œä¸åŒçš„å¤„ç†ï¼Œæœ€åå¼€å‡ºæ¥çš„è¯æ–¹ä¹Ÿä¼šä¸åŒï¼Œæ‰€ä»¥ï¼Œæ•´å¥—æµç¨‹ä¸­ï¼Œæœ‰äº›æ“ä½œæ˜¯å›ºå®šçš„ï¼Œæœ‰äº›æ“ä½œå¯èƒ½éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè€Œå®šã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/aa7144b94d66ab04191fde1f1c1f6dc4.png" title="image-20220524164925635"><p>åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¯èƒ½æŸäº›æ“ä½œæ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨ç±»ä¸­å¯¹åº”æ–¹æ³•è¿›è¡Œç¼–å†™ï¼Œä½†æ˜¯å¯èƒ½æŸäº›æ“ä½œéœ€è¦è§†æƒ…å†µè€Œå®šï¼Œç”±ä¸åŒçš„å­ç±»å®ç°æ¥å†³å®šï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦è®©è¿™äº›æ“ä½œç”±å­ç±»æ¥å»¶è¿Ÿå®ç°äº†ã€‚ç°åœ¨æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥å†™ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ½è±¡è¯Šæ–­æ–¹æ³•ï¼Œå› ä¸ºç°åœ¨åªçŸ¥é“æŒ‚å·å’Œçœ‹åŒ»ç”Ÿæ˜¯å›ºå®šæ¨¡å¼ï¼Œå‰©ä¸‹çš„å¼€å¤„æ–¹å’Œæ‹¿è¯éƒ½æ˜¯ä¸ç¡®å®šçš„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractDiagnosis</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»Šå¤©å¤´å¥½æ™•ï¼Œä¸æƒ³èµ·åºŠï¼Œå¼€æ‘†ï¼Œå…ˆè·Ÿå…¬å¸è¯·ä¸ªå‡&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å»åŒ»é™¢çœ‹ç—…äº†~&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1 &gt;&gt; å…ˆæŒ‚å·&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2 &gt;&gt; ç­‰å¾…å«å·&quot;</span>);</span><br><span class="line">        <span class="comment">//ç”±äºç°åœ¨ä¸çŸ¥é“è¯¥å¼€ä»€ä¹ˆå¤„æ–¹ï¼Œæ‰€ä»¥åªèƒ½å…ˆå®šä¹‰ä¸€ä¸‹è¡Œä¸ºï¼Œç„¶åå…·ä½“ç”±å­ç±»å®ç°</span></span><br><span class="line">      	<span class="comment">//å¤§è‡´çš„æµç¨‹å…ˆå®šä¹‰å¥½å°±è¡Œ</span></span><br><span class="line">        <span class="built_in">this</span>.prescribe();</span><br><span class="line">        <span class="built_in">this</span>.medicine();  <span class="comment">//å¼€è¯åŒç†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">prescribe</span><span class="params">()</span>;   <span class="comment">//å¼€å¤„æ–¹æ“ä½œæ ¹æ®å…·ä½“ç—…ç—‡å†³å®šäº†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">medicine</span><span class="params">()</span>;   <span class="comment">//æ‹¿è¯ä¹Ÿæ˜¯æ ¹æ®å…·ä½“çš„å¤„æ–¹å»æ‹¿</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å®šä¹‰å¥½äº†æŠ½è±¡æ–¹æ³•ï¼Œåªæ˜¯å°†å…·ä½“çš„æµç¨‹å…ˆå®šä¹‰å‡ºæ¥äº†ï¼Œä½†æ˜¯éƒ¨åˆ†æ–¹æ³•éœ€è¦æ ¹æ®å®ç°å†³å®šï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ„Ÿå†’ç›¸å…³çš„å…·ä½“å®ç°å­ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColdDiagnosis</span> <span class="keyword">extends</span> <span class="title class_">AbstractDiagnosis</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">prescribe</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;3 &gt;&gt; ä¸€çœ¼ä¸çœŸï¼Œé‰´å®šä¸ºå‡ï¼Œä½ è¿™ä¸æ˜¯æ„Ÿå†’ï¼Œçº¯ç²¹æ˜¯æƒ³æ‘†çƒ‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">medicine</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;4 &gt;&gt; å¼€ç‚¹å¤´å­¢å›å»åƒå§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå…·ä½“çš„å®ç°ç±»ï¼Œå¹¶ä¸”ç”±äºçœ‹ç—…çš„é€»è¾‘å·²ç»ç”±çˆ¶ç±»å®šä¹‰å¥½äº†ï¼Œæ‰€ä»¥å­ç±»åªéœ€è¦å®ç°éœ€è¦å®ç°çš„éƒ¨åˆ†å³å¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ç®€å•çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">AbstractDiagnosis</span> <span class="variable">diagnosis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ColdDiagnosis</span>();</span><br><span class="line">    diagnosis.test();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/3cd5de2b8d33710f0897a44fdf84f625.png" title="image-20220524171621919"><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨JUCä¸­è®²è§£AQSæºç å®ç°ä¸­å‡ºç°çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">release</span><span class="params">(<span class="type">int</span> arg)</span> &#123;    <span class="comment">//AQSçš„é”é‡Šæ”¾æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (tryRelease(arg)) &#123;   <span class="comment">//å¯ä»¥çœ‹åˆ°è¿™é‡Œè°ƒç”¨äº†tryReleaseæ–¹æ³•ï¼Œä½†æ˜¯æ­¤æ–¹æ³•å¹¶ä¸æ˜¯åœ¨AQSå®ç°çš„ï¼Œè€Œæ˜¯ä¸åŒçš„é”è‡ªè¡Œå®ç°ï¼Œå› ä¸ºAQSä¹Ÿä¸çŸ¥é“ä½ è¿™ç§ç±»å‹çš„é”åˆ°åº•è¯¥æ€ä¹ˆå»è§£é”</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">h</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">if</span> (h != <span class="literal">null</span> &amp;&amp; h.waitStatus != <span class="number">0</span>)</span><br><span class="line">            unparkSuccessor(h);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">tryRelease</span><span class="params">(<span class="type">int</span> arg)</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();   <span class="comment">//AQSä¸­ä¸æ”¯æŒï¼Œéœ€è¦å»¶è¿Ÿåˆ°å…·ä½“çš„å­ç±»å»å®ç°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå®é™…ä¸Šéƒ¨åˆ†åŠŸèƒ½çš„å®ç°æ˜¯åœ¨å­ç±»å®Œæˆçš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">tryRelease</span><span class="params">(<span class="type">int</span> releases)</span> &#123;   </span><br><span class="line">  <span class="comment">//ReentrantLockä¸­çš„AQS Syncå®ç°ç±»ï¼Œå¯¹tryReleaseæ–¹æ³•è¿›è¡Œäº†å…·ä½“å®ç°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> getState() - releases;</span><br><span class="line">    <span class="keyword">if</span> (Thread.currentThread() != getExclusiveOwnerThread())</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalMonitorStateException</span>();</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">free</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="number">0</span>) &#123;</span><br><span class="line">        free = <span class="literal">true</span>;</span><br><span class="line">        setExclusiveOwnerThread(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    setState(c);</span><br><span class="line">    <span class="keyword">return</span> free;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯ç°åœ¨æ„Ÿè§‰ï¼Œè¿™ç§å±‚å±‚å¥—å¨ƒçš„å†™æ³•ï¼Œå¥½åƒå¹¶ä¸æ˜¯è¿™äº›å¤§ä½¬æ•…æ„ä¸ºäº†è£…é€¼æ‰è¿™æ ·å†™çš„ï¼Œè€Œæ˜¯çœŸçš„åœ¨éµå®ˆè§„èŒƒç¼–å†™ï¼Œè®©ä»£ç æ›´æ˜“æ‡‚ä¸€äº›ï¼Œç”šè‡³ä½ ç°åœ¨å†å›å»æ¨ä¸€éä¼šå‘ç°æ€è·¯éå¸¸æ¸…æ™°ã€‚å½“ç„¶ï¼Œé™¤äº†è¿™é‡Œä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šæ¡†æ¶éƒ½ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ¥è®¾è®¡ç±»ç»“æ„ï¼Œè¿˜è¯·å„ä½å°ä¼™ä¼´è‡ªè¡Œæ¢ç´¢ã€‚</p><h2 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h2><p>è´£ä»»é“¾æ¨¡å¼ä¹Ÿéå¸¸å¥½ç†è§£ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„é’‰é’‰å®¡æ‰¹ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€æ¡æµæ°´çº¿ä¸€æ ·çš„æ“ä½œï¼Œç”±ä½ å‘èµ·ç”³è¯·ï¼Œç„¶åç»è¿‡å¤šä¸ªéƒ¨é—¨ä¸»ç®¡å®¡æ‰¹ï¼Œæœ€åæ‰èƒ½é€šè¿‡ï¼Œæ‰€ä»¥ä½ çš„ç”³è¯·è¡¨ç›¸å½“äºæ˜¯åœ¨ä¸€æ¡è´£ä»»é“¾ä¸Šä¼ é€’ã€‚å½“ç„¶é™¤äº†è¿™æ ·çš„ç›´çº¿å‹è´£ä»»é“¾ä¹‹å¤–ï¼Œè¿˜æœ‰ç¯å½¢ã€æ ‘å½¢ç­‰ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/8e62d4f8653dacd37a2e810c378994ce.png" title="image-20220524172400365"><p>å®é™…ä¸Šæˆ‘ä»¬ä¹‹å‰ä¹Ÿé‡åˆ°è¿‡å¾ˆå¤šç§è´£ä»»é“¾ï¼Œæ¯”å¦‚JavaWebä¸­å­¦ä¹ çš„Filterè¿‡æ»¤å™¨ï¼Œæ­£æ˜¯é‡‡ç”¨çš„è´£ä»»é“¾æ¨¡å¼ï¼Œé€šè¿‡å°†è¯·æ±‚ä¸€çº§ä¸€çº§ä¸æ–­å‘ä¸‹ä¼ é€’ï¼Œæ¥å¯¹æˆ‘ä»¬æ‰€éœ€è¦çš„è¯·æ±‚è¿›è¡Œè¿‡æ»¤å’Œå¤„ç†ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/864d1d648e9073fae61387fd50d2bb9f.png" title="image-20220524231849889"><p>è¿™é‡Œæˆ‘ä»¬å°±ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼æ¥æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„é¢è¯•è¿‡ç¨‹ï¼Œæˆ‘ä»¬é¢è¯•ä¹Ÿæ˜¯ä¸€é¢äºŒé¢ä¸‰é¢è¿™æ ·èµ°çš„æµç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆè®¾è®¡ä¸€ä¸‹è´£ä»»é“¾ä¸Šçš„å„ä¸ªå¤„ç†å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Handler successor;    <span class="comment">//è¿™é‡Œæˆ‘ä»¬å°±è®¾è®¡è´£ä»»é“¾ä»¥å•é“¾è¡¨å½¢å¼å­˜åœ¨ï¼Œè¿™é‡Œå­˜æ”¾åç»§èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Handler <span class="title function_">connect</span><span class="params">(Handler successor)</span>&#123;     <span class="comment">//æ‹¼æ¥åç»­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">this</span>.successor = successor;</span><br><span class="line">        <span class="keyword">return</span> successor;  <span class="comment">//è¿™é‡Œè¿”å›åç»§èŠ‚ç‚¹ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä¸€ä¼šé“¾å¼è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.doHandle();   <span class="comment">//ç”±ä¸åŒçš„å­ç±»å®ç°å…·ä½“å¤„ç†è¿‡ç¨‹</span></span><br><span class="line">        Optional</span><br><span class="line">                .ofNullable(successor)</span><br><span class="line">                .ifPresent(Handler::handle);    <span class="comment">//è´£ä»»é“¾ä¸Šå¦‚æœè¿˜æœ‰åç»§èŠ‚ç‚¹ï¼Œå°±ç»§ç»­å‘ä¸‹ä¼ é€’</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">doHandle</span><span class="params">()</span>;   <span class="comment">//ç»“åˆä¸ŠèŠ‚è¯¾å­¦ä¹ çš„æ¨¡æ¿æ–¹æ³•ï¼Œäº¤ç»™å­ç±»å®ç°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºé¢è¯•æœ‰å¾ˆå¤šè½®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œåˆ›å»ºå‡ ä¸ªå¤„ç†å™¨çš„å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FirstHandler</span> <span class="keyword">extends</span> <span class="title class_">Handler</span>&#123;   <span class="comment">//ç”¨äºä¸€é¢çš„å¤„ç†å™¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doHandle</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;============= ç™½é©¬ç¨‹åºå‘˜ä¸€é¢ ==========&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1. è°ˆè°ˆä½ å¯¹staticå…³é”®å­—çš„ç†è§£ï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2. å†…éƒ¨ç±»å¯ä»¥è°ƒç”¨å¤–éƒ¨çš„æ•°æ®å—ï¼Ÿå¦‚æœæ˜¯é™æ€çš„å‘¢ï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3. hashCode()æ–¹æ³•æ˜¯æ‰€æœ‰çš„ç±»éƒ½æœ‰å—ï¼Ÿé»˜è®¤è¿”å›çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»¥ä¸Šé—®é¢˜ä¼šçš„ï¼Œå¯ä»¥ä¾æ¬¡æ‰“åœ¨è¯„è®ºåŒº&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecondHandler</span> <span class="keyword">extends</span> <span class="title class_">Handler</span>&#123;  <span class="comment">//äºŒé¢</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doHandle</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;============= ç™½é©¬ç¨‹åºå‘˜äºŒé¢ ==========&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1. å¦‚æœæˆ‘ä»¬è‡ªå·±åˆ›å»ºä¸€ä¸ªjava.langåŒ…å¹¶ä¸”ç¼–å†™ä¸€ä¸ªStringç±»ï¼Œèƒ½å¦å®ç°è¦†ç›–JDKé»˜è®¤çš„ï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2. HashMapçš„è´Ÿè½½å› å­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå˜åŒ–è§„å¾‹æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3. çº¿ç¨‹æ± çš„è¿ä½œæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;4. ReentrantLockå…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»¥ä¸Šé—®é¢˜ä¼šçš„ï¼Œå¯ä»¥ä¾æ¬¡æ‰“åœ¨è¯„è®ºåŒº&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThirdHandler</span> <span class="keyword">extends</span> <span class="title class_">Handler</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doHandle</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;============= ç™½é©¬ç¨‹åºå‘˜ä¸‰é¢ ==========&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1. synchronizedå…³é”®å­—äº†è§£å—ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿåº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2. IOå’ŒNIOçš„åŒºåˆ«åœ¨å“ªé‡Œï¼ŸNIOä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3. TCPæ¡æ‰‹å’ŒæŒ¥æ‰‹æµç¨‹ï¼Ÿå°‘ä¸€æ¬¡æ¡æ‰‹å¯ä»¥å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;4. æ“ä½œç³»ç»Ÿä¸­PCBæ˜¯åšä»€ä¹ˆçš„ï¼Ÿè¿è¡Œæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»¥ä¸Šé—®é¢˜ä¼šçš„ï¼Œå¯ä»¥ä¾æ¬¡æ‰“åœ¨è¯„è®ºåŒº&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±ç¼–å†™å¥½äº†æ¯ä¸€è½®çš„é¢è¯•æµç¨‹ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ„å»ºä¸€ä¸ªè´£ä»»é“¾äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Handler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FirstHandler</span>();  <span class="comment">//ä¸€é¢é¦–å½“å…¶å†²</span></span><br><span class="line">    handler</span><br><span class="line">            .connect(<span class="keyword">new</span> <span class="title class_">SecondHandler</span>())   <span class="comment">//ç»§ç»­è¿æ¥äºŒé¢å’Œä¸‰é¢</span></span><br><span class="line">            .connect(<span class="keyword">new</span> <span class="title class_">ThirdHandler</span>());</span><br><span class="line">    handler.handle();   <span class="comment">//å¼€å§‹é¢è¯•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ€åç»“æœä¹Ÿæ˜¯æŒ‰ç…§æˆ‘ä»¬çš„è´£ä»»é“¾æ¥è¿›è¡Œçš„ã€‚</p><h2 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h2><p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ç°åœ¨çš„å®¶ç”µéƒ½åœ¨è¶‹å‘äºæ™ºèƒ½åŒ–ï¼Œé€šè¿‡ä¸€ä¸ªä¸­å¤®æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹å®¶é‡Œçš„å¾ˆå¤šç”µå™¨è¿›è¡Œæ§åˆ¶ï¼Œæ¯”å¦‚å›½å†…åšçš„æ¯”è¾ƒå¥½çš„å°ç±³æ™ºèƒ½å®¶å±…ç³»åˆ—ï¼Œè¿˜æœ‰Appleçš„HomeKitç­‰ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸€ä¸ªç»ˆç«¯ä¸Šè¿›è¡Œæ“ä½œï¼Œå°±å¯ä»¥éšä¾¿æ§åˆ¶å®¶é‡Œçš„ç”µå™¨ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/edd57809b1f2e187cf93f1fd196ca4c8.png" title="image-20220524235450650"><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬æœ‰å¾ˆå¤šçš„ç±»ï¼Œå½©ç”µã€å†°ç®±ã€ç©ºè°ƒã€æ´—è¡£æœºã€çƒ­æ°´å™¨ç­‰ï¼Œæ—¢ç„¶ç°åœ¨æˆ‘ä»¬è¦é€šè¿‡ä¸€ä¸ªé¥æ§å™¨å»æ§åˆ¶ä»–ä»¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å°†æ§åˆ¶è¿™äº›ç”µå™¨çš„æŒ‡ä»¤éƒ½ç»™è®¾è®¡å¥½æ‰è¡Œï¼Œå¹¶ä¸”è¿˜ä¸èƒ½æœ‰å¤ªå¼ºçš„å…³è”æ€§ã€‚</p><p>æ‰€æœ‰çš„ç”µå™¨è‚¯å®šéœ€è¦é€šè¿‡è“ç‰™æˆ–æ˜¯çº¢å¤–çº¿æ¥å—é¥æ§å™¨å‘é€çš„è¯·æ±‚ï¼Œæ‰€ä»¥æ‰€æœ‰çš„ç”µå™¨éƒ½æ˜¯æ¥æ”¶è€…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Receiver</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">action</span><span class="params">()</span>;   <span class="comment">//å…·ä½“è¡Œä¸ºï¼Œè¿™é‡Œå°±å†™ä¸€ä¸ªç®—äº†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬è¦æ§åˆ¶è¿™äº›ç”µå™¨ï¼Œé‚£ä¹ˆè‚¯å®šéœ€è¦ä¸€ä¸ªæŒ‡ä»¤æ‰èƒ½æ§åˆ¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Command</span> &#123;   <span class="comment">//æŒ‡ä»¤æŠ½è±¡ï¼Œä¸åŒçš„ç”µå™¨æœ‰æŒ‡ä»¤</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Receiver receiver;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">Command</span><span class="params">(Receiver receiver)</span>&#123;   <span class="comment">//æŒ‡å®šæ­¤å‘½ä»¤å¯¹åº”çš„ç”µå™¨ï¼ˆæ¥å—è€…ï¼‰</span></span><br><span class="line">        <span class="built_in">this</span>.receiver = receiver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        receiver.action();   <span class="comment">//æ‰§è¡Œå‘½ä»¤ï¼Œå®é™…ä¸Šå°±æ˜¯è®©æ¥æ”¶è€…å¼€å§‹å¹²æ´»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬æ¥å®‰æ’ä¸€ä¸ªé¥æ§å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Controller</span> &#123;   <span class="comment">//é¥æ§å™¨åªéœ€è¦æŠŠæˆ‘ä»¬çš„æŒ‡ä»¤å‘å‡ºå»å°±è¡Œäº†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Command command)</span>&#123;</span><br><span class="line">        command.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºè°ƒï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä½œä¸ºæˆ‘ä»¬å‘½ä»¤çš„æ¥æ”¶è€…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AirConditioner</span> <span class="keyword">implements</span> <span class="title class_">Receiver</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">action</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç©ºè°ƒå·²å¼€å¯ï¼Œå‘¼å‘¼å‘¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¼€å¯ç©ºè°ƒçš„å‘½ä»¤ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenCommand</span> <span class="keyword">extends</span> <span class="title class_">Command</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OpenCommand</span><span class="params">(AirConditioner airConditioner)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(airConditioner);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬åªéœ€è¦é€šè¿‡é¥æ§å™¨å‘é€å‡ºå»å°±å¯ä»¥äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">AirConditioner</span> <span class="variable">airConditioner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AirConditioner</span>();   <span class="comment">//å…ˆåˆ›å»ºä¸€ä¸ªç©ºè°ƒ</span></span><br><span class="line">    Controller.call(<span class="keyword">new</span> <span class="title class_">OpenCommand</span>(airConditioner));   <span class="comment">//ç›´æ¥é€šè¿‡é¥æ§å™¨æ¥å‘é€ç©ºè°ƒå¼€å¯å‘½ä»¤</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œé¥æ§å™¨è¿™ä¸ªè§’è‰²å¹¶ä¸éœ€è¦çŸ¥é“å…·ä½“ä¼šæ‰§è¡Œä»€ä¹ˆï¼Œåªéœ€è¦å‘é€å‘½ä»¤å³å¯ï¼Œé¥æ§å™¨å’Œç”µå™¨çš„å…³è”æ€§å°±ä¸å†é‚£ä¹ˆå¼ºäº†ã€‚</p><h2 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h2><p>è¿­ä»£å™¨æˆ‘ä»¬åœ¨JavaSEç¯‡å°±å·²ç»è®²è§£è¿‡äº†ï¼Œè¿­ä»£å™¨å¯ä»¥è¯´æ˜¯æˆ‘ä»¬å­¦ä¹ Javaè¯­è¨€çš„åŸºç¡€ï¼Œæ²¡æœ‰è¿­ä»£å™¨ï¼Œé›†åˆç±»çš„éå†å°±æˆäº†é—®é¢˜ï¼Œæ­£æ˜¯å› ä¸ºæœ‰è¿­ä»£å™¨çš„å­˜åœ¨ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´åŠ ä¼˜é›…çš„ä½¿ç”¨foreachè¯­æ³•ã€‚</p><p>å›é¡¾æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨è¿­ä»£å™¨çš„åœºæ™¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String s : list) &#123;   <span class="comment">//ä½¿ç”¨foreachè¯­æ³•ç³–è¿›è¡Œè¿­ä»£ï¼Œä¾æ¬¡è·å–æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        System.out.println(s);   <span class="comment">//æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ä¹‹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>);</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var2</span> <span class="operator">=</span> list.iterator();   <span class="comment">//å®é™…ä¸Šè¿™é‡Œæœ¬è´¨æ˜¯é€šè¿‡Listç”Ÿæˆçš„è¿­ä»£å™¨æ¥éå†æˆ‘ä»¬æ¯ä¸ªå…ƒç´ çš„</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(var2.hasNext()) &#123;   <span class="comment">//åˆ¤æ–­æ˜¯å¦è¿˜æœ‰å…ƒç´ å¯ä»¥è¿­ä»£ï¼Œæ²¡æœ‰å°±false</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String)var2.next();   <span class="comment">//é€šè¿‡nextæ–¹æ³•å¾—åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ï¼Œè¿­ä»£å™¨ä¼šå‘åç§»åŠ¨ä¸€ä½</span></span><br><span class="line">        System.out.println(s);    <span class="comment">//æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨è¿­ä»£å™¨å¯¹Listè¿›è¡Œéå†æ—¶ï¼Œå®é™…ä¸Šå°±åƒä¸€ä¸ªæŒ‡å‘åˆ—è¡¨å¤´éƒ¨çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬é€šè¿‡ä¸æ–­å‘åç§»åŠ¨æŒ‡é’ˆæ¥ä¾æ¬¡è·å–æ‰€æŒ‡å‘çš„å…ƒç´ ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/3305f3aa722c8d127ecf5a8c1fc1e969.png" title="image-20220525171535024"> <img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/d25718e481aad1e17b6924a15f31387a.png" title="image-20220525171557523"><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä¾ç…§JDKæä¾›çš„è¿­ä»£å™¨æ¥å£ï¼ˆJDKå·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰å¥½äº†ä¸€ä¸ªè¿­ä»£å™¨çš„å…·ä½“ç›¸å…³æ“ä½œï¼‰ï¼Œä¹Ÿæ¥è®¾è®¡ä¸€ä¸ªè¿­ä»£å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayCollection</span>&lt;T&gt; &#123;    <span class="comment">//é¦–å…ˆè®¾è®¡ä¸€ä¸ªç®€å•çš„æ•°ç»„é›†åˆï¼Œä¸€ä¼šæˆ‘ä»¬å°±è¿­ä»£æ­¤é›†åˆå†…çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> T[] array;   <span class="comment">//åº•å±‚ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ArrayCollection</span><span class="params">(T[] array)</span>&#123;   <span class="comment">//privateæ‰ï¼Œè‡ªå·±ç”¨</span></span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ArrayCollection&lt;T&gt; <span class="title function_">of</span><span class="params">(T[] array)</span>&#123;   <span class="comment">//å¼€ä¸ªé™æ€æ–¹æ³•ç›´æ¥å§æ•°ç»„è½¬æ¢æˆArrayCollectionï¼Œå…¶å®å’Œç›´æ¥newä¸€æ ·ï¼Œä½†æ˜¯è¿™æ ·å†™å¥½çœ‹ä¸€ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayCollection</span>&lt;&gt;(array);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å°†æ•°æ®å­˜æ”¾åœ¨æ­¤é›†åˆä¸­äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    String[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>, <span class="string">&quot;DDD&quot;</span>&#125;;</span><br><span class="line">    ArrayCollection&lt;String&gt; collection = ArrayCollection.of(arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬å°±å¯ä»¥æ¥å®ç°è¿­ä»£å™¨æ¥å£äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayCollection</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;T&gt;&#123;   <span class="comment">//å®ç°Iterableæ¥å£è¡¨ç¤ºæ­¤ç±»æ˜¯æ”¯æŒè¿­ä»£çš„</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;    <span class="comment">//éœ€è¦å®ç°iteratoræ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºè¿­ä»£æˆ‘ä»¬é›†åˆä¸­çš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;   <span class="comment">//è¿™é‡Œå®ç°ä¸€ä¸ªï¼Œæ³¨æ„åˆ«ç”¨é™æ€ï¼Œéœ€è¦ä½¿ç”¨å¯¹è±¡ä¸­å­˜æ”¾çš„æ•°ç»„</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> <span class="number">0</span>;   <span class="comment">//è¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆè¡¨ç¤ºå½“å‰çš„è¿­ä»£ä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;     <span class="comment">//åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            <span class="keyword">return</span> cur &lt; array.length;   <span class="comment">//å¦‚æœæŒ‡é’ˆå¤§äºæˆ–ç­‰äºæ•°ç»„æœ€å¤§é•¿åº¦ï¼Œå°±ä¸èƒ½å†ç»§ç»­äº†</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> T <span class="title function_">next</span><span class="params">()</span> &#123;   <span class="comment">//è¿”å›å½“å‰æŒ‡é’ˆä½ç½®çš„å…ƒç´ å¹¶å‘åç§»åŠ¨ä¸€ä½</span></span><br><span class="line">            <span class="keyword">return</span> array[cur++];   <span class="comment">//æ­£å¸¸è¿”å›å¯¹åº”ä½ç½®çš„å…ƒç´ ï¼Œå¹¶å°†æŒ‡é’ˆè‡ªå¢</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä¸€ä¸ªç®€å•é›†åˆç±»è¿›è¡Œè¿­ä»£äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    String[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>, <span class="string">&quot;DDD&quot;</span>&#125;;</span><br><span class="line">    ArrayCollection&lt;String&gt; collection = ArrayCollection.of(arr);</span><br><span class="line">    <span class="keyword">for</span> (String s : collection) &#123;    <span class="comment">//å¯ä»¥ç›´æ¥ä½¿ç”¨foreachè¯­æ³•ç³–ï¼Œå½“ç„¶æœ€åè¿˜æ˜¯ä¼šå˜æˆè¿­ä»£å™¨è°ƒç”¨</span></span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åç¼–è¯‘å‡ºæ¥çš„æ ·å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    String[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>, <span class="string">&quot;DDD&quot;</span>&#125;;</span><br><span class="line">    ArrayCollection&lt;String&gt; collection = ArrayCollection.of(arr);</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var3</span> <span class="operator">=</span> collection.iterator();   <span class="comment">//é¦–å…ˆè·å–è¿­ä»£å™¨ï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨æˆ‘ä»¬å®ç°çš„iteratoræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(var3.hasNext()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String)var3.next();   <span class="comment">//ç›´æ¥ä½¿ç”¨next()æ–¹æ³•ä¸æ–­å‘ä¸‹è·å–</span></span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªè¿­ä»£å™¨æ¥éå†æˆ‘ä»¬çš„å…ƒç´ ã€‚</p><h2 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h2><p>åœ¨æ—©æœŸï¼Œæˆ‘ä»¬æƒ³è¦å’Œåˆ«äººè¿›è¡Œè¯­éŸ³èŠå¤©ï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ç”µè¯çš„æ–¹å¼ï¼Œæˆ‘ä»¬é€šè¿‡æ‹¨æ‰“ä»–äººçš„ç”µè¯å·ç ï¼Œæ¥å»ºç«‹ä¼šè¯ï¼Œä¸è¿‡è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨æƒ³è¦é€šçŸ¥é€šçŸ¥3ä¸ªäººæŸä»¶äº‹æƒ…ï¼Œé‚£ä¹ˆæˆ‘å°±å¾—ä¾æ¬¡ç»™ä¸‰ä¸ªäººæ‰“ç”µè¯ï¼Œç”šè‡³è¿˜ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æŸä¸ªäººçš„ç”µè¯å·ç ï¼Œä½†æ˜¯å…¶ä»–äººæœ‰ï¼Œè¿™æ—¶è¿˜éœ€è¦å‘ŠçŸ¥è¿™ä¸ªäººå¹¶è¿›è¡Œè½¬å‘Šï¼Œå°±å¾ˆéº»çƒ¦ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/image-20230311171826165.png" title="image-20230311171826165"><p>ä½†æ˜¯ç°åœ¨æˆ‘ä»¬æœ‰äº†Facetimeã€æœ‰äº†å¾®ä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶è®©å¤šä¸ªäººå‚ä¸åˆ°ç¾¤é€šè¯ä¸­è¿›è¡Œç¾¤èŠï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªå•ç‹¬è¿›è¡Œé€šè¯æˆ–æ˜¯è½¬è¾¾äº†ã€‚å®é™…ä¸Šæ­£æ˜¯ä¾é äº†ä¸€ä¸ªä¸­é—´å•†ç»™æˆ‘ä»¬æä¾›äº†è¿›è¡Œç¾¤ä½“é€šè¯çš„å¹³å°ï¼Œæˆ‘ä»¬æ‰èƒ½å®ç°æ­¤åŠŸèƒ½ï¼Œè€Œè¿™ä¸ªå¹³å°å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªä¸­é—´äººã€‚åˆæ¯”å¦‚æˆ‘ä»¬æƒ³è¦å»å¤–é¢ç§Ÿæˆ¿ï¼Œä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªé‡Œæœ‰å¯ä»¥ç§Ÿçš„æˆ¿å­å‘¢ï¼Ÿäºæ˜¯æˆ‘ä»¬å°±ä¼šä¸Šå„å¤§ç§Ÿæˆ¿APPä¸Šå»æ‰¾æˆ¿æºï¼ŒåŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨æœ‰æˆ¿å­éœ€è¦å‡ºç§Ÿï¼Œæˆ‘ä»¬ä¹Ÿä¸çŸ¥é“è°ä¼šæƒ³è¦ç§Ÿæˆ¿å­ï¼ŒåŒæ ·çš„æˆ‘ä»¬ä¹Ÿä¼šæŠŠæˆ¿å­æŒ‚åœ¨ç§Ÿæˆ¿APPä¸Šå±•ç¤ºï¼Œè€Œå½“æˆ‘ä»¬å»ç§Ÿæˆ¿æ—¶æˆ–æ˜¯å‡ºç§Ÿæ—¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç§°ä¸ºä¸­ä»‹çš„äººæ¥è·Ÿæˆ‘ä»¬å¯¹æ¥ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§ä¸­ä»‹çš„æ¨¡å¼ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œå¯èƒ½ä¹Ÿä¼šå‡ºç°å¾ˆå¤šçš„å¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›å¯¹è±¡ä¹‹é—´çš„ç›¸äº’è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œå¯èƒ½ä¸€ä¸ªå¯¹è±¡è¦åšä»€ä¹ˆäº‹æƒ…å°±å¾—è”ç³»å¥½å‡ ä¸ªå¯¹è±¡ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/98f5b70e93a37ef5d3c37c24b1630657.png" title="image-20220526174017796"><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨è¿™ä¸­é—´æä¸€ä¸ªä¸­é—´äººï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/004fa519fa7230c915f69a3c4c34ab4e.png" title="image-20220526174129303"><p>è¿™æ ·å½“æˆ‘ä»¬è¦è”ç³»å…¶ä»–äººæ—¶ï¼Œä¸€å¾‹æ‰¾ä¸­ä»‹å°±å¯ä»¥äº†ï¼Œä¸­ä»‹å­˜å‚¨äº†æ‰€æœ‰äººçš„è”ç³»æ–¹å¼ï¼Œè¿™æ ·å°±ä¸ä¼šåƒä¸Šé¢ä¸€æ ·ä¹±æˆä¸€å›¢äº†ã€‚è¿™é‡Œæˆ‘ä»¬å°±ä»¥æˆ¿äº§ä¸­ä»‹çš„ä¾‹å­æ¥ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mediator</span> &#123;   <span class="comment">//æˆ¿äº§ä¸­ä»‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, User&gt; userMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();   <span class="comment">//åœ¨å‡ºå”®çš„æˆ¿å­éœ€è¦å­˜å‚¨ä¸€ä¸‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(String address, User user)</span>&#123;   <span class="comment">//å‡ºå”®æˆ¿å±‹çš„äººï¼Œéœ€è¦å‘Šè¯‰ä¸­ä»‹ä»–çš„æˆ¿å±‹åœ¨å“ªé‡Œ</span></span><br><span class="line">        userMap.put(address, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">find</span><span class="params">(String address)</span>&#123;   <span class="comment">//é€šè¿‡æ­¤æ–¹æ³•æ¥çœ‹çœ‹æœ‰æ²¡æœ‰å¯¹åº”çš„æˆ¿æº</span></span><br><span class="line">        <span class="keyword">return</span> userMap.get(address);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€å°±æ˜¯ç”¨æˆ·äº†ï¼Œç”¨æˆ·æœ‰ä¸¤ç§è§’è‰²ï¼Œä¸€ç§æ˜¯ç§Ÿæˆ¿ï¼Œä¸€ç§æ˜¯å‡ºç§Ÿï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;   <span class="comment">//ç”¨æˆ·å¯ä»¥æ˜¯å‡ºå”®æˆ¿å±‹çš„ä¸€æ–¹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯»æ‰¾æˆ¿å±‹çš„ä¸€æ–¹</span></span><br><span class="line">    String name;</span><br><span class="line">    String tel;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, String tel)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.tel = tel;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">find</span><span class="params">(String address, Mediator mediator)</span>&#123;   <span class="comment">//æ‰¾æˆ¿å­çš„è¯ï¼Œéœ€è¦ä¸€ä¸ªä¸­ä»‹å’Œä½ å…·ä½“æƒ³æ‰¾çš„åœ°æ–¹</span></span><br><span class="line">        <span class="keyword">return</span> mediator.find(address);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name+<span class="string">&quot; (ç”µè¯ï¼š&quot;</span>+tel+<span class="string">&quot;)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user0</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;åˆ˜å¥³å£«&quot;</span>, <span class="string">&quot;10086&quot;</span>);   <span class="comment">//å‡ºç§Ÿäºº</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;æå…ˆç”Ÿ&quot;</span>, <span class="string">&quot;10010&quot;</span>);   <span class="comment">//æ‰¾æˆ¿äºº</span></span><br><span class="line">    <span class="type">Mediator</span> <span class="variable">mediator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Mediator</span>();   <span class="comment">//æˆ‘æ˜¯é»‘å¿ƒä¸­ä»‹</span></span><br><span class="line"></span><br><span class="line">    mediator.register(<span class="string">&quot;æˆéƒ½å¸‚æ­¦ä¾¯åŒºå¤©åºœäº”è¡—ç™½é©¬ç¨‹åºå‘˜&quot;</span>, user0);   <span class="comment">//å…ˆæŠŠæˆ¿å­ç»™ä¸­ä»‹æŒ‚ä¸Šå»</span></span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> user1.find(<span class="string">&quot;æˆéƒ½å¸‚æ­¦ä¾¯åŒºå¤©åºœäº”è¡—ä¸‹ç¡…è°·&quot;</span>, mediator);  <span class="comment">//å¼€å§‹æ‰¾æˆ¿å­</span></span><br><span class="line">    <span class="keyword">if</span>(user == <span class="literal">null</span>) System.out.println(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æˆ¿æº&quot;</span>);</span><br><span class="line"></span><br><span class="line">    user = user1.find(<span class="string">&quot;æˆéƒ½å¸‚æ­¦ä¾¯åŒºå¤©åºœäº”è¡—ç™½é©¬ç¨‹åºå‘˜&quot;</span>, mediator);  <span class="comment">//å¼€å§‹æ‰¾æˆ¿å­</span></span><br><span class="line">    System.out.println(user);   <span class="comment">//æˆåŠŸæ‰¾åˆ°å¯¹åº”æˆ¿æº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­ä»‹è€…æ¨¡å¼ä¼˜åŒ–äº†åŸæœ‰çš„å¤æ‚å¤šå¯¹å¤šå…³ç³»ï¼Œè€Œæ˜¯å°†å…¶ç®€åŒ–ä¸ºä¸€å¯¹å¤šçš„å…³ç³»ï¼Œæ›´å®¹æ˜“ç†è§£ä¸€äº›ã€‚</p><h2 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h2><blockquote><p>2021å¹´10æœˆ1æ—¥ä¸‹åˆï¼Œæ²³å—é©»é©¬åº—çš„ä¸€å13å²å¥³ä¸­å­¦ç”Ÿï¼Œå› å’ŒåŒå­¦å‘ç”Ÿä¸æ„‰å¿«å–ä¸‹åŠç“¶ç™¾è‰æ¯ã€‚</p><p>10æœˆ5æ—¥ï¼ŒæŠ¢æ•‘å››å¤©æƒ…å†µæ¶åŒ–ï¼Œå®¶å±æ³£ä¸æˆå£°ç§°â€œè‚ºéƒ¨ä¸€ä¸ªå°æ—¶ä¸€å˜â€ã€‚</p><p>10æœˆ6æ—¥ä¸‹åˆï¼Œæ®æ­¦è­¦æ²³å—çœæ€»é˜ŸåŒ»é™¢æ¶ˆæ¯ï¼Œâ€œç›®å‰å¥³å­©ä»åœ¨åŒ»é™¢æ•‘æ²»ã€‚â€</p></blockquote><p>å–ä¸‹ç™¾è‰æ¯ï¼Œä¼šç»™ä½ åæ‚”çš„æ—¶é—´ï¼Œä½†æ˜¯ä¸ä¼šç»™ä½ åæ‚”çš„æœºä¼šï¼ˆç™¾è‰æ¯å«æœ‰å‰§æ¯’ç‰©è´¨ï¼Œä¼šç›´æ¥å¯¼è‡´è‚ºéƒ¨çº¤ç»´åŒ–ï¼Œè¿™æ˜¯ä¸å¯é€†çš„ï¼Œä¸€èˆ¬æ­»äº¡è¿‡ç¨‹åœ¨ä¸€å‘¨å·¦å³ï¼Œå³ä½¿å®¶é‡ŒèŠ±äº†å†å¤šçš„é’±ï¼Œæ¥å—äº†å†å¤šçš„æ²»ç–—ï¼Œä¹Ÿæ— æ³•é€†è½¬è¿™ä¸€è¿‡ç¨‹ï¼‰ç›¸ä¿¡å¦‚æœå†ç»™è¿™ä½å°å¥³å­©ä¸€æ¬¡æœºä¼šï¼Œå›åˆ°æ‹¿èµ·ç™¾è‰æ¯çš„é‚£ä¸€åˆ»ï¼Œä¸€å®šä¸ä¼šå†å†²åŠ¨åœ°å–ä¸‹äº†å§ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/image-20230311171902933.png" title="image-20230311171902933"><p>å¤‡å¿˜å½•æ¨¡å¼ï¼Œå°±ä¸ºæˆ‘ä»¬çš„è½¯ä»¶æä¾›äº†ä¸€ä¸ªå¯å›æº¯çš„æ—¶é—´èŠ‚ç‚¹ï¼Œå¯èƒ½æˆ‘ä»¬ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­æŸä¸€æ­¥å‡ºç°äº†é”™è¯¯ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥å›åˆ°ä¹‹å‰çš„æŸä¸ªè¢«ä¿å­˜çš„èŠ‚ç‚¹ä¸Šé‡æ–°æ¥è¿‡ï¼ˆå°±åƒè‰¾å…‹çš„å¤§æ‹›ï¼‰ï¼Œæˆ‘ä»¬å¹³æ—¶ç¼–è¾‘æ–‡æœ¬çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬ç¼–è¾‘å‡ºç°é”™è¯¯æ—¶ï¼Œå°±éœ€è¦æ’¤å›ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦æŒ‰ä¸‹<code>Ctrl+Z</code>å°±å¯ä»¥å›åˆ°ä¸Šä¸€æ­¥ï¼Œè¿™æ ·å°±å¤§å¤§æ–¹ä¾¿äº†æˆ‘ä»¬çš„æ–‡æœ¬ç¼–è¾‘ã€‚</p><p>å…¶å®å¤‡å¿˜å½•æ¨¡å¼ä¹Ÿå¯ä»¥åº”ç”¨åˆ°æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œå¦‚æœä½ å­¦ä¹ è¿‡å®‰å“å¼€å‘ï¼Œå®‰å“ç¨‹åºåœ¨å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šé‡æ–°åŠ è½½<code>Activity</code>ï¼Œå®é™…ä¸Šå®‰å“ä¸­<code>Activity</code>çš„<code>onSaveInstanceState</code>å’Œ<code>onRestoreInstanceState</code>å°±æ˜¯ç”¨åˆ°äº†å¤‡å¿˜å½•æ¨¡å¼ï¼Œåˆ†åˆ«ç”¨äºä¿å­˜å’Œæ¢å¤ï¼Œè¿™æ ·å°±ç®—é‡æ–°åŠ è½½ä¹Ÿå¯ä»¥æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å°±æ¨¡æ‹Ÿä¸€ä¸‹å¯¹è±¡çš„çŠ¶æ€ä¿å­˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String currentWork;   <span class="comment">//å½“å‰æ­£åœ¨åšçš„äº‹æƒ…</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> percentage;   <span class="comment">//å½“å‰çš„å·¥ä½œå®Œæˆç™¾åˆ†æ¯”</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">(String currentWork)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.currentWork = currentWork;</span><br><span class="line">        <span class="built_in">this</span>.percentage = <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æˆ‘ç°åœ¨æ­£åœ¨åšï¼š&quot;</span>+currentWork+<span class="string">&quot; (è¿›åº¦ï¼š&quot;</span>+percentage+<span class="string">&quot;%)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬éœ€è¦ä¿å­˜å®ƒåœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªçŠ¶æ€ä¿å­˜ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> String currentWork;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> percentage;</span><br><span class="line"></span><br><span class="line">    State(String currentWork, <span class="type">int</span> percentage) &#123;   <span class="comment">//ä»…å¼€æ”¾ç»™åŒä¸€ä¸ªåŒ…ä¸‹çš„Studentç±»ä½¿ç”¨</span></span><br><span class="line">        <span class="built_in">this</span>.currentWork = currentWork;</span><br><span class="line">        <span class="built_in">this</span>.percentage = percentage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬æ¥å°†çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤æ“ä½œéƒ½å®ç°ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">State</span>(currentWork, percentage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">restore</span><span class="params">(State state)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.currentWork = state.currentWork;</span><br><span class="line">        <span class="built_in">this</span>.percentage = state.percentage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    student.work(<span class="string">&quot;å­¦Java&quot;</span>);   <span class="comment">//å¼€å§‹å­¦Java</span></span><br><span class="line">    System.out.println(student);</span><br><span class="line"></span><br><span class="line">    <span class="type">State</span> <span class="variable">savedState</span> <span class="operator">=</span> student.save();   <span class="comment">//ä¿å­˜ä¸€ä¸‹å½“å‰çš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">    student.work(<span class="string">&quot;æ‰“ç”µåŠ¨&quot;</span>);   <span class="comment">//åˆšæ‰“å¼€Bç«™æ’­æ”¾è§†é¢‘ï¼Œå­¦ä¸€åŠå¼€å§‹æ‘†çƒ‚äº†</span></span><br><span class="line">    System.out.println(student);</span><br><span class="line"></span><br><span class="line">    student.restore(savedState);   <span class="comment">//ä¸¤çº§åè½¬ï¼å›åˆ°ä¸Šä¸€ä¸ªä¿å­˜çš„çŠ¶æ€</span></span><br><span class="line">    System.out.println(student);   <span class="comment">//å›åˆ°å­¦Javaçš„çŠ¶æ€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶åœ¨å­¦ä¹ Javaçš„è¿‡ç¨‹ä¸­ï¼Œä¸­é€”æ‘†çƒ‚äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ—¶å…‰å€’æµï¼Œå›åˆ°è¿˜æ²¡å¼€å§‹æ‘†çƒ‚çš„æ—¶å€™ï¼Œç»§ç»­å­¦ä¹ Javaï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/f00ca7831b8e31ce1ea0643f5a446b67.png" title="image-20220527163947219"><p>ä¸è¿‡å¤‡å¿˜å½•æ¨¡å¼ä¸ºäº†å»ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä¼šå ç”¨å¤§é‡çš„èµ„æºï¼Œå°¤å…¶æ˜¯é‚£ç§å±æ€§å¾ˆå¤šçš„å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦åˆç†çš„ä½¿ç”¨æ‰èƒ½ä¿è¯ç¨‹åºç¨³å®šè¿è¡Œã€‚</p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><p>ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œä¸€å¹…æœ‰åºæ‘†æ”¾çš„å¤šç±³è¯ºéª¨ç‰Œï¼Œåœ¨æˆ‘ä»¬æ¨åˆ°ç¬¬ä¸€ä¸ªéª¨ç‰Œæ—¶ï¼Œåé¢çš„éª¨ç‰Œä¼šä¸æ–­åœ°è¢«ä¸Šä¸€ä¸ªéª¨ç‰Œæ¨å€’ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/ed3a8e039f7b433d36ff3cfb3e761a15.png" title="image-20220527164444210"><p>åœ¨Javaä¸­ï¼Œä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå¯èƒ½å°±ä¼šå½±å“åˆ°å…¶ä»–çš„å¯¹è±¡ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡å¯èƒ½ä¹Ÿä¼šè”åŠ¨çš„è¿›è¡Œæ”¹å˜ã€‚è¿˜æœ‰æˆ‘ä»¬ä¹‹å‰é‡åˆ°è¿‡çš„ç›‘å¬å™¨æœºåˆ¶ï¼Œå½“å…·ä½“çš„äº‹ä»¶è§¦å‘æ—¶ï¼Œæˆ‘ä»¬åœ¨ä¸€å¼€å§‹åˆ›å»ºçš„ç›‘å¬å™¨å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„é€»è¾‘ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå½“å¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§‚å¯Ÿè€…èƒ½å¤Ÿç«‹å³è§‚å¯Ÿåˆ°å¹¶è¿›è¡Œä¸€äº›è”åŠ¨æ“ä½œï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªè§‚å¯Ÿè€…æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Observer</span> &#123;   <span class="comment">//è§‚å¯Ÿè€…æ¥å£</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;   <span class="comment">//å½“å¯¹è±¡æœ‰æ›´æ–°æ—¶ï¼Œä¼šå›è°ƒæ­¤æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬æ¥å†™ä¸€ä¸ªæ”¯æŒè§‚å¯Ÿè€…çš„å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Set&lt;Observer&gt; observerSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">observe</span><span class="params">(Observer observer)</span> &#123;   <span class="comment">//æ·»åŠ è§‚å¯Ÿè€…</span></span><br><span class="line">        observerSet.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span> &#123;   <span class="comment">//æ¨¡æ‹Ÿå¯¹è±¡è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">        observerSet.forEach(Observer::update);   <span class="comment">//å½“å¯¹è±¡å‘ç”Ÿä¿®æ”¹æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œå¹¶è¿›è¡Œæ–¹æ³•å›è°ƒ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬å°±å¯ä»¥æµ‹è¯•ä¸€ä¸‹äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Subject</span>();</span><br><span class="line">    subject.observe(() -&gt; System.out.println(<span class="string">&quot;æˆ‘æ˜¯ä¸€å·è§‚å¯Ÿè€…ï¼&quot;</span>));</span><br><span class="line">    subject.observe(() -&gt; System.out.println(<span class="string">&quot;æˆ‘æ˜¯äºŒå·è§‚å¯Ÿè€…ï¼&quot;</span>));</span><br><span class="line">    subject.modify();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±ç®€å•å®ç°äº†ä¸€ä¸‹è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå½“ç„¶JDKä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†å®ç°è§‚å¯Ÿè€…æ¨¡å¼ç›¸å…³çš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Observable;    <span class="comment">//java.utilåŒ…ä¸‹æä¾›çš„è§‚å¯Ÿè€…æŠ½è±¡ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Subject</span> <span class="keyword">extends</span> <span class="title class_">Observable</span> &#123;   <span class="comment">//ç»§æ‰¿æ­¤æŠ½è±¡ç±»è¡¨ç¤ºæ”¯æŒè§‚å¯Ÿè€…</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯¹å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.setChanged();    <span class="comment">//å½“å¯¹å¯¹è±¡ä¿®æ”¹åï¼Œéœ€è¦setChangedæ¥è®¾å®šä¸ºå·²ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">        <span class="built_in">this</span>.notifyObservers(<span class="keyword">new</span> <span class="title class_">Date</span>());   <span class="comment">//ä½¿ç”¨notifyObserversæ–¹æ³•æ¥é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</span></span><br><span class="line">      	<span class="comment">//æ³¨æ„åªæœ‰å·²ä¿®æ”¹çŠ¶æ€ä¸‹é€šçŸ¥è§‚å¯Ÿè€…æ‰ä¼šæœ‰æ•ˆï¼Œå¹¶ä¸”å¯ä»¥ç»™è§‚å¯Ÿè€…ä¼ é€’å‚æ•°ï¼Œè¿™é‡Œä¼ é€’äº†ä¸€ä¸ªæ—¶é—´å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Subject</span>();</span><br><span class="line">    subject.addObserver((o, arg) -&gt; System.out.println(<span class="string">&quot;ç›‘å¬åˆ°å˜åŒ–ï¼Œå¹¶å¾—åˆ°å‚æ•°ï¼š&quot;</span>+arg));  </span><br><span class="line">  	<span class="comment">//æ³¨æ„è¿™é‡Œçš„Observeræ˜¯java.utilåŒ…ä¸‹æä¾›çš„</span></span><br><span class="line">    subject.modify();   <span class="comment">//è¿›è¡Œä¿®æ”¹æ“ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h2><p>åœ¨æ ‡å‡†å¤§æ°”å‹ä¸‹ï¼Œæ°´åœ¨0åº¦æ—¶ä¼šç»“å†°å˜æˆå›ºæ€ï¼Œåœ¨0-100åº¦ä¹‹é—´æ—¶ï¼Œä¼šå‘ˆç°æ¶²æ€ï¼Œ100åº¦ä»¥ä¸Šä¼šå˜æˆæ°”æ€ï¼Œæ°´è¿™ç§ç‰©è´¨åœ¨ä¸åŒçš„æ¸©åº¦ä¸‹å‘ˆç°å‡ºä¸åŒçš„çŠ¶æ€ï¼Œè€Œæˆ‘ä»¬çš„å¯¹è±¡ï¼Œå¯èƒ½ä¹Ÿä¼šåƒè¿™æ ·å­˜åœ¨å¾ˆå¤šç§çŠ¶æ€ï¼Œç”šè‡³åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä¼šæœ‰ä¸åŒçš„è¡Œä¸ºï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡çŠ¶æ€æ¨¡å¼æ¥å®ç°ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/b905e3bc4b5aa9409d4c16666ce1ed67.png" title="image-20220527215236172"><p>æˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œç„¶åå­¦ç”Ÿçš„å­¦ä¹ æ–¹æ³•ä¼šæ ¹æ®çŠ¶æ€ä¸åŒè€Œå‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬å…ˆè®¾è®¡ä¸€ä¸ªçŠ¶æ€æšä¸¾ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;   <span class="comment">//çŠ¶æ€ç›´æ¥ä½¿ç”¨æšä¸¾å®šä¹‰</span></span><br><span class="line">    NORMAL, LAZY</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªå­¦ç”Ÿç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> State state;   <span class="comment">//ä½¿ç”¨ä¸€ä¸ªæˆå‘˜æ¥å­˜å‚¨çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(State state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;  </span><br><span class="line">        <span class="keyword">switch</span> (state) &#123;   <span class="comment">//æ ¹æ®ä¸åŒçš„çŠ¶æ€ï¼Œå­¦ä¹ æ–¹æ³•ä¼šæœ‰ä¸åŒçš„ç»“æœ</span></span><br><span class="line">            <span class="keyword">case</span> LAZY:</span><br><span class="line">                System.out.println(<span class="string">&quot;åªè¦æˆ‘ä¸åŠªåŠ›ï¼Œè€æ¿å°±åˆ«æƒ³è¿‡ä¸Šæƒ³è¦çš„ç”Ÿæ´»ï¼Œå¼€æ‘†ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> NORMAL:</span><br><span class="line">                System.out.println(<span class="string">&quot;æ‹¼æç™¾å¤©ï¼Œæˆ‘è¦ä¸Šæ¸…åå¤§å­¦ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ï¼Œæ˜¯å¦å­¦ä¹ ä¼šå‡ºç°ä¸åŒçš„æ•ˆæœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    student.setState(State.NORMAL);   <span class="comment">//å…ˆæ­£å¸¸æ¨¡å¼</span></span><br><span class="line">    student.study();</span><br><span class="line"></span><br><span class="line">    student.setState(State.LAZY);   <span class="comment">//å¼€å¯æ‘†çƒ‚æ¨¡å¼</span></span><br><span class="line">    student.study();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çŠ¶æ€æ¨¡å¼æ›´åŠ å¼ºè°ƒå½“å‰çš„å¯¹è±¡æ‰€å¤„çš„çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å¯¹è±¡ä¸åŒçš„çŠ¶æ€å†³å®šå…¶ä»–çš„å¤„ç†é€»è¾‘ã€‚</p><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><p>å¯¹é¢å¡å…¹å…‹æ‰“é‡è¢«å¼€äº†ï¼Œæˆ‘ä»¬æ˜¯å»æ‰“å°é¾™è¿˜æ˜¯æ‰“å¤§é¾™å‘¢ï¼Ÿè¿™å°±è¦çœ‹æˆ‘ä»¬å›¢é˜Ÿè¿™ä¸€å±€çš„æ‰“æ³•ç­–ç•¥äº†ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/bea70b090fa047ff62989c3b0b864a6e.png" title="image-20220527222552772"><p>æˆ‘ä»¬å¯ä»¥ä¸ºå¯¹è±¡è®¾å®šä¸€ç§ç­–ç•¥ï¼Œè¿™æ ·å¯¹è±¡ä¹‹åçš„è¡Œä¸ºå°±ä¼šæŒ‰ç…§æˆ‘ä»¬åœ¨ä¸€å¼€å§‹æŒ‡å®šçš„ç­–ç•¥è€Œå†³å®šäº†ï¼Œçœ‹èµ·æ¥å’Œå‰é¢çš„çŠ¶æ€æ¨¡å¼å¾ˆåƒï¼Œä½†æ˜¯ï¼Œå®ƒä¸çŠ¶æ€æ¨¡å¼çš„åŒºåˆ«åœ¨äºï¼Œè¿™ç§è½¬æ¢æ˜¯â€œä¸»åŠ¨â€çš„ï¼Œæ˜¯ç”±æˆ‘ä»¬å»æŒ‡å®šï¼Œè€ŒçŠ¶æ€æ¨¡å¼ï¼Œå¯èƒ½æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨åˆ‡æ¢çš„ã€‚</p><p>å…¶å®ç­–ç•¥æ¨¡å¼æˆ‘ä»¬ä¹‹å‰ä¹Ÿé‡åˆ°è¿‡ï¼Œæ¯”å¦‚çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">10</span>,</span><br><span class="line">            TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;&gt;(),  <span class="comment">//è¿™é‡Œä¸ç»™æ’é˜Ÿ</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());   <span class="comment">//å½“çº¿ç¨‹æ± æ— æ³•å†ç»§ç»­åˆ›å»ºæ–°ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±å†³å®šä½¿ç”¨ä»€ä¹ˆæ‹’ç»ç­–ç•¥</span></span><br><span class="line"></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">60</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    executor.execute(runnable);   <span class="comment">//è¿ç»­æäº¤ä¸¤æ¬¡ä»»åŠ¡ï¼Œè‚¯å®šå¡ä¸ä¸‹ï¼Œè¿™æ—¶å°±å¾—èµ°æ‹’ç»äº†</span></span><br><span class="line">    executor.execute(runnable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¦‚æœä½¿ç”¨AbortPolicyï¼Œé‚£ä¹ˆå°±æ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/88761aa9d7639af2dfd4620c8b0506fa.png" title="image-20220527223231753"><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ç­–ç•¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">10</span>,</span><br><span class="line">            TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;&gt;(),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardOldestPolicy());   <span class="comment">//ä½¿ç”¨DiscardOldestPolicyç­–ç•¥ä»é˜Ÿåˆ—ä¸­ä¸¢å¼ƒ</span></span><br></pre></td></tr></table></figure><p>è¿™ç§ç­–ç•¥å°±ä¼šä»ç­‰å¾…é˜Ÿåˆ—ä¸­è¸¢å‡ºä¸€ä¸ªä¹‹å‰çš„ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œçš„ç­‰å¾…é˜Ÿåˆ—æ˜¯æ²¡æœ‰å®¹é‡çš„é‚£ç§ï¼Œæ‰€ä»¥ä¼šç›´æ¥ç‚¸æ‰ï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/7ba9203ade5a1dab5270fb0f1aa9e3af.png" title="image-20220527223510016"><p>å†æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæ’åºç±»ï¼Œä½†æ˜¯æ ¹æ®ä¸åŒçš„ç­–ç•¥ï¼Œä¼šä½¿ç”¨ä¸åŒçš„æ’åºæ–¹æ¡ˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Strategy</span> &#123;   <span class="comment">//ç­–ç•¥æ¥å£ï¼Œä¸åŒçš„ç­–ç•¥å®ç°ä¹Ÿä¸åŒ</span></span><br><span class="line"></span><br><span class="line">    <span class="type">Strategy</span> <span class="variable">SINGLE</span> <span class="operator">=</span> Arrays::sort;   <span class="comment">//å•çº¿ç¨‹æ’åºæ–¹æ¡ˆ</span></span><br><span class="line">    <span class="type">Strategy</span> <span class="variable">PARALLEL</span> <span class="operator">=</span> Arrays::parallelSort;   <span class="comment">//å¹¶è¡Œæ’åºæ–¹æ¡ˆ</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] array)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ’åºç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sorter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Strategy strategy;   <span class="comment">//ç­–ç•¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStrategy</span><span class="params">(Strategy strategy)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] array)</span>&#123;</span><br><span class="line">        strategy.sort(array);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æŒ‡å®šä¸åŒçš„ç­–ç•¥è¿›è¡Œæ’åºäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Sorter</span> <span class="variable">sorter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sorter</span>();</span><br><span class="line">    sorter.setStrategy(Strategy.PARALLEL);    <span class="comment">//æŒ‡å®šä¸ºå¹¶è¡Œæ’åºæ–¹æ¡ˆ</span></span><br><span class="line">    </span><br><span class="line">    sorter.sort(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">7</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h2><p>å…¬å›­ä¸­å­˜åœ¨å¤šä¸ªæ™¯ç‚¹ï¼Œä¹Ÿå­˜åœ¨å¤šä¸ªæ¸¸å®¢ï¼Œä¸åŒçš„æ¸¸å®¢å¯¹åŒä¸€ä¸ªæ™¯ç‚¹çš„è¯„ä»·å¯èƒ½ä¸åŒï¼›åŒ»é™¢åŒ»ç”Ÿå¼€çš„å¤„æ–¹å•ä¸­åŒ…å«å¤šç§è¯å…ƒç´ ï¼ŒæŸ»çœ‹å®ƒçš„åˆ’ä»·å‘˜å’Œè¯æˆ¿å·¥ä½œäººå‘˜å¯¹å®ƒçš„å¤„ç†æ–¹å¼ä¹Ÿä¸åŒï¼Œåˆ’ä»·å‘˜æ ¹æ®å¤„æ–¹å•ä¸Šé¢çš„è¯å“åå’Œæ•°é‡è¿›è¡Œåˆ’ä»·ï¼Œè¯æˆ¿å·¥ä½œäººå‘˜æ ¹æ®å¤„æ–¹å•çš„å†…å®¹è¿›è¡ŒæŠ“è¯ï¼Œç›¸å¯¹äºå¤„æ–¹å•æ¥è¯´ï¼Œåˆ’ä»·å‘˜å’Œè¯æˆ¿å·¥ä½œäººå‘˜å°±æ˜¯å®ƒçš„è®¿é—®è€…ï¼Œä¸è¿‡è®¿é—®è€…çš„è®¿é—®æ–¹å¼å¯èƒ½ä¼šä¸åŒã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/364ea8cc/0d006eb74b1502c4501480485588c8fe.png" title="image-20220527231226552"><p>åœ¨æˆ‘ä»¬çš„Javaç¨‹åºä¸­ï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è®¿é—®è€…æ¨¡å¼æ¥è¿›è¡Œè®¾è®¡ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æ—¥ä»¥ç»§å¤œåœ°åŠªåŠ›ï¼Œç»ˆäºåœ¨æŸæŸæ¯”èµ›èµ¢å¾—äº†å† å†›ï¼Œè€Œä¸åŒçš„äººå¯¹äºè¿™åˆ†è£èª‰ï¼Œå´æœ‰ç€ä¸åŒçš„ååº”ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Prize</span> &#123;   <span class="comment">//å¥–</span></span><br><span class="line">    String name;   <span class="comment">//æ¯”èµ›åç§°</span></span><br><span class="line">    String level;    <span class="comment">//ç­‰çº§</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Prize</span><span class="params">(String name, String level)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLevel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> level;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªè®¿é—®è€…æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Visitor</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Prize prize)</span>;   <span class="comment">//visitæ–¹æ³•æ¥è®¿é—®æˆ‘ä»¬çš„å¥–é¡¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯è®¿é—®è€…ç›¸å…³çš„å®ç°äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">implements</span> <span class="title class_">Visitor</span> &#123;   <span class="comment">//æŒ‡å¯¼è€å¸ˆä½œä¸ºä¸€ä¸ªè®¿é—®è€…</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Prize prize)</span> &#123;   <span class="comment">//å®ƒåªå…³å¿ƒä½ å¾—äº†ä»€ä¹ˆå¥–ä»¥åŠæ˜¯å‡ ç­‰å¥–ï¼Œè¿™ä¹Ÿå…³ä¹è€å¸ˆçš„è£èª‰</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¾—å¥–æ˜¯ä»€ä¹ˆå¥–ï¼Ÿ&quot;</span>+prize.name);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¾—äº†å‡ ç­‰å¥–ï¼Ÿ&quot;</span>+prize.level);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Boss</span> <span class="keyword">implements</span> <span class="title class_">Visitor</span>&#123;    <span class="comment">//ä½ çš„å…¬å¸è€æ¿ä½œä¸ºä¸€ä¸ªè®¿é—®è€…</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Prize prize)</span> &#123;   <span class="comment">//ä½ çš„è€æ¿åªå…³å¿ƒè¿™äº›èƒ½ä¸èƒ½ä¸ºå…¬å¸å¸¦æ¥ä»€ä¹ˆæ•ˆç›Šï¼Œå¥–æœ¬èº«å¹¶ä¸é‡è¦</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ çš„å¥–é¡¹å¤§ä¹ˆï¼Œèƒ½å¤Ÿä¸ºå…¬å¸å¸¦æ¥ä»€ä¹ˆæ•ˆç›Šä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿˜ä¸å¦‚è€è€å®å®åŠ ç­ç»™æˆ‘å¤šå¹²å¹²ï¼Œåˆ«å»æè¿™äº›æ²¡ç”¨çš„&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Classmate</span> <span class="keyword">implements</span> <span class="title class_">Visitor</span>&#123;   <span class="comment">//ä½ çš„åŒå­¦ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè®¿é—®è€…</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Prize prize)</span> &#123;   <span class="comment">//ä½ çš„åŒå­¦ä¹Ÿå…³å¿ƒä½ å¾—äº†ä»€ä¹ˆå¥–ï¼Œä¸è¿‡æ˜¯å› ä¸ºä½ æ˜¯ä»–çš„å¥–å­¦é‡‘ç«äº‰å¯¹æ‰‹ï¼Œä»–å…¶å®å¹¶ä¸å¸Œæœ›ä½ å¾—å¥–</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¾—äº†&quot;</span>+prize.name+<span class="string">&quot;å¥–å•Šï¼Œè¿˜å¯ä»¥&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸è¿‡è¿™ä¸ªå¥–æ²¡ä»€ä¹ˆå«é‡‘é‡ï¼Œä¸‹æ¬¡åˆ«å»äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Family</span> <span class="keyword">implements</span> <span class="title class_">Visitor</span>&#123;    <span class="comment">//ä½ çš„å®¶äººä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè®¿é—®è€…</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Prize prize)</span> &#123;   <span class="comment">//ä½ çš„å®¶äººå¹¶ä¸æ˜¯æœ€å…³å¿ƒä½ å¾—äº†ä»€ä¹ˆå¥–ï¼Œè€Œæ˜¯å…ˆå…³å¿ƒä½ è‡ªå·±ç„¶åæ‰æ˜¯å¥–é¡¹ï¼Œä»–ä»¬æ‰æ˜¯çœŸæ­£å¸Œæœ›ä½ å¥½çš„äººã€‚è¿™ä¸ªä¸–ç•Œå¾ˆæ®‹é…·ï¼Œå¯èƒ½ä½ ä¼šè¢«æ¬ºè´Ÿå¾—éä½“é³ä¼¤ï¼Œå¯èƒ½ä½ ä¼šè§‰å¾—æ´»ç€å¦‚æ­¤è‰°éš¾ï¼Œä½†æ˜¯ä½ çš„èƒŒåè‡³å°‘è¿˜æœ‰çˆ±ä½ çš„äººï¼Œä¸ºäº†ä»–ä»¬ï¼Œæ€èƒ½å°±æ­¤é©»è¶³ã€‚</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å­©å­ï¼Œè¾›è‹¦äº†ï¼Œæœ‰æ²¡æœ‰å¥½å¥½ç…§é¡¾è‡ªå·±å•Š&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¾—äº†ä»€ä¹ˆå¥–å•Šï¼Ÿ&quot;</span>+prize.name+<span class="string">&quot;ï¼Œå¾ˆä¸é”™ï¼Œè¦ç»§ç»­åŠ æ²¹å•Šï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬å°±è®¾è®¡äº†å››ç§è®¿é—®è€…ï¼Œä½†æ˜¯ä¸åŒçš„è®¿é—®è€…å¯¹äºæŸä¸€ä»¶äº‹åŠ¡çš„å¤„ç†å¯èƒ½ä¼šä¸åŒã€‚è®¿é—®è€…æ¨¡å¼æŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œè§£è€¦ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ï¼Œæˆ‘ä»¬ä¸Šé¢å°±æ˜¯å°†å¥–é¡¹æœ¬èº«çš„å±æ€§å’Œå¯¹äºå¥–é¡¹çš„ä¸åŒæ“ä½œè¿›è¡Œäº†åˆ†ç¦»ã€‚</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang">å°äº”</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang/posts/364ea8cc/">https://xiaowu95.wang/posts/364ea8cc/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://xiaowu95.wang" target="_blank">å°äº”çš„ä¸ªäººæ‚è´§é“º</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/jvm/">jvm</a><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a></div><div class="post-share"><div class="social-share" data-image="/img/nba-logo17.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>æ„Ÿè°¢æ”¯æŒ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wxpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/wxpay.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/b2d50f71/" title="è®°å½•å®¹å™¨åŒ–åçš„javaé¡¹ç›®é—®é¢˜å¤„ç†"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo6.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">è®°å½•å®¹å™¨åŒ–åçš„javaé¡¹ç›®é—®é¢˜å¤„ç†</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯: ç”Ÿäº§ç¯å¢ƒ, é¡¹ç›®cpuä¸€ç›´æŠ¥è­¦ è¿›å…¥å®¹å™¨æŸ¥çœ‹cpuå ç”¨é«˜çš„è¿›ç¨‹top æŸ¥çœ‹å ç”¨cpué«˜çš„çº¿ç¨‹top -Hp 90 è¿™é‡Œå¾—åˆ°å ç”¨èµ„æºé«˜çš„çº¿ç¨‹, å‡å¦‚æ˜¯93 è·å–çº¿ç¨‹idçš„16è¿›åˆ¶printf &quot;%x\n&quot; 93 è¿™é‡Œå¾—åˆ°çš„5d å¯¹äºåªæœ‰jreçš„é•œåƒ, éœ€è¦å®‰è£…å¯¹åº”ç‰ˆæœ¬jdkç„¶åæ‰“å°å †æ ˆä¿¡æ¯æ‰“å°å †æ ˆä¿¡æ¯: ./jstack -l 90 &gt; jstack.log æŸ¥æ‰¾åˆ°å¯¹åº”çº¿ç¨‹çš„ä¿¡æ¯: cat jstack.log |grep &quot;nid=0x5d&quot; æŸ¥çœ‹gcæ ¼å¼: jstat -gcutil pid interval(ms) næ¬¡ jstat -gcutil 90 5000 10 123456789101112131415161718192021222324S0 S1 E O M CCS YGC YGCT FGC FGCT GCT0.00 0.00 99.64 100.00 94.39 92.31 285 14.940 474 329.694 344.6350.00 0.00 98.78 99.99 94.40 92.31 2...</div></div></div></a><a class="pagination-related" href="/posts/1f565aa3/" title="åˆ©ç”¨githubçš„actionså®ç°blogçš„cicd"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo16.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">åˆ©ç”¨githubçš„actionså®ç°blogçš„cicd</div></div><div class="info-2"><div class="info-item-1">å‚è€ƒ: https://zellwk.com/blog/github-actions-deploy/ é¦–å…ˆåšå®¢å¦‚æœä½¿ç”¨hexoæ­å»º, ä¸”å€ŸåŠ©hexo-deployer-gitä¾èµ–è¿›è¡Œè¿œç¨‹ä¸Šä¼ çš„è¯, åˆ™éœ€è¦å°†repoè®¾ç½®ä¸ºsshæ–¹å¼, httpsæ–¹å¼æ˜¯ä¸æ”¯æŒçš„, å¦‚ä¸‹ 12345deploy: type: git # Windows: https://github.com/wang-xiaowu/wang-xiaowu.github.io.git repo: git@github.com:wang-xiaowu/wang-xiaowu.github.io.git branch: master å½“å‰æ ·ä¾‹ä¸º, ä¸€ä¸ªblog_sourceåº“(æœªå…¬å¼€)å­˜å‚¨æœªç¼–è¯‘mdæ–‡æ¡£, èµ°cicdæµç¨‹ä¹‹å, å°†ç¼–è¯‘å¥½çš„èµ„æºåˆ©ç”¨hexo dçš„æ–¹å¼éƒ¨ç½²åˆ°å¦ä¸€ä¸ªä¸€ä¸ªgithubæºä»“åº“(å¼€æºåº“) é¦–å…ˆé…ç½®ssh&#x2F;private key1ssh-keygen -t rsa -b 4096 -C &quot;943915349@qq.com&quot; -f key é‚®ç®±ä¿®æ”¹ä¸ºæœ¬äººé‚®ç®± å¤...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/e4a43f6a/" title="Java-HashMapåº•å±‚å®ç°åŸç†"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo19.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-15</div><div class="info-item-2">Java-HashMapåº•å±‚å®ç°åŸç†</div></div><div class="info-2"><div class="info-item-1">è½¬è‡ªï¼šhttps://mrbird.cc/Java-HashMap%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html æœ¬èŠ‚ç”¨äºè®°å½•Java HashMapåº•å±‚æ•°æ®ç»“æ„ã€æ–¹æ³•å®ç°åŸç†ç­‰ï¼ŒåŸºäºJDK 1.8ã€‚ åº•å±‚æ•°æ®ç»“æ„Java HashMapåº•å±‚é‡‡ç”¨å“ˆå¸Œè¡¨ç»“æ„ï¼ˆæ•°ç»„+é“¾è¡¨ã€JDK1.8åä¸ºæ•°ç»„+é“¾è¡¨æˆ–çº¢é»‘æ ‘ï¼‰å®ç°ï¼Œç»“åˆäº†æ•°ç»„å’Œé“¾è¡¨çš„ä¼˜ç‚¹ï¼š æ•°ç»„ä¼˜ç‚¹ï¼šé€šè¿‡æ•°ç»„ä¸‹æ ‡å¯ä»¥å¿«é€Ÿå®ç°å¯¹æ•°ç»„å…ƒç´ çš„è®¿é—®ï¼Œæ•ˆç‡æé«˜ï¼› é“¾è¡¨ä¼˜ç‚¹ï¼šæ’å…¥æˆ–åˆ é™¤æ•°æ®ä¸éœ€è¦ç§»åŠ¨å…ƒç´ ï¼Œåªéœ€ä¿®æ”¹èŠ‚ç‚¹å¼•ç”¨ï¼Œæ•ˆç‡æé«˜ã€‚ HashMapå›¾ç¤ºå¦‚ä¸‹æ‰€ç¤ºï¼š HashMapå†…éƒ¨ä½¿ç”¨æ•°ç»„å­˜å‚¨æ•°æ®ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç±»å‹ä¸ºNode&lt;K,V&gt;ï¼š 123456789101112131415161718192021222324252627282930313233343536373839static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; ...</div></div></div></a><a class="pagination-related" href="/posts/af70738a/" title="MATçš„ä½¿ç”¨"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo23.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-16</div><div class="info-item-2">MATçš„ä½¿ç”¨</div></div><div class="info-2"><div class="info-item-1">MATæ˜¯ä»€ä¹ˆï¼Ÿ MAT(Memory Analyzer Tool)ï¼Œä¸€ä¸ªåŸºäºEclipseçš„å†…å­˜åˆ†æå·¥å…·ï¼Œæ˜¯ä¸€ä¸ªå¿«é€Ÿã€åŠŸèƒ½ä¸°å¯Œçš„JAVA heapåˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŸ¥æ‰¾å†…å­˜æ³„æ¼å’Œå‡å°‘å†…å­˜æ¶ˆè€—ã€‚ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·ä»ä¼—å¤šçš„å¯¹è±¡ä¸­è¿›è¡Œåˆ†æï¼Œå¿«é€Ÿçš„è®¡ç®—å‡ºåœ¨å†…å­˜ä¸­å¯¹è±¡çš„å ç”¨å¤§å°ï¼Œçœ‹çœ‹æ˜¯è°é˜»æ­¢äº†åƒåœ¾æ”¶é›†å™¨çš„å›æ”¶å·¥ä½œï¼Œå¹¶å¯ä»¥é€šè¿‡æŠ¥è¡¨ç›´è§‚çš„æŸ¥çœ‹åˆ°å¯èƒ½é€ æˆè¿™ç§ç»“æœçš„å¯¹è±¡ã€‚ è½¯ä»¶åœ°å€ä½¿ç”¨è¯´æ˜1ã€ç¯å¢ƒå®‰è£…å¥½jdkï¼Œé…ç½®å¥½ç¯å¢ƒå˜é‡JAVA_HOME è¿è¡Œå†…å­˜åˆ†æå™¨çš„æœ€ä½Javaç‰ˆæœ¬æ˜¯ 1.8.0 æœ€æ–°ç‰ˆæœ¬MATå·²ç»è¦æ±‚17ä»¥ä¸Š æ³¨ï¼š ç¡®ä¿ä½ çš„hprofæ–‡ä»¶æ²¡æ”¾åœ¨cç›˜æˆ–æ˜¯æ¡Œé¢ï¼Œå› ä¸ºmatè½¯ä»¶é»˜è®¤ä¼šåœ¨è§£æçš„åŒæ—¶ç”Ÿæˆä¸€å †æ–‡ä»¶å†hprofæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ä¸‹ 2ã€ä½¿ç”¨ Memory Analyzer Tools è·å–å †å­˜å‚¨1ã€å¯åŠ¨è¿›ç¨‹ä»…éœ€å•å‡»ä¸¤æ¬¡ã€‚åœ¨èœå•ä¸­ï¼Œé€‰æ‹©â€œfile --&gt; Acquire Heap Dump...â€ æˆ–è€…æœ‰ç›´æ¥ç”Ÿæˆå¥½çš„dumpæ–‡ä»¶ï¼Œåˆ™ç›´æ¥Open Heap Dump ï¼Œæ‰“å¼€å³å¯ï¼› 2ã€é€‰æ‹©Acquire Heap Dumpåã€‚æ‚¨å¯ä»¥çœ‹åˆ°æ­£åœ¨è¿è¡Œçš„Javaè¿›ç¨‹ï¼›é€‰æ‹©ä½ æ‰€éœ€...</div></div></div></a><a class="pagination-related" href="/posts/c6e6bb6f/" title="jvmå¸¸ç”¨å‘½ä»¤(é•¿æœŸè®°å½•)"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo25.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-16</div><div class="info-item-2">jvmå¸¸ç”¨å‘½ä»¤(é•¿æœŸè®°å½•)</div></div><div class="info-2"><div class="info-item-1">123456jinfo: å¯ä»¥è¾“å‡ºå¹¶ä¿®æ”¹è¿è¡Œæ—¶çš„java è¿›ç¨‹çš„optsã€‚jps: ä¸unixä¸Šçš„psç±»ä¼¼ï¼Œç”¨æ¥æ˜¾ç¤ºæœ¬åœ°çš„javaè¿›ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬åœ°è¿è¡Œç€å‡ ä¸ªjavaç¨‹åºï¼Œå¹¶æ˜¾ç¤ºä»–ä»¬çš„è¿›ç¨‹å·ã€‚jstat: ä¸€ä¸ªæå¼ºçš„ç›‘è§†VMå†…å­˜å·¥å…·ã€‚å¯ä»¥ç”¨æ¥ç›‘è§†VMå†…å­˜å†…çš„å„ç§å †å’Œéå †çš„å¤§å°åŠå…¶å†…å­˜ä½¿ç”¨é‡ã€‚jstack: ç”¨äºæ‰“å°å‡ºç»™å®šçš„javaè¿›ç¨‹IDæˆ–core fileæˆ–è¿œç¨‹è°ƒè¯•æœåŠ¡çš„Javaå †æ ˆä¿¡æ¯ï¼Œå¦‚æœæ˜¯åœ¨64ä½æœºå™¨ä¸Šï¼Œéœ€è¦æŒ‡å®šé€‰é¡¹&quot;-J-d64&quot;ï¼ŒWindowsçš„jstackä½¿ç”¨æ–¹å¼åªæ”¯æŒä»¥ä¸‹çš„è¿™ç§æ–¹å¼ï¼šjmap: æ‰“å°å‡ºæŸä¸ªjavaè¿›ç¨‹ï¼ˆä½¿ç”¨pidï¼‰å†…å­˜å†…çš„æ‰€æœ‰&#x27;å¯¹è±¡&#x27;çš„æƒ…å†µï¼ˆå¦‚ï¼šäº§ç”Ÿé‚£äº›å¯¹è±¡ï¼ŒåŠå…¶æ•°é‡ï¼‰ã€‚jconsole/jvisualvm: java GUIç›‘è§†å·¥å…·ï¼Œå¯ä»¥ä»¥å›¾è¡¨åŒ–çš„å½¢å¼æ˜¾ç¤ºå„ç§æ•°æ®ã€‚å¹¶å¯é€šè¿‡è¿œç¨‹è¿æ¥ç›‘è§†è¿œç¨‹çš„æœåŠ¡å™¨ å‘½ä»¤åæ¥&gt;&gt;è¾“å‡ºæŸä¸€ä½ç½®,å¦‚: jstat -gc 13976 &gt;&gt; d:\c.txt jps jps 1ä»…æ˜¾ç¤ºç®€å•ç±»åå’Œpid jps -l 1è¾“å‡ºä¸»ç±»æˆ–è€…jarçš„å®Œå…¨è·¯å¾„å ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">å°äº”</div><div class="author-info-description">Tomorrow will be better,Everything will be fine</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/wang-xiaowu"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="/random" target="_blank" title="éšä¾¿é€›é€›"><i class="fa-solid fa-shuffle"></i></a><a class="social-icon" href="mailto:wangxiaowu950330@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/30655189?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">1.</span> <span class="toc-text">é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.</span> <span class="toc-text">å•ä¸€èŒè´£åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.</span> <span class="toc-text">å¼€é—­åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99"><span class="toc-number">1.3.</span> <span class="toc-text">é‡Œæ°æ›¿æ¢åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99"><span class="toc-number">1.4.</span> <span class="toc-text">ä¾èµ–å€’è½¬åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99"><span class="toc-number">1.5.</span> <span class="toc-text">æ¥å£éš”ç¦»åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-number">1.6.</span> <span class="toc-text">åˆæˆå¤ç”¨åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99"><span class="toc-number">1.7.</span> <span class="toc-text">è¿ªç±³ç‰¹æ³•åˆ™</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%88%9B%E5%BB%BA%E5%9E%8B%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">å·¥å‚æ–¹æ³•æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">æŠ½è±¡å·¥å‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">å»ºé€ è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">å•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.</span> <span class="toc-text">åŸå‹æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E7%BB%93%E6%9E%84%E5%9E%8B%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB-%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">ç±»&#x2F;å¯¹è±¡é€‚é…å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">æ¡¥æ¥æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.3.</span> <span class="toc-text">ç»„åˆæ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.4.</span> <span class="toc-text">è£…é¥°æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.5.</span> <span class="toc-text">ä»£ç†æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.6.</span> <span class="toc-text">å¤–è§‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.7.</span> <span class="toc-text">äº«å…ƒæ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%A1%8C%E4%B8%BA%E5%9E%8B%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">è®¾è®¡æ¨¡å¼ï¼ˆè¡Œä¸ºå‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">è§£é‡Šå™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.3.</span> <span class="toc-text">è´£ä»»é“¾æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.4.</span> <span class="toc-text">å‘½ä»¤æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.5.</span> <span class="toc-text">è¿­ä»£å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.6.</span> <span class="toc-text">ä¸­ä»‹è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.7.</span> <span class="toc-text">å¤‡å¿˜å½•æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.8.</span> <span class="toc-text">è§‚å¯Ÿè€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.9.</span> <span class="toc-text">çŠ¶æ€æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.10.</span> <span class="toc-text">ç­–ç•¥æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.11.</span> <span class="toc-text">è®¿é—®è€…æ¨¡å¼</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo16.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"></a><div class="content"><a class="title" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—">Clawdbotå®Œæ•´é…ç½®æŒ‡å—</a><time datetime="2026-02-11T10:15:08.000Z" title="å‘è¡¨äº 2026-02-11 18:15:08">2026-02-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"></a><div class="content"><a class="title" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;">å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;</a><time datetime="2026-02-03T06:02:28.000Z" title="å‘è¡¨äº 2026-02-03 14:02:28">2026-02-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/nba-logo17.jpg)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2026 By å°äº”</span><span class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div><div class="footer_custom_text"><a href="https://www.foreverblog.cn/" rel="external nofollow noreferrer" target="_blank"><img src="/img/loading.gif" data-lazy-src="https://img.foreverblog.cn/logo_en_default.png" alt="åå¹´ä¹‹çº¦" style="width:auto;height:16px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach(((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(a,r),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then((({svg:e})=>m(e)))}))})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const t=(e,a)=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach((r=>{const n=e[r];"object"==typeof n&&null!==n&&(n[a]?e[r]=n[a]:t(n,a))}))},e=e=>{window.loadChartJS=!0,Array.from(e).forEach(((e,a)=>{const r=e.firstElementChild,n=e.getAttribute("data-chartjs-id")||"chartjs-"+a,d=e.getAttribute("data-width"),o=document.getElementById(n);o&&o.parentNode.remove();const c=r.textContent,l=document.createElement("canvas");l.id=n;const s=document.createElement("div");s.className="chartjs-wrap",d&&(s.style.width=d),s.appendChild(l),r.insertAdjacentElement("afterend",s);const h=document.getElementById(n).getContext("2d"),i=JSON.parse(c),m="dark"===document.documentElement.getAttribute("data-theme")?"dark-mode":"light-mode";(t=>{"dark-mode"===t?(Chart.defaults.color="rgba(255, 255, 255, 0.8)",Chart.defaults.borderColor="rgba(255, 255, 255, 0.2)",Chart.defaults.scale.ticks.backdropColor="transparent"):(Chart.defaults.color="rgba(0, 0, 0, 0.8)",Chart.defaults.borderColor="rgba(0, 0, 0, 0.1)",Chart.defaults.scale.ticks.backdropColor="transparent")})(m),t(i,m),new Chart(h,i)}))},a=()=>{const t=document.querySelectorAll("#article-container .chartjs-container");0!==t.length&&(window.loadChartJS?e(t):btf.getScript("https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js").then((()=>e(t))))};btf.addGlobalFn("themeChange",a,"chartjs"),btf.addGlobalFn("encrypt",a,"chartjs"),window.pjax?a():document.addEventListener("DOMContentLoaded",a)})()</script></div><div class="aplayer no-destroy" data-id="9061017364" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="false" muted></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>ç½‘ç«™å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">ç‚¹å‡»åˆ·æ–°</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬",backgroundColor:t,duration:5e5,pos:e,actionText:"ç‚¹å‡»åˆ·æ–°",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/diytitle.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/talking/"]):not([href="/artitalk/"])',selectors:['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:description"]','link[rel="canonical"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!0,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>{try{e()}catch(e){console.debug("Pjax callback failed:",e)}}))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{if(404===e.request.status){!0?pjax.loadUrl("/404"):window.location.href="/404"}}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div id="algolia-search-input"><div class="ais-SearchBox"><form class="ais-SearchBox-form" action="" role="search" novalidate><input class="ais-SearchBox-input" type="search" placeholder="æœç´¢æ–‡ç« " autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" maxlength="512" aria-label="Search"><button class="ais-SearchBox-submit" type="submit" title="Submit the search query" style="display:none"><svg class="ais-SearchBox-submitIcon" width="10" height="10" viewBox="0 0 40 40" aria-hidden="true"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path></svg></button></form></div><hr><div id="algolia-search-results"><div id="algolia-hits"><div id="algolia-hits-empty" style="display:none"></div><div class="ais-Hits" style="display:none"><ol class="ais-Hits-list"></ol></div></div><div class="ais-Pagination" id="algolia-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="algolia-info"><span class="ais-Stats-text"></span><a class="algolia-poweredBy" href="https://www.algolia.com/?utm_source=algoliasearch.js&amp;utm_medium=website&amp;utm_content=localhost&amp;utm_campaign=poweredby" target="_blank" aria-label="Search by Algolia" rel="noopener noreferrer"><svg class="ais-PoweredBy-logo" height="1.2em" viewBox="0 0 572 64" style="width:auto"><path fill="#36395A" d="M16 48.3c-3.4 0-6.3-.6-8.7-1.7A12.4 12.4 0 0 1 1.9 42C.6 40 0 38 0 35.4h6.5a6.7 6.7 0 0 0 3.9 6c1.4.7 3.3 1.1 5.6 1.1 2.2 0 4-.3 5.4-1a7 7 0 0 0 3-2.4 6 6 0 0 0 1-3.4c0-1.5-.6-2.8-1.9-3.7-1.3-1-3.3-1.6-5.9-1.8l-4-.4c-3.7-.3-6.6-1.4-8.8-3.4a10 10 0 0 1-3.3-7.9c0-2.4.6-4.6 1.8-6.4a12 12 0 0 1 5-4.3c2.2-1 4.7-1.6 7.5-1.6s5.5.5 7.6 1.6a12 12 0 0 1 5 4.4c1.2 1.8 1.8 4 1.8 6.7h-6.5a6.4 6.4 0 0 0-3.5-5.9c-1-.6-2.6-1-4.4-1s-3.2.3-4.4 1c-1.1.6-2 1.4-2.6 2.4-.5 1-.8 2-.8 3.1a5 5 0 0 0 1.5 3.6c1 1 2.6 1.7 4.7 1.9l4 .3c2.8.2 5.2.8 7.2 1.8 2.1 1 3.7 2.2 4.9 3.8a9.7 9.7 0 0 1 1.7 5.8c0 2.5-.7 4.7-2 6.6a13 13 0 0 1-5.6 4.4c-2.4 1-5.2 1.6-8.4 1.6Zm35.6 0c-2.6 0-4.8-.4-6.7-1.3a13 13 0 0 1-4.7-3.5 17.1 17.1 0 0 1-3.6-10.4v-1c0-2 .3-3.8 1-5.6a13 13 0 0 1 7.3-8.3 15 15 0 0 1 6.3-1.4A13.2 13.2 0 0 1 64 24.3c1 2.2 1.6 4.6 1.6 7.2V34H39.4v-4.3h21.8l-1.8 2.2c0-2-.3-3.7-.9-5.1a7.3 7.3 0 0 0-2.7-3.4c-1.2-.7-2.7-1.1-4.6-1.1s-3.4.4-4.7 1.3a8 8 0 0 0-2.9 3.6c-.6 1.5-.9 3.3-.9 5.4 0 2 .3 3.7 1 5.3a7.9 7.9 0 0 0 2.8 3.7c1.3.8 3 1.3 5 1.3s3.8-.5 5.1-1.3c1.3-1 2.1-2 2.4-3.2h6a11.8 11.8 0 0 1-7 8.7 16 16 0 0 1-6.4 1.2ZM80 48c-2.2 0-4-.3-5.7-1a8.4 8.4 0 0 1-3.7-3.3 9.7 9.7 0 0 1-1.3-5.2c0-2 .5-3.8 1.5-5.2a9 9 0 0 1 4.3-3.1c1.8-.7 4-1 6.7-1H89v4.1h-7.5c-2 0-3.4.5-4.4 1.4-1 1-1.6 2.1-1.6 3.6s.5 2.7 1.6 3.6c1 1 2.5 1.4 4.4 1.4 1.1 0 2.2-.2 3.2-.7 1-.4 1.9-1 2.6-2 .6-1 1-2.4 1-4.2l1.7 2.1c-.2 2-.7 3.8-1.5 5.2a9 9 0 0 1-3.4 3.3 12 12 0 0 1-5.3 1Zm9.5-.7v-8.8h-1v-10c0-1.8-.5-3.2-1.4-4.1-1-1-2.4-1.4-4.2-1.4a142.9 142.9 0 0 0-10.2.4v-5.6a74.8 74.8 0 0 1 8.6-.4c3 0 5.5.4 7.5 1.2s3.4 2 4.4 3.6c1 1.7 1.4 4 1.4 6.7v18.4h-5Zm12.9 0V17.8h5v12.3h-.2c0-4.2 1-7.4 2.8-9.5a11 11 0 0 1 8.3-3.1h1v5.6h-2a9 9 0 0 0-6.3 2.2c-1.5 1.5-2.2 3.6-2.2 6.4v15.6h-6.4Zm34.4 1a15 15 0 0 1-6.6-1.3c-1.9-.9-3.4-2-4.7-3.5a15.5 15.5 0 0 1-2.7-5c-.6-1.7-1-3.6-1-5.4v-1c0-2 .4-3.8 1-5.6a15 15 0 0 1 2.8-4.9c1.3-1.5 2.8-2.6 4.6-3.5a16.4 16.4 0 0 1 13.3.2c2 1 3.5 2.3 4.8 4a12 12 0 0 1 2 6H144c-.2-1.6-1-3-2.2-4.1a7.5 7.5 0 0 0-5.2-1.7 8 8 0 0 0-4.7 1.3 8 8 0 0 0-2.8 3.6 13.8 13.8 0 0 0 0 10.3c.6 1.5 1.5 2.7 2.8 3.6s2.8 1.3 4.8 1.3c1.5 0 2.7-.2 3.8-.8a7 7 0 0 0 2.6-2c.7-1 1-2 1.2-3.2h6.2a11 11 0 0 1-2 6.2 15.1 15.1 0 0 1-11.8 5.5Zm19.7-1v-40h6.4V31h-1.3c0-3 .4-5.5 1.1-7.6a9.7 9.7 0 0 1 3.5-4.8A9.9 9.9 0 0 1 172 17h.3c3.5 0 6 1.1 7.9 3.5 1.7 2.3 2.6 5.7 2.6 10v16.8h-6.4V29.6c0-2.1-.6-3.8-1.8-5a6.4 6.4 0 0 0-4.8-1.8c-2 0-3.7.7-5 2a7.8 7.8 0 0 0-1.9 5.5v17h-6.4Zm63.8 1a12.2 12.2 0 0 1-10.9-6.2 19 19 0 0 1-1.8-7.3h1.4v12.5h-5.1v-40h6.4v19.8l-2 3.5c.2-3.1.8-5.7 1.9-7.7a11 11 0 0 1 4.4-4.5c1.8-1 3.9-1.5 6.1-1.5a13.4 13.4 0 0 1 12.8 9.1c.7 1.9 1 3.8 1 6v1c0 2.2-.3 4.1-1 6a13.6 13.6 0 0 1-13.2 9.4Zm-1.2-5.5a8.4 8.4 0 0 0 7.9-5c.7-1.5 1.1-3.3 1.1-5.3s-.4-3.8-1.1-5.3a8.7 8.7 0 0 0-3.2-3.6 9.6 9.6 0 0 0-9.2-.2 8.5 8.5 0 0 0-3.3 3.2c-.8 1.4-1.3 3-1.3 5v2.3a9 9 0 0 0 1.3 4.8 9 9 0 0 0 3.4 3c1.4.7 2.8 1 4.4 1Zm27.3 3.9-10-28.9h6.5l9.5 28.9h-6Zm-7.5 12.2v-5.7h4.9c1 0 2-.1 2.9-.4a4 4 0 0 0 2-1.4c.4-.7.9-1.6 1.2-2.7l8.6-30.9h6.2l-9.3 32.4a14 14 0 0 1-2.5 5 8.9 8.9 0 0 1-4 2.8c-1.5.6-3.4.9-5.6.9h-4.4Zm9-12.2v-5.2h6.4v5.2H248Z"></path><path fill="#003DFF" d="M534.4 9.1H528a.8.8 0 0 1-.7-.7V1.8c0-.4.2-.7.6-.8l6.5-1c.4 0 .8.2.9.6v7.8c0 .4-.4.7-.8.7zM428 35.2V.8c0-.5-.3-.8-.7-.8h-.2l-6.4 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.5 0 .8-.4.8-.8V43c0-.4-.3-.7-.6-.8-4.5-.5-4.5-6-4.5-7zm106.5-21.8H528c-.4 0-.7.4-.7.8v34c0 .4.3.8.7.8h6.5c.4 0 .8-.4.8-.8v-34c0-.5-.4-.8-.8-.8zm-17.7 21.8V.8c0-.5-.3-.8-.8-.8l-6.5 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.4 0 .8-.4.8-.8V43c0-.4-.3-.7-.7-.8-4.4-.5-4.4-6-4.4-7zm-22.2-20.6a16.5 16.5 0 0 1 8.6 9.3c.8 2.2 1.3 4.8 1.3 7.5a19.4 19.4 0 0 1-4.6 12.6 14.8 14.8 0 0 1-5.2 3.6c-2 .9-5.2 1.4-6.8 1.4a21 21 0 0 1-6.7-1.4 15.4 15.4 0 0 1-8.6-9.3 21.3 21.3 0 0 1 0-14.4 15.2 15.2 0 0 1 8.6-9.3c2-.8 4.3-1.2 6.7-1.2s4.6.4 6.7 1.2zm-6.7 27.6c2.7 0 4.7-1 6.2-3s2.2-4.3 2.2-7.8-.7-6.3-2.2-8.3-3.5-3-6.2-3-4.7 1-6.1 3c-1.5 2-2.2 4.8-2.2 8.3s.7 5.8 2.2 7.8 3.5 3 6.2 3zm-88.8-28.8c-6.2 0-11.7 3.3-14.8 8.2a18.6 18.6 0 0 0 4.8 25.2c1.8 1.2 4 1.8 6.2 1.7s.1 0 .1 0h.9c4.2-.7 8-4 9.1-8.1v7.4c0 .4.3.7.8.7h6.4a.7.7 0 0 0 .7-.7V14.2c0-.5-.3-.8-.7-.8h-13.5zm6.3 26.5a9.8 9.8 0 0 1-5.7 2h-.5a10 10 0 0 1-9.2-14c1.4-3.7 5-6.3 9-6.3h6.4v18.3zm152.3-26.5h13.5c.5 0 .8.3.8.7v33.7c0 .4-.3.7-.8.7h-6.4a.7.7 0 0 1-.8-.7v-7.4c-1.2 4-4.8 7.4-9 8h-.1a4.2 4.2 0 0 1-.5.1h-.9a10.3 10.3 0 0 1-7-2.6c-4-3.3-6.5-8.4-6.5-14.2 0-3.7 1-7.2 3-10 3-5 8.5-8.3 14.7-8.3zm.6 28.4c2.2-.1 4.2-.6 5.7-2V21.7h-6.3a9.8 9.8 0 0 0-9 6.4 10.2 10.2 0 0 0 9.1 13.9h.5zM452.8 13.4c-6.2 0-11.7 3.3-14.8 8.2a18.5 18.5 0 0 0 3.6 24.3 10.4 10.4 0 0 0 13 .6c2.2-1.5 3.8-3.7 4.5-6.1v7.8c0 2.8-.8 5-2.2 6.3-1.5 1.5-4 2.2-7.5 2.2l-6-.3c-.3 0-.7.2-.8.5l-1.6 5.5c-.1.4.1.8.5 1h.1c2.8.4 5.5.6 7 .6 6.3 0 11-1.4 14-4.1 2.7-2.5 4.2-6.3 4.5-11.4V14.2c0-.5-.4-.8-.8-.8h-13.5zm6.3 8.2v18.3a9.6 9.6 0 0 1-5.6 2h-1a10.3 10.3 0 0 1-8.8-14c1.4-3.7 5-6.3 9-6.3h6.4zM291 31.5A32 32 0 0 1 322.8 0h30.8c.6 0 1.2.5 1.2 1.2v61.5c0 1.1-1.3 1.7-2.2 1l-19.2-17a18 18 0 0 1-11 3.4 18.1 18.1 0 1 1 18.2-14.8c-.1.4-.5.7-.9.6-.1 0-.3 0-.4-.2l-3.8-3.4c-.4-.3-.6-.8-.7-1.4a12 12 0 1 0-2.4 8.3c.4-.4 1-.5 1.6-.2l14.7 13.1v-46H323a26 26 0 1 0 10 49.7c.8-.4 1.6-.2 2.3.3l3 2.7c.3.2.3.7 0 1l-.2.2a32 32 0 0 1-47.2-28.6z"></path></svg></a></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.39.0/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/search/algolia.min.js"></script></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"==location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo3.jpg" alt="/img/nba-logo3.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2024-02-02</span><a class="blog-slider__title" href="posts/1bcb0ad4/">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</a><div class="blog-slider__text">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</div><a class="blog-slider__button" href="posts/1bcb0ad4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-06-14</span><a class="blog-slider__title" href="posts/aa43cc95/">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</a><div class="blog-slider__text">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</div><a class="blog-slider__button" href="posts/aa43cc95/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" alt="/img/nba-logo29.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-13</span><a class="blog-slider__title" href="posts/15957791/">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</a><div class="blog-slider__text">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</div><a class="blog-slider__button" href="posts/15957791/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/4ecfb081/">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</a><div class="blog-slider__text">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</div><a class="blog-slider__button" href="posts/4ecfb081/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/37032a87/">k3sé«˜å¯ç”¨å®‰è£…</a><div class="blog-slider__text">k3sé«˜å¯ç”¨å®‰è£…</div><a class="blog-slider__button" href="posts/37032a87/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo5.jpg" alt="/img/nba-logo5.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="posts/20b19ed4/">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</a><div class="blog-slider__text">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</div><a class="blog-slider__button" href="posts/20b19ed4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-02</span><a class="blog-slider__title" href="posts/6de14387/">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</a><div class="blog-slider__text">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</div><a class="blog-slider__button" href="posts/6de14387/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-12-11</span><a class="blog-slider__title" href="posts/fb9adcb6/">è®°å½•windows11+wsl2ç¯å¢ƒæ­é…</a><div class="blog-slider__text">windows11+wsl2å¼€å‘ç¯å¢ƒé…ç½®</div><a class="blog-slider__button" href="posts/fb9adcb6/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2026-01-28</span><a class="blog-slider__title" href="posts/2a9d73ff/">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</a><div class="blog-slider__text">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</div><a class="blog-slider__button" href="posts/2a9d73ff/">è¯¦æƒ…</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';console.log("å·²æŒ‚è½½swiper"),parent.insertAdjacentHTML("afterbegin",child)}</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script><style></style><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("å·²æŒ‚è½½history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300,hOffset:20,vOffset:-20},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/"})</script></body></html>
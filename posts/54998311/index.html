<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥ | å°äº”çš„ä¸ªäººæ‚è´§é“º</title><meta name="author" content="å°äº”"><meta name="copyright" content="å°äº”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Rancheræµ‹è¯•ç‰ˆæœ¬ï¼š2.7.x å‚è€ƒæ–‡æ¡£ï¼šhttp:&#x2F;&#x2F;ranchermanager.docs.rancher.com&#x2F;zh&#x2F;pages-for-subheaders&#x2F;configure-openldap     Nexus3é…ç½®æ­¥éª¤ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢  ä¾æ¬¡ç‚¹å‡»Security&gt;&gt;LDAPè¿›å…¥é…ç½®é¡µé¢ç‚¹å‡» â€œCreate Connectionâ€ åˆ›å»ºLDAPè¿æ¥"><meta property="og:type" content="article"><meta property="og:title" content="è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥"><meta property="og:url" content="https://xiaowu95.wang/posts/54998311/"><meta property="og:site_name" content="å°äº”çš„ä¸ªäººæ‚è´§é“º"><meta property="og:description" content="Rancheræµ‹è¯•ç‰ˆæœ¬ï¼š2.7.x å‚è€ƒæ–‡æ¡£ï¼šhttp:&#x2F;&#x2F;ranchermanager.docs.rancher.com&#x2F;zh&#x2F;pages-for-subheaders&#x2F;configure-openldap     Nexus3é…ç½®æ­¥éª¤ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢  ä¾æ¬¡ç‚¹å‡»Security&gt;&gt;LDAPè¿›å…¥é…ç½®é¡µé¢ç‚¹å‡» â€œCreate Connectionâ€ åˆ›å»ºLDAPè¿æ¥"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xiaowu95.wang/img/nba-logo5.jpg"><meta property="article:published_time" content="2023-05-03T16:00:00.000Z"><meta property="article:modified_time" content="2024-01-05T06:16:52.000Z"><meta property="article:author" content="å°äº”"><meta property="article:tag" content="èº«ä»½è®¤è¯,è§’è‰²æˆæƒ"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaowu95.wang/img/nba-logo5.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥",
  "url": "https://xiaowu95.wang/posts/54998311/",
  "image": "https://xiaowu95.wang/img/nba-logo5.jpg",
  "datePublished": "2023-05-03T16:00:00.000Z",
  "dateModified": "2024-01-05T06:16:52.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "å°äº”",
      "url": "https://xiaowu95.wang"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://xiaowu95.wang/posts/54998311/"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="kHfLZxYQ7y3s3AR7gyJDdJkQvGNjQsvopp6N3gEEx0s"><meta name="baidu-site-verification" content="codeva-aVS4F6wAjS"><link rel="manifest" href="/wang-xiaowu/pwa/site.webmanifest"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/wang-xiaowu/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/wang-xiaowu/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/wang-xiaowu/pwa/favicon-16x16.png"><link rel="mask-icon" href="/wang-xiaowu/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),c=window.matchMedia("(prefers-color-scheme: dark)"),r=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(r.matches)a();else if(c.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}c.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?86cb34987e15c900c39e12ebdf08c50d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-1MFQ47191J"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1MFQ47191J"),btf.addGlobalFn("pjaxComplete",(()=>{gtag("config","G-1MFQ47191J",{page_path:window.location.pathname})}),"google_analytics")</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"M91QAWRVY4",apiKey:"ecc30a5e06136e1cc491685e39801190",indexName:"xiaowu-blog",hitsPerPage:6,languages:{hits_empty:"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œè€—æ—¶ ${time} æ¯«ç§’"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç°¡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400,highlightFullpage:!0,highlightMacStyle:!0},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶å¤±è´¥",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"å¤©",dateSuffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:{limitCount:150,languages:{author:"ä½œè€…: å°äº”",link:"é“¾æ¥: ",source:"æ¥æº: å°äº”çš„ä¸ªäººæ‚è´§é“º",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡",cht_to_chs:"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡",day_to_night:"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js",buttonText:"åŠ è½½æ›´å¤š"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/font.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="/css/titleStyle.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/custom.css"><style>.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="alternate" href="/atom.xml" title="å°äº”çš„ä¸ªäººæ‚è´§é“º" type="application/atom+xml"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",(()=>{Pace.restart()}),"pace_restart")</script><link rel="stylesheet" href="/css/pace.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/nba-logo5.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">å°äº”çš„ä¸ªäººæ‚è´§é“º</span></a><a class="nav-page-title" href="/"><span class="site-name">è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥<a class="post-edit-link" href="https://github.com/wang-xiaowu/wang-xiaowu.github.io/issues/new?_posts/èº«ä»½è®¤è¯,è§’è‰²æˆæƒ/è®°å½•å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡çš„ldapå¯¹æ¥.md" rel="external nofollow noreferrer" title="ç¼–è¾‘" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-05-03T16:00:00.000Z" title="å‘è¡¨äº 2023-05-04 00:00:00">2023-05-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-01-05T06:16:52.000Z" title="æ›´æ–°äº 2024-01-05 14:16:52">2024-01-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-%E8%A7%92%E8%89%B2%E6%8E%88%E6%9D%83/">èº«ä»½è®¤è¯,è§’è‰²æˆæƒ</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">5.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>21åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°è¯¥æ–‡ç« å·²ç»è¿‡äº†&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œæ–‡ç« æ‰€æè¿°çš„å…§å®¹å¯èƒ½å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œè¯·ç•™æ„ã€‚&quot;,&quot;postUpdate&quot;:&quot;2024-01-05 14:16:52&quot;}" hidden></div><h1 id="Rancher"><a href="#Rancher" class="headerlink" title="Rancher"></a>Rancher</h1><p>æµ‹è¯•ç‰ˆæœ¬ï¼š2.7.x</p><p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="http://ranchermanager.docs.rancher.com/zh/pages-for-subheaders/configure-openldap">http://ranchermanager.docs.rancher.com/zh/pages-for-subheaders/configure-openldap</a></p><img src="/img/loading.gif" data-lazy-src="/posts/54998311/image-20230504155841586.png" title="image-20230504155841586"> <img src="/img/loading.gif" data-lazy-src="/posts/54998311/image-20230504155947575.png" title="image-20230504155947575"><h1 id="Nexus3"><a href="#Nexus3" class="headerlink" title="Nexus3"></a>Nexus3</h1><h2 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h2><h3 id="ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢"><a href="#ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢" class="headerlink" title="ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢"></a>ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢</h3><img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530161811890-1979900886.png" title="img"><h3 id="ä¾æ¬¡ç‚¹å‡»Security-LDAPè¿›å…¥é…ç½®é¡µé¢"><a href="#ä¾æ¬¡ç‚¹å‡»Security-LDAPè¿›å…¥é…ç½®é¡µé¢" class="headerlink" title="ä¾æ¬¡ç‚¹å‡»Security&gt;&gt;LDAPè¿›å…¥é…ç½®é¡µé¢"></a>ä¾æ¬¡ç‚¹å‡»Security&gt;&gt;LDAPè¿›å…¥é…ç½®é¡µé¢<img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530161905732-287771905.png" title="img"></h3><h3 id="ç‚¹å‡»-â€œCreate-Connectionâ€-åˆ›å»ºLDAPè¿æ¥"><a href="#ç‚¹å‡»-â€œCreate-Connectionâ€-åˆ›å»ºLDAPè¿æ¥" class="headerlink" title="ç‚¹å‡» â€œCreate Connectionâ€ åˆ›å»ºLDAPè¿æ¥"></a>ç‚¹å‡» â€œCreate Connectionâ€ åˆ›å»ºLDAPè¿æ¥</h3><img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530161659915-1778328709.png" title="img"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">nameï¼šæ­¤è¿æ¥çš„åç§°ï¼Œå¯è‡ªå®šä¹‰</span><br><span class="line">LDAP server address</span><br><span class="line">    Protocolï¼šæ˜¯å¦å¯ç”¨SSLï¼Œæ˜¯é€‰ç”¨ LDAPSï¼Œå¦åˆ™é€‰ç”¨ LDAP</span><br><span class="line">    Hostnameï¼šLDAPçš„æœåŠ¡å™¨åœ°å€</span><br><span class="line">    Portï¼šLDAPç«¯å£å·</span><br><span class="line"><span class="keyword">Search</span> baseï¼šåŸºæœ¬DNï¼Œå³ä¸€èˆ¬ä»åŸŸçš„æ ¹èŠ‚ç‚¹å¼€å§‹æœç´¢ï¼Œå¦‚ dc<span class="operator">=</span>test,dc<span class="operator">=</span>com</span><br><span class="line">Authentication <span class="keyword">method</span>ï¼šåŠ å¯†æ–¹å¼</span><br><span class="line">Username <span class="keyword">or</span> DNï¼šè¾“å…¥ç”¨äºè·å–LDAPç”¨æˆ·çš„è´¦æˆ·ï¼Œå»ºè®®ä½¿ç”¨åªè¯»è´¦æˆ·</span><br><span class="line">    ç”¨æˆ·åï¼šæ ¼å¼ä¸º ç”¨æˆ·å@åŸŸåï¼Œå¦‚ userget<span class="variable">@test</span>.com</span><br><span class="line">    passwordï¼šè¾“å…¥ç”¨æˆ·çš„å¯†ç </span><br><span class="line">    Connection rulesï¼šè¿æ¥è§„åˆ™</span><br><span class="line">        ç¬¬ä¸€ä¸ªé€‰æ¡†ï¼šè¶…æ—¶æ—¶é—´ï¼Œå•ä½ ç§’</span><br><span class="line">        ç¬¬äºŒä¸ªé€‰æ¡†ï¼šå¤šå°‘ç§’åé‡è¯•</span><br><span class="line">        ç¬¬ä¸‰ä¸ªé€‰æ¡†ï¼šå¤±è´¥å°è¯•æ¬¡æ•°</span><br></pre></td></tr></table></figure><h3 id="æœåŠ¡å™¨ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡»-Verify-connection-æµ‹è¯•è¿æ¥"><a href="#æœåŠ¡å™¨ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡»-Verify-connection-æµ‹è¯•è¿æ¥" class="headerlink" title="æœåŠ¡å™¨ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡» Verify connection æµ‹è¯•è¿æ¥["></a>æœåŠ¡å™¨ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡» Verify connection æµ‹è¯•è¿æ¥[</h3><img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530163112616-1726561584.png" title="img"><blockquote><p>å³ä¸Šè§’å¼¹å‡ºæµ‹è¯•ç»“æœï¼Œå¦‚æµ‹è¯•è¿æ¥å¤±è´¥ï¼Œæ£€æŸ¥é…ç½®ä¿¡æ¯æ˜¯å¦æœ‰è¯¯</p></blockquote><h3 id="æµ‹è¯•æˆåŠŸåï¼Œç‚¹å‡»-next-è¿›å…¥LDAP-ç”¨æˆ·å’Œç»„é…ç½®"><a href="#æµ‹è¯•æˆåŠŸåï¼Œç‚¹å‡»-next-è¿›å…¥LDAP-ç”¨æˆ·å’Œç»„é…ç½®" class="headerlink" title="æµ‹è¯•æˆåŠŸåï¼Œç‚¹å‡» next è¿›å…¥LDAP ç”¨æˆ·å’Œç»„é…ç½®"></a>æµ‹è¯•æˆåŠŸåï¼Œç‚¹å‡» next è¿›å…¥LDAP ç”¨æˆ·å’Œç»„é…ç½®</h3><ul><li>æƒ…æ™¯ä¸€ï¼šæ‰€æœ‰ç”¨æˆ·éƒ½åœ¨ Users æ ¹èŠ‚ç‚¹ä¸‹<ul><li>è§†æƒ…å†µé€‰æ‹© Configuration template ä¸º Active Directoryæˆ–è€…generic ldap serverï¼Œæ‰€æœ‰é…ç½®é»˜è®¤å³å¯<img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530165308532-766775045.png" title="img"></li></ul></li><li>æƒ…æ™¯äºŒï¼šå¤§éƒ¨åˆ†ç”¨æˆ·åœ¨Usersç›®å½•ä¸­ï¼Œä½†è¿˜æœ‰å…¶ä»–ç›®å½•å­˜åœ¨ç”¨æˆ·<ul><li>è§†æƒ…å†µé€‰æ‹© Configuration template ä¸º Active Directoryæˆ–è€…generic ldap server</li><li>å‹¾é€‰ User subtree ä¸‹çš„å¤é€‰æ¡†</li><li>å…¶ä»–é…ç½®ä¿¡æ¯é»˜è®¤<img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530165322924-2058791447.png" title="img"></li></ul></li><li>æƒ…æ™¯ä¸‰ï¼šå…¶ä»–æƒ…å†µ<ul><li>è§†æƒ…å†µé€‰æ‹© Configuration template ä¸º Active Directoryæˆ–è€…generic ldap server</li><li>å»æ‰ Base DNé»˜è®¤å€¼</li><li>å‹¾é€‰ User subtree ä¸‹çš„å¤é€‰æ¡†</li><li>è¾“å…¥User fitterï¼Œå€¼ä¸ºï¼š(&amp;(objectCategory&#x3D;Person)(sAMAccountName&#x3D;*))<img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530165836231-1286723983.png" title="img"></li></ul></li></ul><h3 id="ç‚¹å‡»-Verify-user-mapping-æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨"><a href="#ç‚¹å‡»-Verify-user-mapping-æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨" class="headerlink" title="ç‚¹å‡» Verify user mapping æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨"></a>ç‚¹å‡» Verify user mapping æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨</h3><img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530171958391-1839759272.png" title="img"><h3 id="ç‚¹å‡»-Verify-login-æµ‹è¯•ldap-ç”¨æˆ·ç™»å½•"><a href="#ç‚¹å‡»-Verify-login-æµ‹è¯•ldap-ç”¨æˆ·ç™»å½•" class="headerlink" title="ç‚¹å‡» Verify login æµ‹è¯•ldap ç”¨æˆ·ç™»å½•"></a>ç‚¹å‡» Verify login æµ‹è¯•ldap ç”¨æˆ·ç™»å½•</h3><img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530172012228-145143746.png" title="img"> <img src="/img/loading.gif" data-lazy-src="/posts/54998311/1059656-20190530172021223-506022784.png" title="img"><h3 id="ç‚¹å‡»-Save-ä¿å­˜ï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼Œä½¿ç”¨LDAPç”¨æˆ·ç™»å½•ï¼Œé…ç½®å®Œæˆã€‚"><a href="#ç‚¹å‡»-Save-ä¿å­˜ï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼Œä½¿ç”¨LDAPç”¨æˆ·ç™»å½•ï¼Œé…ç½®å®Œæˆã€‚" class="headerlink" title="ç‚¹å‡» Save ä¿å­˜ï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼Œä½¿ç”¨LDAPç”¨æˆ·ç™»å½•ï¼Œé…ç½®å®Œæˆã€‚"></a>ç‚¹å‡» Save ä¿å­˜ï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼Œä½¿ç”¨LDAPç”¨æˆ·ç™»å½•ï¼Œé…ç½®å®Œæˆã€‚</h3><h1 id="Rancher2-6-7-Monitoring-Grafana"><a href="#Rancher2-6-7-Monitoring-Grafana" class="headerlink" title="Rancher2.6&#x2F;7 Monitoring Grafana"></a><a target="_blank" rel="noopener external nofollow noreferrer" href="https://my.oschina.net/rancher/blog/5553988">Rancher2.6&#x2F;7 Monitoring Grafana</a></h1><h2 id="å…ˆå†³æ¡ä»¶"><a href="#å…ˆå†³æ¡ä»¶" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a><strong>å…ˆå†³æ¡ä»¶</strong></h2><ul><li>Rancherï¼š2.6.x&#x2F;2.7.x</li><li>k8sï¼š1.24.x</li><li>monitoringï¼š100.1.2+up19.0.3</li><li>OpenLDAPï¼šlatest</li></ul><h2 id="Grafana-å¯¹æ¥-LDAP"><a href="#Grafana-å¯¹æ¥-LDAP" class="headerlink" title="Grafana å¯¹æ¥ LDAP"></a><strong>Grafana å¯¹æ¥ LDAP</strong></h2><h3 id="ç¼–è¾‘-Monitoring-Yaml-é…ç½®-LDAP"><a href="#ç¼–è¾‘-Monitoring-Yaml-é…ç½®-LDAP" class="headerlink" title="ç¼–è¾‘ Monitoring Yaml é…ç½® LDAP"></a><strong>ç¼–è¾‘ Monitoring Yaml é…ç½® LDAP</strong></h3><h4 id="Edit-YAML"><a href="#Edit-YAML" class="headerlink" title="Edit YAML"></a>Edit YAML</h4><p>è®¿é—® Rancher explorer UIï¼Œè¿›å…¥ Apps &amp; Marketplaceï¼Œé€‰æ‹© Monitoringï¼Œåœ¨é…ç½®é€‰é¡¹ä¸­é€‰æ‹© Edit YAMLï¼š</p><img src="/img/loading.gif" data-lazy-src="/posts/54998311/14154602_Rnn1.png" title="img"><h4 id="å¼€å¯-LDAP-è®¤è¯é…ç½®"><a href="#å¼€å¯-LDAP-è®¤è¯é…ç½®" class="headerlink" title="å¼€å¯ LDAP è®¤è¯é…ç½®"></a>å¼€å¯ LDAP è®¤è¯é…ç½®</h4><p>åœ¨ <code>grafana.grafana.ini</code> å±‚çº§ä¸‹æ–°å¢å¦‚ä¸‹ <code>auth.ldap</code> é…ç½®ä¿¡æ¯å¼€å¯ LDAPï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">grafana:</span></span><br><span class="line">  <span class="attr">grafana.ini:</span></span><br><span class="line">    <span class="attr">auth.ldap:</span></span><br><span class="line">      <span class="attr">allow_sign_up:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">config_file:</span> <span class="string">/etc/grafana/ldap.toml</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><img src="/img/loading.gif" data-lazy-src="/posts/54998311/14154602_glKW.png" title="img"><h4 id="åœ¨-grafana-å±‚çº§ä¸‹ï¼Œæ·»åŠ -LDAP-è®¤è¯å‚æ•°"><a href="#åœ¨-grafana-å±‚çº§ä¸‹ï¼Œæ·»åŠ -LDAP-è®¤è¯å‚æ•°" class="headerlink" title="åœ¨ grafana å±‚çº§ä¸‹ï¼Œæ·»åŠ  LDAP è®¤è¯å‚æ•°"></a>åœ¨ <code>grafana</code> å±‚çº§ä¸‹ï¼Œæ·»åŠ  LDAP è®¤è¯å‚æ•°</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">grafana:</span></span><br><span class="line">  <span class="attr">ldap:</span></span><br><span class="line">    <span class="attr">config:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      [[servers]]</span></span><br><span class="line"><span class="string">      host = &quot;test.zerchin.xyz&quot; </span></span><br><span class="line"><span class="string">      port = 389</span></span><br><span class="line"><span class="string">      use_ssl = false</span></span><br><span class="line"><span class="string">      start_tls = false</span></span><br><span class="line"><span class="string">      ssl_skip_verify = true</span></span><br><span class="line"><span class="string">      bind_dn = &quot;cn=admin,dc=rancherldap,dc=com&quot;</span></span><br><span class="line"><span class="string">      bind_password = &#x27;Rancher123&#x27;</span></span><br><span class="line"><span class="string">      search_filter = &quot;(cn=%s)&quot;</span></span><br><span class="line"><span class="string">      search_base_dns = [&quot;cn=group,ou=rancher,dc=rancherldap,dc=com&quot;]</span></span><br><span class="line"><span class="string">      [servers.attributes]</span></span><br><span class="line"><span class="string">      name = &quot;givenName&quot;</span></span><br><span class="line"><span class="string">      surname = &quot;sn&quot;</span></span><br><span class="line"><span class="string">      username = &quot;cn&quot;</span></span><br><span class="line"><span class="string">      member_of = &quot;memberOf&quot;</span></span><br><span class="line"><span class="string">      email = &quot;email&quot;</span></span><br><span class="line"><span class="string"></span>    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h5 id="å‚æ•°è¯´æ˜ï¼š"><a href="#å‚æ•°è¯´æ˜ï¼š" class="headerlink" title="å‚æ•°è¯´æ˜ï¼š"></a><strong>å‚æ•°è¯´æ˜</strong>ï¼š</h5><p><code>host</code>ï¼šLDAP æœåŠ¡å™¨åœ°å€ï¼ˆIP&#x2F;Domainï¼ŒæŒ‡å®šå¤šä¸ªåœ°å€ç©ºæ ¼åˆ†éš”ï¼‰ã€‚</p><p><code>port</code>ï¼šLDAP ç«¯å£ï¼Œé»˜è®¤æ˜¯ 389ï¼Œå¦‚æœ use_ssl&#x3D;true åˆ™æ˜¯ 636ã€‚</p><p><code>use_ssl</code>ï¼šæ˜¯å¦ä½¿ç”¨åŠ å¯† TLS è¿æ¥ã€‚</p><p><code>start_tls</code>ï¼šSTARTTLS æ˜¯ä¸€ç§æ˜æ–‡é€šä¿¡åè®®çš„æ‰©å±•ï¼Œèƒ½å¤Ÿè®©æ˜æ–‡çš„é€šä¿¡è¿çº¿ç›´æ¥æˆä¸ºåŠ å¯†è¿çº¿ï¼ˆä½¿ç”¨ SSL&#x2F;TLS åŠ å¯†ï¼‰ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªç‰¹åˆ«çš„ç«¯å£æ¥è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚</p><p><code>ssl_skip_verify</code>ï¼šæ˜¯å¦è·³è¿‡ SSL è¯ä¹¦éªŒè¯ã€‚</p><p><code>bind_dn</code>ï¼šLDAP æœåŠ¡è´¦æˆ·ç”¨æˆ·åã€‚</p><p><code>bind_password</code>ï¼šå¯†ç ï¼ˆå¦‚æœå¯†ç åŒ…å« #ï¼Œåˆ™éœ€è¦ç”¨ä¸‰ä¸ªæ‹¬å·å¼•èµ·æ¥ï¼Œä¾‹å¦‚ï¼šâ€œâ€â€œ#password;â€â€œâ€ï¼‰ã€‚</p><p><code>search_filter</code>ï¼šç”¨æˆ·æŸ¥è¯¢è¿‡æ»¤å­—æ®µï¼Œä¾‹å¦‚ <code>&quot;(cn=%s)&quot;</code> ã€<code>&quot;(sAMAccountName=%s)&quot;</code> ã€ <code>&quot;(uid=%s)&quot;</code>ã€‚</p><p><code>search_base_dns</code>ï¼šç”¨æˆ·æœç´¢èµ·ç‚¹ã€‚</p><h4 id="é…ç½®å¥½ä¹‹åå¯åŠ¨ç›‘æ§"><a href="#é…ç½®å¥½ä¹‹åå¯åŠ¨ç›‘æ§" class="headerlink" title="é…ç½®å¥½ä¹‹åå¯åŠ¨ç›‘æ§"></a>é…ç½®å¥½ä¹‹åå¯åŠ¨ç›‘æ§</h4><p>ç­‰å¾…ç›‘æ§å¯åŠ¨æˆåŠŸåï¼Œæ‰“å¼€ Grafana UI ç•Œé¢ï¼Œé»˜è®¤è´¦å·å¯†ç ä¸ºï¼šadmin&#x2F;prom-operator</p><img src="/img/loading.gif" data-lazy-src="/posts/54998311/14154602_TMdu.png" title="img"><h3 id="LDAP-éªŒè¯"><a href="#LDAP-éªŒè¯" class="headerlink" title="LDAP éªŒè¯"></a><strong>LDAP éªŒè¯</strong></h3><p>ç™»å½•ä¹‹åï¼Œå·¦ä¾§è¿›å…¥ Server Admin - LDAPï¼Œåœ¨ LDAP Connection ä¸‹å¯ä»¥çœ‹åˆ°è¿æ¥çš„ä¸»æœºã€‚</p><p>åœ¨ Test user mapping ä¸‹ï¼Œæœç´¢å­˜åœ¨çš„ LDAP ç”¨æˆ·ï¼Œå¯ä»¥æŸ¥åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/54998311/14154602_3UxX.png" title="img"><h1 id="Elastic-Stack"><a href="#Elastic-Stack" class="headerlink" title="Elastic Stack"></a>Elastic Stack</h1><h2 id="å…ˆå†³æ¡ä»¶-1"><a href="#å…ˆå†³æ¡ä»¶-1" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h2><blockquote><p>ä¿è¯elasticserachæ˜¯ç™½é‡‘ç‰ˆä»¥ä¸Šï¼Œç ´è§£æ•™ç¨‹å‚è€ƒç«™å†…<code>elasticsearch 7.xç™½é‡‘ç ´è§£</code></p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>ES LDAPå®˜æ–¹ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role-mapping.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role-mapping.html</a></p><p>ES LDAP é›†æˆï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jianshu.com/p/5b10475c605a">https://www.jianshu.com/p/5b10475c605a</a></p><p>ELKéƒ¨ç½²è‡³K8så¹¶å¯ç”¨ADè®¤è¯ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://lzzeng.github.io/log-analysis/k8s-elk-auth-kibana-via-ad/">https://lzzeng.github.io/log-analysis/k8s-elk-auth-kibana-via-ad/</a></p><p>Elasticsearch LDAP ç”¨æˆ·é‰´æƒï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://juejin.cn/post/7132739314902892574">https://juejin.cn/post/7132739314902892574</a></p><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><h3 id="elasticsearch-yml"><a href="#elasticsearch-yml" class="headerlink" title="elasticsearch.yml"></a>elasticsearch.yml</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cluster.name</span>=<span class="string">elasticsearch-cluster</span></span><br><span class="line"><span class="attr">node.name</span>=<span class="string">es-node1</span></span><br><span class="line"><span class="attr">network.host</span>=<span class="string">0.0.0.0</span></span><br><span class="line"><span class="attr">network.publish_host</span>=<span class="string">node1.elastic.com</span></span><br><span class="line"><span class="attr">http.port</span>=<span class="string">9200</span></span><br><span class="line"><span class="attr">transport.tcp.port</span>=<span class="string">9300</span></span><br><span class="line"><span class="attr">http.cors.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">http.cors.allow-origin</span>=<span class="string">*</span></span><br><span class="line"><span class="attr">discovery.type</span>=<span class="string">single-node</span></span><br><span class="line"><span class="attr">node.master</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">node.data</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">discovery.seed_hosts[0]</span>=<span class="string">node1.elastic.com</span></span><br><span class="line"><span class="attr">discovery.zen.minimum_master_nodes</span>=<span class="string">1</span></span><br><span class="line"><span class="attr">http.cors.allow-headers</span>=<span class="string">Authorization</span></span><br><span class="line"><span class="attr">bootstrap.memory_lock</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># eså¼€å¯xpackçš„å‰ææ˜¯ï¼Œå¿…é¡»é…ç½®sslï¼Œæ‰€ä»¥æ­¤å¤„å¿…é¡»æœ‰</span></span><br><span class="line"><span class="attr">xpack.security.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl.key</span>=<span class="string">/usr/share/elasticsearch/config/certs/es-node1.key</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl.certificate</span>=<span class="string">/usr/share/elasticsearch/config/certs/es-node1.crt</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl.certificate_authorities</span>=<span class="string">/usr/share/elasticsearch/config/certs/ca.crt</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl.key</span>=<span class="string">/usr/share/elasticsearch/config/certs/es-node1.key</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl.certificate</span>=<span class="string">/usr/share/elasticsearch/config/certs/es-node1.crt</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl.certificate_authorities</span>=<span class="string">/usr/share/elasticsearch/config/certs/ca.crt</span></span><br><span class="line"><span class="comment"># æ­¤å¤„æ˜¯é…ç½®ldapè®¤è¯çš„æ ¸å¿ƒä¿¡æ¯</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.order</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.url</span>=<span class="string">ldap://&lt;ldapIp&gt;:&lt;ldapPort&gt;</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.bind_dn</span>=<span class="string">cn=admin,dc=extension,dc=sopei</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.bind_password</span>=<span class="string">xxxxxx</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.user_search.base_dn</span>=<span class="string">ou=people,dc=extension,dc=sopei</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.user_search.filter</span>=<span class="string">(cn=&#123;0&#125;)</span></span><br><span class="line"><span class="attr">xpack.security.authc.realms.ldap.ldap1.unmapped_groups_as_roles</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># role_mapping.ymlï¼Œå¯é…ç½®å¯ä¸é…ï¼Œå°±æ”¾è¿™é‡Œå‚è€ƒä¸‹ï¼Œä¸€èˆ¬é€šè¿‡apié…ç½®æ˜ å°„å…³ç³»ã€‚å› ä¸ºé€šè¿‡æ–‡ä»¶çš„å½¢å¼éœ€è¦æ¯ä¸ªnodeéƒ½å­˜æ”¾ä¸€ä»½ã€‚</span></span><br><span class="line"><span class="comment"># xpack.security.authc.realms.ldap.ldap1.files.role_mapping=/usr/share/elasticsearch/config/role_mapping.yml</span></span><br></pre></td></tr></table></figure><h3 id="role-mapping-yml"><a href="#role-mapping-yml" class="headerlink" title="role_mapping.yml"></a>role_mapping.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä¸‹æ‰€ç¤ºï¼Œsuperuser æ˜¯åœ¨æˆ‘ä»¬çš„ Elasticsearch ä¸­å·²ç»å®šä¹‰å¥½çš„ roleã€‚èµ‹äºˆå¦‚ä¸‹è´¦æˆ·superuserè§’è‰²</span></span><br><span class="line"><span class="attr">superuser:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&quot;cn=liuxg,ou=users,dc=example,dc=com&quot;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&quot;cn=xgliu,ou=users,dc=example,dc=com&quot;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&quot;employeeNumber=1,ou=users,dc=example,dc=com&quot;</span></span><br></pre></td></tr></table></figure><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">POST /_security/role_mapping/&lt;name&gt;</span><br><span class="line">PUT /_security/role_mapping/&lt;name&gt;</span><br></pre></td></tr></table></figure><h3 id="å…ˆå†³æ¡ä»¶-2"><a href="#å…ˆå†³æ¡ä»¶-2" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h3><ul><li>è¦ä½¿ç”¨æ­¤ APIï¼Œä½ è‡³å°‘å…·æœ‰<code>manage_security</code>é›†ç¾¤æƒé™ã€‚</li></ul><h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>è§’è‰²æ˜ å°„å®šä¹‰åˆ†é…ç»™æ¯ä¸ªç”¨æˆ·çš„è§’è‰²ã€‚æ¯ä¸ªæ˜ å°„éƒ½æœ‰ è¯†åˆ«ç”¨æˆ·çš„è§„åˆ™å’Œæˆäºˆè¿™äº›ç”¨æˆ·çš„<em>è§’è‰²</em>åˆ—è¡¨ã€‚</p><p>è§’è‰²æ˜ å°„ API é€šå¸¸æ˜¯ç®¡ç†è§’è‰²æ˜ å°„çš„é¦–é€‰æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html#mapping-roles-file">è§’è‰²æ˜ å°„æ–‡ä»¶</a>ã€‚åˆ›å»ºæˆ–æ›´æ–°è§’è‰²æ˜ å°„ API æ— æ³•æ›´æ–°è§’è‰²æ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰çš„è§’è‰²æ˜ å°„ã€‚</p><p>æ­¤ API ä¸åˆ›å»ºè§’è‰²ã€‚ç›¸åï¼Œå®ƒå°†ç”¨æˆ·æ˜ å°„åˆ°ç°æœ‰è§’è‰²ã€‚å¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role.html">åˆ›å»ºæˆ–æ›´æ–°è§’è‰² API</a>æˆ–<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/defining-roles.html#roles-management-file">è§’è‰²æ–‡ä»¶</a>æ¥åˆ›å»ºè§’è‰²ã€‚</p><p>æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œå‚é˜…<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-roles.html">å°†ç”¨æˆ·å’Œç»„æ˜ å°„åˆ°è§’è‰²</a>ã€‚</p><h4 id="è§’è‰²æ¨¡æ¿"><a href="#è§’è‰²æ¨¡æ¿" class="headerlink" title="è§’è‰²æ¨¡æ¿"></a>è§’è‰²æ¨¡æ¿</h4><p>è§’è‰²æ˜ å°„æœ€å¸¸è§çš„ç”¨é€”æ˜¯åˆ›å»ºä»ç”¨æˆ·çš„å·²çŸ¥å€¼åˆ°å›ºå®šè§’è‰²åç§°çš„æ˜ å°„ã€‚ä¾‹å¦‚ï¼Œ <code>cn=admin,dc=example,dc=com</code>åº”è¯¥ä¸º LDAP ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·èµ‹äºˆ<code>superuser</code>Elasticsearch ä¸­çš„è§’è‰²ã€‚è¯¥<code>roles</code>å­—æ®µç”¨äºæ­¤ç›®çš„ã€‚</p><p>å¯¹äºæ›´å¤æ‚çš„éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ Mustache æ¨¡æ¿åŠ¨æ€ç¡®å®šåº”æˆäºˆç”¨æˆ·çš„è§’è‰²åç§°ã€‚è¯¥ <code>role_templates</code>å­—æ®µç”¨äºæ­¤ç›®çš„ã€‚</p><p>è¦æˆåŠŸä½¿ç”¨è§’è‰²æ¨¡æ¿ï¼Œå¿…é¡»å¯ç”¨ç›¸å…³çš„è„šæœ¬åŠŸèƒ½ã€‚å¦åˆ™ï¼Œä½¿ç”¨è§’è‰²æ¨¡æ¿åˆ›å»ºè§’è‰²æ˜ å°„çš„æ‰€æœ‰å°è¯•éƒ½ä¼šå¤±è´¥ã€‚å‚é˜…<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-security.html#allowed-script-types-setting">å…è®¸çš„è„šæœ¬ç±»å‹è®¾ç½®</a>ã€‚</p><p>è§’è‰²æ˜ å°„ä¸­å¯ç”¨çš„æ‰€æœ‰<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/role-mapping-resources.html">ç”¨æˆ·å­—æ®µ</a><code>rules</code>åœ¨è§’è‰²æ¨¡æ¿ä¸­ä¹Ÿå¯ç”¨ã€‚å› æ­¤ï¼Œå¯ä»¥å°†ç”¨æˆ·åˆ†é…ç»™åæ˜ ä»–ä»¬çš„<code>username</code>ã€ä»–ä»¬çš„æˆ–ä»–ä»¬éªŒè¯çš„<code>groups</code>åç§°çš„è§’è‰²ã€‚<code>realm</code></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯„ä¼°æ¨¡æ¿ä»¥ç”Ÿæˆå•ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯åº”åˆ†é…ç»™ç”¨æˆ·çš„è§’è‰²çš„åç§°ã€‚å¦‚æœ<code>format</code>æ¨¡æ¿çš„ è®¾ç½®ä¸º<code>&quot;json&quot;</code>é‚£ä¹ˆæ¨¡æ¿åº”è¯¥ä¸ºè§’è‰²åç§°ç”Ÿæˆä¸€ä¸ª JSON å­—ç¬¦ä¸²æˆ–ä¸€ä¸ª JSON å­—ç¬¦ä¸²æ•°ç»„ã€‚</p><h3 id="è·¯å¾„å‚æ•°"><a href="#è·¯å¾„å‚æ•°" class="headerlink" title="è·¯å¾„å‚æ•°"></a>è·¯å¾„å‚æ•°</h3><ul><li><p><strong><code>name</code></strong></p><p>ï¼ˆå­—ç¬¦ä¸²ï¼‰æ ‡è¯†è§’è‰²æ˜ å°„çš„ç‹¬ç‰¹åç§°ã€‚è¯¥åç§°ä»…ç”¨ä½œæ ‡è¯†ç¬¦ï¼Œä»¥ä¿ƒè¿›é€šè¿‡ API è¿›è¡Œäº¤äº’ï¼›å®ƒä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“æ˜ å°„çš„è¡Œä¸ºã€‚</p></li></ul><h3 id="ä¸»ä½“å‚æ•°"><a href="#ä¸»ä½“å‚æ•°" class="headerlink" title="ä¸»ä½“å‚æ•°"></a>ä¸»ä½“å‚æ•°</h3><p>ä»¥ä¸‹å‚æ•°å¯ä»¥åœ¨ PUT æˆ– POST æ±‚çš„ä¸»ä½“ä¸­æŒ‡å®šï¼Œå¹¶ä¸”ä¸æ·»åŠ è§’è‰²æ˜ å°„æœ‰å…³ï¼š</p><ul><li><p><strong><code>enabled</code></strong></p><p>(Required, Boolean)æ‰§è¡Œè§’è‰²æ˜ å°„æ—¶å¿½ç•¥ å·²<code>enabled</code>è®¾ç½®ä¸ºçš„æ˜ å°„ã€‚<code>false</code></p></li><li><p><strong><code>metadata</code></strong></p><p>ï¼ˆå¯¹è±¡ï¼‰å¸®åŠ©å®šä¹‰åˆ†é…ç»™æ¯ä¸ªç”¨æˆ·çš„è§’è‰²çš„é™„åŠ metadataå­—æ®µã€‚åœ¨è¯¥<code>metadata</code>å¯¹è±¡ä¸­ï¼Œä»¥ å¼€å¤´çš„é”®<code>_</code>ä¿ç•™ä¾›ç³»ç»Ÿä½¿ç”¨ã€‚</p></li><li><p><strong><code>roles</code></strong></p><p>ï¼ˆå­—ç¬¦ä¸²åˆ—è¡¨ï¼‰æˆäºˆä¸è§’è‰²æ˜ å°„è§„åˆ™åŒ¹é…çš„ç”¨æˆ·çš„è§’è‰²åç§°åˆ—è¡¨ã€‚å¿…é¡»æŒ‡å®š<code>roles</code>æˆ–<code>role_templates</code>ä¸­çš„ä¸€ä¸ªã€‚</p></li><li><p><strong><code>role_templates</code></strong></p><p>ï¼ˆå¯¹è±¡åˆ—è¡¨ï¼‰èƒ¡å­æ¨¡æ¿åˆ—è¡¨ï¼Œå°†å¯¹å…¶è¿›è¡Œè¯„ä¼°ä»¥ç¡®å®šåº”æˆäºˆä¸è§’è‰²æ˜ å°„è§„åˆ™åŒ¹é…çš„ç”¨æˆ·çš„è§’è‰²åç§°ã€‚è¿™äº›å¯¹è±¡çš„æ ¼å¼å®šä¹‰å¦‚ä¸‹ã€‚å¿…é¡»æŒ‡å®š<code>roles</code>æˆ–<code>role_templates</code>ä¸­çš„ä¸€ä¸ªã€‚</p></li><li><p><strong><code>rules</code></strong></p><p>ï¼ˆå¿…éœ€ï¼Œå¯¹è±¡ï¼‰ç¡®å®šæ˜ å°„åº”åŒ¹é…å“ªäº›ç”¨æˆ·çš„è§„åˆ™ã€‚è§„åˆ™æ˜¯ä½¿ç”¨ JSON DSL è¡¨è¾¾çš„é€»è¾‘æ¡ä»¶ã€‚å‚é˜… <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/role-mapping-resources.html">è§’è‰²æ˜ å°„èµ„æº</a>ã€‚</p></li></ul><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>ä»¥ä¸‹ç¤ºä¾‹å°†â€œuserâ€è§’è‰²åˆ†é…ç»™æ‰€æœ‰ç”¨æˆ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping1</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;user&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>, </span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;username&quot;</span> <span class="string">:</span> <span class="string">&quot;*&quot;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;metadata&quot;</span> <span class="string">:</span> &#123; </span><br><span class="line">    <span class="string">&quot;version&quot;</span> <span class="string">:</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ‰§è¡Œè§’è‰²æ˜ å°„æ—¶ï¼Œå·²<code>enabled</code>è®¾ç½®ä¸ºçš„æ˜ å°„å°†è¢«å¿½ç•¥ã€‚<code>false</code></p><p>metadataå­—æ®µæ˜¯å¯é€‰çš„ã€‚</p></blockquote><p>æˆåŠŸçš„è°ƒç”¨ä¼šè¿”å›ä¸€ä¸ª JSON ç»“æ„ï¼Œæ˜¾ç¤ºæ˜ å°„æ˜¯å·²åˆ›å»ºè¿˜æ˜¯å·²æ›´æ–°ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;role_mapping&quot;</span> <span class="string">:</span> &#123;</span><br><span class="line">    <span class="string">&quot;created&quot;</span> <span class="string">:</span> <span class="literal">true</span> </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ›´æ–°ç°æœ‰æ˜ å°„æ—¶ï¼Œ<code>created</code>è®¾ç½®ä¸º falseã€‚</p></blockquote><p>ä»¥ä¸‹ç¤ºä¾‹å°†â€œuserâ€å’Œâ€œç®¡ç†adminâ€è§’è‰²åˆ†é…ç»™ç‰¹å®šç”¨æˆ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping2</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;user&quot;</span>, <span class="string">&quot;admin&quot;</span> ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">     <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;username&quot;</span> <span class="string">:</span> [ <span class="string">&quot;esadmin01&quot;</span>, <span class="string">&quot;esadmin02&quot;</span> ] &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç¤ºä¾‹åŒ¹é…é’ˆå¯¹ç‰¹å®šé¢†åŸŸè¿›è¡Œèº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping3</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;ldap-user&quot;</span> ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;realm.name&quot;</span> <span class="string">:</span> <span class="string">&quot;ldap1&quot;</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç¤ºä¾‹åŒ¹é…ç”¨æˆ·åæ˜¯<code>esadmin</code> æˆ–ç”¨æˆ·åœ¨<code>cn=admin,dc=example,dc=com</code>ç»„ä¸­çš„ä»»ä½•ç”¨æˆ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping4</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;superuser&quot;</span> ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="attr">&quot;any&quot;:</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;:</span> &#123;</span><br><span class="line">          <span class="attr">&quot;username&quot;:</span> <span class="string">&quot;esadmin&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;:</span> &#123;</span><br><span class="line">          <span class="attr">&quot;groups&quot;:</span> <span class="string">&quot;cn=admins,dc=example,dc=com&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½ çš„èº«ä»½ç®¡ç†ç³»ç»Ÿï¼ˆä¾‹å¦‚ Active Directory æˆ– SAML èº«ä»½æä¾›å•†ï¼‰ä¸­çš„ç»„åç§°ä¸ Elasticsearch ä¸­çš„è§’è‰²åç§°æ²¡æœ‰ä¸€å¯¹ä¸€çš„å¯¹åº”å…³ç³»æ—¶ï¼Œä¸Šé¢çš„ç¤ºä¾‹å¾ˆæœ‰ç”¨ã€‚è§’è‰²æ˜ å°„æ˜¯å°†ç»„åä¸è§’è‰²åé“¾æ¥èµ·æ¥çš„æ–¹æ³•ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ çš„ç»„åç§°å¯èƒ½ä¸ä½ çš„ Elasticsearch è§’è‰²åç§°å®Œå…¨åŒ¹é…ã€‚å½“ä½ çš„ SAML èº«ä»½æä¾›è€…åŒ…å«è‡ªå·±çš„â€œç»„æ˜ å°„â€åŠŸèƒ½å¹¶ä¸”å¯ä»¥é…ç½®ä¸ºåœ¨ç”¨æˆ·çš„ SAML å±æ€§ä¸­å‘å¸ƒ Elasticsearch è§’è‰²åç§°æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚</p><p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å°†ç»„åç§°è§†ä¸ºè§’è‰²åç§°çš„æ¨¡æ¿ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä»…å½“ä½ æ‰“ç®—ä¸ºæ‰€æœ‰æä¾›çš„ç»„å®šä¹‰è§’è‰²æ—¶æ‰åº”æ‰§è¡Œæ­¤æ“ä½œã€‚å°†ç”¨æˆ·æ˜ å°„åˆ°å¤§é‡ä¸å¿…è¦æˆ–æœªå®šä¹‰çš„è§’è‰²æ˜¯ä½æ•ˆçš„ï¼Œå¹¶ä¸”ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚å¦‚æœä½ åªéœ€è¦æ˜ å°„ç»„çš„ä¸€ä¸ªå­é›†ï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨æ˜¾å¼æ˜ å°„æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping5</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;role_templates&quot;:</span> [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;template&quot;:</span> &#123; <span class="attr">&quot;source&quot;:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123;#tojson&#125;&#125;</span>groups<span class="template-variable">&#123;&#123;/tojson&#125;&#125;</span>&quot;</span> &#125;, </span><br><span class="line">      <span class="string">&quot;format&quot;</span> <span class="string">:</span> <span class="string">&quot;json&quot;</span> </span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;realm.name&quot;</span> <span class="string">:</span> <span class="string">&quot;saml1&quot;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>mustacheå‡½æ•°<code>tojson</code>ç”¨äºå°†ç»„ååˆ—è¡¨è½¬æ¢ä¸ºæœ‰æ•ˆçš„ JSON æ•°ç»„ã€‚</p><p>å› ä¸ºæ¨¡æ¿ç”Ÿæˆä¸€ä¸ª JSON æ•°ç»„ï¼Œæ‰€ä»¥æ ¼å¼å¿…é¡»è®¾ç½®ä¸º<code>json</code>.</p></blockquote><p>ä»¥ä¸‹ç¤ºä¾‹åŒ¹é…ç‰¹å®š LDAP å­æ ‘ä¸­çš„ç”¨æˆ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping6</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;example-user&quot;</span> ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;dn&quot;</span> <span class="string">:</span> <span class="string">&quot;*,ou=subtree,dc=example,dc=com&quot;</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç¤ºä¾‹åŒ¹é…ç‰¹å®šé¢†åŸŸä¸­ç‰¹å®š LDAP å­æ ‘ä¸­çš„ç”¨æˆ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping7</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;ldap-example-user&quot;</span> ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="attr">&quot;all&quot;:</span> [</span><br><span class="line">      &#123; <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;dn&quot;</span> <span class="string">:</span> <span class="string">&quot;*,ou=subtree,dc=example,dc=com&quot;</span> &#125; &#125;,</span><br><span class="line">      &#123; <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;realm.name&quot;</span> <span class="string">:</span> <span class="string">&quot;ldap1&quot;</span> &#125; &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§„åˆ™å¯èƒ½æ›´å¤æ‚ï¼ŒåŒ…æ‹¬é€šé…ç¬¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜ å°„åŒ¹é…æ»¡è¶³<strong>æ‰€æœ‰</strong>è¿™äº›æ¡ä»¶çš„ä»»ä½•ç”¨æˆ·ï¼š</p><ul><li>å¯åˆ†è¾¨åç§°ä¸æ¨¡å¼åŒ¹é…<code>*,ou=admin,dc=example,dc=com</code>ï¼Œæˆ–è€…ç”¨æˆ·åæ˜¯<code>es-admin</code>ï¼Œæˆ–è€…ç”¨æˆ·åæ˜¯<code>es-system</code></li><li><code>cn=people,dc=example,dc=com</code>ç¾¤ç»„ ä¸­çš„ç”¨æˆ·</li><li>ç”¨æˆ·æ²¡æœ‰<code>terminated_date</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping8</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;roles&quot;:</span> [ <span class="string">&quot;superuser&quot;</span> ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123;</span><br><span class="line">    <span class="attr">&quot;all&quot;:</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;any&quot;:</span> [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;field&quot;:</span> &#123;</span><br><span class="line">              <span class="attr">&quot;dn&quot;:</span> <span class="string">&quot;*,ou=admin,dc=example,dc=com&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;field&quot;:</span> &#123;</span><br><span class="line">              <span class="attr">&quot;username&quot;:</span> [ <span class="string">&quot;es-admin&quot;</span>, <span class="string">&quot;es-system&quot;</span> ]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;:</span> &#123;</span><br><span class="line">          <span class="attr">&quot;groups&quot;:</span> <span class="string">&quot;cn=people,dc=example,dc=com&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;except&quot;:</span> &#123;</span><br><span class="line">          <span class="attr">&quot;field&quot;:</span> &#123;</span><br><span class="line">            <span class="attr">&quot;metadata.terminated_date&quot;:</span> <span class="literal">null</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿åŒ–è§’è‰²å¯ç”¨äºè‡ªåŠ¨å°†æ¯ä¸ªç”¨æˆ·æ˜ å°„åˆ°ä»–ä»¬è‡ªå·±çš„è‡ªå®šä¹‰è§’è‰²ã€‚è§’è‰²æœ¬èº«å¯ä»¥é€šè¿‡ <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role.html">Roles API</a>æˆ–ä½¿ç”¨ <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/custom-roles-authorization.html#implementing-custom-roles-provider">è‡ªå®šä¹‰è§’è‰²æä¾›ç¨‹åº</a>æ¥å®šä¹‰ã€‚</p><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªä½¿ç”¨â€œcloud-samlâ€é¢†åŸŸè¿›è¡Œèº«ä»½éªŒè¯çš„ç”¨æˆ·éƒ½å°†è‡ªåŠ¨æ˜ å°„åˆ°ä¸¤ä¸ªè§’è‰² - è§’è‰²<code>&quot;saml_user&quot;</code>å’Œä¸€ä¸ªè§’è‰²ï¼Œå…¶ç”¨æˆ·åå‰ç¼€ä¸º<code>_user_</code>. ä¾‹å¦‚ï¼Œç”¨æˆ·<code>nwong</code>å°†è¢«åˆ†é…<code>saml_user</code>å’Œ <code>_user_nwong</code>è§’è‰²ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">POST</span> <span class="string">/_security/role_mapping/mapping9</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;rules&quot;:</span> &#123; <span class="attr">&quot;field&quot;:</span> &#123; <span class="attr">&quot;realm.name&quot;:</span> <span class="string">&quot;cloud-saml&quot;</span> &#125; &#125;,</span><br><span class="line">  <span class="attr">&quot;role_templates&quot;:</span> [</span><br><span class="line">    &#123; <span class="attr">&quot;template&quot;:</span> &#123; <span class="string">&quot;source&quot;</span> <span class="string">:</span> <span class="string">&quot;saml_user&quot;</span> &#125; &#125;, </span><br><span class="line">    &#123; <span class="attr">&quot;template&quot;:</span> &#123; <span class="string">&quot;source&quot;</span> <span class="string">:</span> <span class="string">&quot;_user_<span class="template-variable">&#123;&#123;username&#125;&#125;</span>&quot;</span> &#125; &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å› ä¸ºä¸å¯èƒ½åœ¨åŒä¸€ä¸ªè§’è‰²æ˜ å°„ä¸­åŒæ—¶æŒ‡å®š<code>roles</code>å’Œ<code>role_templates</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ²¡æœ‰æ›¿æ¢çš„æ¨¡æ¿æ¥åº”ç”¨â€œå›ºå®šåç§°â€è§’è‰²ã€‚</p></blockquote><h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><blockquote><p>è¿™é‡Œæˆ‘ä»¬ä»…åˆ›å»ºä¸¤ç§mappingï¼Œä¸€ç§adminï¼Œä¸€ç§basic_user</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GET /_security/role_mapping/admins</span></span><br><span class="line"><span class="comment"># DELETE /_security/role_mapping/admins</span></span><br><span class="line"><span class="comment"># GET /_security/role_mapping/basic_users</span></span><br><span class="line"><span class="comment"># DELETE /_security/role_mapping/basic_users</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹ç®¡ç†å‘˜çš„ç»‘å®š</span></span><br><span class="line"><span class="string">PUT</span> <span class="string">/_security/role_mapping/admins</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;roles&quot;</span> <span class="string">:</span> [ <span class="string">&quot;superuser&quot;</span> ],</span><br><span class="line">  <span class="string">&quot;rules&quot;</span> <span class="string">:</span> &#123; <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123;</span><br><span class="line">    <span class="string">&quot;dn&quot;</span> <span class="string">:</span> <span class="string">&quot;uid=xiaowu,ou=people,dc=extension,dc=sopei&quot;</span></span><br><span class="line">  &#125; &#125;,</span><br><span class="line">  <span class="attr">&quot;enabled&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ™®é€šç”¨æˆ·çš„ç»‘å®š,ä¾‹å­ä¸­ä»…å¯¹å¼€å‘ç»„æˆå‘˜èµ‹æƒ</span></span><br><span class="line"><span class="string">PUT</span> <span class="string">/_security/role_mapping/basic_users</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;enabled&quot;</span> <span class="string">:</span> <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;roles&quot;</span> <span class="string">:</span> [ </span><br><span class="line">      <span class="string">&quot;log-all-viewer&quot;</span>,</span><br><span class="line">      <span class="string">&quot;devlopment&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reporting_user&quot;</span> </span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span> <span class="string">:</span> &#123;</span><br><span class="line">      <span class="string">&quot;any&quot;</span> <span class="string">:</span> [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;field&quot;</span> <span class="string">:</span> &#123;</span><br><span class="line">            <span class="string">&quot;groups&quot;</span> <span class="string">:</span> <span class="string">&quot;cn=od-3d5d12d234493102cbc1ceef154d9c38,ou=feishuroot,dc=extension,dc=sopei&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;metadata&quot;</span> <span class="string">:</span> &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="ldapç”¨æˆ·åˆ é™¤åä»å¯ç™»å½•"><a href="#ldapç”¨æˆ·åˆ é™¤åä»å¯ç™»å½•" class="headerlink" title="ldapç”¨æˆ·åˆ é™¤åä»å¯ç™»å½•"></a>ldapç”¨æˆ·åˆ é™¤åä»å¯ç™»å½•</h3><blockquote><p>Elasticsearch ä¸ LDAP é›†æˆæ—¶ï¼Œç”¨æˆ·çš„èº«ä»½éªŒè¯æ˜¯é€šè¿‡ LDAP æœåŠ¡å™¨è¿›è¡Œçš„ã€‚å¦‚æœä½ å·²ç»åœ¨ Elasticsearch ä¸­é…ç½®äº† LDAP é›†æˆï¼Œå¹¶ä¸”å·²ç»åˆ é™¤äº† LDAP ä¸­çš„ç”¨æˆ·ï¼Œåˆ™è¯¥ç”¨æˆ·å°†æ— æ³•å†ç™»å½• LDAP æœåŠ¡å™¨ï¼Œä½†ä»ç„¶å¯ä»¥ç™»å½• Elasticsearchã€‚è¿™æ˜¯å› ä¸º Elasticsearch ç¼“å­˜äº†å…ˆå‰èº«ä»½éªŒè¯çš„ç”¨æˆ·å‡­æ®ï¼Œä»¥ä¾¿åœ¨å°†æ¥çš„è¯·æ±‚ä¸­ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½è¦å‘ LDAP æœåŠ¡å™¨å‘å‡ºèº«ä»½éªŒè¯è¯·æ±‚ã€‚</p></blockquote><h3 id="é…ç½®ä¼šè¯ç¼“å­˜æ—¶é—´"><a href="#é…ç½®ä¼šè¯ç¼“å­˜æ—¶é—´" class="headerlink" title="é…ç½®ä¼šè¯ç¼“å­˜æ—¶é—´"></a>é…ç½®ä¼šè¯ç¼“å­˜æ—¶é—´</h3><p>å‚è€ƒï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/security-settings.html#ref-ldap-settings">https://www.elastic.co/guide/en/elasticsearch/reference/master/security-settings.html#ref-ldap-settings</a></p><blockquote><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearch çš„ LDAP é›†æˆä¼šç¼“å­˜ LDAP ç”¨æˆ·å‡­æ®ï¼Œä»¥ä¾¿åœ¨å°†æ¥çš„è¯·æ±‚ä¸­ä½¿ç”¨ã€‚ç¼“å­˜çš„æ—¶é—´å–å†³äº Elasticsearch é…ç½®ä¸­ <code>cache.ttl</code> å‚æ•°çš„è®¾ç½®ï¼Œé»˜è®¤å€¼ä¸º <code>20m</code>ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœä½ åˆ é™¤äº† LDAP ä¸­çš„ç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·åœ¨ Elasticsearch ä¸­çš„è®¿é—®ä»…å—åˆ°ç¼“å­˜çš„æ—¶é—´é™åˆ¶ï¼Œé€šå¸¸ä¼šåœ¨ 20m å†…å¤±æ•ˆã€‚</p></blockquote><h1 id="Jumpserver"><a href="#Jumpserver" class="headerlink" title="Jumpserver"></a>Jumpserver</h1><p>å‚è€ƒï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.jumpserver.org/zh/v2/admin-guide/authentication/ldap/">https://docs.jumpserver.org/zh/v2/admin-guide/authentication/ldap/</a></p><img src="/img/loading.gif" data-lazy-src="/posts/54998311/image-20230504163448448.png" title="image-20230504163448448"><h1 id="Yearning"><a href="#Yearning" class="headerlink" title="Yearning"></a>Yearning</h1><p>é¡¹ç›®åœ°å€ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cookieY/Yearning">https://github.com/cookieY/Yearning</a></p><p>å‚è€ƒï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="http://next.yearning.io/guide/config/ldap.html">http://next.yearning.io/guide/config/ldap.html</a></p><img src="/img/loading.gif" data-lazy-src="/posts/54998311/image-20230504165218435.png" title="image-20230504165218435"><h1 id="Sonarqube"><a href="#Sonarqube" class="headerlink" title="Sonarqube"></a>Sonarqube</h1><p>å‚è€ƒåœ°å€ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.sonarqube.org/latest/instance-administration/authentication/ldap/">https://docs.sonarqube.org/latest/instance-administration/authentication/ldap/</a></p><p>ä¿®æ”¹<code>&lt;SONARQUBE_HOME&gt;/conf/sonar.properties</code></p><p>ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LDAP configuration</span></span><br><span class="line"><span class="comment"># General Configuration</span></span><br><span class="line"><span class="attr">sonar.security.realm</span>=<span class="string">LDAP</span></span><br><span class="line"><span class="attr">ldap.url</span>=<span class="string">ldap://myserver.mycompany.com</span></span><br><span class="line"><span class="attr">ldap.bindDn</span>=<span class="string">admin_bind_dn</span></span><br><span class="line"><span class="attr">ldap.bindPassword</span>=<span class="string">admin_bind_password</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment"># User Configuration</span></span><br><span class="line"><span class="attr">ldap.user.baseDn</span>=<span class="string">ou=Users,dc=mycompany,dc=com</span></span><br><span class="line"><span class="attr">ldap.user.request</span>=<span class="string">(&amp;(objectClass=inetOrgPerson)(uid=&#123;login&#125;))</span></span><br><span class="line"><span class="attr">ldap.user.realNameAttribute</span>=<span class="string">cn</span></span><br><span class="line"><span class="attr">ldap.user.emailAttribute</span>=<span class="string">mail</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"># Group Configuration</span></span><br><span class="line"><span class="attr">ldap.group.baseDn</span>=<span class="string">ou=Groups,dc=sonarsource,dc=com</span></span><br><span class="line"><span class="attr">ldap.group.request</span>=	<span class="string">(&amp;(objectClass=groupOfUniqueNames)(uniqueMember=&#123;dn&#125;))</span></span><br></pre></td></tr></table></figure><h1 id="Yapi"><a href="#Yapi" class="headerlink" title="Yapi"></a>Yapi</h1><p>é¡¹ç›®åœ°å€ï¼š <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/fjc0k/docker-YApi">https://github.com/fjc0k/docker-YApi</a></p><blockquote><p>æ³¨ï¼šyapié»˜è®¤ä»¥ç”¨æˆ·åå’Œé‚®ç®±ä¸ºå”¯ä¸€æ ‡å‡†ï¼Œæ‰€ä»¥æœ€å¥½å°†yapiåº“ä¸­å­˜å‚¨è´¦æˆ·é‚®ç®±æ”¹æˆå’Œldapä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™æ ·ä¾èµ–å°±å¯ä»¥ç›´æ¥ç»§æ‰¿ä¸‹åŸyapiåº“ä¸‹çš„è´¦æˆ·</p><p>è¿™é‡Œè´´ä¸‹å°†åŸæœ‰é‚®ç®±åç¼€æ”¹æˆæŒ‡å®šé‚®ç®±åç¼€çš„mongo sql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># å°†emailå­—æ®µä¸­ä»¥sopei.yapiç»“å°¾çš„æ•°æ®å…¨éƒ¨æ”¹æˆä»¥<span class="variable">@eryajf</span>.netç»“å°¾</span><br><span class="line">db.user.updateMany(</span><br><span class="line">    &#123; email: &#123; $regex: <span class="operator">/</span><span class="variable">@sopei</span>.yapi$<span class="operator">/</span> &#125; &#125;,</span><br><span class="line">    [</span><br><span class="line">      &#123;</span><br><span class="line">        $<span class="keyword">set</span>: &#123;</span><br><span class="line">          email: &#123;</span><br><span class="line">            $concat: [</span><br><span class="line">              &#123; $arrayElemAt: [&#123; $split: [<span class="string">&#x27;$email&#x27;</span>, <span class="string">&#x27;@&#x27;</span>] &#125;, <span class="number">0</span>] &#125;,</span><br><span class="line">              <span class="string">&#x27;@eryajf.net&#x27;</span></span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">yapi-web:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">jayfong/yapi:1.10.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">yapi-web</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">40001</span><span class="string">:3000</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_ADMIN_ACCOUNT=admin@xxx.yapi</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_ADMIN_PASSWORD=xxx</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_NPM_REGISTRY=https://registry.npm.taobao.org</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_CLOSE_REGISTER=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_DB_SERVERNAME=&lt;mongoIp&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_DB_PORT=&lt;mongoPort&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_DB_DATABASE=&lt;mongoDatabase&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_DB_USER=&lt;mongoUser&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_DB_PASS=&lt;mongoPass&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_DB_AUTH_SOURCE=&lt;MongoDB</span> <span class="string">èº«ä»½è®¤è¯æ‰€ç”¨åº“&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_MAIL_ENABLE=false</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_ENABLE=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_SERVER=ldap://&lt;ldapIp&gt;:&lt;ldapPort&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_BASE_DN=&lt;ldapç®¡ç†å‘˜dn&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_BIND_PASSWORD=&lt;ldapç®¡ç†å‘˜å¯†ç &gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_SEARCH_DN=&lt;ldapç”¨æˆ·æœç´¢èŒƒå›´&gt;</span></span><br><span class="line">      <span class="comment"># ä¸‹é¢è¿™ä¸ªæ˜¯user filterï¼ŒæŒ‰æ­¤æ ¼å¼è¿›è¡Œè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_SEARCH_STANDARD=&amp;(objectClass=inetOrgPerson)(cn=%s)</span></span><br><span class="line">      <span class="comment"># é‚®ç®±åç¼€ï¼Œç»æµ‹è¯•ä¼¼ä¹æ²¡å•¥ç”¨</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_EMAIL_POSTFIX=&#x27;@eryajf.net&#x27;</span></span><br><span class="line">      <span class="comment"># ldapæ˜ å°„å­—æ®µ</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_EMAIL_KEY=mail</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_LDAP_LOGIN_USERNAME_KEY=cn</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">YAPI_PLUGINS=[]</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre></td></tr></table></figure><h1 id="Gitlab"><a href="#Gitlab" class="headerlink" title="Gitlab"></a>Gitlab</h1><p>å‚è€ƒï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://forum.gitlab.cn/t/topic/620">https://forum.gitlab.cn/t/topic/620</a></p><blockquote><p>æ³¨ï¼šGitlabé»˜è®¤ä»¥ç”¨æˆ·åå’Œé‚®ç®±ä¸ºå”¯ä¸€æ ‡å‡†ï¼Œæ‰€ä»¥æœ€å¥½å°†Gitlabä¸­å­˜å‚¨è´¦æˆ·é‚®ç®±æ”¹æˆå’Œldapä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™æ ·ä¾èµ–å°±å¯ä»¥ç›´æ¥ç»§æ‰¿ä¸‹åŸGitlabä¸‹çš„è´¦æˆ·</p></blockquote><h2 id="æç‹GitLabé›†æˆLDAPèƒŒæ™¯ä»‹ç»"><a href="#æç‹GitLabé›†æˆLDAPèƒŒæ™¯ä»‹ç»" class="headerlink" title="æç‹GitLabé›†æˆLDAPèƒŒæ™¯ä»‹ç»"></a>æç‹GitLabé›†æˆLDAPèƒŒæ™¯ä»‹ç»</h2><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><ul><li>å°†ç°æœ‰çš„LDAPç”¨æˆ·åŒæ­¥åˆ°GitLabä¸­<ul><li>æ”¯æŒå¿«é€Ÿå°†LDAPæœåŠ¡å™¨ç®¡ç†çš„ç”¨æˆ·åŒæ­¥åˆ°GitLabä¸­</li><li>æ”¯æŒé€šè¿‡è§„åˆ™é™å®šç‰¹å®šåˆ†ç±»çš„LDAPç”¨æˆ·åŒæ­¥åˆ°GitLabä¸­</li></ul></li><li>ä½¿ç”¨LDAPæœåŠ¡ç®¡ç†æç‹GitLabç”¨æˆ·<ul><li>æ”¯æŒä½¿ç”¨LDAPæœåŠ¡åˆ›å»ºå’Œç®¡ç†GitLabç”¨æˆ·</li></ul></li></ul><h3 id="LDAPå®‰å…¨æ€§æ£€æŸ¥"><a href="#LDAPå®‰å…¨æ€§æ£€æŸ¥" class="headerlink" title="LDAPå®‰å…¨æ€§æ£€æŸ¥"></a>LDAPå®‰å…¨æ€§æ£€æŸ¥</h3><ul><li>é›†æˆLDAPå‰éœ€è¦å¯¹ä½ çš„ç³»ç»Ÿåšä»¥ä¸‹æ£€æŸ¥ï¼Œä»¥ç¡®ä¿ä½¿ç”¨çš„å®‰å…¨æ€§<ul><li>ä½ çš„LDAPç”¨æˆ·æ— æ³•ä¿®æ”¹æœåŠ¡å™¨ä¸­çš„<code>mail</code>,<code>email</code>,<code>userPrincipalName</code>å­—æ®µ</li><li>ä½ çš„LDAPç”¨æˆ·ä¸èƒ½åˆ†äº«åŒä¸€ä¸ªemailåœ°å€ï¼Œå¦åˆ™è¿™äº›ç”¨æˆ·å¯ä»¥è®¿é—®åŒä¸€ä¸ªGitLabç”¨æˆ·çš„èµ„æº</li></ul></li></ul><h3 id="å…¶ä»–è¯´æ˜"><a href="#å…¶ä»–è¯´æ˜" class="headerlink" title="å…¶ä»–è¯´æ˜"></a>å…¶ä»–è¯´æ˜</h3><ul><li>ç¤¾åŒºç”¨æˆ·å¯ä»¥ä½¿ç”¨LDAPé›†æˆçš„åŸºç¡€åŠŸèƒ½ï¼Œéƒ¨åˆ†é«˜çº§åŠŸèƒ½ä»…å¼€æ”¾ç»™è®¢é˜…ç”¨æˆ·</li></ul><h2 id="é…ç½®LDAPé›†æˆ"><a href="#é…ç½®LDAPé›†æˆ" class="headerlink" title="é…ç½®LDAPé›†æˆ"></a>é…ç½®LDAPé›†æˆ</h2><h3 id="å‚è€ƒæç‹å®˜ç½‘å®‰è£…GitLab"><a href="#å‚è€ƒæç‹å®˜ç½‘å®‰è£…GitLab" class="headerlink" title="å‚è€ƒæç‹å®˜ç½‘å®‰è£…GitLab"></a>å‚è€ƒæç‹å®˜ç½‘å®‰è£…GitLab</h3><ul><li>å‚è€ƒ<a target="_blank" rel="noopener external nofollow noreferrer" href="https://gitlab.cn/install/">å®‰è£…æç‹</a>éƒ¨ç½²GitLab</li></ul><h3 id="ä¿®æ”¹é…ç½®å¹¶é‡æ–°é…ç½®GitLabå®ä¾‹"><a href="#ä¿®æ”¹é…ç½®å¹¶é‡æ–°é…ç½®GitLabå®ä¾‹" class="headerlink" title="ä¿®æ”¹é…ç½®å¹¶é‡æ–°é…ç½®GitLabå®ä¾‹"></a>ä¿®æ”¹é…ç½®å¹¶é‡æ–°é…ç½®GitLabå®ä¾‹</h3><ul><li>ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶<code>/etc/gitlab/gitlab.rb</code>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li><li>æ³¨ï¼šæ¯ä¸ªç‰ˆæœ¬çš„é…ç½®å„ä¸åŒï¼Œæ‰€ä»¥æŒ‰éœ€ä¿®æ”¹</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">gitlab_rails[&#x27;ldap_enabled&#x27;]</span> <span class="string">=</span> <span class="literal">true</span></span><br><span class="line"><span class="string">gitlab_rails[&#x27;prevent_ldap_sign_in&#x27;]</span> <span class="string">=</span> <span class="literal">false</span></span><br><span class="line"><span class="string">gitlab_rails[&#x27;ldap_servers&#x27;]</span> <span class="string">=</span> <span class="string">YAML.load</span> <span class="string">&lt;&lt;-&#x27;EOS&#x27;</span> <span class="comment"># remember to close this block with &#x27;EOS&#x27; below</span></span><br><span class="line"><span class="string">&#x27;main&#x27;</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">  <span class="string">&#x27;label&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;LDAP&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;host&#x27;</span> <span class="string">=&gt;</span>  <span class="string">&#x27;ldap.mydomain.com&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;port&#x27;</span> <span class="string">=&gt;</span> <span class="number">389</span>,</span><br><span class="line">  <span class="string">&#x27;uid&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&lt;sAMAccountName&gt;æˆ–&lt;uid&gt;&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;encryption&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;simple_tls&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;verify_certificates&#x27;</span> <span class="string">=&gt;</span> <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&#x27;bind_dn&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;ç®¡ç†å‘˜dn&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;password&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;ç®¡ç†å‘˜pass&#x27;</span>,</span><br><span class="line">  <span class="comment"># å¯é€‰</span></span><br><span class="line">  <span class="string">&#x27;tls_options&#x27;</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="string">&#x27;ca_file&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ssl_version&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ciphers&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cert&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;timeout&#x27;</span> <span class="string">=&gt;</span> <span class="number">10</span>,</span><br><span class="line">  <span class="comment"># æ­¤å¤„é…ç½®ldapæºæœåŠ¡å™¨æ˜¯å¦æ˜¯adï¼Œå¦‚æœæ­¤å¤„è®¾ç½®trueï¼Œé‚£ä¹ˆallow_username_or_email_loginæœ€å¥½è®¾ç½®ä¸ºfalse</span></span><br><span class="line">  <span class="string">&#x27;active_directory&#x27;</span> <span class="string">=&gt;</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;allow_username_or_email_login&#x27;</span> <span class="string">=&gt;</span> <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;block_auto_created_users&#x27;</span> <span class="string">=&gt;</span> <span class="literal">false</span>,</span><br><span class="line">  <span class="comment"># æ­¤å¤„è®¾ç½®user find dn</span></span><br><span class="line">  <span class="string">&#x27;base&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;ou=people,dc=extension,dc=net&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;user_filter&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="comment"># å­—æ®µæ˜ å°„</span></span><br><span class="line">  <span class="string">&#x27;attributes&#x27;</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span> <span class="string">=&gt;</span> [<span class="string">&#x27;uid&#x27;</span>, <span class="string">&#x27;userid&#x27;</span>, <span class="string">&#x27;sAMAccountName&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span> <span class="string">=&gt;</span> [<span class="string">&#x27;mail&#x27;</span>, <span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;userPrincipalName&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;cn&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;first_name&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;givenName&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;last_name&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;sn&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;lowercase_usernames&#x27;</span> <span class="string">=&gt;</span> <span class="literal">false</span>,</span><br><span class="line"><span class="string">EOS</span></span><br></pre></td></tr></table></figure><ul><li>å¹¶ä¿®æ”¹ä»¥ä¸‹å­—æ®µ</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;label&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;LDAP&#x27;</span> <span class="comment"># è¯¥å­—æ®µä¸ºLDAPæœåŠ¡åç§°ï¼Œè¯¥åç§°ä¼šå±•ç¤ºåœ¨GitLab Portalçš„ç™»é™†ç•Œé¢</span></span><br><span class="line"><span class="string">&#x27;host&#x27;</span> <span class="string">=&gt;</span>  <span class="string">&#x27;ldap.mydomain.com&#x27;</span> <span class="comment"># è¯¥å­—æ®µä¸ºLDAPæœåŠ¡å™¨çš„åœ°å€</span></span><br><span class="line"><span class="string">&#x27;bind_dn&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;_the_full_dn_of_the_user_you_will_bind_with&#x27;</span> <span class="comment"># è¯¥å­—æ®µä¸ºLDAPç®¡ç†å‘˜ç”¨æˆ·çš„DN</span></span><br><span class="line"><span class="string">&#x27;password&#x27;</span> <span class="string">=&gt;</span> <span class="string">&#x27;_the_password_of_the_bind_user&#x27;</span> <span class="comment"># è¯¥å­—æ®µä¸ºLDAPç®¡ç†å‘˜ç”¨æˆ·çš„password</span></span><br></pre></td></tr></table></figure><ul><li>å…¶ä»–é…ç½®é¡¹ç›®å‚è€ƒ<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.gitlab.com/ee/administration/auth/ldap/#basic-configuration-settings">LDAPåŸºç¡€é…ç½® 4</a></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®user_filterå°†éƒ¨åˆ†ldapç”¨æˆ·åŒæ­¥åˆ°GitLabä¸­</span></span><br><span class="line"><span class="string">&#x27;(employeeType=developer)&#x27;</span></span><br><span class="line"><span class="string">&#x27;(&amp;(objectclass=user)(|(samaccountname=momo)(samaccountname=toto)))&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œ<code>sudo gitlab-ctl reconfigure</code>ä½¿å¾—ä¸Šè¿°é…ç½®ç”Ÿæ•ˆ</li></ul><h3 id="ä½¿ç”¨Rake-Taskæ£€æŸ¥åŒæ­¥æƒ…å†µ"><a href="#ä½¿ç”¨Rake-Taskæ£€æŸ¥åŒæ­¥æƒ…å†µ" class="headerlink" title="ä½¿ç”¨Rake Taskæ£€æŸ¥åŒæ­¥æƒ…å†µ"></a>ä½¿ç”¨Rake Taskæ£€æŸ¥åŒæ­¥æƒ…å†µ</h3><ul><li>é…ç½®å®Œæˆåï¼Œå¯ä½¿ç”¨LDAPç›¸å…³çš„Rake Taskæ£€æŸ¥ç”¨æˆ·åŒæ­¥æƒ…å†µ<code>gitlab-rake gitlab:ldap:check[100]</code>è¯¥å‘½ä»¤æ£€æŸ¥å‰100ä¸ªLDAPç”¨æˆ·</li></ul><h2 id="å…¶ä»–LDAPé…ç½®"><a href="#å…¶ä»–LDAPé…ç½®" class="headerlink" title="å…¶ä»–LDAPé…ç½®"></a>å…¶ä»–LDAPé…ç½®</h2><h3 id="LDAPç”¨æˆ·åŒæ­¥å‘¨æœŸ"><a href="#LDAPç”¨æˆ·åŒæ­¥å‘¨æœŸ" class="headerlink" title="LDAPç”¨æˆ·åŒæ­¥å‘¨æœŸ"></a>LDAPç”¨æˆ·åŒæ­¥å‘¨æœŸ</h3><ul><li>GitLabé»˜è®¤æ¯æ—¥æ‰§è¡ŒLDAPç”¨æˆ·åŒæ­¥ï¼Œå¦‚æœä½ éœ€è¦ä¿®æ”¹LDAPçš„åŒæ­¥å‘¨æœŸï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹<code>/etc/gitlab/gitlab.rb</code>ä¸­é…ç½®å®ç°</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">gitlab_rails[&#x27;ldap_sync_worker_cron&#x27;]</span> <span class="string">=</span> <span class="string">&quot;0 */12 * * *&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚æœªç”Ÿæ•ˆå¯æ‰§è¡Œgitlab-ctl-restarté‡å¯ä¸‹"><a href="#å¦‚æœªç”Ÿæ•ˆå¯æ‰§è¡Œgitlab-ctl-restarté‡å¯ä¸‹" class="headerlink" title="å¦‚æœªç”Ÿæ•ˆå¯æ‰§è¡Œgitlab-ctl restarté‡å¯ä¸‹"></a><a target="_blank" rel="noopener external nofollow noreferrer" href="https://forum.gitlab.cn/t/topic/1731">å¦‚æœªç”Ÿæ•ˆå¯æ‰§è¡Œ<code>gitlab-ctl restart</code>é‡å¯ä¸‹</a></h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang">å°äº”</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang/posts/54998311/">https://xiaowu95.wang/posts/54998311/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://xiaowu95.wang" target="_blank">å°äº”çš„ä¸ªäººæ‚è´§é“º</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-%E8%A7%92%E8%89%B2%E6%8E%88%E6%9D%83/">èº«ä»½è®¤è¯,è§’è‰²æˆæƒ</a></div><div class="post-share"><div class="social-share" data-image="/img/nba-logo5.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>æ„Ÿè°¢æ”¯æŒ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wxpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/wxpay.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/9ad9224f/" title="elasticsearch7.xç™½é‡‘ç‰ˆç ´è§£"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo10.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">elasticsearch7.xç™½é‡‘ç‰ˆç ´è§£</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯ å› ä¸ºè¦å°†esæ¥å…¥ldapè®¤è¯ï¼Œè€Œè¯¥åŠŸèƒ½æ˜¯æ”¶è´¹ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œé€‰æ‹©ç ´è§£ç™½é‡‘ç‰ˆ åŸç†licenseä¸­æœ‰ä¸ªsignatureå­—æ®µï¼ŒESä¼šæ ¹æ®è¿™ä¸ªå­—æ®µåˆ¤æ–­Licenseæ˜¯å¦è¢«ç¯¡æ”¹ã€‚åªè¦å–æ¶ˆESçš„è¿™ä¸ªåˆ¤æ–­é€»è¾‘ï¼Œå°±å¯ä»¥éšä¾¿ç¯¡æ”¹Licenseï¼Œè¾¾åˆ°æ¿€æ´»çš„ç›®çš„äº†ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å°†ä¼šä»¥å®˜æ–¹ ES Docker é•œåƒ 7.14.0 ç‰ˆæœ¬è¿›è¡Œç ´è§£ã€‚åŸåˆ™ä¸Šæ”¯æŒä»»æ„ç‰ˆæœ¬ç ´è§£ã€‚ ç ´è§£æµç¨‹ä¸‹è½½å¯¹åº”elasticsearchæºæ–‡ä»¶åœ°å€ï¼šhttps://www.elastic.co/cn/downloads/past-releases#elasticsearch ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼Œä¹‹åä¼šæ¶‰åŠåˆ°ä¸€äº›ç¼–è¯‘æ–‡ä»¶çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œçš„ç¯å¢ƒä½¿ç”¨wsl+windowsï¼Œç†è®ºä¸Šä¸‹è½½windowsæˆ–è€…linuxç‰ˆæœ¬çš†å¯ è§£å‹æ–‡ä»¶æˆ‘è¿™é‡Œè§£å‹åœ¨D:\elasticsearch-7.14.0ï¼Œä¸»è¦ä¿®æ”¹jaråŒ…ï¼šD:/elasticsearch-7.14.0/modules/x-pack-core/x-pack-core-7.14.0.jar å–å‡ºæºæ–‡ä»¶æ¥ä¸‹æ¥éœ€è¦å°†å‡ ä¸ªjaråŒ…å†…çš„classæ–‡ä»¶åç¼–è¯‘å‡ºæ¥ï¼Œè¿™é‡Œä½¿ç”¨Luyten åœ°...</div></div></div></a><a class="pagination-related" href="/posts/ab385ac5/" title="sonarqubeçš„å®‰è£…åŠä½¿ç”¨"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo1.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">sonarqubeçš„å®‰è£…åŠä½¿ç”¨</div></div><div class="info-2"><div class="info-item-1">å‰è¨€è‰¯å¥½çš„ä»£ç ä¹ æƒ¯æ˜¯ä¸€ä¸ªä¼˜ç§€ç¨‹åºå‘˜åº”è¯¥å…·å¤‡çš„å“è´¨ï¼Œä½†é äººçš„ä¹ æƒ¯ä¸è®°å¿†æ¥ä¿è¯ä»£ç è´¨é‡ï¼Œå§‹ç»ˆä¸æ˜¯ä¸€ä»¶é è°±çš„äº‹ã€‚åœ¨è®¡ç®—æœºè¡Œä¸šåº”è¯¥æ·±çŸ¥ï¼Œåªè¦æ˜¯äººä¸ºçš„ï¼Œéƒ½ä¼šæœ‰æ“ä½œé£é™©ã€‚æœ¬æ–‡è®²è§£å¦‚ä½•é€šè¿‡Dockeræ­å»ºä»£ç æ£€æµ‹å¹³å°SonarQubeï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ£€æµ‹é¡¹ç›®çš„ä»£ç ã€‚ å®‰è£…Sonarqubeè¿™é‡Œé€‰æ‹©å…è´¹çš„ç¤¾åŒºç‰ˆCommunityï¼ˆå¯¹åº”dockerç‰ˆæœ¬ï¼šcommunityï¼‰ï¼Œå¦å¤–è¿˜æœ‰Developerã€Enterpriseç­‰æ”¶è´¹ç‰ˆæœ¬ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼Œå…·ä½“å·®åˆ«å¦‚ä¸‹ï¼š æ³¨ï¼š v8.9æ”¯æŒnodejs &lt;&#x3D; 15.xï¼Œjdk 8 v10æ”¯æŒnodejs 14.17+ï¼Œjdk 11 or jdk17 å…ˆå¯åŠ¨å®¹å™¨docker-composeæ–‡ä»¶å‚è€ƒï¼šhttps://github.com/SonarSource/docker-sonarqube/tree/master/example-compose-files é•œåƒå‚è€ƒï¼šhttps://hub.docker.com/_/sonarqube/tags 7.9ä¹‹åå®˜æ–¹æ”¯æŒå†…åµŒæ•°æ®åº“H2 ä½†æ˜¯ä½¿ç”¨H2æ•°æ®åº“æœ‰ä¼šä»¥ä¸‹é™åˆ¶ï¼š å†…åµŒæ•°æ®åº“æ— æ³•æ‰©å±•ï¼Œ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/2e1f9495/" title="LDAPå­¦ä¹ æ€»ç»“"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo15.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-04-22</div><div class="info-item-2">LDAPå­¦ä¹ æ€»ç»“</div></div><div class="info-2"><div class="info-item-1">æ‘˜è‡ªï¼šhttps://lework.github.io/2019/07/18/ldap/ å®‰è£…ä½¿ç”¨å‚è€ƒï¼š http://ldapdoc.eryajf.net/pages/f081dc/ https://github.com/behappy-project/behappy-docker-application/tree/master/ldap LDAPæ¦‚å¿µLDAPæ˜¯è½»é‡ç›®å½•è®¿é—®åè®®,è‹±æ–‡å…¨ç§°æ˜¯Lightweight Directory Access Protocol,ä¸€èˆ¬éƒ½ç®€ç§°ä¸ºLDAP.å®ƒæ˜¯åŸºäºX.500æ ‡å‡†çš„,ä½†æ˜¯ç®€å•å¤šäº†å¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦å®šåˆ¶.ä¸X.500ä¸åŒ,LDAPæ”¯æŒTCP/IP,è¿™å¯¹è®¿é—®Internetæ˜¯å¿…é¡»çš„.LDAPçš„æ ¸å¿ƒè§„èŒƒåœ¨RFCä¸­éƒ½æœ‰å®šä¹‰,æ‰€æœ‰ä¸LDAPç›¸å…³çš„RFCéƒ½å¯ä»¥åœ¨LDAPman RFCç½‘é¡µä¸­æ‰¾åˆ°.ç®€å•è¯´æ¥,LDAPæ˜¯ä¸€ä¸ªå¾—åˆ°å…³äºäººæˆ–è€…èµ„æºçš„é›†ä¸­ã€é™æ€æ•°æ®çš„å¿«é€Ÿæ–¹å¼. LDAPæ˜¯ä¸€ä¸ªç”¨æ¥å‘å¸ƒç›®å½•ä¿¡æ¯åˆ°è®¸å¤šä¸åŒèµ„æºçš„åè®®.é€šå¸¸å®ƒéƒ½ä½œä¸ºä¸€ä¸ªé›†ä¸­çš„åœ°å€æœ¬ä½¿ç”¨,ä¸è¿‡æ ¹æ®ç»„ç»‡è€…çš„éœ€è¦,å®ƒå¯ä»¥åšå¾—æ›´åŠ å¼ºå¤§. ç°åœ¨å¸‚åœºä¸Šæœ‰å…³LDAPçš„äº§å“å·²æœ‰å¾ˆå¤š,å„å¤§è½¯ä»¶å…¬...</div></div></div></a><a class="pagination-related" href="/posts/9bbf0b6e/" title="keycloak https required"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo11.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-16</div><div class="info-item-2">keycloak https required</div></div><div class="info-2"><div class="info-item-1">keycloakç™»å½•æç¤º At this point, you have two options; 1) Install HTTPS in Wildfly or 2) Tunnel via SSH into the remote machine and proxy your browser through it, go to the admin console and turn off the SSL requirement (Realm Settings -&gt; Login -&gt; Require SSL). This works because SSL is not required for local connections. keycloak ç”¨ç§æœ‰åœ°å€å¯ä»¥ä¸ä½¿ç”¨sslç™»å½•æ–¹å¼ï¼Œå¦‚æœç”¨å…¬ç½‘å°±éœ€è¦ç”¨sslç™»å½•æ–¹å¼ã€‚ è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®æŸrealmä¸å¼ºåˆ¶ä½¿ç”¨ssl å¯åŠ¨: 1./standalone.sh -b 0.0.0.0 -bmanagement 0.0.0.0 æ·»åŠ è´¦å· 1./add-user-keycloak -r master -u &lt;&g...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">å°äº”</div><div class="author-info-description">Tomorrow will be better,Everything will be fine</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/wang-xiaowu"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="/random" target="_blank" title="éšä¾¿é€›é€›"><i class="fa-solid fa-shuffle"></i></a><a class="social-icon" href="mailto:wangxiaowu950330@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/30655189?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Rancher"><span class="toc-number">1.</span> <span class="toc-text">Rancher</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Nexus3"><span class="toc-number">2.</span> <span class="toc-text">Nexus3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.1.</span> <span class="toc-text">é…ç½®æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95nexus%E7%AE%A1%E7%90%86%E8%B4%A6%E6%88%B7%EF%BC%8C%E8%BF%9B%E5%85%A5%E9%85%8D%E7%BD%AE%E7%95%8C%E9%9D%A2"><span class="toc-number">2.1.1.</span> <span class="toc-text">ç™»å½•nexusç®¡ç†è´¦æˆ·ï¼Œè¿›å…¥é…ç½®ç•Œé¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E6%AC%A1%E7%82%B9%E5%87%BBSecurity-LDAP%E8%BF%9B%E5%85%A5%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.1.2.</span> <span class="toc-text">ä¾æ¬¡ç‚¹å‡»Security&gt;&gt;LDAPè¿›å…¥é…ç½®é¡µé¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB-%E2%80%9CCreate-Connection%E2%80%9D-%E5%88%9B%E5%BB%BALDAP%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.1.3.</span> <span class="toc-text">ç‚¹å‡» â€œCreate Connectionâ€ åˆ›å»ºLDAPè¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BF%A1%E6%81%AF%E5%A1%AB%E5%86%99%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E7%82%B9%E5%87%BB-Verify-connection-%E6%B5%8B%E8%AF%95%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.1.4.</span> <span class="toc-text">æœåŠ¡å™¨ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡» Verify connection æµ‹è¯•è¿æ¥[</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E7%82%B9%E5%87%BB-next-%E8%BF%9B%E5%85%A5LDAP-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%E9%85%8D%E7%BD%AE"><span class="toc-number">2.1.5.</span> <span class="toc-text">æµ‹è¯•æˆåŠŸåï¼Œç‚¹å‡» next è¿›å…¥LDAP ç”¨æˆ·å’Œç»„é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB-Verify-user-mapping-%E6%B5%8B%E8%AF%95%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8"><span class="toc-number">2.1.6.</span> <span class="toc-text">ç‚¹å‡» Verify user mapping æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB-Verify-login-%E6%B5%8B%E8%AF%95ldap-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">2.1.7.</span> <span class="toc-text">ç‚¹å‡» Verify login æµ‹è¯•ldap ç”¨æˆ·ç™»å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB-Save-%E4%BF%9D%E5%AD%98%EF%BC%8C%E9%80%80%E5%87%BA%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%EF%BC%8C%E4%BD%BF%E7%94%A8LDAP%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E3%80%82"><span class="toc-number">2.1.8.</span> <span class="toc-text">ç‚¹å‡» Save ä¿å­˜ï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼Œä½¿ç”¨LDAPç”¨æˆ·ç™»å½•ï¼Œé…ç½®å®Œæˆã€‚</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Rancher2-6-7-Monitoring-Grafana"><span class="toc-number">3.</span> <span class="toc-text">Rancher2.6&#x2F;7 Monitoring Grafana</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">å…ˆå†³æ¡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grafana-%E5%AF%B9%E6%8E%A5-LDAP"><span class="toc-number">3.2.</span> <span class="toc-text">Grafana å¯¹æ¥ LDAP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91-Monitoring-Yaml-%E9%85%8D%E7%BD%AE-LDAP"><span class="toc-number">3.2.1.</span> <span class="toc-text">ç¼–è¾‘ Monitoring Yaml é…ç½® LDAP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Edit-YAML"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">Edit YAML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-LDAP-%E8%AE%A4%E8%AF%81%E9%85%8D%E7%BD%AE"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">å¼€å¯ LDAP è®¤è¯é…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-grafana-%E5%B1%82%E7%BA%A7%E4%B8%8B%EF%BC%8C%E6%B7%BB%E5%8A%A0-LDAP-%E8%AE%A4%E8%AF%81%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.1.3.</span> <span class="toc-text">åœ¨ grafana å±‚çº§ä¸‹ï¼Œæ·»åŠ  LDAP è®¤è¯å‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-number">3.2.1.3.1.</span> <span class="toc-text">å‚æ•°è¯´æ˜ï¼š</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%A5%BD%E4%B9%8B%E5%90%8E%E5%90%AF%E5%8A%A8%E7%9B%91%E6%8E%A7"><span class="toc-number">3.2.1.4.</span> <span class="toc-text">é…ç½®å¥½ä¹‹åå¯åŠ¨ç›‘æ§</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP-%E9%AA%8C%E8%AF%81"><span class="toc-number">3.2.2.</span> <span class="toc-text">LDAP éªŒè¯</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Elastic-Stack"><span class="toc-number">4.</span> <span class="toc-text">Elastic Stack</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6-1"><span class="toc-number">4.1.</span> <span class="toc-text">å…ˆå†³æ¡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">4.2.</span> <span class="toc-text">å‚è€ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.</span> <span class="toc-text">ä¿®æ”¹é…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#elasticsearch-yml"><span class="toc-number">4.3.1.</span> <span class="toc-text">elasticsearch.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#role-mapping-yml"><span class="toc-number">4.3.2.</span> <span class="toc-text">role_mapping.yml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-number">4.4.</span> <span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6-2"><span class="toc-number">4.4.1.</span> <span class="toc-text">å…ˆå†³æ¡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0"><span class="toc-number">4.4.2.</span> <span class="toc-text">æè¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E6%A8%A1%E6%9D%BF"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">è§’è‰²æ¨¡æ¿</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0"><span class="toc-number">4.4.3.</span> <span class="toc-text">è·¯å¾„å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E4%BD%93%E5%8F%82%E6%95%B0"><span class="toc-number">4.4.4.</span> <span class="toc-text">ä¸»ä½“å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">4.4.5.</span> <span class="toc-text">ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98"><span class="toc-number">4.5.</span> <span class="toc-text">å®æˆ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">4.6.</span> <span class="toc-text">é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ldap%E7%94%A8%E6%88%B7%E5%88%A0%E9%99%A4%E5%90%8E%E4%BB%8D%E5%8F%AF%E7%99%BB%E5%BD%95"><span class="toc-number">4.6.1.</span> <span class="toc-text">ldapç”¨æˆ·åˆ é™¤åä»å¯ç™»å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BC%9A%E8%AF%9D%E7%BC%93%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number">4.6.2.</span> <span class="toc-text">é…ç½®ä¼šè¯ç¼“å­˜æ—¶é—´</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Jumpserver"><span class="toc-number">5.</span> <span class="toc-text">Jumpserver</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Yearning"><span class="toc-number">6.</span> <span class="toc-text">Yearning</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Sonarqube"><span class="toc-number">7.</span> <span class="toc-text">Sonarqube</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Yapi"><span class="toc-number">8.</span> <span class="toc-text">Yapi</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Gitlab"><span class="toc-number">9.</span> <span class="toc-text">Gitlab</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%81%E7%8B%90GitLab%E9%9B%86%E6%88%90LDAP%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.1.</span> <span class="toc-text">æç‹GitLabé›†æˆLDAPèƒŒæ™¯ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">9.1.1.</span> <span class="toc-text">ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E5%AE%89%E5%85%A8%E6%80%A7%E6%A3%80%E6%9F%A5"><span class="toc-number">9.1.2.</span> <span class="toc-text">LDAPå®‰å…¨æ€§æ£€æŸ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%AF%B4%E6%98%8E"><span class="toc-number">9.1.3.</span> <span class="toc-text">å…¶ä»–è¯´æ˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AELDAP%E9%9B%86%E6%88%90"><span class="toc-number">9.2.</span> <span class="toc-text">é…ç½®LDAPé›†æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%9E%81%E7%8B%90%E5%AE%98%E7%BD%91%E5%AE%89%E8%A3%85GitLab"><span class="toc-number">9.2.1.</span> <span class="toc-text">å‚è€ƒæç‹å®˜ç½‘å®‰è£…GitLab</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E5%B9%B6%E9%87%8D%E6%96%B0%E9%85%8D%E7%BD%AEGitLab%E5%AE%9E%E4%BE%8B"><span class="toc-number">9.2.2.</span> <span class="toc-text">ä¿®æ”¹é…ç½®å¹¶é‡æ–°é…ç½®GitLabå®ä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Rake-Task%E6%A3%80%E6%9F%A5%E5%90%8C%E6%AD%A5%E6%83%85%E5%86%B5"><span class="toc-number">9.2.3.</span> <span class="toc-text">ä½¿ç”¨Rake Taskæ£€æŸ¥åŒæ­¥æƒ…å†µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96LDAP%E9%85%8D%E7%BD%AE"><span class="toc-number">9.3.</span> <span class="toc-text">å…¶ä»–LDAPé…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP%E7%94%A8%E6%88%B7%E5%90%8C%E6%AD%A5%E5%91%A8%E6%9C%9F"><span class="toc-number">9.3.1.</span> <span class="toc-text">LDAPç”¨æˆ·åŒæ­¥å‘¨æœŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9C%AA%E7%94%9F%E6%95%88%E5%8F%AF%E6%89%A7%E8%A1%8Cgitlab-ctl-restart%E9%87%8D%E5%90%AF%E4%B8%8B"><span class="toc-number">9.4.</span> <span class="toc-text">å¦‚æœªç”Ÿæ•ˆå¯æ‰§è¡Œgitlab-ctl restarté‡å¯ä¸‹</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo16.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"></a><div class="content"><a class="title" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—">Clawdbotå®Œæ•´é…ç½®æŒ‡å—</a><time datetime="2026-02-11T10:15:08.000Z" title="å‘è¡¨äº 2026-02-11 18:15:08">2026-02-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"></a><div class="content"><a class="title" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;">å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;</a><time datetime="2026-02-03T06:02:28.000Z" title="å‘è¡¨äº 2026-02-03 14:02:28">2026-02-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/nba-logo5.jpg)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2026 By å°äº”</span><span class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div><div class="footer_custom_text"><a href="https://www.foreverblog.cn/" rel="external nofollow noreferrer" target="_blank"><img src="/img/loading.gif" data-lazy-src="https://img.foreverblog.cn/logo_en_default.png" alt="åå¹´ä¹‹çº¦" style="width:auto;height:16px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach(((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(a,r),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then((({svg:e})=>m(e)))}))})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const t=(e,a)=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach((r=>{const n=e[r];"object"==typeof n&&null!==n&&(n[a]?e[r]=n[a]:t(n,a))}))},e=e=>{window.loadChartJS=!0,Array.from(e).forEach(((e,a)=>{const r=e.firstElementChild,n=e.getAttribute("data-chartjs-id")||"chartjs-"+a,d=e.getAttribute("data-width"),o=document.getElementById(n);o&&o.parentNode.remove();const c=r.textContent,l=document.createElement("canvas");l.id=n;const s=document.createElement("div");s.className="chartjs-wrap",d&&(s.style.width=d),s.appendChild(l),r.insertAdjacentElement("afterend",s);const h=document.getElementById(n).getContext("2d"),i=JSON.parse(c),m="dark"===document.documentElement.getAttribute("data-theme")?"dark-mode":"light-mode";(t=>{"dark-mode"===t?(Chart.defaults.color="rgba(255, 255, 255, 0.8)",Chart.defaults.borderColor="rgba(255, 255, 255, 0.2)",Chart.defaults.scale.ticks.backdropColor="transparent"):(Chart.defaults.color="rgba(0, 0, 0, 0.8)",Chart.defaults.borderColor="rgba(0, 0, 0, 0.1)",Chart.defaults.scale.ticks.backdropColor="transparent")})(m),t(i,m),new Chart(h,i)}))},a=()=>{const t=document.querySelectorAll("#article-container .chartjs-container");0!==t.length&&(window.loadChartJS?e(t):btf.getScript("https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js").then((()=>e(t))))};btf.addGlobalFn("themeChange",a,"chartjs"),btf.addGlobalFn("encrypt",a,"chartjs"),window.pjax?a():document.addEventListener("DOMContentLoaded",a)})()</script></div><div class="aplayer no-destroy" data-id="9061017364" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="false" muted></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>ç½‘ç«™å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">ç‚¹å‡»åˆ·æ–°</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬",backgroundColor:t,duration:5e5,pos:e,actionText:"ç‚¹å‡»åˆ·æ–°",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/diytitle.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/talking/"]):not([href="/artitalk/"])',selectors:['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:description"]','link[rel="canonical"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!0,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>{try{e()}catch(e){console.debug("Pjax callback failed:",e)}}))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{if(404===e.request.status){!0?pjax.loadUrl("/404"):window.location.href="/404"}}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div id="algolia-search-input"><div class="ais-SearchBox"><form class="ais-SearchBox-form" action="" role="search" novalidate><input class="ais-SearchBox-input" type="search" placeholder="æœç´¢æ–‡ç« " autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" maxlength="512" aria-label="Search"><button class="ais-SearchBox-submit" type="submit" title="Submit the search query" style="display:none"><svg class="ais-SearchBox-submitIcon" width="10" height="10" viewBox="0 0 40 40" aria-hidden="true"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path></svg></button></form></div><hr><div id="algolia-search-results"><div id="algolia-hits"><div id="algolia-hits-empty" style="display:none"></div><div class="ais-Hits" style="display:none"><ol class="ais-Hits-list"></ol></div></div><div class="ais-Pagination" id="algolia-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="algolia-info"><span class="ais-Stats-text"></span><a class="algolia-poweredBy" href="https://www.algolia.com/?utm_source=algoliasearch.js&amp;utm_medium=website&amp;utm_content=localhost&amp;utm_campaign=poweredby" target="_blank" aria-label="Search by Algolia" rel="noopener noreferrer"><svg class="ais-PoweredBy-logo" height="1.2em" viewBox="0 0 572 64" style="width:auto"><path fill="#36395A" d="M16 48.3c-3.4 0-6.3-.6-8.7-1.7A12.4 12.4 0 0 1 1.9 42C.6 40 0 38 0 35.4h6.5a6.7 6.7 0 0 0 3.9 6c1.4.7 3.3 1.1 5.6 1.1 2.2 0 4-.3 5.4-1a7 7 0 0 0 3-2.4 6 6 0 0 0 1-3.4c0-1.5-.6-2.8-1.9-3.7-1.3-1-3.3-1.6-5.9-1.8l-4-.4c-3.7-.3-6.6-1.4-8.8-3.4a10 10 0 0 1-3.3-7.9c0-2.4.6-4.6 1.8-6.4a12 12 0 0 1 5-4.3c2.2-1 4.7-1.6 7.5-1.6s5.5.5 7.6 1.6a12 12 0 0 1 5 4.4c1.2 1.8 1.8 4 1.8 6.7h-6.5a6.4 6.4 0 0 0-3.5-5.9c-1-.6-2.6-1-4.4-1s-3.2.3-4.4 1c-1.1.6-2 1.4-2.6 2.4-.5 1-.8 2-.8 3.1a5 5 0 0 0 1.5 3.6c1 1 2.6 1.7 4.7 1.9l4 .3c2.8.2 5.2.8 7.2 1.8 2.1 1 3.7 2.2 4.9 3.8a9.7 9.7 0 0 1 1.7 5.8c0 2.5-.7 4.7-2 6.6a13 13 0 0 1-5.6 4.4c-2.4 1-5.2 1.6-8.4 1.6Zm35.6 0c-2.6 0-4.8-.4-6.7-1.3a13 13 0 0 1-4.7-3.5 17.1 17.1 0 0 1-3.6-10.4v-1c0-2 .3-3.8 1-5.6a13 13 0 0 1 7.3-8.3 15 15 0 0 1 6.3-1.4A13.2 13.2 0 0 1 64 24.3c1 2.2 1.6 4.6 1.6 7.2V34H39.4v-4.3h21.8l-1.8 2.2c0-2-.3-3.7-.9-5.1a7.3 7.3 0 0 0-2.7-3.4c-1.2-.7-2.7-1.1-4.6-1.1s-3.4.4-4.7 1.3a8 8 0 0 0-2.9 3.6c-.6 1.5-.9 3.3-.9 5.4 0 2 .3 3.7 1 5.3a7.9 7.9 0 0 0 2.8 3.7c1.3.8 3 1.3 5 1.3s3.8-.5 5.1-1.3c1.3-1 2.1-2 2.4-3.2h6a11.8 11.8 0 0 1-7 8.7 16 16 0 0 1-6.4 1.2ZM80 48c-2.2 0-4-.3-5.7-1a8.4 8.4 0 0 1-3.7-3.3 9.7 9.7 0 0 1-1.3-5.2c0-2 .5-3.8 1.5-5.2a9 9 0 0 1 4.3-3.1c1.8-.7 4-1 6.7-1H89v4.1h-7.5c-2 0-3.4.5-4.4 1.4-1 1-1.6 2.1-1.6 3.6s.5 2.7 1.6 3.6c1 1 2.5 1.4 4.4 1.4 1.1 0 2.2-.2 3.2-.7 1-.4 1.9-1 2.6-2 .6-1 1-2.4 1-4.2l1.7 2.1c-.2 2-.7 3.8-1.5 5.2a9 9 0 0 1-3.4 3.3 12 12 0 0 1-5.3 1Zm9.5-.7v-8.8h-1v-10c0-1.8-.5-3.2-1.4-4.1-1-1-2.4-1.4-4.2-1.4a142.9 142.9 0 0 0-10.2.4v-5.6a74.8 74.8 0 0 1 8.6-.4c3 0 5.5.4 7.5 1.2s3.4 2 4.4 3.6c1 1.7 1.4 4 1.4 6.7v18.4h-5Zm12.9 0V17.8h5v12.3h-.2c0-4.2 1-7.4 2.8-9.5a11 11 0 0 1 8.3-3.1h1v5.6h-2a9 9 0 0 0-6.3 2.2c-1.5 1.5-2.2 3.6-2.2 6.4v15.6h-6.4Zm34.4 1a15 15 0 0 1-6.6-1.3c-1.9-.9-3.4-2-4.7-3.5a15.5 15.5 0 0 1-2.7-5c-.6-1.7-1-3.6-1-5.4v-1c0-2 .4-3.8 1-5.6a15 15 0 0 1 2.8-4.9c1.3-1.5 2.8-2.6 4.6-3.5a16.4 16.4 0 0 1 13.3.2c2 1 3.5 2.3 4.8 4a12 12 0 0 1 2 6H144c-.2-1.6-1-3-2.2-4.1a7.5 7.5 0 0 0-5.2-1.7 8 8 0 0 0-4.7 1.3 8 8 0 0 0-2.8 3.6 13.8 13.8 0 0 0 0 10.3c.6 1.5 1.5 2.7 2.8 3.6s2.8 1.3 4.8 1.3c1.5 0 2.7-.2 3.8-.8a7 7 0 0 0 2.6-2c.7-1 1-2 1.2-3.2h6.2a11 11 0 0 1-2 6.2 15.1 15.1 0 0 1-11.8 5.5Zm19.7-1v-40h6.4V31h-1.3c0-3 .4-5.5 1.1-7.6a9.7 9.7 0 0 1 3.5-4.8A9.9 9.9 0 0 1 172 17h.3c3.5 0 6 1.1 7.9 3.5 1.7 2.3 2.6 5.7 2.6 10v16.8h-6.4V29.6c0-2.1-.6-3.8-1.8-5a6.4 6.4 0 0 0-4.8-1.8c-2 0-3.7.7-5 2a7.8 7.8 0 0 0-1.9 5.5v17h-6.4Zm63.8 1a12.2 12.2 0 0 1-10.9-6.2 19 19 0 0 1-1.8-7.3h1.4v12.5h-5.1v-40h6.4v19.8l-2 3.5c.2-3.1.8-5.7 1.9-7.7a11 11 0 0 1 4.4-4.5c1.8-1 3.9-1.5 6.1-1.5a13.4 13.4 0 0 1 12.8 9.1c.7 1.9 1 3.8 1 6v1c0 2.2-.3 4.1-1 6a13.6 13.6 0 0 1-13.2 9.4Zm-1.2-5.5a8.4 8.4 0 0 0 7.9-5c.7-1.5 1.1-3.3 1.1-5.3s-.4-3.8-1.1-5.3a8.7 8.7 0 0 0-3.2-3.6 9.6 9.6 0 0 0-9.2-.2 8.5 8.5 0 0 0-3.3 3.2c-.8 1.4-1.3 3-1.3 5v2.3a9 9 0 0 0 1.3 4.8 9 9 0 0 0 3.4 3c1.4.7 2.8 1 4.4 1Zm27.3 3.9-10-28.9h6.5l9.5 28.9h-6Zm-7.5 12.2v-5.7h4.9c1 0 2-.1 2.9-.4a4 4 0 0 0 2-1.4c.4-.7.9-1.6 1.2-2.7l8.6-30.9h6.2l-9.3 32.4a14 14 0 0 1-2.5 5 8.9 8.9 0 0 1-4 2.8c-1.5.6-3.4.9-5.6.9h-4.4Zm9-12.2v-5.2h6.4v5.2H248Z"></path><path fill="#003DFF" d="M534.4 9.1H528a.8.8 0 0 1-.7-.7V1.8c0-.4.2-.7.6-.8l6.5-1c.4 0 .8.2.9.6v7.8c0 .4-.4.7-.8.7zM428 35.2V.8c0-.5-.3-.8-.7-.8h-.2l-6.4 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.5 0 .8-.4.8-.8V43c0-.4-.3-.7-.6-.8-4.5-.5-4.5-6-4.5-7zm106.5-21.8H528c-.4 0-.7.4-.7.8v34c0 .4.3.8.7.8h6.5c.4 0 .8-.4.8-.8v-34c0-.5-.4-.8-.8-.8zm-17.7 21.8V.8c0-.5-.3-.8-.8-.8l-6.5 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.4 0 .8-.4.8-.8V43c0-.4-.3-.7-.7-.8-4.4-.5-4.4-6-4.4-7zm-22.2-20.6a16.5 16.5 0 0 1 8.6 9.3c.8 2.2 1.3 4.8 1.3 7.5a19.4 19.4 0 0 1-4.6 12.6 14.8 14.8 0 0 1-5.2 3.6c-2 .9-5.2 1.4-6.8 1.4a21 21 0 0 1-6.7-1.4 15.4 15.4 0 0 1-8.6-9.3 21.3 21.3 0 0 1 0-14.4 15.2 15.2 0 0 1 8.6-9.3c2-.8 4.3-1.2 6.7-1.2s4.6.4 6.7 1.2zm-6.7 27.6c2.7 0 4.7-1 6.2-3s2.2-4.3 2.2-7.8-.7-6.3-2.2-8.3-3.5-3-6.2-3-4.7 1-6.1 3c-1.5 2-2.2 4.8-2.2 8.3s.7 5.8 2.2 7.8 3.5 3 6.2 3zm-88.8-28.8c-6.2 0-11.7 3.3-14.8 8.2a18.6 18.6 0 0 0 4.8 25.2c1.8 1.2 4 1.8 6.2 1.7s.1 0 .1 0h.9c4.2-.7 8-4 9.1-8.1v7.4c0 .4.3.7.8.7h6.4a.7.7 0 0 0 .7-.7V14.2c0-.5-.3-.8-.7-.8h-13.5zm6.3 26.5a9.8 9.8 0 0 1-5.7 2h-.5a10 10 0 0 1-9.2-14c1.4-3.7 5-6.3 9-6.3h6.4v18.3zm152.3-26.5h13.5c.5 0 .8.3.8.7v33.7c0 .4-.3.7-.8.7h-6.4a.7.7 0 0 1-.8-.7v-7.4c-1.2 4-4.8 7.4-9 8h-.1a4.2 4.2 0 0 1-.5.1h-.9a10.3 10.3 0 0 1-7-2.6c-4-3.3-6.5-8.4-6.5-14.2 0-3.7 1-7.2 3-10 3-5 8.5-8.3 14.7-8.3zm.6 28.4c2.2-.1 4.2-.6 5.7-2V21.7h-6.3a9.8 9.8 0 0 0-9 6.4 10.2 10.2 0 0 0 9.1 13.9h.5zM452.8 13.4c-6.2 0-11.7 3.3-14.8 8.2a18.5 18.5 0 0 0 3.6 24.3 10.4 10.4 0 0 0 13 .6c2.2-1.5 3.8-3.7 4.5-6.1v7.8c0 2.8-.8 5-2.2 6.3-1.5 1.5-4 2.2-7.5 2.2l-6-.3c-.3 0-.7.2-.8.5l-1.6 5.5c-.1.4.1.8.5 1h.1c2.8.4 5.5.6 7 .6 6.3 0 11-1.4 14-4.1 2.7-2.5 4.2-6.3 4.5-11.4V14.2c0-.5-.4-.8-.8-.8h-13.5zm6.3 8.2v18.3a9.6 9.6 0 0 1-5.6 2h-1a10.3 10.3 0 0 1-8.8-14c1.4-3.7 5-6.3 9-6.3h6.4zM291 31.5A32 32 0 0 1 322.8 0h30.8c.6 0 1.2.5 1.2 1.2v61.5c0 1.1-1.3 1.7-2.2 1l-19.2-17a18 18 0 0 1-11 3.4 18.1 18.1 0 1 1 18.2-14.8c-.1.4-.5.7-.9.6-.1 0-.3 0-.4-.2l-3.8-3.4c-.4-.3-.6-.8-.7-1.4a12 12 0 1 0-2.4 8.3c.4-.4 1-.5 1.6-.2l14.7 13.1v-46H323a26 26 0 1 0 10 49.7c.8-.4 1.6-.2 2.3.3l3 2.7c.3.2.3.7 0 1l-.2.2a32 32 0 0 1-47.2-28.6z"></path></svg></a></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.39.0/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/search/algolia.min.js"></script></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"==location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo3.jpg" alt="/img/nba-logo3.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2024-02-02</span><a class="blog-slider__title" href="posts/1bcb0ad4/">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</a><div class="blog-slider__text">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</div><a class="blog-slider__button" href="posts/1bcb0ad4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-06-14</span><a class="blog-slider__title" href="posts/aa43cc95/">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</a><div class="blog-slider__text">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</div><a class="blog-slider__button" href="posts/aa43cc95/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" alt="/img/nba-logo29.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-13</span><a class="blog-slider__title" href="posts/15957791/">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</a><div class="blog-slider__text">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</div><a class="blog-slider__button" href="posts/15957791/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/4ecfb081/">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</a><div class="blog-slider__text">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</div><a class="blog-slider__button" href="posts/4ecfb081/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/37032a87/">k3sé«˜å¯ç”¨å®‰è£…</a><div class="blog-slider__text">k3sé«˜å¯ç”¨å®‰è£…</div><a class="blog-slider__button" href="posts/37032a87/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo5.jpg" alt="/img/nba-logo5.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="posts/20b19ed4/">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</a><div class="blog-slider__text">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</div><a class="blog-slider__button" href="posts/20b19ed4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-02</span><a class="blog-slider__title" href="posts/6de14387/">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</a><div class="blog-slider__text">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</div><a class="blog-slider__button" href="posts/6de14387/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-12-11</span><a class="blog-slider__title" href="posts/fb9adcb6/">è®°å½•windows11+wsl2ç¯å¢ƒæ­é…</a><div class="blog-slider__text">windows11+wsl2å¼€å‘ç¯å¢ƒé…ç½®</div><a class="blog-slider__button" href="posts/fb9adcb6/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2026-01-28</span><a class="blog-slider__title" href="posts/2a9d73ff/">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</a><div class="blog-slider__text">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</div><a class="blog-slider__button" href="posts/2a9d73ff/">è¯¦æƒ…</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';console.log("å·²æŒ‚è½½swiper"),parent.insertAdjacentHTML("afterbegin",child)}</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script><style></style><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("å·²æŒ‚è½½history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300,hOffset:20,vOffset:-20},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/"})</script></body></html>
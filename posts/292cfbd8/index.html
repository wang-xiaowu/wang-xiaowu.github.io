<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼ | å°äº”çš„ä¸ªäººæ‚è´§é“º</title><meta name="author" content="å°äº”"><meta name="copyright" content="å°äº”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="æ‘˜è‡ªï¼šhttps:&#x2F;&#x2F;cloud.tencent.com&#x2F;developer&#x2F;article&#x2F;2110964 ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼ From + Size æŸ¥è¯¢  Search After æŸ¥è¯¢  Scroll éå†æŸ¥è¯¢    ã€Œè¯´æ˜ï¼šã€   å®˜æ–¹å·²ç»ä¸å†æ¨èé‡‡ç”¨Scroll APIè¿›è¡Œæ·±åº¦åˆ†é¡µã€‚å¦‚æœé‡åˆ°è¶…è¿‡ 10000 çš„æ·±åº¦åˆ†é¡µï¼Œæ¨èé‡‡ç”¨search_after + PITã€‚ å®˜æ–¹æ–‡æ¡£åœ°"><meta property="og:type" content="article"><meta property="og:title" content="è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼"><meta property="og:url" content="https://xiaowu95.wang/posts/292cfbd8/"><meta property="og:site_name" content="å°äº”çš„ä¸ªäººæ‚è´§é“º"><meta property="og:description" content="æ‘˜è‡ªï¼šhttps:&#x2F;&#x2F;cloud.tencent.com&#x2F;developer&#x2F;article&#x2F;2110964 ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼ From + Size æŸ¥è¯¢  Search After æŸ¥è¯¢  Scroll éå†æŸ¥è¯¢    ã€Œè¯´æ˜ï¼šã€   å®˜æ–¹å·²ç»ä¸å†æ¨èé‡‡ç”¨Scroll APIè¿›è¡Œæ·±åº¦åˆ†é¡µã€‚å¦‚æœé‡åˆ°è¶…è¿‡ 10000 çš„æ·±åº¦åˆ†é¡µï¼Œæ¨èé‡‡ç”¨search_after + PITã€‚ å®˜æ–¹æ–‡æ¡£åœ°"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xiaowu95.wang/img/nba-logo16.jpg"><meta property="article:published_time" content="2023-10-11T06:16:44.000Z"><meta property="article:modified_time" content="2023-10-11T06:16:44.000Z"><meta property="article:author" content="å°äº”"><meta property="article:tag" content="elasticsearch"><meta property="article:tag" content="elastic stack"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaowu95.wang/img/nba-logo16.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼",
  "url": "https://xiaowu95.wang/posts/292cfbd8/",
  "image": "https://xiaowu95.wang/img/nba-logo16.jpg",
  "datePublished": "2023-10-11T06:16:44.000Z",
  "dateModified": "2023-10-11T06:16:44.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "å°äº”",
      "url": "https://xiaowu95.wang"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://xiaowu95.wang/posts/292cfbd8/"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="kHfLZxYQ7y3s3AR7gyJDdJkQvGNjQsvopp6N3gEEx0s"><meta name="baidu-site-verification" content="codeva-aVS4F6wAjS"><link rel="manifest" href="/wang-xiaowu/pwa/site.webmanifest"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/wang-xiaowu/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/wang-xiaowu/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/wang-xiaowu/pwa/favicon-16x16.png"><link rel="mask-icon" href="/wang-xiaowu/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),c=window.matchMedia("(prefers-color-scheme: dark)"),r=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(r.matches)a();else if(c.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}c.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?86cb34987e15c900c39e12ebdf08c50d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-1MFQ47191J"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1MFQ47191J"),btf.addGlobalFn("pjaxComplete",(()=>{gtag("config","G-1MFQ47191J",{page_path:window.location.pathname})}),"google_analytics")</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"M91QAWRVY4",apiKey:"ecc30a5e06136e1cc491685e39801190",indexName:"xiaowu-blog",hitsPerPage:6,languages:{hits_empty:"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œè€—æ—¶ ${time} æ¯«ç§’"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç°¡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400,highlightFullpage:!0,highlightMacStyle:!0},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶å¤±è´¥",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"å¤©",dateSuffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:{limitCount:150,languages:{author:"ä½œè€…: å°äº”",link:"é“¾æ¥: ",source:"æ¥æº: å°äº”çš„ä¸ªäººæ‚è´§é“º",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡",cht_to_chs:"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡",day_to_night:"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js",buttonText:"åŠ è½½æ›´å¤š"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/font.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="/css/titleStyle.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/custom.css"><style>.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="alternate" href="/atom.xml" title="å°äº”çš„ä¸ªäººæ‚è´§é“º" type="application/atom+xml"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",(()=>{Pace.restart()}),"pace_restart")</script><link rel="stylesheet" href="/css/pace.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/nba-logo16.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">å°äº”çš„ä¸ªäººæ‚è´§é“º</span></a><a class="nav-page-title" href="/"><span class="site-name">è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/github/"><i class="fa-fw fa-solid fa-address-card"></i> <span>å…³äºæˆ‘</span></a></div><div class="menus_item"><a class="site-page" href="/ac/"><i class="fa-fw fa-solid fa-wind"></i> <span>ä¾¿æºå°ç©ºè°ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fa-solid fa-walkie-talkie"></i> <span>åšå®¢çŸ­è®°</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i> <span>ç›®å½•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-otter"></i> <span>æ‚è®°</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/songs/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>å›¾åº“</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa-solid fa-film"></i> <span>å½±è§†|ç•ªå‰§</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book faa-fload"></i> <span>ä¹¦å•</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad faa-fload"></i> <span>æ¸¸æˆ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-bilibili"></i> <span>BiliBiliè¿½ç•ª</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-solid fa-video"></i> <span>BiliBiliè¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>Website Memo</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://console.leancloud.app/apps"><span>ğŸš€ LeanCloud</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/dashboard"><span>ğŸš€ Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://tongji.baidu.com/main/overview/10000432799/overview/index"><span>ğŸš€ ç™¾åº¦ç»Ÿè®¡</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://ziyuan.baidu.com/dashboard/index"><span>ğŸš€ ç™¾åº¦ç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://analytics.google.com/analytics/web/"><span>ğŸš€ è°·æ­Œåˆ†æ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://search.google.com/search-console?hl=zh-cn"><span>ğŸš€ è°·æ­Œç«™ç‚¹ç®¡ç†</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.google.com/adsense/new/u/0/pub-1375421173355613/home"><span>ğŸš€ è°·æ­Œå¹¿å‘Šè”ç›Ÿ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com/"><span>ğŸš€ Algolia</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://sms-activate.org/cn/"><span>ğŸš€ Sms-activate</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://chatgpt.com/"><span>ğŸš€ ChatGPT</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://gemini.google.com/"><span>ğŸš€ Gemini</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://poe.com/"><span>ğŸš€ Poeèšåˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.idc.net/clientarea"><span>ğŸš€ åæµªäº‘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.west.cn/"><span>ğŸš€ è¥¿éƒ¨æ•°æ®</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://shandianpro.com/#/dashboard"><span>ğŸš€ é—ªç”µ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.huojian.homes/"><span>ğŸš€ å°ç«ç®­</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/winston779/gougou"><span>ğŸš€ ç‹—ç‹—åŠ é€Ÿ</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼<a class="post-edit-link" href="https://github.com/wang-xiaowu/wang-xiaowu.github.io/issues/new?_posts/elasticsearch/è®°å½•ESä½¿ç”¨åˆ†é¡µæŸ¥è¯¢çš„å‡ ç§æ–¹å¼.md" rel="external nofollow noreferrer" title="ç¼–è¾‘" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-10-11T06:16:44.000Z" title="å‘è¡¨äº 2023-10-11 14:16:44">2023-10-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-10-11T06:16:44.000Z" title="æ›´æ–°äº 2023-10-11 14:16:44">2023-10-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/elasticsearch/">elasticsearch</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">3.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>12åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°è¯¥æ–‡ç« å·²ç»è¿‡äº†&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œæ–‡ç« æ‰€æè¿°çš„å…§å®¹å¯èƒ½å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œè¯·ç•™æ„ã€‚&quot;,&quot;postUpdate&quot;:&quot;2023-10-11 14:16:44&quot;}" hidden></div><p>æ‘˜è‡ªï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cloud.tencent.com/developer/article/2110964">https://cloud.tencent.com/developer/article/2110964</a></p><h2 id="ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼"><a href="#ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼" class="headerlink" title="ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼"></a><strong>ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼</strong></h2><ul><li><p>From + Size æŸ¥è¯¢</p></li><li><p>Search After æŸ¥è¯¢</p></li><li><p>Scroll éå†æŸ¥è¯¢</p></li></ul><blockquote><p><strong>ã€Œè¯´æ˜ï¼šã€</strong></p><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/7800de61abafb0c618022dc9d00b3fdc.png" title="img"><p>å®˜æ–¹å·²ç»ä¸å†æ¨èé‡‡ç”¨<code>Scroll API</code>è¿›è¡Œæ·±åº¦åˆ†é¡µã€‚å¦‚æœé‡åˆ°è¶…è¿‡ 10000 çš„æ·±åº¦åˆ†é¡µï¼Œæ¨èé‡‡ç”¨<code>search_after + PIT</code>ã€‚</p><p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<code>https://www.elastic.co/guide/en/elasticsearch/reference/7.14/paginate-search-results.html</code>ã€‚</p></blockquote><h2 id="åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ·±åº¦åˆ†é¡µé—®é¢˜"><a href="#åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ·±åº¦åˆ†é¡µé—®é¢˜" class="headerlink" title="åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ·±åº¦åˆ†é¡µé—®é¢˜"></a><strong>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ·±åº¦åˆ†é¡µé—®é¢˜</strong></h2><p><strong>ã€Œä¸ºä»€ä¹ˆåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­å¯¹æ·±åº¦åˆ†é¡µæ”¯æŒéƒ½ä¸æ€ä¹ˆå‹å¥½å‘¢ï¼Ÿã€</strong></p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­åˆ†é¡µæŸ¥è¯¢çš„è¿‡ç¨‹ã€‚</p><hr><p>å‡è®¾åœ¨ä¸€ä¸ªæœ‰ 4 ä¸ªä¸»åˆ†ç‰‡çš„ç´¢å¼•ä¸­æœç´¢ï¼Œæ¯é¡µè¿”å›10æ¡è®°å½•ã€‚</p><p>å½“æˆ‘ä»¬è¯·æ±‚ç»“æœçš„ç¬¬1é¡µï¼ˆç»“æœä» 1 åˆ° 10 ï¼‰ï¼Œæ¯ä¸€ä¸ªåˆ†ç‰‡äº§ç”Ÿå‰ 10 çš„ç»“æœï¼Œå¹¶ä¸”è¿”å›ç»™ åè°ƒèŠ‚ç‚¹ ï¼Œåè°ƒèŠ‚ç‚¹å¯¹ 40 ä¸ªç»“æœæ’åºå¾—åˆ°å…¨éƒ¨ç»“æœçš„å‰ 10 ä¸ªã€‚</p><p>å½“æˆ‘ä»¬è¯·æ±‚ç¬¬ 99 é¡µï¼ˆç»“æœä» 990 åˆ° 1000ï¼‰ï¼Œéœ€è¦ä»æ¯ä¸ªåˆ†ç‰‡ä¸­è·å–æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„å‰1000ä¸ªç»“æœï¼Œè¿”å›ç»™åè°ƒèŠ‚ç‚¹ï¼Œ ç„¶ååè°ƒèŠ‚ç‚¹å¯¹å…¨éƒ¨ 4000 ä¸ªç»“æœæ’åºï¼Œè·å–å‰10ä¸ªè®°å½•ã€‚</p><p>å½“è¯·æ±‚ç¬¬10000é¡µï¼Œæ¯é¡µ10æ¡è®°å½•ï¼Œåˆ™éœ€è¦å…ˆä»æ¯ä¸ªåˆ†ç‰‡ä¸­è·å–æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„å‰100010ä¸ªç»“æœï¼Œè¿”å›ç»™åè°ƒèŠ‚ç‚¹ã€‚ç„¶ååè°ƒèŠ‚ç‚¹éœ€è¦å¯¹å…¨éƒ¨ï¼ˆ100010 * åˆ†ç‰‡æ•°4ï¼‰çš„ç»“æœè¿›è¡Œæ’åºï¼Œç„¶åè¿”å›å‰10ä¸ªè®°å½•ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¯¹ç»“æœæ’åºçš„æˆæœ¬éšåˆ†é¡µçš„æ·±åº¦æˆæŒ‡æ•°ä¸Šå‡ã€‚</p><p>è¿™å°±æ˜¯ web æœç´¢å¼•æ“å¯¹ä»»ä½•æŸ¥è¯¢éƒ½ä¸è¦è¿”å›è¶…è¿‡ 10000 ä¸ªç»“æœçš„åŸå› ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/faac75f967e4292480a5f2c1e0f3a516.png" title="img"><blockquote><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ·±åº¦åˆ†é¡µé—®é¢˜</p></blockquote><h2 id="From-Size-æŸ¥è¯¢"><a href="#From-Size-æŸ¥è¯¢" class="headerlink" title="From + Size æŸ¥è¯¢"></a><strong>From + Size æŸ¥è¯¢</strong></h2><h3 id="å‡†å¤‡æ•°æ®"><a href="#å‡†å¤‡æ•°æ®" class="headerlink" title="å‡†å¤‡æ•°æ®"></a><strong>å‡†å¤‡æ•°æ®</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">PUT</span> user_index</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>:  &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span>&#125;,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>:   &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>&#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">POST</span> user_index/_bulk</span><br><span class="line">&#123; <span class="string">&quot;create&quot;</span>:  &#123;  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;1&quot;</span> &#125;&#125;</span><br><span class="line">&#123; <span class="string">&quot;id&quot;</span>:<span class="number">1</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;è€ä¸‡&quot;</span>&#125;</span><br><span class="line">&#123; <span class="string">&quot;create&quot;</span>:  &#123;  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;2&quot;</span> &#125;&#125;</span><br><span class="line">&#123; <span class="string">&quot;id&quot;</span>:<span class="number">2</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;è€ç‹&quot;</span>&#125;</span><br><span class="line">&#123; <span class="string">&quot;create&quot;</span>:  &#123;  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;3&quot;</span> &#125;&#125;</span><br><span class="line">&#123; <span class="string">&quot;id&quot;</span>:<span class="number">3</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;è€åˆ˜&quot;</span>&#125;</span><br><span class="line">&#123; <span class="string">&quot;create&quot;</span>:  &#123;  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;4&quot;</span> &#125;&#125;</span><br><span class="line">&#123; <span class="string">&quot;id&quot;</span>:<span class="number">4</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;å°æ˜&quot;</span>&#125;</span><br><span class="line">&#123; <span class="string">&quot;create&quot;</span>:  &#123;  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;5&quot;</span> &#125;&#125;</span><br><span class="line">&#123; <span class="string">&quot;id&quot;</span>:<span class="number">5</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;å°çº¢&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢æ¼”ç¤º"><a href="#æŸ¥è¯¢æ¼”ç¤º" class="headerlink" title="æŸ¥è¯¢æ¼”ç¤º"></a><strong>æŸ¥è¯¢æ¼”ç¤º</strong></h3><p><strong>ã€Œæ— æ¡ä»¶æŸ¥è¯¢ã€</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> user_index/_search</span><br></pre></td></tr></table></figure><p>é»˜è®¤è¿”å›å‰10ä¸ªåŒ¹é…çš„åŒ¹é…é¡¹ã€‚å…¶ä¸­ï¼š</p><ul><li>fromï¼šæœªæŒ‡å®šï¼Œé»˜è®¤å€¼æ˜¯ 0ï¼Œæ³¨æ„ä¸æ˜¯1ï¼Œä»£è¡¨å½“å‰é¡µè¿”å›æ•°æ®çš„èµ·å§‹å€¼ã€‚</li><li>sizeï¼šæœªæŒ‡å®šï¼Œé»˜è®¤å€¼æ˜¯ 10ï¼Œä»£è¡¨å½“å‰é¡µè¿”å›æ•°æ®çš„æ¡æ•°ã€‚</li></ul><p><strong>ã€ŒæŒ‡å®šfrom+sizeæŸ¥è¯¢ã€</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> user_index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;from&quot;</span>: , </span><br><span class="line">    <span class="string">&quot;size&quot;</span>: ,</span><br><span class="line">    <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;asc&quot;</span>&#125;    </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="max-result-window"><a href="#max-result-window" class="headerlink" title="max_result_window"></a><strong>max_result_window</strong></h3><p>es é»˜è®¤é‡‡ç”¨çš„åˆ†é¡µæ–¹å¼æ˜¯ from+ size çš„å½¢å¼ï¼Œåœ¨æ·±åº¦åˆ†é¡µçš„æƒ…å†µä¸‹ï¼Œè¿™ç§ä½¿ç”¨æ–¹å¼æ•ˆç‡æ˜¯éå¸¸ä½çš„ã€‚</p><p>æ¯”å¦‚ from &#x3D; 5000ï¼Œsize&#x3D;10ï¼Œ es éœ€è¦åœ¨å„ä¸ªåˆ†ç‰‡ä¸ŠåŒ¹é…æ’åºå¹¶å¾—åˆ°5000*10æ¡æœ‰æ•ˆæ•°æ®ï¼Œç„¶ååœ¨ç»“æœé›†ä¸­å–æœ€å 10æ¡æ•°æ®è¿”å›ï¼Œè¿™ç§æ–¹å¼ç±»ä¼¼äº mongo çš„ skip + sizeã€‚</p><p>é™¤äº†æ•ˆç‡ä¸Šçš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸€ä¸ªæ— æ³•è§£å†³çš„é—®é¢˜æ˜¯ï¼Œes ç›®å‰æ”¯æŒæœ€å¤§çš„ skip å€¼æ˜¯ <strong>ã€Œmax_result_window ï¼Œé»˜è®¤ä¸º 10000ã€</strong>ã€‚ä¹Ÿå°±æ˜¯å½“ from + size &gt; max_result_window æ—¶ï¼Œes å°†è¿”å›é”™è¯¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> user_index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;from&quot;</span>: <span class="number">10000</span>, </span><br><span class="line">    <span class="string">&quot;size&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;asc&quot;</span>&#125;    </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ElasticSearchæœ€ç®€å•çš„åˆ†é¡µæŸ¥è¯¢ï¼Œä½†ä»¥ä¸Šå‘½ä»¤æ˜¯ä¼šæŠ¥é”™çš„ã€‚</p><p>æŠ¥é”™ä¿¡æ¯ï¼ŒæŒ‡windowé»˜è®¤æ˜¯10000ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;root_cause&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;illegal_argument_exception&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;Result window is too large, from + size must be less than or equal to: [10000] but was [10001]. See the scroll api for a more efficient way to request large data sets. This limit can be set by changing the [index.max_result_window] index level setting.&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;search_phase_execution_exception&quot;</span>,</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆèƒ½æƒ³åˆ°çš„å°±æ˜¯è°ƒå¤§è¿™ä¸ª windowã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">PUT</span> user_index/_settings</span><br><span class="line">&#123; </span><br><span class="line">    <span class="string">&quot;index&quot;</span> : &#123; </span><br><span class="line">        <span class="string">&quot;max_result_window&quot;</span> : <span class="number">20000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè¿™ç§æ–¹å¼åªèƒ½æš‚æ—¶è§£å†³é—®é¢˜ï¼Œå½“es çš„ä½¿ç”¨è¶Šæ¥è¶Šå¤šï¼Œæ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œæ·±åº¦åˆ†é¡µçš„åœºæ™¯è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œå¦‚ä½•è§£å†³è¿™ç§é—®é¢˜å‘¢ï¼Ÿ</p><p><strong>ã€Œå®˜æ–¹å»ºè®®ï¼šã€</strong></p><p>é¿å…è¿‡åº¦ä½¿ç”¨ from å’Œ size æ¥åˆ†é¡µæˆ–ä¸€æ¬¡è¯·æ±‚å¤ªå¤šç»“æœã€‚</p><p>ä¸æ¨èä½¿ç”¨ from + size åšæ·±åº¦åˆ†é¡µæŸ¥è¯¢çš„æ ¸å¿ƒåŸå› ï¼š</p><ul><li>æœç´¢è¯·æ±‚é€šå¸¸è·¨è¶Šå¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡å¿…é¡»å°†å…¶è¯·æ±‚çš„å‘½ä¸­å†…å®¹ä»¥åŠä»»ä½•å…ˆå‰é¡µé¢çš„å‘½ä¸­å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li><li>å¯¹äºç¿»é¡µè¾ƒæ·±çš„é¡µé¢æˆ–å¤§é‡ç»“æœï¼Œè¿™äº›æ“ä½œä¼šæ˜¾è‘—å¢åŠ å†…å­˜å’Œ CPU ä½¿ç”¨ç‡ï¼Œä»è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™æˆ–èŠ‚ç‚¹æ•…éšœã€‚</li></ul><h2 id="Search-After-æŸ¥è¯¢"><a href="#Search-After-æŸ¥è¯¢" class="headerlink" title="Search After æŸ¥è¯¢"></a><strong>Search After æŸ¥è¯¢</strong></h2><p>search_after å‚æ•°ä½¿ç”¨ä¸Šä¸€é¡µä¸­çš„ä¸€ç»„æ’åºå€¼æ¥æ£€ç´¢ä¸‹ä¸€é¡µçš„æ•°æ®ã€‚</p><p>ä½¿ç”¨ search_after éœ€è¦å…·æœ‰ç›¸åŒæŸ¥è¯¢å’Œæ’åºå€¼çš„å¤šä¸ªæœç´¢è¯·æ±‚ã€‚å¦‚æœåœ¨è¿™äº›è¯·æ±‚ä¹‹é—´å‘ç”Ÿåˆ·æ–°ï¼Œç»“æœçš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œå¯¼è‡´è·¨é¡µé¢çš„ç»“æœä¸ä¸€è‡´ã€‚ä¸ºé˜²æ­¢å‡ºç°è¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ—¶é—´ç‚¹ (PIT) ä»¥ä¿ç•™æœç´¢ä¸­çš„å½“å‰ç´¢å¼•çŠ¶æ€ã€‚</p><p>æ—¶é—´ç‚¹<code>Point In Timeï¼ˆPITï¼‰</code>ä¿éšœæœç´¢è¿‡ç¨‹ä¸­ä¿ç•™ç‰¹å®šäº‹ä»¶ç‚¹çš„ç´¢å¼•çŠ¶æ€ã€‚</p><p><strong>ã€Œæ³¨æ„âš ï¸ï¼šã€</strong></p><p>es ç»™å‡ºäº† search_after çš„æ–¹å¼ï¼Œè¿™æ˜¯åœ¨ &gt;&#x3D; 5.0 ç‰ˆæœ¬æ‰æä¾›çš„åŠŸèƒ½ã€‚</p><p><code>Point In Timeï¼ˆPITï¼‰</code>æ˜¯ Elasticsearch 7.10 ç‰ˆæœ¬ä¹‹åæ‰æœ‰çš„æ–°ç‰¹æ€§ã€‚</p><p><strong>ã€ŒPITçš„æœ¬è´¨ï¼šå­˜å‚¨ç´¢å¼•æ•°æ®çŠ¶æ€çš„è½»é‡çº§è§†å›¾ã€‚ã€</strong></p><p>å¦‚ä¸‹ç¤ºä¾‹èƒ½å¾ˆå¥½çš„è§£è¯» PIT è§†å›¾çš„å†…æ¶µã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1</span>ã€ç»™ç´¢å¼•user_indexåˆ›å»ºpit</span><br><span class="line"><span class="variable constant_">POST</span> /user_index/_pit?keep_alive=5m</span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>ã€ç»Ÿè®¡å½“å‰è®°å½•æ•° <span class="number">5</span></span><br><span class="line"><span class="variable constant_">POST</span> /user_index/_count</span><br><span class="line"></span><br><span class="line">#<span class="number">3</span>ã€æ ¹æ®pitç»Ÿè®¡å½“å‰è®°å½•æ•° <span class="number">5</span></span><br><span class="line"><span class="variable constant_">GET</span> /_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="string">&quot;pit&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;id&quot;</span>:  <span class="string">&quot;i6-xAwEKdXNlcl9pbmRleBZYTXdtSFRHeVJrZVhCby1OTjlHMS1nABZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3AAAAAAAAIODBFmdBWEd2UmFVVGllZldNdnhPZDJmX0EBFlhNd21IVEd5UmtlWEJvLU5OOUcxLWcAAA==&quot;</span>, </span><br><span class="line">     <span class="string">&quot;keep_alive&quot;</span>: <span class="string">&quot;5m&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;asc&quot;</span>&#125;    </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">#<span class="number">4</span>ã€æ’å…¥ä¸€æ¡æ•°æ®</span><br><span class="line"><span class="variable constant_">POST</span> user_index/_bulk</span><br><span class="line">&#123; <span class="string">&quot;create&quot;</span>:  &#123;  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;6&quot;</span> &#125;&#125;</span><br><span class="line">&#123; <span class="string">&quot;id&quot;</span>:<span class="number">6</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;è€æ&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">#<span class="number">5</span>ã€æ•°æ®æ€»é‡ <span class="number">6</span></span><br><span class="line"><span class="variable constant_">POST</span> /user_index/_count</span><br><span class="line"></span><br><span class="line">#<span class="number">6</span>ã€æ ¹æ®pitç»Ÿè®¡æ•°æ®æ€»é‡è¿˜æ˜¯ <span class="number">5</span> ï¼Œè¯´æ˜æ˜¯æ ¹æ®æ—¶é—´ç‚¹çš„è§†å›¾è¿›è¡Œç»Ÿè®¡ã€‚</span><br><span class="line"><span class="variable constant_">GET</span> /_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="string">&quot;pit&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;id&quot;</span>:  <span class="string">&quot;i6-xAwEKdXNlcl9pbmRleBZYTXdtSFRHeVJrZVhCby1OTjlHMS1nABZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3AAAAAAAAIODBFmdBWEd2UmFVVGllZldNdnhPZDJmX0EBFlhNd21IVEd5UmtlWEJvLU5OOUcxLWcAAA==&quot;</span>, </span><br><span class="line">     <span class="string">&quot;keep_alive&quot;</span>: <span class="string">&quot;5m&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;asc&quot;</span>&#125;    </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº† PITï¼Œ<code>search_after</code> çš„åç»­æŸ¥è¯¢éƒ½æ˜¯åŸºäº PIT è§†å›¾è¿›è¡Œï¼Œèƒ½æœ‰æ•ˆä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>search_after åˆ†é¡µæŸ¥è¯¢å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p><h3 id="è·å–ç´¢å¼•çš„pit"><a href="#è·å–ç´¢å¼•çš„pit" class="headerlink" title="è·å–ç´¢å¼•çš„pit"></a><strong>è·å–ç´¢å¼•çš„pit</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> /user_index/_pit?keep_alive=m</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®pité¦–æ¬¡æŸ¥è¯¢"><a href="#æ ¹æ®pité¦–æ¬¡æŸ¥è¯¢" class="headerlink" title="æ ¹æ®pité¦–æ¬¡æŸ¥è¯¢"></a><strong>æ ¹æ®pité¦–æ¬¡æŸ¥è¯¢</strong></h3><p>è¯´æ˜ï¼šæ ¹æ®pitæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸ç”¨æŒ‡å®šç´¢å¼•åç§°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GET</span> /_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="string">&quot;pit&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;id&quot;</span>:  <span class="string">&quot;i6-xAwEKdXNlcl9pbmRleBZYTXdtSFRHeVJrZVhCby1OTjlHMS1nABZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3AAAAAAAAIODBFmdBWEd2UmFVVGllZldNdnhPZDJmX0EBFlhNd21IVEd5UmtlWEJvLU5OOUcxLWcAAA==&quot;</span>, </span><br><span class="line">     <span class="string">&quot;keep_alive&quot;</span>: <span class="string">&quot;1m&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;asc&quot;</span>&#125;    </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ç»“æœï¼šè¿”å›çš„sortå€¼ä¸º2.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hits<span class="string">&quot; : [</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        &quot;</span>_index<span class="string">&quot; : &quot;</span>user_index<span class="string">&quot;,</span></span><br><span class="line"><span class="string">        &quot;</span>_type<span class="string">&quot; : &quot;</span>_doc<span class="string">&quot;,</span></span><br><span class="line"><span class="string">        &quot;</span>_id<span class="string">&quot; : &quot;</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">        &quot;</span>_score<span class="string">&quot; : null,</span></span><br><span class="line"><span class="string">        &quot;</span>_source<span class="string">&quot; : &#123;</span></span><br><span class="line"><span class="string">          &quot;</span>id<span class="string">&quot; : 2,</span></span><br><span class="line"><span class="string">          &quot;</span>name<span class="string">&quot; : &quot;</span>è€ç‹<span class="string">&quot;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &quot;</span>sort<span class="string">&quot; : [</span></span><br><span class="line"><span class="string">          2</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    ]</span></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®search-afterå’Œpitè¿›è¡Œç¿»é¡µæŸ¥è¯¢"><a href="#æ ¹æ®search-afterå’Œpitè¿›è¡Œç¿»é¡µæŸ¥è¯¢" class="headerlink" title="æ ¹æ®search_afterå’Œpitè¿›è¡Œç¿»é¡µæŸ¥è¯¢"></a><strong>æ ¹æ®search_afterå’Œpitè¿›è¡Œç¿»é¡µæŸ¥è¯¢</strong></h3><p>è¯´æ˜ï¼š</p><p><code>search_after</code>æŒ‡å®šä¸ºä¸Šä¸€æ¬¡æŸ¥è¯¢è¿”å›çš„sortå€¼ã€‚</p><p>è¦è·å¾—ä¸‹ä¸€é¡µç»“æœï¼Œè¯·ä½¿ç”¨æœ€åä¸€æ¬¡å‘½ä¸­çš„æ’åºå€¼ï¼ˆåŒ…æ‹¬ tiebreakerï¼‰ä½œä¸º search_after å‚æ•°é‡æ–°è¿è¡Œå…ˆå‰çš„æœç´¢ã€‚å¦‚æœä½¿ç”¨ PITï¼Œè¯·åœ¨ pit.id å‚æ•°ä¸­ä½¿ç”¨æœ€æ–°çš„ PIT IDã€‚æœç´¢çš„æŸ¥è¯¢å’Œæ’åºå‚æ•°å¿…é¡»ä¿æŒä¸å˜ã€‚å¦‚æœæä¾›ï¼Œåˆ™ from å‚æ•°å¿…é¡»ä¸º 0ï¼ˆé»˜è®¤å€¼ï¼‰æˆ– -1ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GET</span> /_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;size&quot;</span>: <span class="number">1</span>, </span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="string">&quot;pit&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;id&quot;</span>:  <span class="string">&quot;i6-xAwEKdXNlcl9pbmRleBZYTXdtSFRHeVJrZVhCby1OTjlHMS1nABZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3AAAAAAAAIOJ7FmdBWEd2UmFVVGllZldNdnhPZDJmX0EBFlhNd21IVEd5UmtlWEJvLU5OOUcxLWcAAA==&quot;</span>, </span><br><span class="line">     <span class="string">&quot;keep_alive&quot;</span>: <span class="string">&quot;5m&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;asc&quot;</span>&#125;    </span><br><span class="line">    ],</span><br><span class="line">  <span class="string">&quot;search_after&quot;</span>: [                                </span><br><span class="line">    <span class="number">2</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="search-after-ä¼˜ç¼ºç‚¹åˆ†æ"><a href="#search-after-ä¼˜ç¼ºç‚¹åˆ†æ" class="headerlink" title="search_after ä¼˜ç¼ºç‚¹åˆ†æ"></a><strong>search_after ä¼˜ç¼ºç‚¹åˆ†æ</strong></h3><p>search_after æŸ¥è¯¢ä»…æ”¯æŒå‘åç¿»é¡µã€‚</p><p>ä¸ä¸¥æ ¼å—åˆ¶äº<code>max_result_window</code>ï¼Œå¯ä»¥æ— é™åˆ¶å¾€åç¿»é¡µã€‚</p><p>å•æ¬¡è¯·æ±‚å€¼ä¸èƒ½è¶…è¿‡ max_result_windowï¼›ä½†æ€»ç¿»é¡µç»“æœé›†å¯ä»¥è¶…è¿‡ã€‚</p><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a><strong>æ€è€ƒ</strong></h2><ol><li>ä¸ºä»€ä¹ˆé‡‡ç”¨<code>search_after</code>æŸ¥è¯¢èƒ½è§£å†³æ·±åº¦åˆ†é¡µçš„é—®é¢˜ï¼Ÿ</li><li>search_after + pit åˆ†é¡µæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼ŒPIT è§†å›¾è¿‡æœŸæ€ä¹ˆåŠï¼Ÿ</li><li><code>search_after</code>æŸ¥è¯¢ï¼Œå¦‚æœéœ€è¦å›åˆ°å‰å‡ é¡µæ€ä¹ˆåŠï¼Ÿ</li></ol><h2 id="Scroll-éå†æŸ¥è¯¢"><a href="#Scroll-éå†æŸ¥è¯¢" class="headerlink" title="Scroll éå†æŸ¥è¯¢"></a><strong>Scroll éå†æŸ¥è¯¢</strong></h2><p>ES å®˜æ–¹ä¸å†æ¨èä½¿ç”¨<code>Scroll API</code>è¿›è¡Œæ·±åº¦åˆ†é¡µã€‚å¦‚æœæ‚¨éœ€è¦åœ¨åˆ†é¡µè¶…è¿‡ 10000 ä¸ªç‚¹å‡»æ—¶ä¿ç•™ç´¢å¼•çŠ¶æ€ï¼Œè¯·ä½¿ç”¨å¸¦æœ‰æ—¶é—´ç‚¹ (PIT) çš„ search_after å‚æ•°ã€‚</p><p>ç›¸æ¯”äº From + size å’Œ search_after è¿”å›ä¸€é¡µæ•°æ®ï¼ŒScroll API å¯ç”¨äºä»å•ä¸ªæœç´¢è¯·æ±‚ä¸­æ£€ç´¢å¤§é‡ç»“æœï¼ˆç”šè‡³æ‰€æœ‰ç»“æœï¼‰ï¼Œå…¶æ–¹å¼ä¸ä¼ ç»Ÿæ•°æ®åº“ä¸­æ¸¸æ ‡ï¼ˆcursorï¼‰ç±»ä¼¼ã€‚</p><p>Scroll API åŸç†ä¸Šæ˜¯å¯¹æŸæ¬¡æŸ¥è¯¢ç”Ÿæˆä¸€ä¸ªæ¸¸æ ‡ scroll_idï¼Œ åç»­çš„æŸ¥è¯¢åªéœ€è¦æ ¹æ®è¿™ä¸ªæ¸¸æ ‡å»å–æ•°æ®ï¼Œç›´åˆ°ç»“æœé›†ä¸­è¿”å›çš„ hits å­—æ®µä¸ºç©ºï¼Œå°±è¡¨ç¤ºéå†ç»“æŸã€‚scroll_id çš„ç”Ÿæˆå¯ä»¥ç†è§£ä¸ºå»ºç«‹äº†ä¸€ä¸ªä¸´æ—¶çš„å†å²å¿«ç…§ï¼Œåœ¨æ­¤ä¹‹åçš„å¢åˆ æ”¹æŸ¥ç­‰æ“ä½œä¸ä¼šå½±å“åˆ°è¿™ä¸ªå¿«ç…§çš„ç»“æœã€‚</p><p>æ‰€æœ‰æ–‡æ¡£è·å–å®Œæ¯•ä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨æ¸…ç†æ‰ scroll_idã€‚è™½ç„¶es ä¼šæœ‰è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œä½†æ˜¯ srcoll_id çš„å­˜åœ¨ä¼šè€—è´¹å¤§é‡çš„èµ„æºæ¥ä¿å­˜ä¸€ä»½å½“å‰æŸ¥è¯¢ç»“æœé›†æ˜ åƒï¼Œå¹¶ä¸”ä¼šå ç”¨æ–‡ä»¶æè¿°ç¬¦ã€‚æ‰€ä»¥ç”¨å®Œä¹‹åè¦åŠæ—¶æ¸…ç†ã€‚ä½¿ç”¨ es æä¾›çš„ CLEAR_API æ¥åˆ é™¤æŒ‡å®šçš„ scroll_id</p><h3 id="é¦–æ¬¡æŸ¥è¯¢ï¼Œå¹¶è·å–-scroll-id"><a href="#é¦–æ¬¡æŸ¥è¯¢ï¼Œå¹¶è·å–-scroll-id" class="headerlink" title="é¦–æ¬¡æŸ¥è¯¢ï¼Œå¹¶è·å–_scroll_id"></a><strong>é¦–æ¬¡æŸ¥è¯¢ï¼Œå¹¶è·å–_scroll_id</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> /user_index/_search?scroll=1m</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;size&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;_scroll_id&quot;</span> : <span class="string">&quot;FGluY2x1ZGVfY29udGV4dF91dWlkDXF1ZXJ5QW5kRmV0Y2gBFmdBWEd2UmFVVGllZldNdnhPZDJmX0EAAAAAACDlQBZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3&quot;</span>,</span><br><span class="line">  <span class="string">&quot;took&quot;</span> : ,</span><br><span class="line">  <span class="string">&quot;timed_out&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&quot;_shards&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;total&quot;</span> : ,</span><br><span class="line">    <span class="string">&quot;successful&quot;</span> : ,</span><br><span class="line">    <span class="string">&quot;skipped&quot;</span> : ,</span><br><span class="line">    <span class="string">&quot;failed&quot;</span> : </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;hits&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;total&quot;</span> : &#123;</span><br><span class="line">      <span class="string">&quot;value&quot;</span> : ,</span><br><span class="line">      <span class="string">&quot;relation&quot;</span> : <span class="string">&quot;eq&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;max_score&quot;</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">&quot;hits&quot;</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;_index&quot;</span> : <span class="string">&quot;user_index&quot;</span>,</span><br><span class="line">        <span class="string">&quot;_type&quot;</span> : <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">        <span class="string">&quot;_id&quot;</span> : <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;_score&quot;</span> : <span class="number">1.0</span>,</span><br><span class="line">        <span class="string">&quot;_source&quot;</span> : &#123;</span><br><span class="line">          <span class="string">&quot;id&quot;</span> : ,</span><br><span class="line">          <span class="string">&quot;name&quot;</span> : <span class="string">&quot;è€ä¸‡&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®scroll-idéå†æ•°æ®"><a href="#æ ¹æ®scroll-idéå†æ•°æ®" class="headerlink" title="æ ¹æ®scroll_idéå†æ•°æ®"></a><strong>æ ¹æ®scroll_idéå†æ•°æ®</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> /_search/scroll                                                               </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scroll&quot;</span> : <span class="string">&quot;1m&quot;</span>,      </span><br><span class="line">  <span class="string">&quot;scroll_id&quot;</span> : <span class="string">&quot;FGluY2x1ZGVfY29udGV4dF91dWlkDXF1ZXJ5QW5kRmV0Y2gBFmdBWEd2UmFVVGllZldNdnhPZDJmX0EAAAAAACDlKxZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3&quot;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ¸¸æ ‡scroll"><a href="#åˆ é™¤æ¸¸æ ‡scroll" class="headerlink" title="åˆ é™¤æ¸¸æ ‡scroll"></a><strong>åˆ é™¤æ¸¸æ ‡scroll</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">DELETE</span> /_search/scroll</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;scroll_id&quot;</span> : <span class="string">&quot;FGluY2x1ZGVfY29udGV4dF91dWlkDXF1ZXJ5QW5kRmV0Y2gBFmdBWEd2UmFVVGllZldNdnhPZDJmX0EAAAAAACDlKxZ0TEpMcVRuNFRxaWI4cXFTVERhOHR3&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a><strong>ä¼˜ç¼ºç‚¹</strong></h3><p>scrollæŸ¥è¯¢çš„ç›¸åº”æ•°æ®æ˜¯éå®æ—¶çš„ï¼Œè¿™ç‚¹å’Œ PIT è§†å›¾æ¯”è¾ƒç±»ä¼¼ï¼Œå¦‚æœéå†è¿‡ç¨‹ä¸­æ’å…¥æ–°çš„æ•°æ®ï¼Œæ˜¯æŸ¥è¯¢ä¸åˆ°çš„ã€‚</p><p>å¹¶ä¸”ä¿ç•™ä¸Šä¸‹æ–‡éœ€è¦è¶³å¤Ÿçš„å †å†…å­˜ç©ºé—´ã€‚</p><h3 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a><strong>é€‚ç”¨åœºæ™¯</strong></h3><p>å…¨é‡æˆ–æ•°æ®é‡å¾ˆå¤§æ—¶éå†ç»“æœæ•°æ®ï¼Œè€Œéåˆ†é¡µæŸ¥è¯¢ã€‚</p><p><strong>ã€Œå®˜æ–¹æ–‡æ¡£å¼ºè°ƒï¼šã€</strong></p><p>ä¸å†å»ºè®®ä½¿ç”¨scroll APIè¿›è¡Œæ·±åº¦åˆ†é¡µã€‚å¦‚æœè¦åˆ†é¡µæ£€ç´¢è¶…è¿‡ Top 10000+ ç»“æœæ—¶ï¼Œæ¨èä½¿ç”¨ï¼šPIT + search_afterã€‚</p><h2 id="ä¸šåŠ¡å±‚é¢ä¼˜åŒ–"><a href="#ä¸šåŠ¡å±‚é¢ä¼˜åŒ–" class="headerlink" title="ä¸šåŠ¡å±‚é¢ä¼˜åŒ–"></a><strong>ä¸šåŠ¡å±‚é¢ä¼˜åŒ–</strong></h2><p>å¾ˆå¤šæ—¶å€™ï¼ŒæŠ€æœ¯è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¸šåŠ¡å±‚é¢å˜é€šä¸‹æ¥è§£å†³ï¼</p><p>æ¯”å¦‚ï¼Œé’ˆå¯¹åˆ†é¡µåœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦‚ä¸‹ä¼˜åŒ–æ–¹æ¡ˆã€‚</p><h3 id="å¢åŠ é»˜è®¤çš„ç­›é€‰æ¡ä»¶"><a href="#å¢åŠ é»˜è®¤çš„ç­›é€‰æ¡ä»¶" class="headerlink" title="å¢åŠ é»˜è®¤çš„ç­›é€‰æ¡ä»¶"></a><strong>å¢åŠ é»˜è®¤çš„ç­›é€‰æ¡ä»¶</strong></h3><p>é€šè¿‡å°½å¯èƒ½çš„å¢åŠ é»˜è®¤çš„ç­›é€‰æ¡ä»¶ï¼Œå¦‚ï¼šæ—¶é—´å‘¨æœŸå’Œæœ€ä½è¯„åˆ†ï¼Œå‡å°‘æ»¡è¶³æ¡ä»¶çš„æ•°æ®é‡ï¼Œé¿å…å‡ºç°æ·±åº¦åˆ†é¡µçš„æƒ…å†µã€‚</p><h3 id="é‡‡ç”¨æ»šåŠ¨å¢é‡æ˜¾ç¤º"><a href="#é‡‡ç”¨æ»šåŠ¨å¢é‡æ˜¾ç¤º" class="headerlink" title="é‡‡ç”¨æ»šåŠ¨å¢é‡æ˜¾ç¤º"></a><strong>é‡‡ç”¨æ»šåŠ¨å¢é‡æ˜¾ç¤º</strong></h3><p>å…¸å‹åœºæ™¯æ¯”å¦‚æ‰‹æœºä¸Šé¢æµè§ˆå¾®åšï¼Œå¯ä»¥ä¸€ç›´å¾€ä¸‹æ»šåŠ¨åŠ è½½ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>å¦‚ä¸‹åˆ—è¡¨å±•ç¤ºä¸­ï¼Œå–æ¶ˆäº†åˆ†é¡µæŒ‰é’®ï¼Œé€šè¿‡æ»šåŠ¨æ¡å¢é‡åŠ è½½æ•°æ®ã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/3905a37419af0f8c74c9294ac857f4dc.png" title="img"><blockquote><p>æ»šåŠ¨åˆ†é¡µ</p></blockquote><h3 id="å°èŒƒå›´è·³é¡µ"><a href="#å°èŒƒå›´è·³é¡µ" class="headerlink" title="å°èŒƒå›´è·³é¡µ"></a><strong>å°èŒƒå›´è·³é¡µ</strong></h3><p>é€šè¿‡å¯¹åˆ†é¡µç»„ä»¶çš„è®¾è®¡ï¼Œç¦æ­¢ç”¨æˆ·ç›´æ¥è·³è½¬åˆ°éå¸¸å¤§çš„é¡µç ä¸­ã€‚æ¯”å¦‚ç›´æ¥è·³è½¬åˆ°æœ€åä¸€é¡µè¿™ç§æ“ä½œã€‚</p><p>ç¤ºä¾‹ï¼šgoogleæœç´¢çš„å°èŒƒå›´è·³é¡µã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/eba9e1c2868bebe030ef4b5c412118ee.png" title="img"><blockquote><p>è°·æ­Œæœç´¢å°èŒƒå›´è·³é¡µ</p></blockquote><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><p>åˆ†å¸ƒå¼å­˜å‚¨å¼•æ“çš„æ·±åº¦åˆ†é¡µç›®å‰æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æ¯”å¦‚é’ˆå¯¹ç™¾åº¦ã€googleè¿™ç§å…¨æ–‡æ£€ç´¢çš„æŸ¥è¯¢ï¼Œé€šè¿‡From+ sizeè¿”å›Top 10000 æ¡æ•°æ®å®Œå…¨èƒ½æ»¡è¶³ä½¿ç”¨éœ€æ±‚ï¼Œæœ«å°¾æŸ¥è¯¢è¯„åˆ†éå¸¸ä½çš„ç»“æœä¸€èˆ¬å‚è€ƒæ„ä¹‰éƒ½ä¸å¤§ã€‚</p><ul><li>From+ sizeï¼šéœ€è¦éšæœºè·³è½¬ä¸åŒåˆ†é¡µï¼ˆç±»ä¼¼ä¸»æµæœç´¢å¼•æ“ï¼‰ã€Top 10000 æ¡æ•°æ®ä¹‹å†…åˆ†é¡µæ˜¾ç¤ºåœºæ™¯ã€‚</li><li>search_afterï¼šä»…éœ€è¦å‘åç¿»é¡µçš„åœºæ™¯åŠè¶…è¿‡Top 10000 æ•°æ®éœ€è¦åˆ†é¡µåœºæ™¯ã€‚</li><li>Scrollï¼šéœ€è¦éå†å…¨é‡æ•°æ®åœºæ™¯ ã€‚</li><li>max_result_windowï¼šè°ƒå¤§æ²»æ ‡ä¸æ²»æœ¬ï¼Œä¸å»ºè®®è°ƒè¿‡å¤§ã€‚</li><li>PITï¼šæœ¬è´¨æ˜¯è§†å›¾ã€‚</li></ul><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/66694a30eb04dc5d76da8c65e010c475.png" title="img"><p>åˆ†å¸ƒå¼å­˜å‚¨å¼•æ“çš„æ·±åº¦åˆ†é¡µç›®å‰æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆ</p><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/682b6f967a118e46bf6fbc7ccf9f519f.jpg" title="img"><blockquote><p>ç™¾åº¦æœç´¢åˆ†é¡µ</p></blockquote><p>ç™¾åº¦æœç´¢çš„åˆ†é¡µæœ€å¤šåªèƒ½åˆ° 76 é¡µï¼Œä¸ç®¡ä½ æœç´¢çš„ç»“æœåŒ¹é…äº†å¤šå°‘å†…å®¹ï¼Œåªèƒ½ç¿»åˆ°ç¬¬ 76 é¡µï¼Œè€Œä¸”ä¹Ÿåªèƒ½å°èŒƒå›´è·³é¡µã€‚</p><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/98bef7002c752fbd072a272e58497bdb.jpg" title="img"><blockquote><p>æœç´¢å¼•æ“éƒ½ä¸èƒ½æ— é™çš„ç¿»é¡µä¸‹å»</p></blockquote><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/c6be05d1d832172e6b596a3c013a5e53.jpg" title="img"><blockquote><p>esæ·±åº¦åˆ†é¡µé—®é¢˜</p></blockquote><img src="/img/loading.gif" data-lazy-src="/posts/292cfbd8/ac799b6fbcde7d90b3f800d296edf5f8.png" title="img"><blockquote><p>æ·˜å®æœç´¢åªæœ‰100é¡µ</p></blockquote><p>åˆ†å¸ƒå¼å­˜å‚¨å¼•æ“çš„æœç´¢ï¼Œæœ‰å¤©ç„¶çš„ç¼ºé™·å­˜åœ¨ï¼Œæ²¡æœ‰å®Œç¾çš„æ–¹æ¡ˆã€‚å½“å­˜åœ¨æŠ€æœ¯è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œé‚£å°±ä»äº§å“å±‚é¢è§£å†³å®ƒã€‚</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang">å°äº”</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://xiaowu95.wang/posts/292cfbd8/">https://xiaowu95.wang/posts/292cfbd8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://xiaowu95.wang" target="_blank">å°äº”çš„ä¸ªäººæ‚è´§é“º</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/elasticsearch/">elasticsearch</a><a class="post-meta__tags" href="/tags/elastic-stack/">elastic stack</a></div><div class="post-share"><div class="social-share" data-image="/img/nba-logo16.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>æ„Ÿè°¢æ”¯æŒ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wxpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/wxpay.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/loading.gif" data-lazy-src="/img/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/3730b70a/" title="åˆ†å¸ƒå¼å—å­˜å‚¨-longhorn"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo15.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">åˆ†å¸ƒå¼å—å­˜å‚¨-longhorn</div></div><div class="info-2"><div class="info-item-1">å®˜æ–¹æ–‡æ¡£ è®°å½•ä¸‹longhornçš„ä½¿ç”¨ - rancherlabæä¾›çš„å¼€æºåˆ†å¸ƒå¼å—å­˜å‚¨æ–¹æ¡ˆ Longhorn æ”¯æŒä»¥ä¸‹æ¶æ„ï¼š AMD64 ARM64ï¼ˆå®éªŒæ€§ï¼‰ longhotnéœ€è¦open-iscsi,curl,findmnt,grep,awk,blkid,lsblkçš„ä¾èµ–(æ˜¯å¦éœ€è¦å•ç‹¬å®‰è£…å¯ä»¥ä½¿ç”¨è¿™ä¸ªè„šæœ¬è¿›è¡ŒéªŒè¯,centos7æœ‰å¯èƒ½éœ€è¦å•ç‹¬å®‰è£…ä¸‹jqå’Œopen-iscsi) åˆ©ç”¨rancherå®‰è£…: åœ¨rancher uiä¸Šé€‰æ‹©è‡ªå·±çš„é›†ç¾¤,ç„¶åæ‰¾åˆ°å¯¹åº”appå®‰è£…å³å¯,v2.6.3æµ‹è¯•æ²¡é—®é¢˜(å°è¯•ç”¨kubectlå®‰è£…çš„æ—¶å€™å‘Šè¯‰æˆ‘ç¼ºå°‘NODE_NAME ENV,ä½†æ˜¯rancherå°±æ­£å¸¸): https://longhorn.io/docs/1.2.3/deploy/install/install-with-rancher/æŸ¥çœ‹å¯¹åº”å‡ ä¸ªnodeæ˜¯å¦æ­£å¸¸åˆ›å»ºlonghorn(é»˜è®¤æ•°æ®è·¯å¾„)ls /var/lib/longhornç•Œé¢ åˆ›å»ºåº”ç”¨è¿›è¡Œæµ‹è¯•åº”ç”¨ yaml åˆ›å»º PVC å’Œ pod pvc.yaml1234567891011apiVersion: v1kind: P...</div></div></div></a><a class="pagination-related" href="/posts/e9fdc17a/" title="abå‹æµ‹å·¥å…·ä½¿ç”¨"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo12.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">abå‹æµ‹å·¥å…·ä½¿ç”¨</div></div><div class="info-2"><div class="info-item-1">Apache Benchmark(ç®€ç§°ab) æ˜¯Apacheå®‰è£…åŒ…ä¸­è‡ªå¸¦çš„å‹åŠ›æµ‹è¯•å·¥å…· ï¼Œç®€å•æ˜“ç”¨ å®‰è£…(centos)123yum -y install httpd-toolsorapt -y install apache2-utils abå‚æ•°è¯´æ˜1234567891011121314151617181920212223242526272829303132333435363738394041424344454647-nï¼šä¸€ä¸ªè¦æ‰§è¡Œçš„æ¬¡æ•°ã€‚é»˜è®¤ä¸º1ã€‚ã€-nå’Œ-cä¸€èˆ¬æˆå¯¹å‡ºç°ã€‚eg[-c 10 -n 1000]ï¼šåŒæ—¶å¤„ç†10ä¸ªè¯·æ±‚,æ¯ç»„è¿è¡Œ(1000/10)æ¬¡,å¿…é¡»æ»¡è¶³nèƒ½æ•´é™¤cã€‘-cï¼šå•æ¬¡å‘å‡ºçš„å¹¶å‘è¯·æ±‚æ•°ã€‚é»˜è®¤ä¸º1ã€‚ã€-nå’Œ-cä¸€èˆ¬æˆå¯¹å‡ºç°ã€‚eg[-c 10 -n 1000]ï¼šåŒæ—¶å¤„ç†10ä¸ªè¯·æ±‚,æ¯ç»„è¿è¡Œ(1000/10)æ¬¡,å¿…é¡»æ»¡è¶³nèƒ½æ•´é™¤cã€‘-tï¼šæµ‹è¯•æ‰€è¿›è¡Œçš„æœ€å¤§ç§’æ•°ã€‚ç”¨äºæµ‹è¯•çš„æœ€å¤§ç§’æ•°æ˜¯50000ã€ç­‰ä»·äº-n 50000ã€‘ï¼Œå®ƒå¯ä»¥ä½¿å¯¹æœåŠ¡å™¨çš„æµ‹è¯•é™åˆ¶åœ¨ä¸€ä¸ªå›ºå®šçš„æ€»æ—¶é—´ä»¥å†…ã€‚-p postfileï¼šFile containing data to POST. Remem...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/d88b52f3/" title="Too many dynamic script compilations within, max[75&#x2F;5m];"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo8.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-06-16</div><div class="info-item-2">Too many dynamic script compilations within, max[75&#x2F;5m];</div></div><div class="info-2"><div class="info-item-1">ResponseError: search_phase_execution_exception: [circuit_breaking_exception] Reason: [script] Too many dynamic script compilations within, max: [75/5m]; please use indexed, or scripts with parameters instead; this limit can be changed by the [script.context.number_sort.max_compilations_rate] setting</div></div></div></a><a class="pagination-related" href="/posts/9c544337/" title="Elasticsearchï¼šSnapshotå¤‡ä»½ä¸æ¢å¤"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo18.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-10-30</div><div class="info-item-2">Elasticsearchï¼šSnapshotå¤‡ä»½ä¸æ¢å¤</div></div><div class="info-2"><div class="info-item-1">SnapshotElasticsearchæ–‡æ¡£é‡Œå¯¹äºsnapshotæœ‰å¦‚ä¸‹æè¿°ï¼š 1The index snapshot process is incremental. In the process of making the index snapshot Elasticsearch analyses the list of the index files that are already stored in the repository and copies only files that were created or changed since the last snapshot. è¿™é‡Œè¯´snapshotæ˜¯å¢é‡å¤‡ä»½çš„ï¼Œæ¯æ¬¡snapshotï¼ŒEsä¼šåˆ†æindexæ–‡ä»¶ï¼Œå¹¶ä¸”åªå¤‡ä»½å¢é‡éƒ¨åˆ†ã€‚ snapshotæ˜¯å¢é‡å¤‡ä»½ï¼Œå¯¹æœªå‘ç”Ÿå˜åŒ–çš„indexé‡å¤å¤‡ä»½å‡ ä¹æ²¡æœ‰èµ„æºæ¶ˆè€—ï¼› åˆ é™¤snapshotä¸ä¼šå¯¹å…¶å®ƒsnapshotäº§ç”Ÿå½±å“ï¼› snapshotæ˜¯å¢é‡å¤‡ä»½ï¼Œå¯¹æœªå‘ç”Ÿå˜åŒ–çš„indexé‡å¤å¤‡ä»½å‡ ä¹æ²¡æœ‰èµ„æºæ¶ˆè€— åˆ é™¤æŸä¸ªsnapshotä¸ä¼šå¯¹å…¶å®ƒsnapshotäº§ç”Ÿå½±å“ã€‚ æ“ä½œå»ºä»“...</div></div></div></a><a class="pagination-related" href="/posts/3cc5542c/" title="Elasticsearchä¹‹ç¼“å­˜"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/nba-logo12.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-07-19</div><div class="info-item-2">Elasticsearchä¹‹ç¼“å­˜</div></div><div class="info-2"><div class="info-item-1">è½¬è‡ªï¼šhttps://www.jianshu.com/p/1ec202148189 Elasticsearch åŒ…å«ä¸‰ä¸ªç±»å‹çš„ç¼“å­˜ï¼Œåˆ†åˆ«ä¸ºï¼š Node Query Cache ã€ Shard Request Cache ã€ Fielddata Cacheã€‚ Node Query Cacheä½œç”¨åŸŸQuery Cacheæ˜¯Nodeçº§åˆ«çš„ï¼Œè¢«æ‰€æœ‰shardå…±äº«ã€‚ æ—©æœŸç‰ˆæœ¬ä¹Ÿå«åšä¸ºFilter Cacheï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹è¿‡æ»¤å™¨çš„æ‰§è¡Œç»“æœè¿›è¡Œç¼“å­˜ã€‚ Query Cacheç¼“å­˜çš„æ˜¯å‹ç¼©è¿‡çš„bitsetï¼Œå¯¹åº”æ»¡è¶³Queryæ¡ä»¶çš„docIDåˆ—è¡¨ã€‚æ·»åŠ cacheçš„æ—¶å€™ï¼Œä¼šæ³¨å†Œä¸€ä¸ªå›è°ƒï¼Œå¦‚æœSegmentè¢«åˆå¹¶æˆ–è€…åˆ é™¤ï¼Œé‚£ä¹ˆå°±ä¼šè¢«ç§»é™¤ç¼“å­˜ ç®€å•æ¥çœ‹å¯ä»¥è¿™æ ·ç†è§£ï¼Œä¸€ä¸ªESçš„æŸ¥è¯¢ä¼šå…ˆè¢«parse æˆä¸€ç³»åˆ—Lucene çš„phraseï¼Œè¿™äº›phrases ä¸­çš„filterè¯­å¥ï¼Œå¦‚æœå¯¹äºæŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€æ ·çš„æ—¶å€™ï¼Œå…¶å®ç»“æœé›†æ˜¯å·²å®šçš„ï¼Œé‚£ä¹ˆè¿™äº›phrase å…¶å®å°±æ˜¯å¯ä»¥å­˜æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹å½“åšcacheç”¨ï¼Œè¿™ä¸ªå°±æ˜¯ query cacheã€‚ é…ç½®å‚æ•°æ—¢ç„¶æ˜¯ç¼“å­˜ï¼Œè‚¯å®šä¼šå¯¹æ•°é‡å’Œå†…å­˜æœ‰é™åˆ¶ã€‚é€šè¿‡_nodes/stat...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">å°äº”</div><div class="author-info-description">Tomorrow will be better,Everything will be fine</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">554</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">168</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">55</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/wang-xiaowu"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="/random" target="_blank" title="éšä¾¿é€›é€›"><i class="fa-solid fa-shuffle"></i></a><a class="social-icon" href="mailto:wangxiaowu950330@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/30655189?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ES%E6%94%AF%E6%8C%81%E7%9A%84%E4%B8%89%E7%A7%8D%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">ESæ”¯æŒçš„ä¸‰ç§åˆ†é¡µæŸ¥è¯¢æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ·±åº¦åˆ†é¡µé—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#From-Size-%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.</span> <span class="toc-text">From + Size æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span class="toc-number">3.1.</span> <span class="toc-text">å‡†å¤‡æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%BC%94%E7%A4%BA"><span class="toc-number">3.2.</span> <span class="toc-text">æŸ¥è¯¢æ¼”ç¤º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#max-result-window"><span class="toc-number">3.3.</span> <span class="toc-text">max_result_window</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Search-After-%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.</span> <span class="toc-text">Search After æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%B4%A2%E5%BC%95%E7%9A%84pit"><span class="toc-number">4.1.</span> <span class="toc-text">è·å–ç´¢å¼•çš„pit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AEpit%E9%A6%96%E6%AC%A1%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.2.</span> <span class="toc-text">æ ¹æ®pité¦–æ¬¡æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AEsearch-after%E5%92%8Cpit%E8%BF%9B%E8%A1%8C%E7%BF%BB%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.3.</span> <span class="toc-text">æ ¹æ®search_afterå’Œpitè¿›è¡Œç¿»é¡µæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#search-after-%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90"><span class="toc-number">4.4.</span> <span class="toc-text">search_after ä¼˜ç¼ºç‚¹åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%80%83"><span class="toc-number">5.</span> <span class="toc-text">æ€è€ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scroll-%E9%81%8D%E5%8E%86%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.</span> <span class="toc-text">Scroll éå†æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E6%AC%A1%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%B9%B6%E8%8E%B7%E5%8F%96-scroll-id"><span class="toc-number">6.1.</span> <span class="toc-text">é¦–æ¬¡æŸ¥è¯¢ï¼Œå¹¶è·å–_scroll_id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AEscroll-id%E9%81%8D%E5%8E%86%E6%95%B0%E6%8D%AE"><span class="toc-number">6.2.</span> <span class="toc-text">æ ¹æ®scroll_idéå†æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%B8%B8%E6%A0%87scroll"><span class="toc-number">6.3.</span> <span class="toc-text">åˆ é™¤æ¸¸æ ‡scroll</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">6.4.</span> <span class="toc-text">ä¼˜ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">6.5.</span> <span class="toc-text">é€‚ç”¨åœºæ™¯</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E5%B1%82%E9%9D%A2%E4%BC%98%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">ä¸šåŠ¡å±‚é¢ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E9%BB%98%E8%AE%A4%E7%9A%84%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6"><span class="toc-number">7.1.</span> <span class="toc-text">å¢åŠ é»˜è®¤çš„ç­›é€‰æ¡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8%E6%BB%9A%E5%8A%A8%E5%A2%9E%E9%87%8F%E6%98%BE%E7%A4%BA"><span class="toc-number">7.2.</span> <span class="toc-text">é‡‡ç”¨æ»šåŠ¨å¢é‡æ˜¾ç¤º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E8%8C%83%E5%9B%B4%E8%B7%B3%E9%A1%B5"><span class="toc-number">7.3.</span> <span class="toc-text">å°èŒƒå›´è·³é¡µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">8.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo16.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Clawdbotå®Œæ•´é…ç½®æŒ‡å—"></a><div class="content"><a class="title" href="/posts/d31147a5/" title="Clawdbotå®Œæ•´é…ç½®æŒ‡å—">Clawdbotå®Œæ•´é…ç½®æŒ‡å—</a><time datetime="2026-02-11T10:15:08.000Z" title="å‘è¡¨äº 2026-02-11 18:15:08">2026-02-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;"></a><div class="content"><a class="title" href="/posts/4d3a9a89/" title="å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;">å¤„ç† Rancher è¿æ¥èŠ‚ç‚¹ &quot;Cluster agent is not connected&quot;</a><time datetime="2026-02-03T06:02:28.000Z" title="å‘è¡¨äº 2026-02-03 14:02:28">2026-02-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/nba-logo16.jpg)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2026 By å°äº”</span><span class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div><div class="footer_custom_text"><a href="https://www.foreverblog.cn/" rel="external nofollow noreferrer" target="_blank"><img src="/img/loading.gif" data-lazy-src="https://img.foreverblog.cn/logo_en_default.png" alt="åå¹´ä¹‹çº¦" style="width:auto;height:16px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach(((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(a,r),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then((({svg:e})=>m(e)))}))})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const t=(e,a)=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach((r=>{const n=e[r];"object"==typeof n&&null!==n&&(n[a]?e[r]=n[a]:t(n,a))}))},e=e=>{window.loadChartJS=!0,Array.from(e).forEach(((e,a)=>{const r=e.firstElementChild,n=e.getAttribute("data-chartjs-id")||"chartjs-"+a,d=e.getAttribute("data-width"),o=document.getElementById(n);o&&o.parentNode.remove();const c=r.textContent,l=document.createElement("canvas");l.id=n;const s=document.createElement("div");s.className="chartjs-wrap",d&&(s.style.width=d),s.appendChild(l),r.insertAdjacentElement("afterend",s);const h=document.getElementById(n).getContext("2d"),i=JSON.parse(c),m="dark"===document.documentElement.getAttribute("data-theme")?"dark-mode":"light-mode";(t=>{"dark-mode"===t?(Chart.defaults.color="rgba(255, 255, 255, 0.8)",Chart.defaults.borderColor="rgba(255, 255, 255, 0.2)",Chart.defaults.scale.ticks.backdropColor="transparent"):(Chart.defaults.color="rgba(0, 0, 0, 0.8)",Chart.defaults.borderColor="rgba(0, 0, 0, 0.1)",Chart.defaults.scale.ticks.backdropColor="transparent")})(m),t(i,m),new Chart(h,i)}))},a=()=>{const t=document.querySelectorAll("#article-container .chartjs-container");0!==t.length&&(window.loadChartJS?e(t):btf.getScript("https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js").then((()=>e(t))))};btf.addGlobalFn("themeChange",a,"chartjs"),btf.addGlobalFn("encrypt",a,"chartjs"),window.pjax?a():document.addEventListener("DOMContentLoaded",a)})()</script></div><div class="aplayer no-destroy" data-id="9061017364" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="false" muted></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>ç½‘ç«™å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">ç‚¹å‡»åˆ·æ–°</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬",backgroundColor:t,duration:5e5,pos:e,actionText:"ç‚¹å‡»åˆ·æ–°",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/diytitle.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/talking/"]):not([href="/artitalk/"])',selectors:['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:description"]','link[rel="canonical"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!0,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>{try{e()}catch(e){console.debug("Pjax callback failed:",e)}}))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{if(404===e.request.status){!0?pjax.loadUrl("/404"):window.location.href="/404"}}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div id="algolia-search-input"><div class="ais-SearchBox"><form class="ais-SearchBox-form" action="" role="search" novalidate><input class="ais-SearchBox-input" type="search" placeholder="æœç´¢æ–‡ç« " autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" maxlength="512" aria-label="Search"><button class="ais-SearchBox-submit" type="submit" title="Submit the search query" style="display:none"><svg class="ais-SearchBox-submitIcon" width="10" height="10" viewBox="0 0 40 40" aria-hidden="true"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path></svg></button></form></div><hr><div id="algolia-search-results"><div id="algolia-hits"><div id="algolia-hits-empty" style="display:none"></div><div class="ais-Hits" style="display:none"><ol class="ais-Hits-list"></ol></div></div><div class="ais-Pagination" id="algolia-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="algolia-info"><span class="ais-Stats-text"></span><a class="algolia-poweredBy" href="https://www.algolia.com/?utm_source=algoliasearch.js&amp;utm_medium=website&amp;utm_content=localhost&amp;utm_campaign=poweredby" target="_blank" aria-label="Search by Algolia" rel="noopener noreferrer"><svg class="ais-PoweredBy-logo" height="1.2em" viewBox="0 0 572 64" style="width:auto"><path fill="#36395A" d="M16 48.3c-3.4 0-6.3-.6-8.7-1.7A12.4 12.4 0 0 1 1.9 42C.6 40 0 38 0 35.4h6.5a6.7 6.7 0 0 0 3.9 6c1.4.7 3.3 1.1 5.6 1.1 2.2 0 4-.3 5.4-1a7 7 0 0 0 3-2.4 6 6 0 0 0 1-3.4c0-1.5-.6-2.8-1.9-3.7-1.3-1-3.3-1.6-5.9-1.8l-4-.4c-3.7-.3-6.6-1.4-8.8-3.4a10 10 0 0 1-3.3-7.9c0-2.4.6-4.6 1.8-6.4a12 12 0 0 1 5-4.3c2.2-1 4.7-1.6 7.5-1.6s5.5.5 7.6 1.6a12 12 0 0 1 5 4.4c1.2 1.8 1.8 4 1.8 6.7h-6.5a6.4 6.4 0 0 0-3.5-5.9c-1-.6-2.6-1-4.4-1s-3.2.3-4.4 1c-1.1.6-2 1.4-2.6 2.4-.5 1-.8 2-.8 3.1a5 5 0 0 0 1.5 3.6c1 1 2.6 1.7 4.7 1.9l4 .3c2.8.2 5.2.8 7.2 1.8 2.1 1 3.7 2.2 4.9 3.8a9.7 9.7 0 0 1 1.7 5.8c0 2.5-.7 4.7-2 6.6a13 13 0 0 1-5.6 4.4c-2.4 1-5.2 1.6-8.4 1.6Zm35.6 0c-2.6 0-4.8-.4-6.7-1.3a13 13 0 0 1-4.7-3.5 17.1 17.1 0 0 1-3.6-10.4v-1c0-2 .3-3.8 1-5.6a13 13 0 0 1 7.3-8.3 15 15 0 0 1 6.3-1.4A13.2 13.2 0 0 1 64 24.3c1 2.2 1.6 4.6 1.6 7.2V34H39.4v-4.3h21.8l-1.8 2.2c0-2-.3-3.7-.9-5.1a7.3 7.3 0 0 0-2.7-3.4c-1.2-.7-2.7-1.1-4.6-1.1s-3.4.4-4.7 1.3a8 8 0 0 0-2.9 3.6c-.6 1.5-.9 3.3-.9 5.4 0 2 .3 3.7 1 5.3a7.9 7.9 0 0 0 2.8 3.7c1.3.8 3 1.3 5 1.3s3.8-.5 5.1-1.3c1.3-1 2.1-2 2.4-3.2h6a11.8 11.8 0 0 1-7 8.7 16 16 0 0 1-6.4 1.2ZM80 48c-2.2 0-4-.3-5.7-1a8.4 8.4 0 0 1-3.7-3.3 9.7 9.7 0 0 1-1.3-5.2c0-2 .5-3.8 1.5-5.2a9 9 0 0 1 4.3-3.1c1.8-.7 4-1 6.7-1H89v4.1h-7.5c-2 0-3.4.5-4.4 1.4-1 1-1.6 2.1-1.6 3.6s.5 2.7 1.6 3.6c1 1 2.5 1.4 4.4 1.4 1.1 0 2.2-.2 3.2-.7 1-.4 1.9-1 2.6-2 .6-1 1-2.4 1-4.2l1.7 2.1c-.2 2-.7 3.8-1.5 5.2a9 9 0 0 1-3.4 3.3 12 12 0 0 1-5.3 1Zm9.5-.7v-8.8h-1v-10c0-1.8-.5-3.2-1.4-4.1-1-1-2.4-1.4-4.2-1.4a142.9 142.9 0 0 0-10.2.4v-5.6a74.8 74.8 0 0 1 8.6-.4c3 0 5.5.4 7.5 1.2s3.4 2 4.4 3.6c1 1.7 1.4 4 1.4 6.7v18.4h-5Zm12.9 0V17.8h5v12.3h-.2c0-4.2 1-7.4 2.8-9.5a11 11 0 0 1 8.3-3.1h1v5.6h-2a9 9 0 0 0-6.3 2.2c-1.5 1.5-2.2 3.6-2.2 6.4v15.6h-6.4Zm34.4 1a15 15 0 0 1-6.6-1.3c-1.9-.9-3.4-2-4.7-3.5a15.5 15.5 0 0 1-2.7-5c-.6-1.7-1-3.6-1-5.4v-1c0-2 .4-3.8 1-5.6a15 15 0 0 1 2.8-4.9c1.3-1.5 2.8-2.6 4.6-3.5a16.4 16.4 0 0 1 13.3.2c2 1 3.5 2.3 4.8 4a12 12 0 0 1 2 6H144c-.2-1.6-1-3-2.2-4.1a7.5 7.5 0 0 0-5.2-1.7 8 8 0 0 0-4.7 1.3 8 8 0 0 0-2.8 3.6 13.8 13.8 0 0 0 0 10.3c.6 1.5 1.5 2.7 2.8 3.6s2.8 1.3 4.8 1.3c1.5 0 2.7-.2 3.8-.8a7 7 0 0 0 2.6-2c.7-1 1-2 1.2-3.2h6.2a11 11 0 0 1-2 6.2 15.1 15.1 0 0 1-11.8 5.5Zm19.7-1v-40h6.4V31h-1.3c0-3 .4-5.5 1.1-7.6a9.7 9.7 0 0 1 3.5-4.8A9.9 9.9 0 0 1 172 17h.3c3.5 0 6 1.1 7.9 3.5 1.7 2.3 2.6 5.7 2.6 10v16.8h-6.4V29.6c0-2.1-.6-3.8-1.8-5a6.4 6.4 0 0 0-4.8-1.8c-2 0-3.7.7-5 2a7.8 7.8 0 0 0-1.9 5.5v17h-6.4Zm63.8 1a12.2 12.2 0 0 1-10.9-6.2 19 19 0 0 1-1.8-7.3h1.4v12.5h-5.1v-40h6.4v19.8l-2 3.5c.2-3.1.8-5.7 1.9-7.7a11 11 0 0 1 4.4-4.5c1.8-1 3.9-1.5 6.1-1.5a13.4 13.4 0 0 1 12.8 9.1c.7 1.9 1 3.8 1 6v1c0 2.2-.3 4.1-1 6a13.6 13.6 0 0 1-13.2 9.4Zm-1.2-5.5a8.4 8.4 0 0 0 7.9-5c.7-1.5 1.1-3.3 1.1-5.3s-.4-3.8-1.1-5.3a8.7 8.7 0 0 0-3.2-3.6 9.6 9.6 0 0 0-9.2-.2 8.5 8.5 0 0 0-3.3 3.2c-.8 1.4-1.3 3-1.3 5v2.3a9 9 0 0 0 1.3 4.8 9 9 0 0 0 3.4 3c1.4.7 2.8 1 4.4 1Zm27.3 3.9-10-28.9h6.5l9.5 28.9h-6Zm-7.5 12.2v-5.7h4.9c1 0 2-.1 2.9-.4a4 4 0 0 0 2-1.4c.4-.7.9-1.6 1.2-2.7l8.6-30.9h6.2l-9.3 32.4a14 14 0 0 1-2.5 5 8.9 8.9 0 0 1-4 2.8c-1.5.6-3.4.9-5.6.9h-4.4Zm9-12.2v-5.2h6.4v5.2H248Z"></path><path fill="#003DFF" d="M534.4 9.1H528a.8.8 0 0 1-.7-.7V1.8c0-.4.2-.7.6-.8l6.5-1c.4 0 .8.2.9.6v7.8c0 .4-.4.7-.8.7zM428 35.2V.8c0-.5-.3-.8-.7-.8h-.2l-6.4 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.5 0 .8-.4.8-.8V43c0-.4-.3-.7-.6-.8-4.5-.5-4.5-6-4.5-7zm106.5-21.8H528c-.4 0-.7.4-.7.8v34c0 .4.3.8.7.8h6.5c.4 0 .8-.4.8-.8v-34c0-.5-.4-.8-.8-.8zm-17.7 21.8V.8c0-.5-.3-.8-.8-.8l-6.5 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.4 0 .8-.4.8-.8V43c0-.4-.3-.7-.7-.8-4.4-.5-4.4-6-4.4-7zm-22.2-20.6a16.5 16.5 0 0 1 8.6 9.3c.8 2.2 1.3 4.8 1.3 7.5a19.4 19.4 0 0 1-4.6 12.6 14.8 14.8 0 0 1-5.2 3.6c-2 .9-5.2 1.4-6.8 1.4a21 21 0 0 1-6.7-1.4 15.4 15.4 0 0 1-8.6-9.3 21.3 21.3 0 0 1 0-14.4 15.2 15.2 0 0 1 8.6-9.3c2-.8 4.3-1.2 6.7-1.2s4.6.4 6.7 1.2zm-6.7 27.6c2.7 0 4.7-1 6.2-3s2.2-4.3 2.2-7.8-.7-6.3-2.2-8.3-3.5-3-6.2-3-4.7 1-6.1 3c-1.5 2-2.2 4.8-2.2 8.3s.7 5.8 2.2 7.8 3.5 3 6.2 3zm-88.8-28.8c-6.2 0-11.7 3.3-14.8 8.2a18.6 18.6 0 0 0 4.8 25.2c1.8 1.2 4 1.8 6.2 1.7s.1 0 .1 0h.9c4.2-.7 8-4 9.1-8.1v7.4c0 .4.3.7.8.7h6.4a.7.7 0 0 0 .7-.7V14.2c0-.5-.3-.8-.7-.8h-13.5zm6.3 26.5a9.8 9.8 0 0 1-5.7 2h-.5a10 10 0 0 1-9.2-14c1.4-3.7 5-6.3 9-6.3h6.4v18.3zm152.3-26.5h13.5c.5 0 .8.3.8.7v33.7c0 .4-.3.7-.8.7h-6.4a.7.7 0 0 1-.8-.7v-7.4c-1.2 4-4.8 7.4-9 8h-.1a4.2 4.2 0 0 1-.5.1h-.9a10.3 10.3 0 0 1-7-2.6c-4-3.3-6.5-8.4-6.5-14.2 0-3.7 1-7.2 3-10 3-5 8.5-8.3 14.7-8.3zm.6 28.4c2.2-.1 4.2-.6 5.7-2V21.7h-6.3a9.8 9.8 0 0 0-9 6.4 10.2 10.2 0 0 0 9.1 13.9h.5zM452.8 13.4c-6.2 0-11.7 3.3-14.8 8.2a18.5 18.5 0 0 0 3.6 24.3 10.4 10.4 0 0 0 13 .6c2.2-1.5 3.8-3.7 4.5-6.1v7.8c0 2.8-.8 5-2.2 6.3-1.5 1.5-4 2.2-7.5 2.2l-6-.3c-.3 0-.7.2-.8.5l-1.6 5.5c-.1.4.1.8.5 1h.1c2.8.4 5.5.6 7 .6 6.3 0 11-1.4 14-4.1 2.7-2.5 4.2-6.3 4.5-11.4V14.2c0-.5-.4-.8-.8-.8h-13.5zm6.3 8.2v18.3a9.6 9.6 0 0 1-5.6 2h-1a10.3 10.3 0 0 1-8.8-14c1.4-3.7 5-6.3 9-6.3h6.4zM291 31.5A32 32 0 0 1 322.8 0h30.8c.6 0 1.2.5 1.2 1.2v61.5c0 1.1-1.3 1.7-2.2 1l-19.2-17a18 18 0 0 1-11 3.4 18.1 18.1 0 1 1 18.2-14.8c-.1.4-.5.7-.9.6-.1 0-.3 0-.4-.2l-3.8-3.4c-.4-.3-.6-.8-.7-1.4a12 12 0 1 0-2.4 8.3c.4-.4 1-.5 1.6-.2l14.7 13.1v-46H323a26 26 0 1 0 10 49.7c.8-.4 1.6-.2 2.3.3l3 2.7c.3.2.3.7 0 1l-.2.2a32 32 0 0 1-47.2-28.6z"></path></svg></a></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.39.0/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@5.5.1/source/js/search/algolia.min.js"></script></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"==location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo3.jpg" alt="/img/nba-logo3.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2024-02-02</span><a class="blog-slider__title" href="posts/1bcb0ad4/">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</a><div class="blog-slider__text">å•ç¯å¢ƒ,å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘æ–¹æ¡ˆ(æµé‡æŸ“è‰²/istio)</div><a class="blog-slider__button" href="posts/1bcb0ad4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-06-14</span><a class="blog-slider__title" href="posts/aa43cc95/">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</a><div class="blog-slider__text">è®°å½•k8sç¯å¢ƒä¸‹ç»“åˆalinodeçš„ä½¿ç”¨</div><a class="blog-slider__button" href="posts/aa43cc95/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo29.jpg" alt="/img/nba-logo29.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-13</span><a class="blog-slider__title" href="posts/15957791/">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</a><div class="blog-slider__text">k8sç¯å¢ƒä¸‹,nginxåšwebsocketè´Ÿè½½çš„æ–¹æ¡ˆæ¢³ç†</div><a class="blog-slider__button" href="posts/15957791/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/4ecfb081/">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</a><div class="blog-slider__text">è®°å½•ä¸€æ¬¡k8sç½‘ç»œDNSé—®é¢˜æ’æŸ¥è¿‡ç¨‹</div><a class="blog-slider__button" href="posts/4ecfb081/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-09-26</span><a class="blog-slider__title" href="posts/37032a87/">k3sé«˜å¯ç”¨å®‰è£…</a><div class="blog-slider__text">k3sé«˜å¯ç”¨å®‰è£…</div><a class="blog-slider__button" href="posts/37032a87/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo5.jpg" alt="/img/nba-logo5.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="posts/20b19ed4/">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</a><div class="blog-slider__text">åˆ†è¯æœç´¢éœ€æ±‚æ•´ç†</div><a class="blog-slider__button" href="posts/20b19ed4/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2022-12-02</span><a class="blog-slider__title" href="posts/6de14387/">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</a><div class="blog-slider__text">æ•´ç†wsl2é…åˆå¼€å‘çš„ä¸€äº›é…ç½®</div><a class="blog-slider__button" href="posts/6de14387/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo22.jpg" alt="/img/nba-logo22.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-12-11</span><a class="blog-slider__title" href="posts/fb9adcb6/">è®°å½•windows11+wsl2ç¯å¢ƒæ­é…</a><div class="blog-slider__text">windows11+wsl2å¼€å‘ç¯å¢ƒé…ç½®</div><a class="blog-slider__button" href="posts/fb9adcb6/">è¯¦æƒ…</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/loading.gif" data-lazy-src="/img/nba-logo26.jpg" alt="/img/nba-logo26.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2026-01-28</span><a class="blog-slider__title" href="posts/2a9d73ff/">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</a><div class="blog-slider__text">æ•™ä½ å¦‚ä½•é›¶æˆæœ¬ä»0åˆ°1ï¼Œå¼€å‘ä¸Šçº¿ä¸€ä¸ªå¯¹æ¥äº†openAIçš„æœºå™¨äºº</div><a class="blog-slider__button" href="posts/2a9d73ff/">è¯¦æƒ…</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';console.log("å·²æŒ‚è½½swiper"),parent.insertAdjacentHTML("afterbegin",child)}</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script><style></style><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("å·²æŒ‚è½½history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300,hOffset:20,vOffset:-20},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/"})</script></body></html>